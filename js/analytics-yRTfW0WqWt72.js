import{S as a}from"./game-logic-DYnrwjUu8iwv.js";import{d as e,c as t,o as l,a as s,t as r,F as o,r as i,b as n,n as d,e as c,f as u,g as v,h as b,i as g,w as p,j as h,v as m,k as y,l as f}from"./vue-vendor-CHt8BYjp.js";import{C,a as k,L as x,P as w,b as _,p as R,c as $,d as S,i as I,B as T,A as j}from"./chart-vendor--kNoNNFK7XBt.js";const O=(a,e)=>{const t=a.__vccOpts||a;for(const[l,s]of e)t[l]=s;return t},B={class:"stats-summary-card"},D={class:"card-header"},M={class:"card-icon"},F={class:"card-title"},A={class:"stats-list"},P={class:"stat-info"},U={class:"stat-label"},W={class:"stat-value-row"},L={class:"stat-value"},q={key:0,class:"stat-progress"},V=O(e({__name:"StatsSummaryCard",props:{title:{},icon:{},stats:{}},setup:a=>(a,e)=>(l(),t("div",B,[s("div",D,[s("div",M,r(a.icon),1),s("h3",F,r(a.title),1)]),s("div",A,[(l(!0),t(o,null,i(a.stats,a=>{return l(),t("div",{key:a.label,class:"stat-item"},[s("div",P,[s("span",U,r(a.label),1),s("div",W,[s("span",L,r(a.value),1),a.trend?(l(),t("span",{key:0,class:d(["stat-trend",(e=a.trend,e.includes("â†—")||"+"===e?"trend-up":e.includes("â†˜")||"-"===e?"trend-down":"trend-neutral")])},r(a.trend),3)):n("",!0)])]),void 0!==a.percentage?(l(),t("div",q,[s("div",{class:"progress-bar",style:c({width:`${a.percentage}%`})},null,4)])):n("",!0)]);var e}),128))])]))}),[["__scopeId","data-v-dba981e9"]]),E={class:"chart-wrapper"},G={class:"chart-controls"},Z={class:"chart-container"},H={class:"chart-stats"},z={class:"stat-item"},J={class:"value"},Q={class:"stat-item"},N={class:"value"},K={class:"stat-item"},X={class:"value"},Y=O(e({__name:"GameProgressChart",props:{data:{}},setup(a){C.register(k,x,w,_,R,$,S,I);const e=a,o=u(),i=u(null),n=u("month"),d=v(()=>{if(!e.data||0===e.data.length)return[];const a=new Date;let t=new Date;switch(n.value){case"week":t.setDate(a.getDate()-7);break;case"month":t.setMonth(a.getMonth()-1);break;case"quarter":t.setMonth(a.getMonth()-3);break;default:t=new Date(0)}return e.data.filter(a=>new Date(a.date)>=t)}),c=v(()=>d.value.reduce((a,e)=>a+e.gamesPlayed,0)),y=v(()=>0===d.value.length?0:d.value.reduce((a,e)=>a+e.averageScore*e.gamesPlayed,0)/c.value),f=v(()=>0===d.value.length?0:Math.max(...d.value.map(a=>a.averageScore))),T=()=>{if(!i.value)return;const a=d.value.map(a=>new Date(a.date).toLocaleDateString("ja-JP",{month:"short",day:"numeric"})),e=d.value.map(a=>a.gamesPlayed),t=d.value.map(a=>a.averageScore);i.value.data.labels=a,i.value.data.datasets[0].data=e,i.value.data.datasets[1].data=t,i.value.update("active")};return b(()=>{(()=>{if(!o.value)return;const a=o.value.getContext("2d");a&&(i.value=new C(a,{type:"line",data:{labels:[],datasets:[{label:"ãƒ—ãƒ¬ã‚¤å›æ•°",data:[],borderColor:"rgb(99, 102, 241)",backgroundColor:"rgba(99, 102, 241, 0.1)",yAxisID:"y",fill:!0,tension:.4},{label:"å¹³å‡ã‚¹ã‚³ã‚¢",data:[],borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",yAxisID:"y1",fill:!1,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!1},legend:{display:!0,position:"top",labels:{color:"white",usePointStyle:!0}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(17, 24, 39, 0.9)",titleColor:"white",bodyColor:"white",borderColor:"rgba(75, 85, 99, 0.5)",borderWidth:1,callbacks:{afterLabel:a=>{const e=a.dataIndex,t=d.value[e];return t?`ãƒ—ãƒ¬ã‚¤æ™‚é–“: ${(a=>{const e=Math.floor(a/1e3),t=Math.floor(e/60),l=Math.floor(t/60);return l>0?`${l}æ™‚é–“${t%60}åˆ†`:t>0?`${t}åˆ†`:`${e}ç§’`})(t.totalPlayTime)}`:""}}}},scales:{x:{display:!0,grid:{color:"rgba(75, 85, 99, 0.3)"},ticks:{color:"rgba(209, 213, 219, 0.8)"}},y:{type:"linear",display:!0,position:"left",grid:{color:"rgba(75, 85, 99, 0.3)"},ticks:{color:"rgba(209, 213, 219, 0.8)"},title:{display:!0,text:"ãƒ—ãƒ¬ã‚¤å›æ•°",color:"rgb(99, 102, 241)"}},y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1},ticks:{color:"rgba(209, 213, 219, 0.8)"},title:{display:!0,text:"å¹³å‡ã‚¹ã‚³ã‚¢",color:"rgb(34, 197, 94)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1},elements:{point:{radius:4,hoverRadius:6}}}}))})(),T()}),g(()=>{i.value&&(i.value.destroy(),i.value=null)}),p(()=>e.data,()=>{T()},{deep:!0}),p(()=>n.value,()=>{T()}),(a,e)=>(l(),t("div",E,[e[5]||(e[5]=s("h3",{class:"chart-title"},"ğŸ® ã‚²ãƒ¼ãƒ é€²è¡Œå±¥æ­´",-1)),s("div",G,[h(s("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a),class:"period-selector",onChange:T},e[1]||(e[1]=[s("option",{value:"week"},"éå»1é€±é–“",-1),s("option",{value:"month"},"éå»1ãƒ¶æœˆ",-1),s("option",{value:"quarter"},"éå»3ãƒ¶æœˆ",-1),s("option",{value:"all"},"å…¨æœŸé–“",-1)]),544),[[m,n.value]])]),s("div",Z,[s("canvas",{ref_key:"chartCanvas",ref:o},null,512)]),s("div",H,[s("div",z,[e[2]||(e[2]=s("span",{class:"label"},"ç·ã‚²ãƒ¼ãƒ æ•°:",-1)),s("span",J,r(c.value),1)]),s("div",Q,[e[3]||(e[3]=s("span",{class:"label"},"å¹³å‡ã‚¹ã‚³ã‚¢:",-1)),s("span",N,r(y.value.toFixed(1)),1)]),s("div",K,[e[4]||(e[4]=s("span",{class:"label"},"æœ€é«˜ã‚¹ã‚³ã‚¢:",-1)),s("span",X,r(f.value),1)])])]))}}),[["__scopeId","data-v-44419dc1"]]),aa={class:"chart-wrapper"},ea={class:"chart-container"},ta={class:"chart-legend"},la={class:"legend-label"},sa={class:"legend-value"},ra=O(e({__name:"SuccessRateChart",props:{data:{}},setup(a){C.register(k,x,T,R,$,S);const e=a,n=u(),d=u(null),v={youth:"rgb(34, 197, 94)",middle:"rgb(251, 191, 36)",fulfillment:"rgb(168, 85, 247)"},h={youth:"é’å¹´æœŸ",middle:"ä¸­å¹´æœŸ",fulfillment:"å……å®ŸæœŸ"},m=a=>v[a]||"rgb(107, 114, 128)",y=a=>h[a]||a;return b(()=>{(()=>{if(!n.value||!e.data)return;const a=n.value.getContext("2d");if(!a)return;const t=Object.keys(e.data),l=Object.values(e.data).map(a=>100*a),s=t.map(a=>m(a)),r=t.map(a=>y(a));d.value=new C(a,{type:"bar",data:{labels:r,datasets:[{label:"æˆåŠŸç‡ (%)",data:l,backgroundColor:s.map(a=>a.replace("rgb","rgba").replace(")",", 0.6)")),borderColor:s,borderWidth:2,borderRadius:4,borderSkipped:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!1},legend:{display:!1},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.9)",titleColor:"white",bodyColor:"white",borderColor:"rgba(75, 85, 99, 0.5)",borderWidth:1,callbacks:{label:a=>{const e=a.parsed.y;return`${a.label}: ${e.toFixed(1)}%`},afterLabel:a=>{const e=a.parsed.y/100;let t="";return t=e>=.8?"å„ªç§€":e>=.6?"è‰¯å¥½":e>=.4?"æ™®é€š":"è¦æ”¹å–„",`ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: ${t}`}}}},scales:{x:{grid:{display:!1},ticks:{color:"rgba(209, 213, 219, 0.8)",font:{size:12}}},y:{beginAtZero:!0,max:100,grid:{color:"rgba(75, 85, 99, 0.3)"},ticks:{color:"rgba(209, 213, 219, 0.8)",callback:a=>`${a}%`},title:{display:!0,text:"æˆåŠŸç‡ (%)",color:"rgba(209, 213, 219, 0.8)"}}},elements:{bar:{borderWidth:2}},interaction:{mode:"index",intersect:!1}}})})()}),g(()=>{d.value&&(d.value.destroy(),d.value=null)}),p(()=>e.data,()=>{(()=>{if(!d.value||!e.data)return;const a=Object.keys(e.data),t=Object.values(e.data).map(a=>100*a),l=a.map(a=>m(a)),s=a.map(a=>y(a));d.value.data.labels=s,d.value.data.datasets[0].data=t,d.value.data.datasets[0].backgroundColor=l.map(a=>a.replace("rgb","rgba").replace(")",", 0.6)")),d.value.data.datasets[0].borderColor=l,d.value.update("active")})()},{deep:!0}),(a,e)=>(l(),t("div",aa,[e[0]||(e[0]=s("h3",{class:"chart-title"},"ğŸ“Š ã‚¹ãƒ†ãƒ¼ã‚¸åˆ¥æˆåŠŸç‡",-1)),s("div",ea,[s("canvas",{ref_key:"chartCanvas",ref:n},null,512)]),s("div",ta,[(l(!0),t(o,null,i(a.data,(a,e)=>(l(),t("div",{key:e,class:"legend-item"},[s("div",{class:"legend-color",style:c({backgroundColor:m(e)})},null,4),s("span",la,r(y(e)),1),s("span",sa,r((100*a).toFixed(1))+"%",1)]))),128))])]))}}),[["__scopeId","data-v-57038c2d"]]),oa={class:"chart-wrapper"},ia={class:"chart-info"},na={class:"info-item"},da={class:"info-item"},ca={class:"info-item"},ua={class:"chart-container"},va=O(e({__name:"VitalityTrendChart",props:{data:{}},setup(a){C.register(k,x,w,_,R,$,S,I);const e=a,o=u(),i=u(null),n=v(()=>e.data&&0!==e.data.length?e.data[e.data.length-1].vitality:0),d=v(()=>e.data&&0!==e.data.length?Math.max(...e.data.map(a=>a.vitality)):0),c=v(()=>e.data&&0!==e.data.length?Math.min(...e.data.map(a=>a.vitality)):0),h=()=>{if(!i.value||!e.data)return;const a=e.data.map(a=>a.turn.toString()),t=e.data.map(a=>a.vitality),l=e.data.map(()=>20);t.map(a=>a>=80?"rgb(34, 197, 94)":a>=60?"rgb(59, 130, 246)":a>=40?"rgb(251, 191, 36)":a>=20?"rgb(245, 101, 101)":"rgb(239, 68, 68)"),t.map(a=>a>=80?"rgba(34, 197, 94, 0.1)":a>=60?"rgba(59, 130, 246, 0.1)":a>=40?"rgba(251, 191, 36, 0.1)":a>=20?"rgba(245, 101, 101, 0.1)":"rgba(239, 68, 68, 0.1)"),i.value.data.labels=a,i.value.data.datasets[0].data=t,i.value.data.datasets[1].data=l;const s=t[t.length-1]||0;s>=80?(i.value.data.datasets[0].borderColor="rgb(34, 197, 94)",i.value.data.datasets[0].backgroundColor="rgba(34, 197, 94, 0.1)"):s>=60?(i.value.data.datasets[0].borderColor="rgb(59, 130, 246)",i.value.data.datasets[0].backgroundColor="rgba(59, 130, 246, 0.1)"):s>=40?(i.value.data.datasets[0].borderColor="rgb(251, 191, 36)",i.value.data.datasets[0].backgroundColor="rgba(251, 191, 36, 0.1)"):s>=20?(i.value.data.datasets[0].borderColor="rgb(245, 101, 101)",i.value.data.datasets[0].backgroundColor="rgba(245, 101, 101, 0.1)"):(i.value.data.datasets[0].borderColor="rgb(239, 68, 68)",i.value.data.datasets[0].backgroundColor="rgba(239, 68, 68, 0.1)"),i.value.update("active")};return b(()=>{(()=>{if(!o.value)return;const a=o.value.getContext("2d");a&&(i.value=new C(a,{type:"line",data:{labels:[],datasets:[{label:"æ´»åŠ›",data:[],borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",fill:!0,tension:.4,pointBackgroundColor:"rgb(239, 68, 68)",pointBorderColor:"white",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6},{label:"å±é™ºãƒ©ã‚¤ãƒ³",data:[],borderColor:"rgb(245, 101, 101)",backgroundColor:"transparent",borderDash:[5,5],fill:!1,pointRadius:0,tension:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!1},legend:{display:!0,position:"top",labels:{color:"white",usePointStyle:!0,filter:a=>"å±é™ºãƒ©ã‚¤ãƒ³"!==a.text||e.data.some(a=>a.vitality<=20)}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(17, 24, 39, 0.9)",titleColor:"white",bodyColor:"white",borderColor:"rgba(75, 85, 99, 0.5)",borderWidth:1,callbacks:{title:a=>`ã‚¿ãƒ¼ãƒ³ ${a[0].label}`,label:a=>{if(0===a.datasetIndex){const e=a.parsed.y;let t="";return t=e>=80?"çµ¶å¥½èª¿":e>=60?"å¥½èª¿":e>=40?"æ™®é€š":e>=20?"è¦æ³¨æ„":"å±é™º",`æ´»åŠ›: ${e} (${t})`}return""}}}},scales:{x:{display:!0,grid:{color:"rgba(75, 85, 99, 0.3)"},ticks:{color:"rgba(209, 213, 219, 0.8)"},title:{display:!0,text:"ã‚¿ãƒ¼ãƒ³",color:"rgba(209, 213, 219, 0.8)"}},y:{beginAtZero:!0,max:100,grid:{color:"rgba(75, 85, 99, 0.3)"},ticks:{color:"rgba(209, 213, 219, 0.8)",stepSize:20},title:{display:!0,text:"æ´»åŠ›",color:"rgba(209, 213, 219, 0.8)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1},elements:{line:{tension:.4}}}}))})(),h()}),g(()=>{i.value&&(i.value.destroy(),i.value=null)}),p(()=>e.data,()=>{h()},{deep:!0}),(a,e)=>(l(),t("div",oa,[e[0]||(e[0]=s("h3",{class:"chart-title"},"ğŸ’— æ´»åŠ›å¤‰å‹•ãƒˆãƒ¬ãƒ³ãƒ‰",-1)),s("div",ia,[s("div",na,[s("span",null,"ç¾åœ¨: "+r(n.value),1)]),s("div",da,[s("span",null,"æœ€é«˜: "+r(d.value),1)]),s("div",ca,[s("span",null,"æœ€ä½: "+r(c.value),1)])]),s("div",ua,[s("canvas",{ref_key:"chartCanvas",ref:o},null,512)])]))}}),[["__scopeId","data-v-9a2b86c0"]]),ba={class:"chart-wrapper"},ga={class:"chart-container"},pa={class:"analysis-summary"},ha={class:"stage-icon"},ma={class:"stage-info"},ya={class:"stage-name"},fa={class:"stage-count"},Ca={class:"stage-percentage"},ka=O(e({__name:"StageAnalysisChart",props:{data:{}},setup(a){C.register(j,$,S);const e=a,n=u(),d=u(null),c={youth:"rgb(34, 197, 94)",middle:"rgb(251, 191, 36)",fulfillment:"rgb(168, 85, 247)"},h={youth:"é’å¹´æœŸ",middle:"ä¸­å¹´æœŸ",fulfillment:"å……å®ŸæœŸ"},m={youth:"ğŸŒ±",middle:"ğŸŒ³",fulfillment:"ğŸŒ¸"},y=v(()=>Object.values(e.data||{}).reduce((a,e)=>a+e,0)),f=a=>h[a]||a,k=a=>m[a]||"â­",x=a=>0===y.value?"0":(a/y.value*100).toFixed(1);return b(()=>{(()=>{if(!n.value||!e.data)return;const a=n.value.getContext("2d");if(!a)return;const t=Object.keys(e.data),l=Object.values(e.data),s=t.map(a=>c[a]||"rgb(107, 114, 128)"),r=t.map(a=>f(a));d.value=new C(a,{type:"doughnut",data:{labels:r,datasets:[{data:l,backgroundColor:s.map(a=>a.replace("rgb","rgba").replace(")",", 0.8)")),borderColor:s,borderWidth:2,hoverOffset:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!1},legend:{display:!1},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.9)",titleColor:"white",bodyColor:"white",borderColor:"rgba(75, 85, 99, 0.5)",borderWidth:1,callbacks:{label:a=>{const e=a.label,t=a.parsed;return`${e}: ${t}å› (${(t/y.value*100).toFixed(1)}%)`},afterLabel:a=>`é›£æ˜“åº¦: ${(a=>({youth:"æ˜“",middle:"ä¸­",fulfillment:"é›£"}[a]||"ä¸æ˜"))(Object.keys(e.data)[a.dataIndex])}`}}},cutout:"60%",elements:{arc:{borderWidth:2}}}}),d.value&&C.register({id:"centerText",beforeDraw:a=>{const{width:e,height:t,ctx:l}=a;l.restore();const s=(t/180).toFixed(2);l.font=`bold ${s}em Arial`,l.textBaseline="middle",l.fillStyle="white";const r=`ç·è¨ˆ\n${y.value}å›`,o=Math.round(e/2),i=t/2,n=r.split("\n");n.forEach((a,e)=>{const t=20*parseInt(s),r=i+(e-(n.length-1)/2)*t;l.fillText(a,o,r)}),l.save()}})})()}),g(()=>{d.value&&(d.value.destroy(),d.value=null)}),p(()=>e.data,()=>{(()=>{if(!d.value||!e.data)return;const a=Object.keys(e.data),t=Object.values(e.data),l=a.map(a=>c[a]||"rgb(107, 114, 128)"),s=a.map(a=>f(a));d.value.data.labels=s,d.value.data.datasets[0].data=t,d.value.data.datasets[0].backgroundColor=l.map(a=>a.replace("rgb","rgba").replace(")",", 0.8)")),d.value.data.datasets[0].borderColor=l,d.value.update("active")})()},{deep:!0}),(a,e)=>(l(),t("div",ba,[e[0]||(e[0]=s("h3",{class:"chart-title"},"ğŸ¯ ã‚¹ãƒ†ãƒ¼ã‚¸åˆ¥åˆ°é”åˆ†æ",-1)),s("div",ga,[s("canvas",{ref_key:"chartCanvas",ref:n},null,512)]),s("div",pa,[(l(!0),t(o,null,i(a.data,(a,e)=>(l(),t("div",{key:e,class:"summary-item"},[s("div",ha,r(k(e)),1),s("div",ma,[s("div",ya,r(f(e)),1),s("div",fa,r(a)+"å›åˆ°é”",1),s("div",Ca,r(x(a))+"%",1)])]))),128))])]))}}),[["__scopeId","data-v-4e76d02f"]]),xa={class:"chart-wrapper"},wa={class:"chart-controls"},_a={class:"chart-container"},Ra={class:"usage-details"},$a={class:"detail-list"},Sa={class:"card-type"},Ia={class:"type-icon"},Ta={class:"type-name"},ja={class:"usage-stats"},Oa={class:"usage-count"},Ba={class:"usage-percentage"},Da=O(e({__name:"CardUsageChart",props:{data:{}},setup(a){C.register(k,x,T,j,R,$,S);const e=a,n=u(),d=u(null),c=u("type"),y={life:{name:"ãƒ©ã‚¤ãƒ•ã‚«ãƒ¼ãƒ‰",icon:"ğŸ’«",color:"rgb(34, 197, 94)"},challenge:{name:"ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã‚«ãƒ¼ãƒ‰",icon:"âš”ï¸",color:"rgb(239, 68, 68)"},insurance:{name:"ä¿é™ºã‚«ãƒ¼ãƒ‰",icon:"ğŸ›¡ï¸",color:"rgb(59, 130, 246)"},dream:{name:"å¤¢ã‚«ãƒ¼ãƒ‰",icon:"âœ¨",color:"rgb(168, 85, 247)"},action:{name:"ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚«ãƒ¼ãƒ‰",icon:"ğŸ¯",color:"rgb(251, 191, 36)"},event:{name:"ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰",icon:"ğŸª",color:"rgb(236, 72, 153)"}},f=v(()=>Object.values(e.data||{}).reduce((a,e)=>a+e,0)),w=v(()=>{if(!e.data)return{};const a=Object.entries(e.data);switch(c.value){case"frequency":return Object.fromEntries(a.sort(([,a],[,e])=>e-a));case"effectiveness":return Object.fromEntries(a.sort(([a,e],[t,l])=>{const s=B(a,e);return B(t,l)-s}));default:return e.data}}),_=a=>y[a]?.name||a,I=a=>y[a]?.icon||"ğŸ´",O=a=>0===f.value?"0":(a/f.value*100).toFixed(1),B=(a,e)=>e*({life:1.2,insurance:1.1,dream:1.3,action:1,challenge:.8,event:.9}[a]||1),D=()=>{if(!n.value||!e.data)return;const a=n.value.getContext("2d");if(!a)return;const t="type"===c.value?"doughnut":"bar";d.value=new C(a,{type:t,data:{labels:[],datasets:[{label:"ã‚«ãƒ¼ãƒ‰ä½¿ç”¨å›æ•°",data:[],backgroundColor:[],borderColor:[],borderWidth:2}]},options:M()}),F()},M=()=>{const a={responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!1},legend:{display:"type"===c.value,position:"bottom",labels:{color:"white",usePointStyle:!0,padding:20}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.9)",titleColor:"white",bodyColor:"white",borderColor:"rgba(75, 85, 99, 0.5)",borderWidth:1,callbacks:{label:a=>{const e=Object.keys(w.value)[a.dataIndex],t=a.parsed||a.parsed.y,l=O(t),s=B(e,t);return[`${_(e)}: ${t}å›`,`ä½¿ç”¨ç‡: ${l}%`,`åŠ¹æœåº¦: ${s.toFixed(1)}`]}}}}};return"type"===c.value?{...a,cutout:"50%",elements:{arc:{borderWidth:2}}}:{...a,scales:{x:{grid:{display:!1},ticks:{color:"rgba(209, 213, 219, 0.8)",maxRotation:45}},y:{beginAtZero:!0,grid:{color:"rgba(75, 85, 99, 0.3)"},ticks:{color:"rgba(209, 213, 219, 0.8)"},title:{display:!0,text:"frequency"===c.value?"ä½¿ç”¨å›æ•°":"åŠ¹æœåº¦",color:"rgba(209, 213, 219, 0.8)"}}},elements:{bar:{borderRadius:4}}}},F=()=>{if(!d.value||!e.data)return;const a=Object.keys(w.value),t=Object.values(w.value),l=a.map(a=>{return e=a,y[e]?.color||"rgb(107, 114, 128)";var e}),s=a.map(a=>_(a));let r=t;"effectiveness"===c.value&&(r=a.map((a,e)=>B(a,t[e]))),d.value.data.labels=s,d.value.data.datasets[0].data=r,d.value.data.datasets[0].backgroundColor=l.map(a=>a.replace("rgb","rgba").replace(")",", 0.7)")),d.value.data.datasets[0].borderColor=l;const o="type"===c.value?"doughnut":"bar";if(d.value.config.type!==o)return d.value.destroy(),void D();d.value.options=M(),d.value.update("active")};return b(()=>{D()}),g(()=>{d.value&&(d.value.destroy(),d.value=null)}),p(()=>e.data,()=>{F()},{deep:!0}),p(()=>c.value,()=>{F()}),(a,e)=>(l(),t("div",xa,[e[3]||(e[3]=s("h3",{class:"chart-title"},"ğŸƒ ã‚«ãƒ¼ãƒ‰ä½¿ç”¨çµ±è¨ˆ",-1)),s("div",wa,[h(s("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),class:"mode-selector",onChange:F},e[1]||(e[1]=[s("option",{value:"type"},"ã‚«ãƒ¼ãƒ‰ç¨®åˆ¥",-1),s("option",{value:"frequency"},"ä½¿ç”¨é »åº¦",-1),s("option",{value:"effectiveness"},"åŠ¹æœåˆ¥",-1)]),544),[[m,c.value]])]),s("div",_a,[s("canvas",{ref_key:"chartCanvas",ref:n},null,512)]),s("div",Ra,[e[2]||(e[2]=s("div",{class:"detail-header"},[s("span",null,"è©³ç´°åˆ†æ")],-1)),s("div",$a,[(l(!0),t(o,null,i(w.value,(a,e)=>(l(),t("div",{key:e,class:"detail-item"},[s("div",Sa,[s("span",Ia,r(I(e)),1),s("span",Ta,r(_(e)),1)]),s("div",ja,[s("span",Oa,r(a)+"å›",1),s("span",Ba,r(O(a))+"%",1)])]))),128))])])]))}}),[["__scopeId","data-v-87f08bf3"]]),Ma={class:"chart-wrapper"},Fa={class:"chart-container"},Aa={class:"patterns-analysis"},Pa={class:"pattern-list"},Ua={class:"pattern-header"},Wa={class:"pattern-situation"},La={class:"pattern-choice"},qa={class:"pattern-stats"},Va={class:"stat"},Ea={class:"value"},Ga={class:"stat"},Za={class:"value"},Ha={class:"pattern-recommendation"},za=O(e({__name:"StrategyPatternsChart",props:{data:{}},setup(a){C.register(k,x,w,_,R,$,S);const e=a,n=u(),c=u(null),h=v(()=>[...e.data||[]].sort((a,e)=>e.successRate!==a.successRate?e.successRate-a.successRate:e.frequency-a.frequency)),m=a=>({youth_high_vitality:"é’å¹´æœŸãƒ»é«˜æ´»åŠ›",youth_low_vitality:"é’å¹´æœŸãƒ»ä½æ´»åŠ›",middle_high_vitality:"ä¸­å¹´æœŸãƒ»é«˜æ´»åŠ›",middle_low_vitality:"ä¸­å¹´æœŸãƒ»ä½æ´»åŠ›",fulfillment_high_vitality:"å……å®ŸæœŸãƒ»é«˜æ´»åŠ›",fulfillment_low_vitality:"å……å®ŸæœŸãƒ»ä½æ´»åŠ›"}[a]||a),y=a=>({with_insurance:"ä¿é™ºã‚ã‚Š",no_insurance:"ä¿é™ºãªã—",aggressive:"ç©æ¥µçš„",conservative:"ä¿å®ˆçš„",balanced:"ãƒãƒ©ãƒ³ã‚¹å‹"}[a]||a),f=a=>a.successRate>=.8?"ğŸ‘ å„ªç§€ãªæˆ¦ç•¥ã§ã™":a.successRate>=.6?"ğŸ˜Š è‰¯å¥½ãªæˆ¦ç•¥ã§ã™":a.successRate>=.4?"ğŸ˜ æ”¹å–„ã®ä½™åœ°ãŒã‚ã‚Šã¾ã™":"ğŸ¤” æˆ¦ç•¥ã®è¦‹ç›´ã—ã‚’æ¤œè¨",I=()=>{if(!e.data)return[];const a={};e.data.forEach(e=>{const t=e.situation.split("_")[0];a[t]||(a[t]=[]),a[t].push(e)});const t={youth:"rgb(34, 197, 94)",middle:"rgb(251, 191, 36)",fulfillment:"rgb(168, 85, 247)"};return Object.entries(a).map(([a,e])=>({label:m(`${a}_high_vitality`).split("ãƒ»")[0],data:e.map(a=>({x:a.frequency,y:a.successRate})),backgroundColor:t[a]||"rgb(107, 114, 128)",borderColor:t[a]||"rgb(107, 114, 128)",pointRadius:e.map(a=>Math.max(6,a.frequency/2)),pointHoverRadius:e.map(a=>Math.max(8,a.frequency/2+2))}))};return b(()=>{(()=>{if(!n.value||!e.data||0===e.data.length)return;const a=n.value.getContext("2d");if(!a)return;const t=I();c.value=new C(a,{type:"scatter",data:{datasets:t},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!1},legend:{display:!0,position:"top",labels:{color:"white",usePointStyle:!0}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.9)",titleColor:"white",bodyColor:"white",borderColor:"rgba(75, 85, 99, 0.5)",borderWidth:1,callbacks:{title:()=>"",label:a=>{const t=e.data[a.dataIndex];return[`çŠ¶æ³: ${m(t.situation)}`,`é¸æŠ: ${y(t.choice)}`,`é »åº¦: ${t.frequency}å›`,`æˆåŠŸç‡: ${(100*t.successRate).toFixed(1)}%`]}}}},scales:{x:{display:!0,grid:{color:"rgba(75, 85, 99, 0.3)"},ticks:{color:"rgba(209, 213, 219, 0.8)"},title:{display:!0,text:"ä½¿ç”¨é »åº¦",color:"rgba(209, 213, 219, 0.8)"}},y:{beginAtZero:!0,max:1,grid:{color:"rgba(75, 85, 99, 0.3)"},ticks:{color:"rgba(209, 213, 219, 0.8)",callback:a=>`${(100*Number(a)).toFixed(0)}%`},title:{display:!0,text:"æˆåŠŸç‡",color:"rgba(209, 213, 219, 0.8)"}}},elements:{point:{radius:8,hoverRadius:10}}}})})()}),g(()=>{c.value&&(c.value.destroy(),c.value=null)}),p(()=>e.data,()=>{(()=>{if(!c.value||!e.data)return;const a=I();c.value.data.datasets=a,c.value.update("active")})()},{deep:!0}),(a,e)=>(l(),t("div",Ma,[e[2]||(e[2]=s("h3",{class:"chart-title"},"ğŸ§­ æˆ¦ç•¥ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ",-1)),s("div",Fa,[s("canvas",{ref_key:"chartCanvas",ref:n},null,512)]),s("div",Aa,[s("div",Pa,[(l(!0),t(o,null,i(h.value,a=>(l(),t("div",{key:`${a.situation}_${a.choice}`,class:d(["pattern-item",{"high-success":a.successRate>=.7,"low-success":a.successRate<.4}])},[s("div",Ua,[s("div",Wa,r(m(a.situation)),1),s("div",La,r(y(a.choice)),1)]),s("div",qa,[s("div",Va,[e[0]||(e[0]=s("span",{class:"label"},"é »åº¦:",-1)),s("span",Ea,r(a.frequency)+"å›",1)]),s("div",Ga,[e[1]||(e[1]=s("span",{class:"label"},"æˆåŠŸç‡:",-1)),s("span",Za,r((100*a.successRate).toFixed(1))+"%",1)]),s("div",Ha,r(f(a)),1)])],2))),128))])])]))}}),[["__scopeId","data-v-92c36274"]]),Ja={class:"chart-wrapper"},Qa={class:"chart-controls"},Na={class:"chart-container"},Ka={class:"decision-insights"},Xa={class:"insight-grid"},Ya={class:"insight-item"},ae={class:"insight-content"},ee={class:"insight-value"},te={class:"insight-item"},le={class:"insight-content"},se={class:"insight-value"},re={class:"insight-item"},oe={class:"insight-content"},ie={class:"insight-value"},ne={class:"insight-item"},de={class:"insight-content"},ce={class:"insight-value"},ue={class:"analysis-summary"},ve={class:"summary-content"},be=O(e({__name:"DecisionAnalysisChart",props:{data:{}},setup(a){C.register(k,x,w,_,T,R,$,S,I);const e=a,o=u(),i=u(null),n=u("timeline"),d=v(()=>e.data&&0!==e.data.length?e.data.reduce((a,e)=>a+e.decisionTime,0)/e.data.length:0),c=v(()=>e.data&&0!==e.data.length?Math.min(...e.data.map(a=>a.decisionTime)):0),y=v(()=>e.data&&0!==e.data.length?Math.max(...e.data.map(a=>a.decisionTime)):0),f=v(()=>{if(!e.data||e.data.length<2)return"ä¸æ˜";const a=e.data.slice(0,Math.floor(e.data.length/2)),t=e.data.slice(Math.floor(e.data.length/2)),l=a.reduce((a,e)=>a+e.decisionTime,0)/a.length,s=t.reduce((a,e)=>a+e.decisionTime,0)/t.length-l;return Math.abs(s)<.5?"å®‰å®š":s>0?"æ…é‡åŒ–":"è¿…é€ŸåŒ–"}),j=v(()=>{if(!e.data||0===e.data.length)return"ãƒ‡ãƒ¼ã‚¿ãŒä¸è¶³ã—ã¦ã„ã¾ã™";const a=d.value;return a<3?"éå¸¸ã«è¿…é€Ÿãªæ±ºå®šã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚ç›´æ„Ÿçš„ãªãƒ—ãƒ¬ã‚¤ã‚¹ã‚¿ã‚¤ãƒ«ã§ã™ã€‚":a<8?"ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸæ±ºå®šæ™‚é–“ã§ã™ã€‚é©åº¦ã«è€ƒãˆã¦ãƒ—ãƒ¬ã‚¤ã—ã¦ã„ã¾ã™ã€‚":a<15?"æ…é‡ã«è€ƒãˆã¦ã‹ã‚‰ãƒ—ãƒ¬ã‚¤ã—ã¦ã„ã¾ã™ã€‚æˆ¦ç•¥çš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã™ã€‚":"éå¸¸ã«æ…é‡ãªãƒ—ãƒ¬ã‚¤ã‚¹ã‚¿ã‚¤ãƒ«ã§ã™ã€‚ã‚ˆã‚Šç´ æ—©ã„æ±ºå®šã‚‚æ¤œè¨ã—ã¦ã¿ã¦ãã ã•ã„ã€‚"}),O=v(()=>{if(!e.data||0===e.data.length)return[];const a=[0,2,5,10,15,20,30,1/0],t=["0-2ç§’","2-5ç§’","5-10ç§’","10-15ç§’","15-20ç§’","20-30ç§’","30ç§’ä»¥ä¸Š"];return a.slice(0,-1).map((l,s)=>{const r=a[s+1],o=e.data.filter(a=>a.decisionTime>=l&&a.decisionTime<r).length;return{label:t[s],count:o}})}),B=v(()=>{if(!e.data||e.data.length<3)return[];const a=[];for(let t=2;t<e.data.length;t++){const l=e.data.slice(t-3+1,t+1).reduce((a,e)=>a+e.decisionTime,0)/3;a.push({turn:e.data[t].turn,average:l})}return a}),D=()=>{if(!o.value||!e.data||0===e.data.length)return;const a=o.value.getContext("2d");a&&(i.value=new C(a,{type:M(),data:F(),options:A()}))},M=()=>"distribution"===n.value?"bar":"line",F=()=>{switch(n.value){case"distribution":return{labels:O.value.map(a=>a.label),datasets:[{label:"æ±ºå®šå›æ•°",data:O.value.map(a=>a.count),backgroundColor:"rgba(59, 130, 246, 0.6)",borderColor:"rgb(59, 130, 246)",borderWidth:2,borderRadius:4}]};case"average":return{labels:B.value.map(a=>`ã‚¿ãƒ¼ãƒ³${a.turn}`),datasets:[{label:"ç§»å‹•å¹³å‡ï¼ˆ3ã‚¿ãƒ¼ãƒ³ï¼‰",data:B.value.map(a=>a.average),borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",fill:!0,tension:.4,pointBackgroundColor:"rgb(34, 197, 94)",pointBorderColor:"white",pointBorderWidth:2}]};default:return{labels:e.data.map(a=>`ã‚¿ãƒ¼ãƒ³${a.turn}`),datasets:[{label:"æ±ºå®šæ™‚é–“",data:e.data.map(a=>a.decisionTime),borderColor:"rgb(168, 85, 247)",backgroundColor:"rgba(168, 85, 247, 0.1)",fill:!0,tension:.4,pointBackgroundColor:"rgb(168, 85, 247)",pointBorderColor:"white",pointBorderWidth:2},{label:"å¹³å‡ãƒ©ã‚¤ãƒ³",data:e.data.map(()=>d.value),borderColor:"rgb(251, 191, 36)",backgroundColor:"transparent",borderDash:[5,5],pointRadius:0,tension:0}]}}},A=()=>{const a={responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!1},legend:{display:!0,position:"top",labels:{color:"white",usePointStyle:!0}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.9)",titleColor:"white",bodyColor:"white",borderColor:"rgba(75, 85, 99, 0.5)",borderWidth:1}},scales:{x:{grid:{color:"rgba(75, 85, 99, 0.3)"},ticks:{color:"rgba(209, 213, 219, 0.8)"}},y:{beginAtZero:!0,grid:{color:"rgba(75, 85, 99, 0.3)"},ticks:{color:"rgba(209, 213, 219, 0.8)",callback:a=>"distribution"===n.value?`${a}å›`:`${a}ç§’`},title:{display:!0,text:"distribution"===n.value?"æ±ºå®šå›æ•°":"æ™‚é–“ï¼ˆç§’ï¼‰",color:"rgba(209, 213, 219, 0.8)"}}}};return"distribution"!==n.value?{...a,elements:{point:{radius:4,hoverRadius:6}}}:a},P=()=>{if(!i.value)return void D();const a=M();if(i.value.config.type!==a)return i.value.destroy(),void D();i.value.data=F(),i.value.options=A(),i.value.update("active")};return b(()=>{D()}),g(()=>{i.value&&(i.value.destroy(),i.value=null)}),p(()=>e.data,()=>{P()},{deep:!0}),p(()=>n.value,()=>{P()}),(a,e)=>(l(),t("div",Ja,[e[11]||(e[11]=s("h3",{class:"chart-title"},"â±ï¸ æ±ºå®šæ™‚é–“åˆ†æ",-1)),s("div",Qa,[h(s("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a),class:"mode-selector",onChange:P},e[1]||(e[1]=[s("option",{value:"timeline"},"æ™‚ç³»åˆ—å¤‰åŒ–",-1),s("option",{value:"distribution"},"åˆ†å¸ƒåˆ†æ",-1),s("option",{value:"average"},"å¹³å‡æ¨ç§»",-1)]),544),[[m,n.value]])]),s("div",Na,[s("canvas",{ref_key:"chartCanvas",ref:o},null,512)]),s("div",Ka,[s("div",Xa,[s("div",Ya,[e[3]||(e[3]=s("div",{class:"insight-icon"},"ğŸ¯",-1)),s("div",ae,[e[2]||(e[2]=s("div",{class:"insight-label"},"å¹³å‡æ±ºå®šæ™‚é–“",-1)),s("div",ee,r(d.value.toFixed(1))+"ç§’",1)])]),s("div",te,[e[5]||(e[5]=s("div",{class:"insight-icon"},"âš¡",-1)),s("div",le,[e[4]||(e[4]=s("div",{class:"insight-label"},"æœ€é€Ÿæ±ºå®š",-1)),s("div",se,r(c.value.toFixed(1))+"ç§’",1)])]),s("div",re,[e[7]||(e[7]=s("div",{class:"insight-icon"},"ğŸ¤”",-1)),s("div",oe,[e[6]||(e[6]=s("div",{class:"insight-label"},"æœ€é•·æ€è€ƒ",-1)),s("div",ie,r(y.value.toFixed(1))+"ç§’",1)])]),s("div",ne,[e[9]||(e[9]=s("div",{class:"insight-icon"},"ğŸ“ˆ",-1)),s("div",de,[e[8]||(e[8]=s("div",{class:"insight-label"},"æ±ºå®šãƒˆãƒ¬ãƒ³ãƒ‰",-1)),s("div",ce,r(f.value),1)])])]),s("div",ue,[e[10]||(e[10]=s("div",{class:"summary-title"},"ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ",-1)),s("div",ve,r(j.value),1)])])]))}}),[["__scopeId","data-v-54fb56d8"]]),ge={class:"chart-wrapper"},pe={class:"chart-container"},he={class:"live-stats"},me={class:"stat-item"},ye={class:"stat-item"},fe={class:"stat-item"},Ce=O(e({__name:"LiveVitalityChart",props:{data:{},autoUpdate:{type:Boolean,default:!0},updateInterval:{default:1e3}},setup(a){C.register(k,x,w,_,R,$,S,I);const e=a,o=u(),i=u(null);let n=null;const c=v(()=>e.data&&0!==e.data.length?e.data[e.data.length-1].vitality:0),h=v(()=>!e.data||e.data.length<2?0:e.data[e.data.length-1].vitality-e.data[e.data.length-2].vitality),m=v(()=>{const a=c.value;return a>=80?"å®‰å…¨":a>=60?"æ³¨æ„":a>=40?"è­¦æˆ’":a>=20?"å±é™º":"æ¥µå±é™º"}),f=()=>{if(!i.value||!e.data||0===e.data.length)return;const a=e.data.map(a=>a.turn.toString()),t=e.data.map(a=>a.vitality),l=e.data.map(()=>20),s=e.data.map(()=>40),r=c.value;let o="rgb(239, 68, 68)",n="rgba(239, 68, 68, 0.1)";r>=80?(o="rgb(34, 197, 94)",n="rgba(34, 197, 94, 0.1)"):r>=60?(o="rgb(59, 130, 246)",n="rgba(59, 130, 246, 0.1)"):r>=40?(o="rgb(251, 191, 36)",n="rgba(251, 191, 36, 0.1)"):r>=20&&(o="rgb(245, 101, 101)",n="rgba(245, 101, 101, 0.1)"),i.value.data.labels=a,i.value.data.datasets[0].data=t,i.value.data.datasets[0].borderColor=o,i.value.data.datasets[0].backgroundColor=n,i.value.data.datasets[0].pointBackgroundColor=o,i.value.data.datasets[1].data=l,i.value.data.datasets[2].data=s;const d=t.map((a,e)=>e===t.length-1?8:4);i.value.data.datasets[0].pointRadius=d,i.value.update("active")},T=()=>{e.autoUpdate&&!n&&(n=window.setInterval(()=>{f()},e.updateInterval))},j=()=>{n&&(clearInterval(n),n=null)};return b(()=>{(()=>{if(!o.value)return;const a=o.value.getContext("2d");a&&(i.value=new C(a,{type:"line",data:{labels:[],datasets:[{label:"æ´»åŠ›",data:[],borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",fill:!0,tension:.4,pointBackgroundColor:"rgb(239, 68, 68)",pointBorderColor:"white",pointBorderWidth:2,pointRadius:5,pointHoverRadius:7},{label:"å±é™ºãƒ©ã‚¤ãƒ³",data:[],borderColor:"rgb(245, 101, 101)",backgroundColor:"transparent",borderDash:[10,5],fill:!1,pointRadius:0,tension:0},{label:"è­¦æˆ’ãƒ©ã‚¤ãƒ³",data:[],borderColor:"rgb(251, 191, 36)",backgroundColor:"transparent",borderDash:[5,10],fill:!1,pointRadius:0,tension:0}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:750,easing:"easeInOutQuart"},plugins:{title:{display:!1},legend:{display:!0,position:"top",labels:{color:"white",usePointStyle:!0,filter:a=>"æ´»åŠ›"===a.text}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(17, 24, 39, 0.9)",titleColor:"white",bodyColor:"white",borderColor:"rgba(75, 85, 99, 0.5)",borderWidth:1,callbacks:{title:a=>`ã‚¿ãƒ¼ãƒ³ ${a[0].label}`,label:a=>{if(0===a.datasetIndex){const e=a.parsed.y;let t="";return t=e>=80?"çµ¶å¥½èª¿":e>=60?"å¥½èª¿":e>=40?"æ™®é€š":e>=20?"è¦æ³¨æ„":"å±é™º",`æ´»åŠ›: ${e} (${t})`}return""},afterBody:a=>{if(a.length>0&&a[0].dataIndex>0){const t=a[0].dataIndex,l=e.data[t].vitality-e.data[t-1].vitality;return`å¤‰åŒ–: ${l>0?"+":""}${l}`}return""}}}},scales:{x:{display:!0,grid:{color:"rgba(75, 85, 99, 0.3)"},ticks:{color:"rgba(209, 213, 219, 0.8)",maxTicksLimit:10},title:{display:!0,text:"ã‚¿ãƒ¼ãƒ³",color:"rgba(209, 213, 219, 0.8)"}},y:{beginAtZero:!0,max:100,grid:{color:"rgba(75, 85, 99, 0.3)"},ticks:{color:"rgba(209, 213, 219, 0.8)",stepSize:20},title:{display:!0,text:"æ´»åŠ›",color:"rgba(209, 213, 219, 0.8)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1},elements:{line:{tension:.4}}}}))})(),f(),T()}),g(()=>{j(),i.value&&(i.value.destroy(),i.value=null)}),p(()=>e.data,()=>{f()},{deep:!0}),p(()=>e.autoUpdate,a=>{a?T():j()}),(a,e)=>{return l(),t("div",ge,[e[3]||(e[3]=s("h3",{class:"chart-title"},[y(" ğŸ’— ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ´»åŠ›å¤‰å‹• "),s("span",{class:"live-indicator"},"ğŸ”´ LIVE")],-1)),s("div",pe,[s("canvas",{ref_key:"chartCanvas",ref:o},null,512)]),s("div",he,[s("div",me,[e[0]||(e[0]=s("span",{class:"label"},"ç¾åœ¨æ´»åŠ›:",-1)),s("span",{class:d(["value",(u=c.value,u>=80?"text-green-400":u>=60?"text-blue-400":u>=40?"text-yellow-400":u>=20?"text-orange-400":"text-red-400")])},r(c.value),3)]),s("div",ye,[e[1]||(e[1]=s("span",{class:"label"},"å¤‰åŒ–é‡:",-1)),s("span",{class:d(["value",(n=h.value,n>0?"text-green-400":n<0?"text-red-400":"text-gray-400")])},r(h.value>0?"+":"")+r(h.value),3)]),s("div",fe,[e[2]||(e[2]=s("span",{class:"label"},"å±é™ºåº¦:",-1)),s("span",{class:d(["value",(i=m.value,{"å®‰å…¨":"text-green-400","æ³¨æ„":"text-blue-400","è­¦æˆ’":"text-yellow-400","å±é™º":"text-orange-400","æ¥µå±é™º":"text-red-400 animate-pulse"}[i]||"text-gray-400")])},r(m.value),3)])])]);var i,n,u}}}),[["__scopeId","data-v-e667af83"]]),ke={class:"chart-wrapper"},xe={class:"chart-container"},we={class:"time-metrics"},_e={class:"metric-item"},Re={class:"metric-content"},$e={class:"metric-value"},Se={class:"metric-item"},Ie={class:"metric-content"},Te={class:"metric-value"},je={class:"metric-item"},Oe={class:"metric-content"},Be={class:"metric-value"},De=O(e({__name:"DecisionTimeChart",props:{data:{},autoUpdate:{type:Boolean,default:!0},updateInterval:{default:1e3}},setup(a){C.register(k,x,w,_,T,R,$,S,I);const e=a,o=u(),i=u(null);let n=null;const d=v(()=>e.data&&0!==e.data.length?e.data[e.data.length-1].decisionTime:0),c=v(()=>e.data&&0!==e.data.length?e.data.reduce((a,e)=>a+e.decisionTime,0)/e.data.length:0),h=v(()=>{if(!e.data||e.data.length<3)return"åˆ†æä¸­";const a=e.data.slice(-3).reduce((a,e)=>a+e.decisionTime,0)/3,t=c.value;return a<.8*t?"è¿…é€ŸåŒ–":a>1.2*t?"æ…é‡åŒ–":"å®‰å®š"}),m=()=>{if(!i.value||!e.data||0===e.data.length)return;const a=e.data.map(a=>a.turn.toString()),t=e.data.map(a=>a.decisionTime),l=e.data.map(()=>5),s=d.value;let r="rgb(168, 85, 247)",o="rgba(168, 85, 247, 0.1)";s<=3?(r="rgb(34, 197, 94)",o="rgba(34, 197, 94, 0.1)"):s<=5?(r="rgb(59, 130, 246)",o="rgba(59, 130, 246, 0.1)"):s<=10?(r="rgb(251, 191, 36)",o="rgba(251, 191, 36, 0.1)"):s<=15?(r="rgb(245, 101, 101)",o="rgba(245, 101, 101, 0.1)"):(r="rgb(239, 68, 68)",o="rgba(239, 68, 68, 0.1)"),i.value.data.labels=a,i.value.data.datasets[0].data=t,i.value.data.datasets[0].borderColor=r,i.value.data.datasets[0].backgroundColor=o,i.value.data.datasets[0].pointBackgroundColor=r,i.value.data.datasets[1].data=l;const n=t.map((a,e)=>e===t.length-1?8:4),c=t.map((a,e)=>e===t.length-1?a<=3?"rgb(34, 197, 94)":a<=5?"rgb(59, 130, 246)":a<=10?"rgb(251, 191, 36)":a<=15?"rgb(245, 101, 101)":"rgb(239, 68, 68)":r);i.value.data.datasets[0].pointRadius=n,i.value.data.datasets[0].pointBackgroundColor=c,i.value.update("active")},f=()=>{e.autoUpdate&&!n&&(n=window.setInterval(()=>{m()},e.updateInterval))},j=()=>{n&&(clearInterval(n),n=null)};return b(()=>{(()=>{if(!o.value)return;const a=o.value.getContext("2d");a&&(i.value=new C(a,{type:"line",data:{labels:[],datasets:[{label:"æ±ºå®šæ™‚é–“",data:[],borderColor:"rgb(168, 85, 247)",backgroundColor:"rgba(168, 85, 247, 0.1)",fill:!0,tension:.4,pointBackgroundColor:"rgb(168, 85, 247)",pointBorderColor:"white",pointBorderWidth:2,pointRadius:5,pointHoverRadius:7},{label:"ç›®æ¨™æ™‚é–“ï¼ˆ5ç§’ï¼‰",data:[],borderColor:"rgb(34, 197, 94)",backgroundColor:"transparent",borderDash:[5,5],fill:!1,pointRadius:0,tension:0}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:500,easing:"easeInOutQuart"},plugins:{title:{display:!1},legend:{display:!0,position:"top",labels:{color:"white",usePointStyle:!0,filter:a=>"æ±ºå®šæ™‚é–“"===a.text}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(17, 24, 39, 0.9)",titleColor:"white",bodyColor:"white",borderColor:"rgba(75, 85, 99, 0.5)",borderWidth:1,callbacks:{title:a=>`ã‚¿ãƒ¼ãƒ³ ${a[0].label}`,label:a=>{if(0===a.datasetIndex){const e=a.parsed.y;let t="";return t=e<=3?"è¶…é«˜é€Ÿ":e<=5?"é«˜é€Ÿ":e<=10?"æ™®é€š":e<=15?"æ…é‡":"è¶…æ…é‡",`æ±ºå®šæ™‚é–“: ${e.toFixed(1)}ç§’ (${t})`}return""},afterBody:a=>{if(a.length>0){const e=a[0].parsed.y-5;return Math.abs(e)<1?"ğŸ¯ ç†æƒ³çš„ãªæ±ºå®šæ™‚é–“ã§ã™":e>0?`â³ ç›®æ¨™ã‚ˆã‚Š${e.toFixed(1)}ç§’é•·ã„ã§ã™`:`âš¡ ç›®æ¨™ã‚ˆã‚Š${Math.abs(e).toFixed(1)}ç§’é€Ÿã„ã§ã™`}return""}}}},scales:{x:{display:!0,grid:{color:"rgba(75, 85, 99, 0.3)"},ticks:{color:"rgba(209, 213, 219, 0.8)",maxTicksLimit:8},title:{display:!0,text:"ã‚¿ãƒ¼ãƒ³",color:"rgba(209, 213, 219, 0.8)"}},y:{beginAtZero:!0,grid:{color:"rgba(75, 85, 99, 0.3)"},ticks:{color:"rgba(209, 213, 219, 0.8)",callback:a=>`${a}ç§’`},title:{display:!0,text:"æ™‚é–“ï¼ˆç§’ï¼‰",color:"rgba(209, 213, 219, 0.8)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1},elements:{line:{tension:.4}}}}))})(),m(),f()}),g(()=>{j(),i.value&&(i.value.destroy(),i.value=null)}),p(()=>e.data,()=>{m()},{deep:!0}),p(()=>e.autoUpdate,a=>{a?f():j()}),(a,e)=>(l(),t("div",ke,[e[6]||(e[6]=s("h3",{class:"chart-title"},[y(" â±ï¸ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ±ºå®šæ™‚é–“ "),s("span",{class:"live-indicator"},"ğŸ”´ LIVE")],-1)),s("div",xe,[s("canvas",{ref_key:"chartCanvas",ref:o},null,512)]),s("div",we,[s("div",_e,[e[1]||(e[1]=s("div",{class:"metric-icon"},"âš¡",-1)),s("div",Re,[e[0]||(e[0]=s("div",{class:"metric-label"},"æœ€æ–°æ±ºå®š",-1)),s("div",$e,r(d.value.toFixed(1))+"ç§’",1)])]),s("div",Se,[e[3]||(e[3]=s("div",{class:"metric-icon"},"ğŸ“Š",-1)),s("div",Ie,[e[2]||(e[2]=s("div",{class:"metric-label"},"å¹³å‡æ™‚é–“",-1)),s("div",Te,r(c.value.toFixed(1))+"ç§’",1)])]),s("div",je,[e[5]||(e[5]=s("div",{class:"metric-icon"},"ğŸ¯",-1)),s("div",Oe,[e[4]||(e[4]=s("div",{class:"metric-label"},"æ±ºå®šãƒ‘ã‚¿ãƒ¼ãƒ³",-1)),s("div",Be,r(h.value),1)])])])]))}}),[["__scopeId","data-v-78de1fe5"]]),Me={class:"statistics-dashboard"},Fe={class:"dashboard-header"},Ae={class:"header-controls"},Pe=["disabled"],Ue={key:0,class:"filter-section"},We={class:"filter-row"},Le={class:"filter-group"},qe={class:"filter-group"},Ve={class:"filter-group"},Ee={class:"tab-navigation"},Ge=["onClick"],Ze={class:"icon"},He={key:1,class:"dashboard-content"},ze={key:0,class:"tab-content"},Je={class:"stats-grid"},Qe={class:"main-charts"},Ne={class:"chart-container"},Ke={class:"chart-container"},Xe={key:1,class:"tab-content"},Ye={class:"detailed-charts"},at={class:"chart-row"},et={class:"chart-container half"},tt={class:"chart-container half"},lt={class:"chart-row"},st={class:"chart-container full"},rt={key:2,class:"tab-content"},ot={class:"patterns-section"},it={key:3,class:"tab-content"},nt={key:0,class:"realtime-section"},dt={class:"realtime-header"},ct={class:"session-info"},ut={class:"realtime-charts"},vt={key:1,class:"no-session"},bt={key:2,class:"loading-overlay"},gt={key:3,class:"error-message"},pt=O(e({__name:"StatisticsDashboard",props:{autoRefresh:{type:Boolean,default:!0},refreshInterval:{default:3e4}},emits:["close","dataUpdated"],setup(e,{emit:c}){const C=e,k=c,x=a.getInstance(),w=u(!1),_=u(""),R=u(null),$=u(null),S=u("overview"),I=u(!1),T=u({dateRange:"all",gameStatus:"all",stage:"all"}),j=[{key:"overview",label:"æ¦‚è¦",icon:"ğŸ“Š"},{key:"detailed",label:"è©³ç´°åˆ†æ",icon:"ğŸ”"},{key:"patterns",label:"æˆ¦ç•¥ãƒ‘ã‚¿ãƒ¼ãƒ³",icon:"ğŸ§­"},{key:"realtime",label:"ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ",icon:"ğŸ“ˆ"}];let O=null,B=null;const D=v(()=>{if(!R.value)return[];const a=R.value;return[{label:"ç·ã‚²ãƒ¼ãƒ æ•°",value:a.totalGames.toString(),trend:"+"},{label:"å®Œäº†ã‚²ãƒ¼ãƒ æ•°",value:a.completedGames.toString(),trend:"+"},{label:"å‹åˆ©ã‚²ãƒ¼ãƒ æ•°",value:a.victoryGames.toString(),trend:"+"},{label:"å‹åˆ©ç‡",value:`${(a.victoryGames/Math.max(a.completedGames,1)*100).toFixed(1)}%`,trend:"="}]}),M=v(()=>{if(!R.value)return[];const a=R.value;return[{label:"ãƒãƒ£ãƒ¬ãƒ³ã‚¸æˆåŠŸç‡",value:`${a.challengeSuccessRate.toFixed(1)}%`,trend:a.recentTrends.performanceImprovement>0?"â†—":"â†˜"},{label:"å¹³å‡æ´»åŠ›",value:a.averageVitality.toFixed(1),trend:"="},{label:"æœ€é«˜æ´»åŠ›",value:a.highestVitality.toString(),trend:"+"},{label:"å¹³å‡ã‚¿ãƒ¼ãƒ³æ•°",value:a.averageTurnsPerGame.toFixed(1),trend:"="}]}),F=v(()=>{if(!R.value)return[];const a=R.value;return[{label:"ç·ãƒ—ãƒ¬ã‚¤æ™‚é–“",value:N(a.totalPlayTime),trend:"+"},{label:"å¹³å‡ã‚²ãƒ¼ãƒ æ™‚é–“",value:N(a.averageGameDuration),trend:a.recentTrends.playTimeIncrease>0?"â†—":"â†˜"},{label:"ä»Šæ—¥ã®ãƒ—ãƒ¬ã‚¤",value:K(),trend:"="},{label:"é€£ç¶šãƒ—ãƒ¬ã‚¤è¨˜éŒ²",value:X(),trend:"+"}]}),A=v(()=>{if(!R.value)return[];const a=R.value;return[{label:"ä¿é™ºè³¼å…¥å›æ•°",value:a.totalInsurancePurchases.toString(),trend:"+"},{label:"å¹³å‡ä¿é™ºè² æ‹…",value:a.averageInsuranceBurden.toFixed(1),trend:"="},{label:"ä¿é™ºåŠ¹æœ",value:`${a.insuranceEffectiveness.toFixed(1)}%`,trend:a.insuranceEffectiveness>0?"â†—":"â†˜"},{label:"äººæ°—ä¿é™º",value:aa(),trend:"="}]}),P=v(()=>R.value?.gameHistoryByDate||[]),U=v(()=>R.value?R.value.stageSuccessRates:{}),W=v(()=>$.value?.live.vitalityOverTime||[]),L=v(()=>R.value?R.value.stageReachCounts:{}),q=v(()=>R.value?R.value.cardTypeUsage:{}),E=v(()=>R.value?.decisionPatterns||[]),G=v(()=>$.value?.live.decisionTimes||[]),Z=async()=>{w.value=!0,_.value="";try{const a=Q();R.value=x.generateStatistics(a),$.value=x.getRealtimeStatistics(),k("dataUpdated",R.value)}catch(a){_.value=`ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ: ${a}`}finally{w.value=!1}},H=()=>{Z()},z=()=>{try{const a=x.exportData("json"),e=new Blob([a],{type:"application/json"}),t=URL.createObjectURL(e),l=document.createElement("a");l.href=t,l.download=`game-statistics-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(t)}catch(a){_.value=`ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ: ${a}`}},J=()=>{Z()},Q=()=>{const a={};if("all"!==T.value.dateRange){const e=new Date,t=new Date;switch(T.value.dateRange){case"week":t.setDate(e.getDate()-7);break;case"month":t.setMonth(e.getMonth()-1);break;case"quarter":t.setMonth(e.getMonth()-3)}a.dateRange={start:t,end:e}}return"all"!==T.value.gameStatus&&(a.gameStatus=[T.value.gameStatus]),"all"!==T.value.stage&&(a.stages=[T.value.stage]),a},N=a=>{const e=Math.floor(a/1e3),t=Math.floor(e/60),l=Math.floor(t/60);return l>0?`${l}æ™‚é–“${t%60}åˆ†`:t>0?`${t}åˆ†${e%60}ç§’`:`${e}ç§’`},K=()=>{if(!R.value)return"0åˆ†";const a=(new Date).toISOString().split("T")[0],e=R.value.gameHistoryByDate.find(e=>e.date===a);return e?N(e.totalPlayTime):"0åˆ†"},X=()=>$.value?`${$.value.currentSession.currentStreak}å‹`:"0å‹",aa=()=>{if(!R.value)return"-";const a=R.value.insuranceTypeUsage,e=Object.entries(a);return 0===e.length?"-":e.reduce((a,e)=>a[1]>e[1]?a:e)[0]};return b(()=>{Z(),C.autoRefresh&&!O&&(O=window.setInterval(Z,C.refreshInterval)),B=x.subscribe(a=>{R.value=a,k("dataUpdated",a)})}),g(()=>{O&&(clearInterval(O),O=null),B&&B()}),p(()=>T.value,()=>{H()},{deep:!0}),(a,e)=>{return l(),t("div",Me,[s("div",Fe,[e[7]||(e[7]=s("h2",{class:"dashboard-title"},[s("span",{class:"icon"},"ğŸ“Š"),y(" ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ ")],-1)),s("div",Ae,[s("button",{class:"refresh-btn",disabled:w.value,onClick:Z},[e[4]||(e[4]=s("span",{class:"icon"},"ğŸ”„",-1)),y(" "+r(w.value?"æ›´æ–°ä¸­...":"æ›´æ–°"),1)],8,Pe),s("button",{class:"export-btn",onClick:z},e[5]||(e[5]=[s("span",{class:"icon"},"ğŸ’¾",-1),y(" ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ ",-1)])),s("button",{class:"close-btn",onClick:e[0]||(e[0]=e=>a.$emit("close"))},e[6]||(e[6]=[s("span",{class:"icon"},"âœ•",-1)]))])]),I.value?(l(),t("div",Ue,[s("div",We,[s("div",Le,[e[9]||(e[9]=s("label",null,"æœŸé–“",-1)),h(s("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>T.value.dateRange=a),onChange:H},e[8]||(e[8]=[s("option",{value:"all"},"å…¨æœŸé–“",-1),s("option",{value:"week"},"éå»1é€±é–“",-1),s("option",{value:"month"},"éå»1ãƒ¶æœˆ",-1),s("option",{value:"quarter"},"éå»3ãƒ¶æœˆ",-1)]),544),[[m,T.value.dateRange]])]),s("div",qe,[e[11]||(e[11]=s("label",null,"ã‚²ãƒ¼ãƒ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹",-1)),h(s("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>T.value.gameStatus=a),onChange:H},e[10]||(e[10]=[s("option",{value:"all"},"ã™ã¹ã¦",-1),s("option",{value:"victory"},"å‹åˆ©",-1),s("option",{value:"game_over"},"ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼",-1),s("option",{value:"in_progress"},"é€²è¡Œä¸­",-1)]),544),[[m,T.value.gameStatus]])]),s("div",Ve,[e[13]||(e[13]=s("label",null,"ã‚¹ãƒ†ãƒ¼ã‚¸",-1)),h(s("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>T.value.stage=a),onChange:H},e[12]||(e[12]=[s("option",{value:"all"},"ã™ã¹ã¦",-1),s("option",{value:"youth"},"é’å¹´æœŸ",-1),s("option",{value:"middle"},"ä¸­å¹´æœŸ",-1),s("option",{value:"fulfillment"},"å……å®ŸæœŸ",-1)]),544),[[m,T.value.stage]])])])])):n("",!0),s("div",Ee,[(l(),t(o,null,i(j,a=>s("button",{key:a.key,class:d(["tab-button",{active:S.value===a.key}]),onClick:e=>S.value=a.key},[s("span",Ze,r(a.icon),1),y(" "+r(a.label),1)],10,Ge)),64))]),w.value?n("",!0):(l(),t("div",He,["overview"===S.value?(l(),t("div",ze,[s("div",Je,[f(V,{title:"åŸºæœ¬çµ±è¨ˆ",stats:D.value,icon:"ğŸ®"},null,8,["stats"]),f(V,{title:"ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹",stats:M.value,icon:"âš¡"},null,8,["stats"]),f(V,{title:"ãƒ—ãƒ¬ã‚¤æ™‚é–“",stats:F.value,icon:"â±ï¸"},null,8,["stats"]),f(V,{title:"ä¿é™ºçµ±è¨ˆ",stats:A.value,icon:"ğŸ›¡ï¸"},null,8,["stats"])]),s("div",Qe,[s("div",Ne,[f(Y,{data:P.value},null,8,["data"])]),s("div",Ke,[f(ra,{data:U.value},null,8,["data"])])])])):n("",!0),"detailed"===S.value?(l(),t("div",Xe,[s("div",Ye,[s("div",at,[s("div",et,[f(va,{data:W.value},null,8,["data"])]),s("div",tt,[f(ka,{data:L.value},null,8,["data"])])]),s("div",lt,[s("div",st,[f(Da,{data:q.value},null,8,["data"])])])])])):n("",!0),"patterns"===S.value?(l(),t("div",rt,[s("div",ot,[f(za,{data:E.value},null,8,["data"]),f(be,{data:G.value},null,8,["data"])])])):n("",!0),"realtime"===S.value?(l(),t("div",it,[$.value?(l(),t("div",nt,[s("div",dt,[e[14]||(e[14]=s("h3",null,"ç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³",-1)),s("div",ct,[s("span",null,"é–‹å§‹æ™‚åˆ»: "+r((c=$.value.currentSession.startTime,c.toLocaleTimeString("ja-JP"))),1),s("span",null,"ãƒ—ãƒ¬ã‚¤æ¸ˆã¿ã‚²ãƒ¼ãƒ : "+r($.value.currentSession.gamesPlayed),1),s("span",null,"é€£ç¶šè¨˜éŒ²: "+r($.value.currentSession.currentStreak),1)])]),s("div",ut,[f(Ce,{data:$.value.live.vitalityOverTime},null,8,["data"]),f(De,{data:$.value.live.decisionTimes},null,8,["data"])])])):(l(),t("div",vt,e[15]||(e[15]=[s("p",null,"ç¾åœ¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚²ãƒ¼ãƒ ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã›ã‚“",-1)])))])):n("",!0)])),w.value?(l(),t("div",bt,e[16]||(e[16]=[s("div",{class:"loading-spinner"},[s("span",{class:"icon"},"â³"),s("p",null,"çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...")],-1)]))):n("",!0),_.value?(l(),t("div",gt,[e[17]||(e[17]=s("span",{class:"icon"},"âš ï¸",-1)),s("p",null,r(_.value),1),s("button",{onClick:J},"å†è©¦è¡Œ")])):n("",!0)]);var c}}}),[["__scopeId","data-v-b2c75d0e"]]),ht=Object.freeze({__proto__:null,default:pt});export{ht as S,O as _};
//# sourceMappingURL=analytics-yRTfW0WqWt72.js.map
