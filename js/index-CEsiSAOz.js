const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./MobileErrorHandler-WPpGFazDFKSb.js","./vue-vendor-C2HpI3kE.js","./vendor-CwZoOl0N.js","./game-logic-D6nvZx-osByz.js","../css/MobileErrorHandler-BRt2uNlx.css","../css/css-vendor-bSBXe4IY.css"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,a,n)=>((t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n)(t,"symbol"!=typeof a?a+"":a,n);/* empty css                       */import{j as a,f as n,k as s,l as i,p as o,T as r,q as l,s as c,r as d,u,w as p,v as h,x as m,y as v,z as g,A as f,B as b,C as y,D as x,E as w,F as k,G as C,H as E,I as S,J as L,K as _,L as T,M,N as F,O as I,P as A,Q as D,R as $,S as P,U as z}from"./vue-vendor-C2HpI3kE.js";import{d as R,c as N}from"./vendor-CwZoOl0N.js";import{G as j}from"./game-logic-D6nvZx-osByz.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const B={},H={class:"transition-animations"},O=(e,t)=>{const a=e.__vccOpts||e;for(const[n,s]of t)a[n]=s;return a},G=O(a({__name:"TransitionAnimations",props:{type:{default:"fade"},direction:{default:"right"},duration:{default:300},easing:{default:"cubic-bezier(0.4, 0, 0.2, 1)"},intensity:{default:"normal"}},setup(e){const t=e,a=n(()=>`${t.type}-${t.direction}-${t.intensity}`),d=e=>{const a=e;a.style.transitionDuration=`${t.duration}ms`,a.style.transitionTimingFunction=t.easing},u=(e,a)=>{setTimeout(a,t.duration)},p=(e,a)=>{setTimeout(a,t.duration)};return(e,t)=>(i(),s("div",H,[o(r,{name:a.value,mode:"out-in",onBeforeEnter:d,onEnter:u,onLeave:p},{default:l(()=>[c(e.$slots,"default",{},void 0)]),_:3},8,["name"])]))}}),[["__scopeId","data-v-23af9bdf"]]);class V{constructor(){t(this,"liveRegions",new Map),t(this,"gameStatusElement"),t(this,"cardDetailsElement"),t(this,"announcementQueue",[]),t(this,"isProcessingQueue",!1),this.createLiveRegions(),this.createGameStatusElements(),this.setupAriaDescriptions()}announce(e,t={priority:"polite"}){t.interrupt&&this.clearQueue(),this.announcementQueue.push({message:e,options:t}),this.processQueue()}announceGameState(e){const{type:t,message:a,context:n}=e;this.updateGameStatus(t,a,n);const s=this.getPriorityForGameState(t);this.announce(a,{priority:s,persist:!0})}announceCardDetails(e){const t=this.createCardDescription(e);this.cardDetailsElement.textContent=t,this.announce(`ã‚«ãƒ¼ãƒ‰é¸æŠ: ${t}`,{priority:"polite"})}announceError(e){this.announce(`ã‚¨ãƒ©ãƒ¼: ${e}`,{priority:"assertive",interrupt:!0})}announceSuccess(e){this.announce(`æˆåŠŸ: ${e}`,{priority:"polite"})}announceProgress(e,t,a){const n=`${a}: ${e}/${t} (${Math.round(e/t*100)}%)`;this.announce(n,{priority:"polite"})}announceOptions(e,t){const a=`é¸æŠè‚¢ ${t+1}/${e.length}: ${e[t]}`;this.announce(a,{priority:"polite"})}announceTimer(e,t="seconds"){const a="seconds"===t?"ç§’":"åˆ†";let n;n=e<=0?"æ™‚é–“åˆ‡ã‚Œã§ã™":e<=10&&"seconds"===t||e<=60&&"seconds"===t?`æ®‹ã‚Š${e}${a}`:`æ®‹ã‚Šæ™‚é–“: ${e}${a}`;const s=e<=10?"assertive":"polite";this.announce(n,{priority:s})}announceScreenChange(e,t){let a=`ç”»é¢ãŒå¤‰æ›´ã•ã‚Œã¾ã—ãŸ: ${e}`;t&&(a+=`. ${t}`),this.announce(a,{priority:"assertive",persist:!0})}announceKeyboardHelp(){const e=`ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ: ${["Tabã‚­ãƒ¼ã§æ¬¡ã®è¦ç´ ã«ç§»å‹•","Shift+Tabã§å‰ã®è¦ç´ ã«ç§»å‹•","Enterã‚­ãƒ¼ã¾ãŸã¯ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã§é¸æŠ","F1ã‚­ãƒ¼ã§ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º"].join(", ")}`;this.announce(e,{priority:"polite",persist:!0})}announceGameStats(e){const t=`ã‚²ãƒ¼ãƒ çµ±è¨ˆ. ${Object.entries(e).map(([e,t])=>`${this.translateStatKey(e)}: ${t}`).join(", ")}`;this.announce(t,{priority:"polite",persist:!0})}announceRegionStatus(e,t){const a=t.length,n=this.getItemType(t);let s;s=0===a?`${e}ã¯ç©ºã§ã™`:1===a?`${e}ã«${n}ãŒ1ã¤ã‚ã‚Šã¾ã™`:`${e}ã«${n}ãŒ${a}å€‹ã‚ã‚Šã¾ã™`,this.announce(s,{priority:"polite"})}announceDragDrop(e,t){let a;switch(e){case"start":a=`${t.itemName}ã®ãƒ‰ãƒ©ãƒƒã‚°ã‚’é–‹å§‹ã—ã¾ã—ãŸ`;break;case"move":a=`${t.targetName}ã®ä¸Šã«ç§»å‹•ä¸­`;break;case"drop":a=t.success?`${t.targetName}ã«${t.itemName}ã‚’ãƒ‰ãƒ­ãƒƒãƒ—ã—ã¾ã—ãŸ`:`ãƒ‰ãƒ­ãƒƒãƒ—ã«å¤±æ•—ã—ã¾ã—ãŸ: ${t.reason}`;break;case"cancel":a="ãƒ‰ãƒ©ãƒƒã‚°æ“ä½œã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¾ã—ãŸ"}const n="drop"!==e||t.success?"polite":"assertive";this.announce(a,{priority:n})}createLiveRegions(){const e=document.createElement("div");e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),e.setAttribute("aria-atomic","false"),e.className="sr-only",e.id="live-region-polite",document.body.appendChild(e),this.liveRegions.set("polite",e);const t=document.createElement("div");t.setAttribute("aria-live","assertive"),t.setAttribute("aria-relevant","additions text"),t.setAttribute("aria-atomic","true"),t.className="sr-only",t.id="live-region-assertive",document.body.appendChild(t),this.liveRegions.set("assertive",t)}createGameStatusElements(){this.gameStatusElement=document.createElement("div"),this.gameStatusElement.id="game-status",this.gameStatusElement.className="sr-only",this.gameStatusElement.setAttribute("aria-label","ã‚²ãƒ¼ãƒ çŠ¶æ…‹"),document.body.appendChild(this.gameStatusElement),this.cardDetailsElement=document.createElement("div"),this.cardDetailsElement.id="card-details",this.cardDetailsElement.className="sr-only",this.cardDetailsElement.setAttribute("aria-label","ã‚«ãƒ¼ãƒ‰è©³ç´°"),document.body.appendChild(this.cardDetailsElement)}setupAriaDescriptions(){const e=document.createElement("style");e.textContent="\n      .sr-only {\n        position: absolute;\n        width: 1px;\n        height: 1px;\n        padding: 0;\n        margin: -1px;\n        overflow: hidden;\n        clip: rect(0, 0, 0, 0);\n        white-space: nowrap;\n        border: 0;\n      }\n      \n      .sr-only-focusable:focus {\n        position: static;\n        width: auto;\n        height: auto;\n        padding: inherit;\n        margin: inherit;\n        overflow: visible;\n        clip: auto;\n        white-space: normal;\n      }\n    ",document.head.appendChild(e)}async processQueue(){if(!this.isProcessingQueue&&0!==this.announcementQueue.length){for(this.isProcessingQueue=!0;this.announcementQueue.length>0;){const{message:e,options:t}=this.announcementQueue.shift();t.delay&&await this.delay(t.delay),await this.performAnnouncement(e,t),await this.delay(100)}this.isProcessingQueue=!1}}async performAnnouncement(e,t){const a=this.liveRegions.get(t.priority);if(a)if(t.persist||(a.textContent="",await this.delay(10)),t.persist){const t=document.createElement("div");t.textContent=e,a.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},5e3)}else a.textContent=e}updateGameStatus(e,t,a){const n={type:e,message:t,timestamp:(new Date).toISOString(),...a};this.gameStatusElement.setAttribute("data-game-state",JSON.stringify(n)),this.gameStatusElement.textContent=t}createCardDescription(e){const t=[e.name];return e.type&&t.push(`ç¨®é¡: ${this.translateCardType(e.type)}`),void 0!==e.power&&t.push(`ãƒ‘ãƒ¯ãƒ¼: ${e.power}`),void 0!==e.cost&&t.push(`ã‚³ã‚¹ãƒˆ: ${e.cost}`),e.description&&t.push(`èª¬æ˜: ${e.description}`),t.join(", ")}getPriorityForGameState(e){return["challenge_result","game_end","error"].includes(e)?"assertive":"polite"}translateStatKey(e){return{vitality:"æ´»åŠ›",turn:"ã‚¿ãƒ¼ãƒ³",cardsInHand:"æ‰‹æœ­æšæ•°",challengesCompleted:"å®Œäº†ãƒãƒ£ãƒ¬ãƒ³ã‚¸æ•°",insuranceCards:"ä¿é™ºã‚«ãƒ¼ãƒ‰æ•°"}[e]||e}translateCardType(e){return{life:"ãƒ©ã‚¤ãƒ•ã‚«ãƒ¼ãƒ‰",insurance:"ä¿é™ºã‚«ãƒ¼ãƒ‰",challenge:"ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã‚«ãƒ¼ãƒ‰",dream:"ãƒ‰ãƒªãƒ¼ãƒ ã‚«ãƒ¼ãƒ‰"}[e]||e}getItemType(e){if(0===e.length)return"ã‚¢ã‚¤ãƒ†ãƒ ";const t=e[0];return t.type?this.translateCardType(t.type):"ã‚¢ã‚¤ãƒ†ãƒ "}clearQueue(){this.announcementQueue=[],this.liveRegions.forEach(e=>{e.textContent=""})}async delay(e){return new Promise(t=>setTimeout(t,e))}destroy(){this.liveRegions.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),this.gameStatusElement?.parentNode&&this.gameStatusElement.parentNode.removeChild(this.gameStatusElement),this.cardDetailsElement?.parentNode&&this.cardDetailsElement.parentNode.removeChild(this.cardDetailsElement),this.clearQueue()}}const K={class:"modal-content",role:"dialog","aria-labelledby":"accessibility-title","aria-describedby":"accessibility-description"},U={style:{position:"absolute",width:"0",height:"0"}},Q=["innerHTML"],q={class:"modal-header"},W={class:"modal-body"},J={class:"settings-section"},Z={class:"setting-item"},Y={class:"setting-item"},X={for:"high-contrast"},ee={class:"setting-item"},te={class:"settings-section"},ae={class:"setting-item"},ne={for:"reduce-motion"},se={key:0,class:"setting-item"},ie={class:"range-value"},oe={class:"settings-section"},re={class:"setting-item"},le={for:"screen-reader"},ce={class:"setting-item"},de={for:"audio-descriptions"},ue={class:"setting-item"},pe={class:"range-value"},he={class:"settings-section"},me={class:"setting-item"},ve={for:"sticky-keys"},ge={class:"setting-item"},fe={class:"modal-footer"},be=O(a({__name:"AccessibilitySettings",props:{isOpen:{type:Boolean}},emits:["close","settingsChanged"],setup(e,{emit:t}){const a=e,n=t,o={colorScheme:"default",highContrast:!1,fontSize:"medium",reduceMotion:!1,animationSpeed:1,screenReaderEnabled:!1,audioDescriptions:!1,soundEffectsVolume:70,stickyKeys:!1,keyRepeatDelay:500,touchTargetSize:"default"},c=d({...o}),C=d(null),E={default:"",protanopia:'\n    <filter id="protanopia">\n      <feColorMatrix type="matrix" values="\n        0.567, 0.433, 0,     0, 0\n        0.558, 0.442, 0,     0, 0\n        0,     0.242, 0.758, 0, 0\n        0,     0,     0,     1, 0\n      "/>\n    </filter>\n  ',deuteranopia:'\n    <filter id="deuteranopia">\n      <feColorMatrix type="matrix" values="\n        0.625, 0.375, 0,   0, 0\n        0.7,   0.3,   0,   0, 0\n        0,     0.3,   0.7, 0, 0\n        0,     0,     0,   1, 0\n      "/>\n    </filter>\n  ',tritanopia:'\n    <filter id="tritanopia">\n      <feColorMatrix type="matrix" values="\n        0.95, 0.05,  0,     0, 0\n        0,    0.433, 0.567, 0, 0\n        0,    0.475, 0.525, 0, 0\n        0,    0,     0,     1, 0\n      "/>\n    </filter>\n  ',achromatopsia:'\n    <filter id="achromatopsia">\n      <feColorMatrix type="matrix" values="\n        0.299, 0.587, 0.114, 0, 0\n        0.299, 0.587, 0.114, 0, 0\n        0.299, 0.587, 0.114, 0, 0\n        0,     0,     0,     1, 0\n      "/>\n    </filter>\n  '},S=()=>{localStorage.setItem("accessibility-settings",JSON.stringify(c.value)),n("settingsChanged",c.value),L()},L=()=>{const e=document.documentElement;"default"!==c.value.colorScheme?e.style.filter=`url(#${c.value.colorScheme})`:e.style.filter="",e.classList.toggle("high-contrast",c.value.highContrast),e.style.setProperty("--base-font-size",{small:"14px",medium:"16px",large:"20px","extra-large":"24px"}[c.value.fontSize]),e.classList.toggle("reduce-motion",c.value.reduceMotion),e.style.setProperty("--animation-speed-multiplier",String(c.value.animationSpeed)),e.style.setProperty("--touch-target-size",{default:"44px",large:"56px","extra-large":"72px"}[c.value.touchTargetSize]),C.value&&C.value.announce("ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸ",{priority:"polite"})},_=()=>{c.value={...o},S(),C.value&&C.value.announce("ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ",{priority:"assertive"})};return u(()=>{(()=>{const e=localStorage.getItem("accessibility-settings");if(e)try{c.value={...o,...JSON.parse(e)}}catch(t){console.error("Failed to load accessibility settings:",t)}})(),L(),C.value=new V;const e=(()=>{const e=e=>{if(a.isOpen&&e.ctrlKey&&e.altKey)switch(e.key){case"c":const e=["default","protanopia","deuteranopia","tritanopia","achromatopsia"],t=e.indexOf(c.value.colorScheme);c.value.colorScheme=e[(t+1)%e.length],S();break;case"h":c.value.highContrast=!c.value.highContrast,S();break;case"m":c.value.reduceMotion=!c.value.reduceMotion,S()}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}})();return()=>{e(),C.value?.destroy()}}),p(()=>c.value,()=>{S()},{deep:!0}),(e,t)=>(i(),h(r,{name:"modal"},{default:l(()=>[e.isOpen?(i(),s("div",{key:0,class:"accessibility-modal",onClick:t[13]||(t[13]=v(e=>n("close"),["self"]))},[g("div",K,[(i(),s("svg",U,[g("defs",{innerHTML:Object.values(E).join("")},null,8,Q)])),g("div",q,[t[15]||(t[15]=g("h2",{id:"accessibility-title"},"ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®š",-1)),g("button",{class:"close-button","aria-label":"è¨­å®šã‚’é–‰ã˜ã‚‹",onClick:t[0]||(t[0]=e=>n("close"))},t[14]||(t[14]=[g("span",{"aria-hidden":"true"},"Ã—",-1)]))]),t[36]||(t[36]=g("div",{id:"accessibility-description",class:"sr-only"}," ã‚²ãƒ¼ãƒ ã®ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã§ãã¾ã™ã€‚ Ctrl+Alt+Cã§è‰²è¦šè¨­å®šã€Ctrl+Alt+Hã§ãƒã‚¤ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆã€Ctrl+Alt+Mã§ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³å‰Šæ¸›ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã¾ã™ã€‚ ",-1)),g("div",W,[g("section",J,[t[22]||(t[22]=g("h3",null,"è¦–è¦šè¨­å®š",-1)),g("div",Z,[t[17]||(t[17]=g("label",{for:"color-scheme"},"è‰²è¦šã‚µãƒãƒ¼ãƒˆ",-1)),f(g("select",{id:"color-scheme","onUpdate:modelValue":t[1]||(t[1]=e=>c.value.colorScheme=e),onChange:S},t[16]||(t[16]=[g("option",{value:"default"},"æ¨™æº–",-1),g("option",{value:"protanopia"},"èµ¤è‰²è¦šç•°å¸¸ï¼ˆ1å‹ï¼‰",-1),g("option",{value:"deuteranopia"},"ç·‘è‰²è¦šç•°å¸¸ï¼ˆ2å‹ï¼‰",-1),g("option",{value:"tritanopia"},"é’è‰²è¦šç•°å¸¸ï¼ˆ3å‹ï¼‰",-1),g("option",{value:"achromatopsia"},"å…¨è‰²è¦šç•°å¸¸",-1)]),544),[[x,c.value.colorScheme]]),g("button",{class:"preview-button","aria-label":"è‰²è¦šè¨­å®šã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼",onClick:t[2]||(t[2]=e=>((e,t)=>{const a=c.value[e];c.value[e]=t,L(),setTimeout(()=>{c.value[e]===t&&(c.value[e]=a,L())},3e3)})("colorScheme",c.value.colorScheme))}," ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ ")]),g("div",Y,[g("label",X,[f(g("input",{id:"high-contrast","onUpdate:modelValue":t[3]||(t[3]=e=>c.value.highContrast=e),type:"checkbox",onChange:S},null,544),[[w,c.value.highContrast]]),t[18]||(t[18]=b(" ãƒã‚¤ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ ",-1))]),t[19]||(t[19]=g("span",{class:"setting-description"}," ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆã‚’é«˜ã‚ã¦è¦–èªæ€§ã‚’å‘ä¸Šã•ã›ã¾ã™ ",-1))]),g("div",ee,[t[21]||(t[21]=g("label",{for:"font-size"},"æ–‡å­—ã‚µã‚¤ã‚º",-1)),f(g("select",{id:"font-size","onUpdate:modelValue":t[4]||(t[4]=e=>c.value.fontSize=e),onChange:S},t[20]||(t[20]=[g("option",{value:"small"},"å°ï¼ˆ14pxï¼‰",-1),g("option",{value:"medium"},"ä¸­ï¼ˆ16pxï¼‰",-1),g("option",{value:"large"},"å¤§ï¼ˆ20pxï¼‰",-1),g("option",{value:"extra-large"},"ç‰¹å¤§ï¼ˆ24pxï¼‰",-1)]),544),[[x,c.value.fontSize]])])]),g("section",te,[t[26]||(t[26]=g("h3",null,"ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š",-1)),g("div",ae,[g("label",ne,[f(g("input",{id:"reduce-motion","onUpdate:modelValue":t[5]||(t[5]=e=>c.value.reduceMotion=e),type:"checkbox",onChange:S},null,544),[[w,c.value.reduceMotion]]),t[23]||(t[23]=b(" ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‰Šæ¸› ",-1))]),t[24]||(t[24]=g("span",{class:"setting-description"}," ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æœ€å°é™ã«æŠ‘ãˆã¾ã™ ",-1))]),c.value.reduceMotion?m("",!0):(i(),s("div",se,[t[25]||(t[25]=g("label",{for:"animation-speed"},"ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é€Ÿåº¦",-1)),f(g("input",{id:"animation-speed","onUpdate:modelValue":t[6]||(t[6]=e=>c.value.animationSpeed=e),type:"range",min:"0.1",max:"2.0",step:"0.1",onChange:S},null,544),[[k,c.value.animationSpeed,void 0,{number:!0}]]),g("span",ie,y(c.value.animationSpeed)+"x",1)]))]),g("section",oe,[t[30]||(t[30]=g("h3",null,"ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªè¨­å®š",-1)),g("div",re,[g("label",le,[f(g("input",{id:"screen-reader","onUpdate:modelValue":t[7]||(t[7]=e=>c.value.screenReaderEnabled=e),type:"checkbox",onChange:S},null,544),[[w,c.value.screenReaderEnabled]]),t[27]||(t[27]=b(" ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œã‚’æœ‰åŠ¹åŒ– ",-1))])]),g("div",ce,[g("label",de,[f(g("input",{id:"audio-descriptions","onUpdate:modelValue":t[8]||(t[8]=e=>c.value.audioDescriptions=e),type:"checkbox",onChange:S},null,544),[[w,c.value.audioDescriptions]]),t[28]||(t[28]=b(" éŸ³å£°èª¬æ˜ã‚’æœ‰åŠ¹åŒ– ",-1))])]),g("div",ue,[t[29]||(t[29]=g("label",{for:"sound-volume"},"åŠ¹æœéŸ³ã®éŸ³é‡",-1)),f(g("input",{id:"sound-volume","onUpdate:modelValue":t[9]||(t[9]=e=>c.value.soundEffectsVolume=e),type:"range",min:"0",max:"100",step:"5",onChange:S},null,544),[[k,c.value.soundEffectsVolume,void 0,{number:!0}]]),g("span",pe,y(c.value.soundEffectsVolume)+"%",1)])]),g("section",he,[t[35]||(t[35]=g("h3",null,"ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³è¨­å®š",-1)),g("div",me,[g("label",ve,[f(g("input",{id:"sticky-keys","onUpdate:modelValue":t[10]||(t[10]=e=>c.value.stickyKeys=e),type:"checkbox",onChange:S},null,544),[[w,c.value.stickyKeys]]),t[31]||(t[31]=b(" ã‚¹ãƒ†ã‚£ãƒƒã‚­ãƒ¼ã‚­ãƒ¼ ",-1))]),t[32]||(t[32]=g("span",{class:"setting-description"}," ä¿®é£¾ã‚­ãƒ¼ã‚’ä¸€åº¦ã«æŠ¼ã™å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ ",-1))]),g("div",ge,[t[34]||(t[34]=g("label",{for:"touch-target-size"},"ã‚¿ãƒƒãƒã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚µã‚¤ã‚º",-1)),f(g("select",{id:"touch-target-size","onUpdate:modelValue":t[11]||(t[11]=e=>c.value.touchTargetSize=e),onChange:S},t[33]||(t[33]=[g("option",{value:"default"},"æ¨™æº–ï¼ˆ44pxï¼‰",-1),g("option",{value:"large"},"å¤§ï¼ˆ56pxï¼‰",-1),g("option",{value:"extra-large"},"ç‰¹å¤§ï¼ˆ72pxï¼‰",-1)]),544),[[x,c.value.touchTargetSize]])])])]),g("div",fe,[g("button",{class:"reset-button","aria-label":"ã™ã¹ã¦ã®è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆ",onClick:_}," è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆ "),g("button",{class:"save-button","aria-label":"è¨­å®šã‚’ä¿å­˜ã—ã¦é–‰ã˜ã‚‹",onClick:t[12]||(t[12]=e=>n("close"))}," ä¿å­˜ã—ã¦é–‰ã˜ã‚‹ ")])])])):m("",!0)]),_:1}))}}),[["__scopeId","data-v-a0f37523"]]);class ye{constructor(e={}){t(this,"focusedElement",null),t(this,"indicator"),t(this,"options"),this.options={color:e.color||"#818CF8",width:e.width||3,style:e.style||"solid",offset:e.offset||4,borderRadius:e.borderRadius||8},this.indicator=this.createIndicator(),document.body.appendChild(this.indicator),this.setupEventListeners()}createIndicator(){const e=document.createElement("div");return e.className="focus-indicator",e.style.cssText=`\n      position: fixed;\n      pointer-events: none;\n      z-index: 10000;\n      transition: all 200ms cubic-bezier(0.25, 0.46, 0.45, 0.94);\n      opacity: 0;\n      border: ${this.options.width}px ${this.options.style} ${this.options.color};\n      border-radius: ${this.options.borderRadius}px;\n      box-shadow: 0 0 20px rgba(129, 140, 248, 0.4);\n    `,e}setupEventListeners(){document.addEventListener("focusin",this.handleFocusIn.bind(this)),document.addEventListener("focusout",this.handleFocusOut.bind(this)),window.addEventListener("scroll",this.updatePosition.bind(this),!0),window.addEventListener("resize",this.updatePosition.bind(this)),new MutationObserver(()=>{this.focusedElement&&this.updatePosition()}).observe(document.body,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["style","class"]})}handleFocusIn(e){const t=e.target;this.isFocusableElement(t)&&(this.focusedElement=t,this.showIndicator(t))}handleFocusOut(){this.focusedElement=null,this.hideIndicator()}isFocusableElement(e){return["button","input","select","textarea","a[href]",'[tabindex]:not([tabindex="-1"])',"[contenteditable]"].some(t=>e.matches(t)||e.closest(t))}showIndicator(e){const t=e.getBoundingClientRect(),a=this.options.offset;this.indicator.style.left=t.left-a+"px",this.indicator.style.top=t.top-a+"px",this.indicator.style.width=`${t.width+2*a}px`,this.indicator.style.height=`${t.height+2*a}px`,this.indicator.style.opacity="1";const n=window.getComputedStyle(e).borderRadius;n&&"0px"!==n&&(this.indicator.style.borderRadius=n)}hideIndicator(){this.indicator.style.opacity="0"}updatePosition(){this.focusedElement&&this.focusedElement===document.activeElement&&this.showIndicator(this.focusedElement)}setOptions(e){Object.assign(this.options,e),this.indicator.style.border=`${this.options.width}px ${this.options.style} ${this.options.color}`,this.indicator.style.borderRadius=`${this.options.borderRadius}px`,this.focusedElement&&this.updatePosition()}destroy(){this.indicator.remove(),document.removeEventListener("focusin",this.handleFocusIn.bind(this)),document.removeEventListener("focusout",this.handleFocusOut.bind(this)),window.removeEventListener("scroll",this.updatePosition.bind(this),!0),window.removeEventListener("resize",this.updatePosition.bind(this))}}const xe={key:0,class:"keyboard-hints",role:"tooltip","aria-live":"polite"},we={class:"hints-list"},ke={class:"hint-key"},Ce={class:"hint-description"},Ee={key:0,class:"settings-panel"},Se=["value"],Le=["value"],_e=O(a({__name:"VisualIndicators",props:{enabled:{type:Boolean,default:!0},color:{default:"#818CF8"},width:{default:3},style:{default:"solid"},offset:{default:4},borderRadius:{default:8},showKeyboardHints:{type:Boolean,default:!0},reducedMotion:{type:Boolean,default:!1}},setup(e,{expose:t}){const a=e,c=d(a.enabled),p=d({color:a.color,width:a.width,style:a.style,offset:a.offset,borderRadius:a.borderRadius});let h=null;const v=d(!1),x=d(null),k=n(()=>({"--focus-color":p.value.color,"--focus-width":`${p.value.width}px`,"--focus-offset":`${p.value.offset}px`,"--focus-radius":`${p.value.borderRadius}px`})),M=n(()=>[{key:"Tab",description:"æ¬¡ã®è¦ç´ ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹"},{key:"Shift + Tab",description:"å‰ã®è¦ç´ ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹"},{key:"Enter",description:"é¸æŠã—ãŸè¦ç´ ã‚’å®Ÿè¡Œ"},{key:"Space",description:"ãƒœã‚¿ãƒ³ã‚„ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’æ“ä½œ"},{key:"Arrow Keys",description:"ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚„é¸æŠè‚¢ã‚’ç§»å‹•"},{key:"Escape",description:"ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚„ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹"}]),F=()=>{c.value&&!h&&(h=new ye(p.value))},I=()=>{h&&(h.destroy(),h=null)},A=()=>{h&&h.setOptions(p.value)},D=()=>{a.showKeyboardHints&&(v.value=!0,x.value&&clearTimeout(x.value),x.value=window.setTimeout(()=>{v.value=!1},5e3))},$=()=>{v.value=!1,x.value&&(clearTimeout(x.value),x.value=null)},P=e=>{"Tab"===e.key&&D()},z=e=>{Object.assign(p.value,e),A()},R=()=>{c.value=!c.value,c.value?F():I()};return u(()=>{F(),document.addEventListener("keydown",P),window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(p.value={...p.value,offset:2},A())}),C(()=>{I(),document.removeEventListener("keydown",P),x.value&&clearTimeout(x.value)}),t({updateSettings:z,toggleEnabled:R,showKeyboardHints:D,hideKeyboardHints:$}),(e,t)=>(i(),s("div",{class:S(["visual-indicators",{"reduced-motion":e.reducedMotion,"hints-visible":v.value}]),style:E(k.value)},[o(r,{name:"hints-fade"},{default:l(()=>[v.value&&D?(i(),s("div",xe,[g("div",{class:"hints-header"},[t[3]||(t[3]=g("h3",{class:"hints-title"},"ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ",-1)),g("button",{class:"hints-close","aria-label":"ãƒ’ãƒ³ãƒˆã‚’é–‰ã˜ã‚‹",onClick:$}," Ã— ")]),g("ul",we,[(i(!0),s(L,null,_(M.value,e=>(i(),s("li",{key:e.key,class:"hint-item"},[g("kbd",ke,y(e.key),1),g("span",Ce,y(e.description),1)]))),128))])])):m("",!0)]),_:1}),T(!1)?(i(),s("div",Ee,[t[7]||(t[7]=g("h4",null,"ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼è¨­å®š",-1)),g("label",null,[f(g("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),type:"checkbox",onChange:R},null,544),[[w,c.value]]),t[4]||(t[4]=b(" æœ‰åŠ¹ ",-1))]),g("label",null,[t[5]||(t[5]=b(" è‰²: ",-1)),g("input",{value:p.value.color,type:"color",onInput:t[1]||(t[1]=e=>z({color:e.target.value}))},null,40,Se)]),g("label",null,[t[6]||(t[6]=b(" å¹…: ",-1)),g("input",{value:p.value.width,type:"range",min:"1",max:"10",onInput:t[2]||(t[2]=e=>z({width:parseInt(e.target.value)}))},null,40,Le)])])):m("",!0)],6))}}),[["__scopeId","data-v-3bb81bcd"]]),Te=["data-severity"],Me={key:0,class:"error-minimal"},Fe={key:1,class:"error-detailed"},Ie={class:"error-user-message"},Ae={class:"error-actions"},De=["disabled"],$e={key:0,class:"error-details"},Pe={class:"error-technical"},ze={key:0,class:"error-stack"},Re={key:2,class:"error-custom"},Ne=O(a({__name:"ErrorBoundary",props:{fallback:{default:"detailed"},onError:{},canRecover:{type:Boolean,default:!0},recoveryMessage:{default:"ã‚¨ãƒ©ãƒ¼ã‹ã‚‰å›å¾©ã™ã‚‹ã«ã¯ã€ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„"}},emits:["error","recover"],setup(e,{emit:t}){const a=e,o=t,r=d(!1),l=d(null),u=d(""),p=d(0),h=d(!1),v=n(()=>{if(!l.value)return"low";const e=l.value.message.toLowerCase();return e.includes("cannot read")||e.includes("undefined")?"high":e.includes("network")||e.includes("fetch")?"medium":"low"}),f=n(()=>{if(!l.value)return"";const e=l.value.message;return e.includes("dynamically imported module")||e.includes("Failed to fetch")?"ã‚¢ãƒ—ãƒªã®ä¸€éƒ¨ãŒèª­ã¿è¾¼ã‚ã¾ã›ã‚“ã§ã—ãŸã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„":e.includes("Network")||e.includes("fetch")?"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸ":e.includes("Cannot read")||e.includes("Cannot access")?"ç”»é¢ã®è¡¨ç¤ºä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ":e.includes("undefined")||e.includes("null")?"ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ":e.includes("timeout")?"å‡¦ç†ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„":e.includes("Permission denied")||e.includes("CORS")?"ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“":"äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ"});M((e,t,n)=>(console.error("[ErrorBoundary] Caught error:",e),console.error("[ErrorBoundary] Error info:",n),console.error("[ErrorBoundary] Component instance:",t),r.value=!0,l.value=e,u.value=n,p.value++,a.onError&&a.onError(e,t,n),o("error",e,n),!1));const x=async()=>{h.value=!0;try{r.value=!1,l.value=null,u.value="",o("recover"),await new Promise(e=>setTimeout(e,100))}catch(e){console.error("[ErrorBoundary] Recovery failed:",e),r.value=!0}finally{h.value=!1}},w=()=>{window.location.reload()},k=async()=>{if(!l.value)return;const e=`\nã‚¨ãƒ©ãƒ¼: ${l.value.message}\nã‚¹ã‚¿ãƒƒã‚¯: ${l.value.stack||"N/A"}\næƒ…å ±: ${u.value}\næ™‚åˆ»: ${(new Date).toISOString()}\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ: ${navigator.userAgent}\n  `.trim();try{await navigator.clipboard.writeText(e),alert("ã‚¨ãƒ©ãƒ¼è©³ç´°ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ")}catch(t){console.error("Failed to copy error details:",t)}},C=()=>{if(!l.value)return;const e=new CustomEvent("app:send-error-report",{detail:{error:l.value,info:u.value,component:"ErrorBoundary"}});window.dispatchEvent(e),alert("ã‚¨ãƒ©ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆã‚’é€ä¿¡ã—ã¾ã—ãŸ")};return(e,t)=>r.value?(i(),s("div",{key:0,class:"error-boundary","data-severity":v.value},["minimal"===e.fallback?(i(),s("div",Me,[t[0]||(t[0]=g("p",{class:"error-message"},"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",-1)),g("button",{class:"error-action-btn",onClick:w}," ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ ")])):"detailed"===e.fallback?(i(),s("div",Fe,[t[5]||(t[5]=F('<div class="error-icon" aria-hidden="true" data-v-e6800a6b><svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" data-v-e6800a6b><circle cx="12" cy="12" r="10" stroke-width="2" data-v-e6800a6b></circle><line x1="12" y1="8" x2="12" y2="12" stroke-width="2" data-v-e6800a6b></line><line x1="12" y1="16" x2="12.01" y2="16" stroke-width="2" data-v-e6800a6b></line></svg></div><h2 class="error-title" data-v-e6800a6b>ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</h2>',2)),g("p",Ie,y(f.value),1),g("div",Ae,[e.canRecover&&!h.value?(i(),s("button",{key:0,class:"error-action-btn primary",disabled:p.value>3,onClick:x},y(p.value>3?"å›å¾©ã§ãã¾ã›ã‚“":"å›å¾©ã‚’è©¦ã¿ã‚‹"),9,De)):m("",!0),g("button",{class:"error-action-btn secondary",onClick:w}," ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ ")]),T(!1)?(i(),s("details",$e,[t[4]||(t[4]=g("summary",null,"ã‚¨ãƒ©ãƒ¼è©³ç´°ï¼ˆé–‹ç™ºè€…å‘ã‘ï¼‰",-1)),g("div",Pe,[g("p",null,[t[1]||(t[1]=g("strong",null,"ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:",-1)),b(" "+y(l.value?.message),1)]),g("p",null,[t[2]||(t[2]=g("strong",null,"ã‚¨ãƒ©ãƒ¼æƒ…å ±:",-1)),b(" "+y(u.value),1)]),g("p",null,[t[3]||(t[3]=g("strong",null,"ã‚¨ãƒ©ãƒ¼å›æ•°:",-1)),b(" "+y(p.value),1)]),l.value?.stack?(i(),s("pre",ze,y(l.value.stack),1)):m("",!0),g("div",{class:"error-dev-actions"},[g("button",{class:"error-action-btn small",onClick:k}," è©³ç´°ã‚’ã‚³ãƒ”ãƒ¼ "),g("button",{class:"error-action-btn small",onClick:C}," ãƒ¬ãƒãƒ¼ãƒˆé€ä¿¡ ")])])])):m("",!0)])):"custom"===e.fallback?(i(),s("div",Re,[c(e.$slots,"error",{error:l.value,retry:x,reload:w},void 0)])):m("",!0)],8,Te)):c(e.$slots,"default",{key:1},void 0)}}),[["__scopeId","data-v-e6800a6b"]]),je=new class{constructor(){t(this,"patterns",[]),t(this,"fallbackMessages",new Map),this.initializeDefaultPatterns(),this.initializeFallbackMessages()}initializeDefaultPatterns(){this.patterns.push({id:"network-offline",pattern:/network|offline|connection/i,message:{title:"ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šãŒåˆ‡æ–­ã•ã‚Œã¦ã„ã¾ã™",description:"ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ã€ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚",actionLabel:"å†è©¦è¡Œ",actionType:"retry",icon:"ğŸ“¡",severity:"error",helpUrl:"/help/network-issues"},conditions:{category:["network"]}}),this.patterns.push({id:"network-timeout",pattern:/timeout|slow/i,message:{title:"æ¥ç¶šãŒé…ããªã£ã¦ã„ã¾ã™",description:"ã‚µãƒ¼ãƒãƒ¼ã¸ã®æ¥ç¶šã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã¾ã™ã€‚ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚",actionLabel:"ã‚‚ã†ä¸€åº¦è©¦ã™",actionType:"retry",icon:"â°",severity:"warning"},conditions:{category:["network","async"]}}),this.patterns.push({id:"game-save-failed",pattern:/save|storage|quota/i,message:{title:"ã‚²ãƒ¼ãƒ ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ",description:"ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å®¹é‡ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚",actionLabel:"ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ç¢ºèª",actionType:"navigate",actionData:{url:"/settings/storage"},icon:"ğŸ’¾",severity:"error",showDetails:!0},conditions:{category:["game","system"]}}),this.patterns.push({id:"game-state-corrupted",pattern:/corrupted|invalid.*state|cannot.*read.*game/i,message:{title:"ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã«å•é¡ŒãŒã‚ã‚Šã¾ã™",description:"ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ãŒç ´æã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æ–°ã—ã„ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚",actionLabel:"æ–°ã—ã„ã‚²ãƒ¼ãƒ ",actionType:"navigate",actionData:{url:"/new-game"},icon:"ğŸ®",severity:"critical",showDetails:!0},conditions:{category:["game"],severity:["high","critical"]}}),this.patterns.push({id:"ui-component-error",pattern:/component|render|mount/i,message:{title:"ç”»é¢ã®è¡¨ç¤ºã‚¨ãƒ©ãƒ¼",description:"ç”»é¢ã®ä¸€éƒ¨ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã™ã‚‹ã¨è§£æ±ºã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸ–¥ï¸",severity:"warning"},conditions:{category:["vue"]}}),this.patterns.push({id:"performance-memory",pattern:/memory|heap|stack.*overflow/i,message:{title:"ãƒ¡ãƒ¢ãƒªä¸è¶³ã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™",description:"ä»–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‰ã˜ã¦ã€ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ã—ã¦ãã ã•ã„ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"âš¡",severity:"error",helpUrl:"/help/performance"},conditions:{category:["performance","system"]}}),this.patterns.push({id:"security-cors",pattern:/cors|cross.*origin|blocked/i,message:{title:"ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ¶é™ãŒç™ºç”Ÿã—ã¾ã—ãŸ",description:"ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã«ã‚ˆã‚Šã€ä¸€éƒ¨ã®æ©Ÿèƒ½ãŒåˆ¶é™ã•ã‚Œã¦ã„ã¾ã™ã€‚",actionLabel:"ã‚µãƒãƒ¼ãƒˆã«é€£çµ¡",actionType:"contact",icon:"ğŸ”’",severity:"error",helpUrl:"/help/security-issues"},conditions:{category:["security"]}}),this.patterns.push({id:"js-undefined",pattern:/undefined|null.*property|cannot.*read/i,message:{title:"äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",description:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§äºˆæœŸã—ãªã„å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚é–‹ç™ºãƒãƒ¼ãƒ ã«å ±å‘Šã•ã‚Œã¾ã™ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"âš ï¸",severity:"error",showDetails:!0},conditions:{category:["javascript"],severity:["high","critical"]}}),this.patterns.push({id:"resource-load-failed",pattern:/loading|chunk.*error|failed.*fetch.*resource/i,message:{title:"ãƒªã‚½ãƒ¼ã‚¹ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ",description:"ãƒšãƒ¼ã‚¸ã®ä¸€éƒ¨ã®ãƒªã‚½ãƒ¼ã‚¹ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸ“¦",severity:"warning"},conditions:{category:["network","system"]}})}initializeFallbackMessages(){this.fallbackMessages.set("network",{title:"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼",description:"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"å†è©¦è¡Œ",actionType:"retry",icon:"ğŸŒ",severity:"error"}),this.fallbackMessages.set("vue",{title:"UI ã‚¨ãƒ©ãƒ¼",description:"ç”»é¢ã®è¡¨ç¤ºã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸ–¼ï¸",severity:"warning"}),this.fallbackMessages.set("javascript",{title:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼",description:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"âš™ï¸",severity:"error"}),this.fallbackMessages.set("game",{title:"ã‚²ãƒ¼ãƒ ã‚¨ãƒ©ãƒ¼",description:"ã‚²ãƒ¼ãƒ ä¸­ã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"ã‚²ãƒ¼ãƒ ã‚’å†é–‹",actionType:"retry",icon:"ğŸ®",severity:"error"}),this.fallbackMessages.set("async",{title:"å‡¦ç†ã‚¨ãƒ©ãƒ¼",description:"éåŒæœŸå‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"å†è©¦è¡Œ",actionType:"retry",icon:"â³",severity:"warning"}),this.fallbackMessages.set("performance",{title:"ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å•é¡Œ",description:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å‹•ä½œãŒé‡ããªã£ã¦ã„ã¾ã™ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸš€",severity:"warning"}),this.fallbackMessages.set("security",{title:"ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¨ãƒ©ãƒ¼",description:"ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ¶é™ã«ã‚ˆã‚Šæ“ä½œãŒåˆ¶é™ã•ã‚Œã¾ã—ãŸã€‚",actionLabel:"ã‚µãƒãƒ¼ãƒˆã«é€£çµ¡",actionType:"contact",icon:"ğŸ”",severity:"error"}),this.fallbackMessages.set("user",{title:"ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã‚¨ãƒ©ãƒ¼",description:"æ“ä½œã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"ã‚‚ã†ä¸€åº¦è©¦ã™",actionType:"retry",icon:"ğŸ‘¤",severity:"info"}),this.fallbackMessages.set("system",{title:"ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼",description:"ã‚·ã‚¹ãƒ†ãƒ ã§å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸ–¥ï¸",severity:"error"})}generateUserMessage(e){for(const a of this.patterns)if(this.matchesPattern(e,a))return this.enrichMessage(a.message,e);const t=this.fallbackMessages.get(e.category);return t?this.enrichMessage(t,e):this.enrichMessage({title:"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",description:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãæ™‚é–“ã‚’ãŠã„ã¦ã‹ã‚‰å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"â—",severity:"error"},e)}matchesPattern(e,t){if(!(t.pattern instanceof RegExp?t.pattern.test(e.message):e.message.toLowerCase().includes(t.pattern.toLowerCase())))return!1;if(t.conditions){const{category:a,severity:n,context:s}=t.conditions;if(a&&!a.includes(e.category))return!1;if(n&&!n.includes(e.severity))return!1;if(s&&!s(e))return!1}return!0}enrichMessage(e,t){return new Date(t.timestamp).toLocaleTimeString(),{...e,description:`${e.description}${t.context?.deviceInfo?.isMobile?" (ãƒ¢ãƒã‚¤ãƒ«)":""}`,actionData:{...e.actionData,timestamp:t.timestamp,errorId:t.fingerprint,component:t.component}}}addPattern(e){this.patterns.some(t=>t.id===e.id)?console.warn(`Pattern with id "${e.id}" already exists`):this.patterns.unshift(e)}removePattern(e){const t=this.patterns.findIndex(t=>t.id===e);return-1!==t&&(this.patterns.splice(t,1),!0)}getPatterns(){return[...this.patterns]}previewMessage(e,t,a="medium"){const n={message:e,category:t,severity:a,timestamp:Date.now(),userAgent:navigator.userAgent};return this.generateUserMessage(n)}getStats(){return{patternsCount:this.patterns.length,categoriesCount:this.fallbackMessages.size,patterns:this.patterns.map(e=>({id:e.id,hasConditions:Boolean(e.conditions)}))}}},Be={class:"error-notification-container",role:"alert","aria-live":"polite"},He=["aria-label"],Oe={class:"notification-content"},Ge={class:"notification-icon","aria-hidden":"true"},Ve={class:"notification-body"},Ke={class:"notification-title"},Ue={class:"notification-description"},Qe={key:0,class:"notification-actions"},qe=["onClick"],We=["onClick"],Je=["onClick"],Ze={key:1,class:"notification-details"},Ye={class:"detail-section"},Xe={key:0,class:"detail-section"},et={class:"detail-section"},tt={class:"detail-tag"},at={class:"detail-tag"},nt={key:1,class:"detail-section"},st={class:"detail-section"},it=["aria-label","onClick"],ot=O(a({__name:"ErrorNotification",setup(e,{expose:t}){const a=d([]),r=e=>{const t=`${Date.now()}-${Math.random()}`,n={...e,id:t,timestamp:Date.now(),autoHide:e.autoHide??"critical"!==e.userMessage.severity,hideDelay:e.hideDelay??5e3,isExpanded:!1};a.value.unshift(n),a.value.length>3&&(a.value=a.value.slice(0,3)),n.autoHide&&setTimeout(()=>{c(t)},n.hideDelay)},c=e=>{const t=a.value.findIndex(t=>t.id===e);-1!==t&&a.value.splice(t,1)},p=e=>{const t=e.detail;if(a.value.some(e=>e.originalError.fingerprint===t.fingerprint))return;const n=je.generateUserMessage(t);r({userMessage:n,originalError:t})},v=e=>{switch(e){case"critical":return"ğŸš¨";case"error":return"âš ï¸";case"warning":return"â„¹ï¸";case"info":return"ğŸ’¡"}},f=e=>{switch(e){case"critical":return"notification-critical";case"error":return"notification-error";case"warning":return"notification-warning";case"info":return"notification-info"}},x=e=>{const{actionType:t,actionData:a}=e.userMessage;switch(t){case"reload":window.location.reload();break;case"retry":const t=new CustomEvent("app:retry-action",{detail:{errorId:a?.errorId,component:a?.component}});window.dispatchEvent(t),c(e.id);break;case"navigate":a?.url&&(window.location.href=a.url);break;case"contact":const n=new CustomEvent("app:open-support",{detail:{errorInfo:e.originalError}});window.dispatchEvent(n);break;default:c(e.id)}},w=e=>{const t=a.value.find(t=>t.id===e);t&&(t.isExpanded=!t.isExpanded)},k=n(()=>a.value.map((e,t)=>({...e,offset:t*(e.isExpanded?120:80),opacity:t<3?1:.5})));return u(()=>{window.addEventListener("app:error",p),window.addEventListener("app:system-alert",e=>{const{message:t}=e.detail;r({userMessage:{title:"ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ©ãƒ¼ãƒˆ",description:t,actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸš€",severity:"critical",showDetails:!1},originalError:{message:t,category:"system",severity:"critical",timestamp:Date.now(),userAgent:navigator.userAgent},autoHide:!1})})}),C(()=>{window.removeEventListener("app:error",p),window.removeEventListener("app:system-alert",()=>{})}),t({addNotification:r,removeNotification:c,clearAll:()=>{a.value=[]},executeAction:x,toggleDetails:w}),(e,t)=>(i(),h(A,{to:"body"},[g("div",Be,[o(I,{name:"notification",tag:"div"},{default:l(()=>[(i(!0),s(L,null,_(k.value,(e,a)=>{return i(),s("div",{key:e.id,class:S(["error-notification",f(e.userMessage.severity),{expanded:e.isExpanded}]),style:E({transform:`translateY(${e.offset}px)`,opacity:e.opacity,zIndex:1e3-a}),role:"alertdialog","aria-label":`${e.userMessage.severity}ã‚¨ãƒ©ãƒ¼: ${e.userMessage.title}`},[g("div",Oe,[g("span",Ge,y((n=e.userMessage,n.icon||v(n.severity))),1),g("div",Ve,[g("h4",Ke,y(e.userMessage.title),1),g("p",Ue,y(e.userMessage.description),1),e.userMessage.actionLabel?(i(),s("div",Qe,[g("button",{class:"notification-action-btn primary",onClick:t=>x(e)},y(e.userMessage.actionLabel),9,qe),e.userMessage.helpUrl?(i(),s("button",{key:0,class:"notification-action-btn secondary small",onClick:t=>{return a=e.userMessage.helpUrl,void window.open(a,"_blank","noopener,noreferrer");var a}}," ãƒ˜ãƒ«ãƒ— ",8,We)):m("",!0),e.userMessage.showDetails?(i(),s("button",{key:1,class:"notification-action-btn secondary small",onClick:t=>w(e.id)},y(e.isExpanded?"è©³ç´°ã‚’éš ã™":"è©³ç´°ã‚’è¡¨ç¤º"),9,Je)):m("",!0)])):m("",!0),e.isExpanded&&e.userMessage.showDetails?(i(),s("div",Ze,[g("div",Ye,[t[0]||(t[0]=g("strong",null,"ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:",-1)),g("code",null,y(e.originalError.message),1)]),e.originalError.component?(i(),s("div",Xe,[t[1]||(t[1]=g("strong",null,"ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ:",-1)),g("code",null,y(e.originalError.component),1)])):m("",!0),g("div",et,[t[2]||(t[2]=g("strong",null,"ã‚«ãƒ†ã‚´ãƒª:",-1)),g("span",tt,y(e.originalError.category),1),t[3]||(t[3]=g("strong",null,"æ·±åˆ»åº¦:",-1)),g("span",at,y(e.originalError.severity),1)]),e.originalError.context?.route?(i(),s("div",nt,[t[4]||(t[4]=g("strong",null,"ãƒšãƒ¼ã‚¸:",-1)),g("code",null,y(e.originalError.context.route),1)])):m("",!0),g("div",st,[t[5]||(t[5]=g("strong",null,"æ™‚åˆ»:",-1)),b(" "+y(new Date(e.originalError.timestamp).toLocaleString()),1)])])):m("",!0)]),g("button",{class:"notification-close","aria-label":`é€šçŸ¥ã‚’é–‰ã˜ã‚‹: ${e.userMessage.title}`,onClick:t=>c(e.id)},t[6]||(t[6]=[g("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[g("line",{x1:"18",y1:"6",x2:"6",y2:"18","stroke-width":"2"}),g("line",{x1:"6",y1:"6",x2:"18",y2:"18","stroke-width":"2"})],-1)]),8,it)]),e.autoHide?(i(),s("div",{key:0,class:"notification-progress",style:E({animationDuration:`${e.hideDelay}ms`})},null,4)):m("",!0)],14,He);var n}),128))]),_:1})])]))}}),[["__scopeId","data-v-eac2682b"]]);function rt(e){if("string"!=typeof e)throw new Error("å…¥åŠ›ã¯æ–‡å­—åˆ—ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™");return e.replace(/<[^>]*>/g,"").replace(/javascript:/gi,"").replace(/on\w+\s*=/gi,"").replace(/[<>"'&]/g,e=>({"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","&":"&amp;"}[e]||e)).replace(/[\u0002-\u001F\u007F-\u009F]/g,"").trim().slice(0,1e3)}class lt{constructor(){t(this,"focusableElements",[]),t(this,"currentFocusIndex",-1),t(this,"shortcuts",new Map),t(this,"isActive",!0),t(this,"focusVisibleEnabled",!0),this.setupEventListeners(),this.setupFocusVisible()}registerFocusableElement(e,t={}){const a={element:e,priority:t.priority||0,group:t.group,onFocus:t.onFocus,onBlur:t.onBlur,onActivate:t.onActivate},n=this.focusableElements.findIndex(t=>t.element===e);n>=0?this.focusableElements[n]=a:this.focusableElements.push(a),this.focusableElements.sort((e,t)=>t.priority-e.priority),this.setupElementAccessibility(e)}unregisterFocusableElement(e){const t=this.focusableElements.findIndex(t=>t.element===e);t>=0&&(this.focusableElements.splice(t,1),this.currentFocusIndex>=t&&(this.currentFocusIndex=Math.max(0,this.currentFocusIndex-1)))}registerShortcut(e){const t=this.createShortcutKey(e.key,e.modifiers||[]);this.shortcuts.set(t,e)}unregisterShortcut(e,t=[]){const a=this.createShortcutKey(e,t);this.shortcuts.delete(a)}focusNext(){0!==this.focusableElements.length&&(this.currentFocusIndex=(this.currentFocusIndex+1)%this.focusableElements.length,this.setFocus(this.currentFocusIndex))}focusPrevious(){0!==this.focusableElements.length&&(this.currentFocusIndex=this.currentFocusIndex<=0?this.focusableElements.length-1:this.currentFocusIndex-1,this.setFocus(this.currentFocusIndex))}focusGroup(e){const t=this.focusableElements.filter(t=>t.group===e);if(t.length>0){const e=this.focusableElements.indexOf(t[0]);e>=0&&(this.currentFocusIndex=e,this.setFocus(e))}}focusElement(e){const t=this.focusableElements.findIndex(t=>t.element===e);t>=0&&(this.currentFocusIndex=t,this.setFocus(t))}getCurrentFocusedElement(){return this.currentFocusIndex>=0&&this.currentFocusIndex<this.focusableElements.length?this.focusableElements[this.currentFocusIndex].element:null}startFocusTrap(e){const t=this.focusableElements.filter(t=>e.contains(t.element));t.length>0&&(this.focusableElements.forEach(t=>{e.contains(t.element)||(t.element.setAttribute("tabindex","-1"),t.element.setAttribute("aria-hidden","true"))}),this.focusElement(t[0].element))}endFocusTrap(){this.focusableElements.forEach(e=>{e.element.removeAttribute("tabindex"),e.element.removeAttribute("aria-hidden")})}toggleHelp(){const e=this.createHelpPanel();document.body.appendChild(e);const t=a=>{"Escape"===a.key&&(e.remove(),document.removeEventListener("keydown",t))};document.addEventListener("keydown",t);const a=e.querySelector("button");a&&a.focus()}createSkipLinks(){const e=document.createElement("div");e.className="skip-links",e.setAttribute("aria-label","ã‚¹ã‚­ãƒƒãƒ—ãƒªãƒ³ã‚¯");const t=this.createSkipLink("ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ç§»å‹•","#main-content"),a=this.createSkipLink("ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã«ç§»å‹•","#navigation"),n=this.createSkipLink("ãƒ•ãƒƒã‚¿ãƒ¼ã«ç§»å‹•","#footer");return e.appendChild(t),e.appendChild(a),e.appendChild(n),e}setActive(e){if(this.isActive=e,!e){const e=this.getCurrentFocusedElement();e&&e.blur()}}setFocusVisible(e){this.focusVisibleEnabled=e,document.documentElement.classList.toggle("keyboard-navigation",e)}setupEventListeners(){document.addEventListener("keydown",this.handleKeyDown.bind(this)),document.addEventListener("focusin",this.handleFocusIn.bind(this)),document.addEventListener("focusout",this.handleFocusOut.bind(this)),document.addEventListener("mousedown",()=>{document.documentElement.classList.remove("keyboard-navigation")})}handleKeyDown(e){if(!this.isActive)return;const t=this.createShortcutKey(e.key,this.getActiveModifiers(e)),a=this.shortcuts.get(t);if(a)return e.preventDefault(),void a.action();switch(e.key){case"Tab":e.preventDefault(),e.shiftKey?this.focusPrevious():this.focusNext();break;case"ArrowDown":case"ArrowRight":e.preventDefault(),this.focusNext();break;case"ArrowUp":case"ArrowLeft":e.preventDefault(),this.focusPrevious();break;case"Home":e.preventDefault(),this.currentFocusIndex=0,this.setFocus(0);break;case"End":e.preventDefault(),this.currentFocusIndex=this.focusableElements.length-1,this.setFocus(this.currentFocusIndex);break;case"Enter":case" ":const t=this.getCurrentFocusedElement();if(t){e.preventDefault();const a=this.focusableElements[this.currentFocusIndex];a.onActivate?a.onActivate():t.click()}break;case"F1":e.preventDefault(),this.toggleHelp()}}handleFocusIn(e){if(!this.focusVisibleEnabled)return;const t=e.target,a=this.focusableElements.findIndex(e=>e.element===t);if(a>=0){this.currentFocusIndex=a;const e=this.focusableElements[a];e.onFocus&&e.onFocus(),document.documentElement.classList.add("keyboard-navigation")}}handleFocusOut(e){const t=e.target,a=this.focusableElements.findIndex(e=>e.element===t);if(a>=0){const e=this.focusableElements[a];e.onBlur&&e.onBlur()}}setFocus(e){if(e<0||e>=this.focusableElements.length)return;const t=this.focusableElements[e].element;null!==t.offsetParent?(t.focus(),t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})):this.focusNext()}setupElementAccessibility(e){if(e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),!e.hasAttribute("role")){const t=e.tagName.toLowerCase();"div"!==t&&"span"!==t||e.setAttribute("role","button")}if(!e.hasAttribute("aria-label")&&!e.hasAttribute("aria-labelledby")){const t=e.textContent?.trim();t&&e.setAttribute("aria-label",t)}}createShortcutKey(e,t){return`${t.sort().join("+")}+${e.toLowerCase()}`}getActiveModifiers(e){const t=[];return e.ctrlKey&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&t.push("shift"),e.metaKey&&t.push("meta"),t}createSkipLink(e,t){const a=document.createElement("a");return a.href=t,a.textContent=e,a.className="skip-link",a.addEventListener("click",e=>{e.preventDefault();const a=document.querySelector(t);a&&a.focus()}),a}createHelpPanel(){const e=document.createElement("div");e.className="keyboard-help-panel",e.setAttribute("role","dialog"),e.setAttribute("aria-labelledby","help-title"),e.setAttribute("aria-modal","true");const t=Array.from(this.shortcuts.values()),a=document.createElement("div");a.className="help-content";const n=document.createElement("h2");n.id="help-title",n.textContent="ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ";const s=document.createElement("div");s.className="shortcuts-list";const i=document.createElement("div");i.className="shortcut-group";const o=document.createElement("h3");o.textContent="åŸºæœ¬ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³";const r=document.createElement("dl");if([{key:"Tab / Shift+Tab",desc:"æ¬¡/å‰ã®è¦ç´ ã«ç§»å‹•"},{key:"çŸ¢å°ã‚­ãƒ¼",desc:"æ–¹å‘ã«å¿œã˜ã¦ç§»å‹•"},{key:"Enter / Space",desc:"è¦ç´ ã‚’é¸æŠ/å®Ÿè¡Œ"},{key:"Home / End",desc:"æœ€åˆ/æœ€å¾Œã®è¦ç´ ã«ç§»å‹•"}].forEach(({key:e,desc:t})=>{const a=document.createElement("dt");a.textContent=e;const n=document.createElement("dd");n.textContent=t,r.appendChild(a),r.appendChild(n)}),i.appendChild(o),i.appendChild(r),s.appendChild(i),t.length>0){const e=document.createElement("div");e.className="shortcut-group";const a=document.createElement("h3");a.textContent="ã‚²ãƒ¼ãƒ æ“ä½œ";const n=document.createElement("dl");t.forEach(e=>{const t=document.createElement("dt");t.textContent=rt(this.formatShortcut(e));const a=document.createElement("dd");a.textContent=rt(e.description),n.appendChild(t),n.appendChild(a)}),e.appendChild(a),e.appendChild(n),s.appendChild(e)}const l=document.createElement("button");return l.type="button",l.textContent="é–‰ã˜ã‚‹ (Esc)",l.onclick=()=>{e.remove()},a.appendChild(n),a.appendChild(s),a.appendChild(l),e.appendChild(a),e}formatShortcut(e){return[...(e.modifiers||[]).map(e=>e.charAt(0).toUpperCase()+e.slice(1)),e.key].join(" + ")}setupFocusVisible(){const e=document.createElement("style");e.textContent="\n      .keyboard-navigation *:focus {\n        outline: 2px solid #818CF8;\n        outline-offset: 2px;\n        border-radius: 4px;\n      }\n      \n      .skip-links {\n        position: absolute;\n        top: -40px;\n        left: 6px;\n        z-index: 1000;\n      }\n      \n      .skip-link {\n        position: absolute;\n        left: -10000px;\n        top: auto;\n        width: 1px;\n        height: 1px;\n        overflow: hidden;\n        background: #000;\n        color: #fff;\n        padding: 8px 16px;\n        text-decoration: none;\n        border-radius: 4px;\n      }\n      \n      .skip-link:focus {\n        position: static;\n        width: auto;\n        height: auto;\n        left: auto;\n        top: auto;\n      }\n      \n      .keyboard-help-panel {\n        position: fixed;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        background: rgba(0, 0, 0, 0.95);\n        color: white;\n        padding: 2rem;\n        border-radius: 12px;\n        max-width: 500px;\n        max-height: 80vh;\n        overflow-y: auto;\n        z-index: 10000;\n      }\n      \n      .help-content h2 {\n        margin-top: 0;\n        color: #818CF8;\n      }\n      \n      .shortcuts-list dt {\n        font-weight: bold;\n        color: #FFD43B;\n        margin-top: 0.5rem;\n      }\n      \n      .shortcuts-list dd {\n        margin-left: 1rem;\n        margin-bottom: 0.5rem;\n      }\n      \n      .help-content button {\n        margin-top: 1rem;\n        padding: 0.5rem 1rem;\n        background: #818CF8;\n        color: white;\n        border: none;\n        border-radius: 4px;\n        cursor: pointer;\n      }\n    ",document.head.appendChild(e)}destroy(){this.focusableElements=[],this.shortcuts.clear(),document.removeEventListener("keydown",this.handleKeyDown.bind(this)),document.removeEventListener("focusin",this.handleFocusIn.bind(this)),document.removeEventListener("focusout",this.handleFocusOut.bind(this))}}const ct={class:"app-header"},dt=O(a({__name:"AppHeader",setup:e=>(e,t)=>(i(),s("header",ct,t[0]||(t[0]=[F('<div class="hero-section" data-v-dc8e6b29><div class="hero-background" data-v-dc8e6b29><div class="hero-orb hero-orb-1" data-v-dc8e6b29></div><div class="hero-orb hero-orb-2" data-v-dc8e6b29></div><div class="hero-orb hero-orb-3" data-v-dc8e6b29></div></div><div class="hero-content" data-v-dc8e6b29><div class="brand-logo pulse" data-v-dc8e6b29><div class="logo-glow" data-v-dc8e6b29></div><span class="logo-icon" data-v-dc8e6b29>ğŸ›¡ï¸</span></div><h1 class="hero-title bounce-in" style="animation-delay:0.2s;" data-v-dc8e6b29> äººç”Ÿå……å®Ÿã‚²ãƒ¼ãƒ  </h1><p class="hero-subtitle bounce-in" style="animation-delay:0.4s;" data-v-dc8e6b29> Life Fulfillment - ç”Ÿå‘½ä¿é™ºã‚’ã€Œäººç”Ÿã®å‘³æ–¹ã€ã¨ã—ã¦æã </p><div class="hero-accent bounce-in" style="animation-delay:0.6s;" data-v-dc8e6b29><span class="accent-icon" data-v-dc8e6b29>âœ¨</span><span class="accent-text" data-v-dc8e6b29>ä¸€äººã®æ™‚é–“ã‚’ã€æœ€é«˜ã®å†’é™ºã«</span><span class="accent-icon" data-v-dc8e6b29>âœ¨</span></div><div class="hero-stats bounce-in" style="animation-delay:0.8s;" data-v-dc8e6b29><div class="stat-item" data-v-dc8e6b29><span class="stat-value" data-v-dc8e6b29>100+</span><span class="stat-label" data-v-dc8e6b29>ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰</span></div><div class="stat-divider" data-v-dc8e6b29></div><div class="stat-item" data-v-dc8e6b29><span class="stat-value" data-v-dc8e6b29>7</span><span class="stat-label" data-v-dc8e6b29>äººç”Ÿã‚¹ãƒ†ãƒ¼ã‚¸</span></div><div class="stat-divider" data-v-dc8e6b29></div><div class="stat-item" data-v-dc8e6b29><span class="stat-value" data-v-dc8e6b29>âˆ</span><span class="stat-label" data-v-dc8e6b29>ãƒ—ãƒ¬ã‚¤ãƒ‘ã‚¿ãƒ¼ãƒ³</span></div></div></div></div>',1)])))}),[["__scopeId","data-v-dc8e6b29"]]),ut={id:"navigation",class:"action-section",role:"navigation","aria-label":"ãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³"},pt={class:"button-group"},ht=O(a({__name:"NavigationActions",emits:["start-game","start-tutorial"],setup(e,{expose:t}){const a=d(),n=d();return t({gameButtonRef:a,tutorialButtonRef:n}),(e,t)=>(i(),s("section",ut,[g("div",pt,[g("button",{ref_key:"gameButtonRef",ref:a,class:"btn btn-primary ripple-container glow-on-hover bounce-in","aria-label":"ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã™ã‚‹ (Alt+G)","aria-keyshortcuts":"Alt+G","aria-describedby":"game-description",onClick:t[0]||(t[0]=t=>e.$emit("start-game"))},t[2]||(t[2]=[g("span",{class:"btn-bg-effect"},null,-1),g("span",{class:"btn-icon","aria-hidden":"true"},"ğŸ®",-1),g("span",{class:"btn-text"},"ã‚²ãƒ¼ãƒ ã‚’ãƒ—ãƒ¬ã‚¤",-1),g("span",{class:"btn-arrow","aria-hidden":"true"},"â†’",-1)]),512),g("button",{ref_key:"tutorialButtonRef",ref:n,class:"btn btn-secondary ripple-container","aria-label":"ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹ã™ã‚‹ (Alt+T)","aria-keyshortcuts":"Alt+T","aria-describedby":"tutorial-description",onClick:t[1]||(t[1]=t=>e.$emit("start-tutorial"))},t[3]||(t[3]=[g("span",{class:"btn-bg-effect"},null,-1),g("span",{class:"btn-icon","aria-hidden":"true"},"ğŸ“š",-1),g("span",{class:"btn-text"},"ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«",-1)]),512)]),t[4]||(t[4]=g("div",{class:"sr-only"},[g("div",{id:"game-description"},"ä¿é™ºã‚’ãƒ†ãƒ¼ãƒã«ã—ãŸäººç”Ÿã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã—ã¾ã™"),g("div",{id:"tutorial-description"},"ã‚²ãƒ¼ãƒ ã®éŠã³æ–¹ã‚’å­¦ç¿’ã™ã‚‹ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹ã—ã¾ã™")],-1))]))}}),[["__scopeId","data-v-15895128"]]),mt=R("game",()=>{const e=D(null),t=d(!1),a=d(Date.now()),s=d([]),i=d(0),o=d(100),r=d("youth"),l=d(0),c=d("setup"),u=d("not_started"),p=d(null),h=d([]),m=d([]),v=d(0),g=d([]),f=d(!0),b=n(()=>i.value),y=n(()=>o.value),x=n(()=>s.value),w=n(()=>r.value),k=n(()=>l.value),C=n(()=>c.value),E=n(()=>u.value),S=n(()=>p.value),L=n(()=>e.value?e.value.insuranceTypeChoices:[]),_=n(()=>h.value),T=n(()=>m.value),M=n(()=>v.value),F=n(()=>g.value),I=d("");function A(){e.value&&(a.value=Date.now(),s.value=[...e.value.hand],i.value=e.value.vitality,o.value=e.value.maxVitality,r.value=e.value.stage,l.value=e.value.turn,c.value=e.value.phase,u.value=e.value.status,p.value=e.value.currentChallenge||null,h.value=[...e.value.activeInsurances],m.value=[...e.value.insuranceMarket],v.value=e.value.score,g.value=e.value.cardChoices?[...e.value.cardChoices]:[],console.log("[GameStore] State synced. Hand size:",s.value.length),"undefined"!=typeof window&&(window._gameStore={game:e.value}))}return{game:e,isInitialized:t,vitality:b,maxVitality:y,hand:x,currentStage:w,currentTurn:k,currentPhase:C,currentStatus:E,currentChallenge:S,insuranceTypeChoices:L,lastMessage:I,initializeGame:function(a){e.value=new j(a),t.value=!0,A()},startGame:function(){e.value&&(e.value.start(),A())},drawCards:async function(t){console.log("[GameStore] drawCards called",t),e.value?(await e.value.drawCards(t),console.log("[GameStore] drawCards finished, triggering update"),A()):console.error("[GameStore] Game instance is null")},startChallenge:function(t){e.value&&(e.value.startChallenge(t),A())},drawChallenge:function(){if(!e.value)return;if(e.value.currentChallenge)return;console.log("[GameStore] drawChallenge called. Deck size:",e.value.challengeDeck.size());const t=e.value.drawChallengeCard();t?(e.value.startChallenge(t),A()):(console.log("[GameStore] Challenge deck empty, advancing stage"),e.value.advanceStage(),"victory"===e.value.status?console.log("[GameStore] Victory!"):e.value.refillChallengeDeck(),A())},resolveChallenge:function(){if(!e.value)return;const t=e.value.resolveChallenge();return I.value=t.message,A(),t},selectInsurance:function(t){e.value&&(console.log("Selected insurance:",t),e.value.phase="end",A())},endTurn:function(){if(!e.value)return;const t=e.value.nextTurn();t.insuranceExpirations?I.value=t.insuranceExpirations.message:I.value=`Turn ${e.value.turn} started`,A()},toggleCardSelection:function(t){e.value&&(e.value.toggleCardSelection(t),A())},triggerUpdate:A,activeInsurances:_,insuranceMarket:T,score:M,cardChoices:F,startChallengePhase:function(){e.value&&(e.value.startChallengePhase(),A())},selectChallengeChoice:function(t){e.value&&(e.value.startChallenge(t),A())},selectDream:function(t){e.value&&(e.value.selectDream(t),A())},buyInsurance:function(t){e.value&&(e.value.cardManager.buyInsurance(t),t.cost>0&&e.value.applyDamage(t.cost),A())},isTutorialMode:f,toggleTutorialMode:function(){f.value=!f.value}}}),vt={class:"flex justify-between items-start mb-2"},gt={class:"text-xs font-bold uppercase tracking-wider opacity-70"},ft={key:0,class:"bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shadow-sm"},bt={class:"w-full h-24 bg-gray-200 rounded-md mb-3 flex items-center justify-center overflow-hidden"},yt={class:"text-4xl opacity-20"},xt={key:0},wt={key:1},kt={key:2},Ct={key:3},Et={class:"font-bold text-lg leading-tight mb-1 text-gray-800 min-h-[3.5rem] flex items-center break-words line-clamp-2"},St={class:"text-xs text-gray-600 flex-grow overflow-y-auto leading-snug break-words pr-1"},Lt={class:"mt-2 pt-2 border-t border-gray-200 flex justify-between items-center"},_t={key:0,class:"flex items-center text-red-600 font-bold"},Tt={key:1,class:"flex items-center text-green-600 font-bold ml-auto"},Mt=a({__name:"Card",props:{card:{},isSelected:{type:Boolean},isPlayable:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const a=e,o=t,r=n(()=>({"border-yellow-400 ring-2 ring-yellow-400":a.isSelected,"cursor-pointer hover:-translate-y-2":a.isPlayable,"opacity-50 cursor-not-allowed":!a.isPlayable,"bg-blue-100 border-blue-300":"life"===a.card.type,"bg-red-100 border-red-300":"challenge"===a.card.type,"bg-green-100 border-green-300":"insurance"===a.card.type,"bg-purple-100 border-purple-300":"skill"===a.card.type,"bg-yellow-100 border-yellow-300":"dream"===a.card.type})),l=n(()=>{switch(a.card.type){case"life":return"äººç”Ÿ";case"challenge":return"è©¦ç·´";case"insurance":return"ä¿é™º";case"skill":return"ã‚¹ã‚­ãƒ«";case"dream":return"å¤¢";default:return a.card.type}});return(e,t)=>(i(),s("div",{"data-testid":"card",class:S(["w-48 h-72 rounded-xl border-2 shadow-lg flex flex-col p-4 transition-all duration-200 relative bg-white",r.value]),onClick:t[0]||(t[0]=t=>o("click",e.card))},[g("div",vt,[g("span",gt,y(l.value),1),e.card.cost>0?(i(),s("div",ft,y(e.card.cost),1)):m("",!0)]),g("div",bt,[g("span",yt,["life"===e.card.type?(i(),s("span",xt,"ğŸŒ±")):"challenge"===e.card.type?(i(),s("span",wt,"âš¡")):"insurance"===e.card.type?(i(),s("span",kt,"ğŸ›¡ï¸")):(i(),s("span",Ct,"ğŸƒ"))])]),g("h3",Et,y(e.card.name),1),g("p",St,y(e.card.description),1),g("div",Lt,[e.card.power>0?(i(),s("div",_t,[t[1]||(t[1]=g("span",{class:"mr-1"},"âš”ï¸",-1)),g("span",null,y(e.card.power),1)])):m("",!0),e.card.coverage?(i(),s("div",Tt,[t[2]||(t[2]=g("span",{class:"mr-1"},"ğŸ›¡ï¸",-1)),g("span",null,y(e.card.coverage),1)])):m("",!0)])],2))}}),Ft={"data-testid":"hand-container",class:"fixed bottom-0 left-0 right-0 h-96 flex items-end justify-center pb-4 px-4 pointer-events-none z-30"},It={class:"flex -space-x-12 hover:space-x-2 transition-all duration-300 pointer-events-auto"},At=a({__name:"Hand",setup(e){const t=mt(),a=n(()=>{const e=t.hand;return console.log("[Hand] computed hand updated:",e.length),e});function r(e){t.toggleCardSelection(e)}function l(e){return t.game?.selectedCards.includes(e)}return(e,t)=>(i(),s("div",Ft,[g("div",It,[(i(!0),s(L,null,_(a.value,(e,t)=>(i(),s("div",{key:e.id,class:"transform transition-transform hover:-translate-y-8 hover:z-10 origin-bottom",style:E({zIndex:t})},[o(Mt,{card:e,"is-selected":l(e),"is-playable":!0,onClick:r},null,8,["card","is-selected"])],4))),128))])]))}}),Dt={key:0,class:"fixed inset-0 bg-slate-900/95 z-50 flex flex-col items-center justify-center p-8 backdrop-blur-sm animate-fade-in"},$t={class:"flex flex-wrap justify-center gap-8 perspective-1000"},Pt=O(a({__name:"DreamSelector",setup(e){const t=mt(),a=n(()=>"dream_selection"===t.currentPhase),r=n(()=>t.cardChoices);return(e,n)=>a.value?(i(),s("div",Dt,[n[0]||(n[0]=g("div",{class:"text-center mb-10 max-w-2xl"},[g("h2",{class:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400 mb-8"}," å¤¢ã‚’é¸æŠã—ã¦ãã ã•ã„ "),g("p",{class:"text-lg text-slate-300"}," å¤¢ã¯äººç”Ÿã®ç›®çš„ã‚’å®šç¾©ã—ã¾ã™ã€‚ãã‚Œãã‚Œã®å¤¢ã¯ç‰¹å®šã®ãƒ©ã‚¤ãƒ•ã‚¹ãƒ†ãƒ¼ã‚¸ã§ç‹¬è‡ªã®ãƒœãƒ¼ãƒŠã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚ ã‚ãªãŸã®é“ã‚’å°ãã‚‚ã®ã¨ã—ã¦ã€æ…é‡ã«é¸ã‚“ã§ãã ã•ã„ã€‚ ")],-1)),g("div",$t,[(i(!0),s(L,null,_(r.value,(e,a)=>(i(),s("div",{key:e.id,class:"transform transition-all duration-300 hover:scale-110 hover:-translate-y-4 hover:shadow-2xl",style:E({animationDelay:100*a+"ms"})},[o(Mt,{card:e,isPlayable:!0,onClick:a=>function(e){t.selectDream(e)}(e)},null,8,["card","onClick"])],4))),128))])])):m("",!0)}}),[["__scopeId","data-v-e7153898"]]),zt={key:0,class:"fixed inset-0 bg-slate-900/90 z-50 flex flex-col items-center justify-center p-8 backdrop-blur-sm animate-fade-in"},Rt={class:"flex flex-wrap justify-center gap-8"},Nt=a({__name:"ChallengeSelector",setup(e){const t=mt(),a=n(()=>"challenge_choice"===t.currentPhase),r=n(()=>t.cardChoices);return(e,n)=>a.value?(i(),s("div",zt,[n[0]||(n[0]=g("div",{class:"text-center mb-8"},[g("h2",{class:"text-3xl font-bold text-white mb-2"},"èª²é¡Œã«ç«‹ã¡å‘ã‹ã†"),g("p",{class:"text-slate-300"},"ã“ã®ã‚¿ãƒ¼ãƒ³ã«å¯¾å‡¦ã™ã‚‹èª²é¡Œã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚")],-1)),g("div",Rt,[(i(!0),s(L,null,_(r.value,e=>(i(),s("div",{key:e.id,class:"transform transition-all duration-300 hover:scale-105"},[o(Mt,{card:e,isPlayable:!0,onClick:a=>function(e){t.selectChallengeChoice(e)}(e)},null,8,["card","onClick"])]))),128))])])):m("",!0)}}),jt={key:0,class:"bg-white/10 p-4 rounded-xl backdrop-blur-md border border-white/20"},Bt={class:"flex gap-4 overflow-x-auto pb-4 custom-scrollbar"},Ht={class:"text-center mt-2"},Ot={class:"text-xs bg-slate-800 text-white px-2 py-1 rounded-full"},Gt=O(a({__name:"InsuranceMarket",setup(e){const t=mt(),a=n(()=>t.insuranceMarket);return(e,n)=>a.value.length>0?(i(),s("div",jt,[n[0]||(n[0]=g("h3",{class:"text-xl font-bold text-white mb-4 flex items-center"},[g("span",null,"ğŸ¥ Insurance Market"),g("span",{class:"text-xs ml-2 text-slate-300 font-normal"},"Protect your future")],-1)),g("div",Bt,[(i(!0),s(L,null,_(a.value,e=>(i(),s("div",{key:e.id,class:"flex-shrink-0 transform hover:scale-105 transition-transform"},[o(Mt,{card:e,isPlayable:!0,onClick:a=>function(e){t.buyInsurance(e)}(e)},null,8,["card","onClick"]),g("div",Ht,[g("span",Ot,"Cost: "+y(e.cost),1)])]))),128))])])):m("",!0)}}),[["__scopeId","data-v-6d8cf60b"]]),Vt={key:0,class:"fixed inset-0 bg-black/90 z-50 flex flex-col items-center justify-center p-8 backdrop-blur-md animate-fade-in"},Kt={class:"bg-slate-800/80 p-8 rounded-2xl max-w-2xl w-full border border-slate-600 shadow-2xl"},Ut={class:"space-y-4 text-lg"},Qt={class:"flex justify-between items-center"},qt={class:"font-mono text-3xl font-bold text-yellow-400"},Wt={class:"flex justify-between items-center"},Jt={class:"font-mono text-white"},Zt={class:"flex justify-between items-center"},Yt={class:"font-mono text-white"},Xt={class:"flex justify-between items-center"},ea={class:"font-mono text-white"},ta=a({__name:"GameResult",setup(e){const t=mt(),a=n(()=>"game_over"===t.currentStatus||"victory"===t.currentStatus),o=n(()=>"victory"===t.currentStatus),r=n(()=>o.value?"ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢ï¼":"ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼"),l=n(()=>o.value?"text-yellow-400":"text-red-500");function c(){window.location.reload()}return(e,n)=>a.value?(i(),s("div",Vt,[g("h2",{class:S(["text-6xl font-bold mb-8 animate-bounce",l.value])},y(r.value),3),g("div",Kt,[n[4]||(n[4]=g("h3",{class:"text-2xl font-bold text-white mb-6 border-b border-slate-600 pb-2"},"æœ€çµ‚çµæœ",-1)),g("div",Ut,[g("div",Qt,[n[0]||(n[0]=g("span",{class:"text-slate-300"},"ã‚¹ã‚³ã‚¢",-1)),g("span",qt,y(T(t).score),1)]),g("div",Wt,[n[1]||(n[1]=g("span",{class:"text-slate-400"},"ç”Ÿå­˜ã‚¿ãƒ¼ãƒ³æ•°",-1)),g("span",Jt,y(T(t).currentTurn),1)]),g("div",Zt,[n[2]||(n[2]=g("span",{class:"text-slate-400"},"æœ€çµ‚æ´»åŠ›",-1)),g("span",Yt,y(T(t).vitality)+" / "+y(T(t).maxVitality),1)]),g("div",Xt,[n[3]||(n[3]=g("span",{class:"text-slate-400"},"é”æˆã—ãŸèª²é¡Œæ•°",-1)),g("span",ea,y(T(t).game?.challengesCompleted||0),1)])]),n[5]||(n[5]=g("div",{class:"mt-8 p-4 bg-slate-900/50 rounded-lg text-slate-400 text-sm italic text-center"},' "äººç”Ÿã¯æã‚Œã‚’çŸ¥ã‚‰ã¬å†’é™ºã‹ã€ç„¡ã‹ã€ãã®ã©ã¡ã‚‰ã‹ã ã€‚" ',-1))]),g("button",{onClick:c,class:"mt-12 px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold rounded-full text-xl shadow-lg hover:shadow-blue-500/50 hover:scale-105 transition-all"}," ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤ã™ã‚‹ ")])):m("",!0)}}),aa={key:0,class:"fixed bottom-8 left-8 z-[1000] max-w-sm w-full"},na={class:"relative bg-slate-900/90 backdrop-blur-xl border border-blue-500/30 rounded-2xl shadow-2xl p-6 overflow-hidden"},sa={class:"relative flex items-center justify-between mb-3"},ia={class:"flex items-center space-x-3"},oa={class:"text-2xl"},ra={class:"font-bold text-lg text-white bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-400"},la={class:"relative text-slate-300 text-sm leading-relaxed mb-6"},ca=a({__name:"TutorialOverlay",setup(e){const t=mt(),a=d(!1),n=d(""),o=d(new Set),c={dream_selection:{title:"å¤¢ã‚’é¸ã¼ã†",content:"äººç”Ÿã®ç›®æ¨™ã¨ãªã‚‹ã€Œå¤¢ã€ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚ã“ã‚Œã¯å‹åˆ©æ¡ä»¶ã¨ãªã‚Šã€ã‚²ãƒ¼ãƒ ä¸­ã«ãƒœãƒ¼ãƒŠã‚¹ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã€‚è‡ªåˆ†ã®ãƒ—ãƒ¬ã‚¤ã‚¹ã‚¿ã‚¤ãƒ«ã«åˆã£ãŸã‚‚ã®ã‚’é¸ã³ã¾ã—ã‚‡ã†ï¼",icon:"ğŸŒ "},draw:{title:"ãƒ‰ãƒ­ãƒ¼ãƒ•ã‚§ãƒ¼ã‚º",content:"æ‰‹æœ­ã‚’è£œå……ã—ã¦ã‚¿ãƒ¼ãƒ³ã‚’é–‹å§‹ã—ã¾ã™ã€‚ã‚«ãƒ¼ãƒ‰ã¯ã‚ãªãŸã®ç”Ÿæ´»ã‚¹ã‚­ãƒ«ã€ãƒªã‚½ãƒ¼ã‚¹ã€çµŒé¨“ã‚’è¡¨ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã‚’ä½¿ã£ã¦èª²é¡Œã‚’å…‹æœã—ã¾ã—ã‚‡ã†ï¼",icon:"ğŸƒ"},challenge_phase:{title:"èª²é¡Œãƒ•ã‚§ãƒ¼ã‚º",content:"äººç”Ÿã¯è©¦ç·´ã®é€£ç¶šã§ã™ã€‚ç«‹ã¡å‘ã‹ã†èª²é¡Œã‚’1ã¤é¸ã‚“ã§ãã ã•ã„ã€‚å¿…è¦ãƒ‘ãƒ¯ãƒ¼ã¨å ±é…¬ã‚’ç¢ºèªã—ã€ãƒªã‚¹ã‚¯ã‚’è¦‹æ¥µã‚ã¾ã—ã‚‡ã†ï¼",icon:"âš”ï¸"},challenge_resolution:{title:"èª²é¡Œã®è§£æ±º",content:"æ‰‹æœ­ã‹ã‚‰ã‚«ãƒ¼ãƒ‰ã‚’é¸ã‚“ã§ã€èª²é¡Œã®å¿…è¦ãƒ‘ãƒ¯ãƒ¼ã‚’æº€ãŸã—ã¦ãã ã•ã„ã€‚æ´»åŠ›ï¼ˆã‚³ã‚¹ãƒˆï¼‰ã®ä½¿ã„ã™ãã«æ³¨æ„ï¼ååˆ†ãªãƒ‘ãƒ¯ãƒ¼ãŒã‚ã‚Œã°æˆåŠŸã§ã™ï¼",icon:"ğŸ’ª"},insurance_phase:{title:"ä¿é™ºãƒ•ã‚§ãƒ¼ã‚º",content:"ä¿é™ºã¯äººç”Ÿã®ä¸æ¸¬ã®äº‹æ…‹ã«å‚™ãˆã‚‹ã‚‚ã®ã§ã™ã€‚æ´»åŠ›ã‚’æ¶ˆè²»ã—ã¦ä¿é™ºã«åŠ å…¥ã™ã‚‹ã“ã¨ã§ã€å®ˆã‚Šã¨ãƒœãƒ¼ãƒŠã‚¹ã‚’å¾—ã‚‰ã‚Œã¾ã™ã€‚å°†æ¥ã®ãƒªã‚¹ã‚¯ã‚’è»½æ¸›ã—ã¾ã—ã‚‡ã†ã€‚",icon:"ğŸ›¡ï¸"}};function u(){a.value=!1,n.value&&o.value.add(n.value)}function v(){t.toggleTutorialMode(),a.value=!1}return p(()=>t.currentPhase,e=>{if(!t.isTutorialMode)return;let s="";"dream_selection"===e?s="dream_selection":"draw"===e?s="draw":"challenge_choice"===e?s="challenge_phase":"challenge"===e?s="challenge_resolution":"insurance"===e&&(s="insurance_phase"),s&&!o.value.has(s)&&(n.value=s,a.value=!0)},{immediate:!0}),(e,o)=>(i(),h(r,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform translate-y-4 opacity-0 scale-95","enter-to-class":"transform translate-y-0 opacity-100 scale-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"transform translate-y-0 opacity-100 scale-100","leave-to-class":"transform translate-y-4 opacity-0 scale-95"},{default:l(()=>[a.value&&T(t).isTutorialMode&&c[n.value]?(i(),s("div",aa,[g("div",na,[o[1]||(o[1]=g("div",{class:"absolute -top-10 -right-10 w-32 h-32 bg-blue-500/20 rounded-full blur-2xl"},null,-1)),o[2]||(o[2]=g("div",{class:"absolute -bottom-10 -left-10 w-32 h-32 bg-purple-500/20 rounded-full blur-2xl"},null,-1)),g("div",sa,[g("div",ia,[g("span",oa,y(c[n.value]?.icon),1),g("h3",ra,y(c[n.value]?.title),1)]),g("button",{onClick:u,class:"text-slate-400 hover:text-white transition-colors"},o[0]||(o[0]=[g("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[g("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))]),g("p",la,y(c[n.value]?.content),1),g("div",{class:"relative flex justify-between items-center pt-4 border-t border-slate-700/50"},[g("button",{onClick:v,class:"text-xs text-slate-500 hover:text-slate-300 transition-colors"}," ãƒ’ãƒ³ãƒˆã‚’è¡¨ç¤ºã—ãªã„ "),g("button",{onClick:u,class:"px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 text-white text-sm font-semibold rounded-lg shadow-lg shadow-blue-500/20 transition-all transform hover:scale-105"}," ã‚ã‹ã£ãŸ ")])])])):m("",!0)]),_:1}))}}),da={"data-testid":"game-board",class:"w-full h-screen bg-slate-900 text-white overflow-hidden relative font-sans"},ua={class:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center bg-slate-800/80 backdrop-blur-md z-20 shadow-md"},pa={class:"flex items-center space-x-6"},ha={class:"flex flex-col"},ma={class:"font-bold text-xl text-yellow-400"},va={class:"flex flex-col"},ga={class:"font-bold text-xl text-purple-400"},fa={"data-testid":"vitality",class:"flex flex-col"},ba={class:"flex items-end"},ya={class:"font-bold text-2xl text-green-400"},xa={class:"text-sm text-slate-500 mb-1 ml-1"},wa={class:"flex items-center space-x-4"},ka={class:"flex flex-col items-end"},Ca={class:"font-bold text-xl"},Ea={class:"flex flex-col items-end"},Sa={class:"font-bold text-lg text-blue-300"},La=["title"],_a={key:0,class:"text-xl"},Ta={key:1,class:"text-xl opacity-50 grayscale"},Ma={class:"absolute right-0 top-full mt-2 w-max px-2 py-1 bg-black text-xs text-white rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"},Fa={class:"absolute inset-0 flex flex-col items-center justify-center pt-20 pb-96 z-10"},Ia={class:"mb-8 flex flex-col items-center"},Aa={key:0,class:"transform scale-110"},Da={key:1,class:"w-48 h-72 border-2 border-dashed border-slate-600 rounded-xl flex items-center justify-center bg-slate-800/50"},$a={key:0,class:"absolute top-20 bg-black/50 text-white px-6 py-2 rounded-full backdrop-blur-sm animate-fade-in-down"},Pa={class:"flex space-x-4 mt-4 relative z-[9999]"},za={key:1,class:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-8"},Ra={class:"bg-white rounded-xl p-8 max-w-4xl w-full"},Na={class:"grid grid-cols-3 gap-4"},ja=["onClick"],Ba={class:"font-bold text-lg text-gray-800"},Ha={class:"text-sm text-gray-600"},Oa={key:2,class:"fixed bottom-32 right-8 z-40 max-w-xl"},Ga=a({__name:"GameBoard",setup(e){const t=mt(),a=n(()=>({draw:"ãƒ‰ãƒ­ãƒ¼",challenge_choice:"èª²é¡Œé¸æŠ",challenge:"æŒ‘æˆ¦",resolution:"è§£æ±º",market:"ä¿é™ºå¸‚å ´",end:"ã‚¿ãƒ¼ãƒ³çµ‚äº†",insurance_type_selection:"ä¿é™ºé¸æŠ"}[t.currentPhase]||t.currentPhase.toUpperCase()));async function r(){console.log("[GameBoard] onDraw called");try{await t.drawCards(1),console.log("[GameBoard] onDraw completed. Current hand size:",t.hand.length)}catch(e){console.error("[GameBoard] onDraw error:",e),alert(`Draw Error: ${e}`)}}async function l(){await t.endTurn()}async function c(){t.startChallengePhase()}return u(()=>{if(!t.game){const e=window.__GAME_CONFIG__;t.initializeGame(e),t.startGame()}}),(e,n)=>(i(),s("div",da,[g("div",ua,[g("div",pa,[g("div",ha,[n[2]||(n[2]=g("span",{class:"text-xs text-slate-400 uppercase"},"ã‚¹ã‚³ã‚¢",-1)),g("span",ma,y(T(t).score),1)]),g("div",va,[n[3]||(n[3]=g("span",{class:"text-xs text-slate-400 uppercase"},"ã‚¹ãƒ†ãƒ¼ã‚¸",-1)),g("span",ga,y(T(t).currentStage),1)]),g("div",fa,[n[4]||(n[4]=g("span",{class:"text-xs text-slate-400 uppercase"},"ãƒã‚¤ã‚¿ãƒªãƒ†ã‚£",-1)),g("div",ba,[g("span",ya,y(T(t).vitality),1),g("span",xa,"/ "+y(T(t).maxVitality),1)])])]),g("div",wa,[g("div",ka,[n[5]||(n[5]=g("span",{class:"text-xs text-slate-400 uppercase"},"ã‚¿ãƒ¼ãƒ³",-1)),g("span",Ca,y(T(t).currentTurn),1)]),g("div",Ea,[n[6]||(n[6]=g("span",{class:"text-xs text-slate-400 uppercase"},"ãƒ•ã‚§ãƒ¼ã‚º",-1)),g("span",Sa,y(a.value),1)]),g("button",{onClick:n[0]||(n[0]=e=>T(t).toggleTutorialMode()),class:"p-2 rounded-full hover:bg-slate-700 transition-colors relative group",title:T(t).isTutorialMode?"ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ç„¡åŠ¹åŒ–":"ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’æœ‰åŠ¹åŒ–"},[T(t).isTutorialMode?(i(),s("span",_a,"ğŸ“")):(i(),s("span",Ta,"ğŸ“")),g("span",Ma,y(T(t).isTutorialMode?"ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« ON":"ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« OFF"),1)],8,La)])]),g("div",Fa,[g("div",Ia,[n[8]||(n[8]=g("h2",{class:"text-slate-400 uppercase tracking-widest text-sm mb-4"},"ç¾åœ¨ã®èª²é¡Œ",-1)),T(t).currentChallenge?(i(),s("div",Aa,[o(Mt,{card:T(t).currentChallenge},null,8,["card"])])):(i(),s("div",Da,n[7]||(n[7]=[g("span",{class:"text-slate-500"},"èª²é¡Œãªã—",-1)])))]),T(t).lastMessage?(i(),s("div",$a,y(T(t).lastMessage),1)):m("",!0),g("div",Pa,["draw"===T(t).currentPhase?(i(),s("button",{key:0,onClick:r,class:"px-6 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-lg font-bold shadow-lg transition-colors flex items-center"}," ã‚«ãƒ¼ãƒ‰ã‚’å¼•ã ")):m("",!0),"draw"!==T(t).currentPhase||T(t).currentChallenge?m("",!0):(i(),s("button",{key:1,onClick:c,class:"px-6 py-3 bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg font-bold shadow-lg transition-colors"}," èª²é¡Œã«å–ã‚Šçµ„ã‚€ ")),"challenge"===T(t).currentPhase?(i(),s("button",{key:2,onClick:n[1]||(n[1]=e=>T(t).resolveChallenge()),class:"px-6 py-3 bg-red-600 hover:bg-red-500 text-white rounded-lg font-bold shadow-lg transition-colors"}," èª²é¡Œã‚’è§£æ±ºã™ã‚‹ ")):m("",!0),"resolution"===T(t).currentPhase||"end"===T(t).currentPhase?(i(),s("button",{key:3,onClick:l,class:"px-6 py-3 bg-green-600 hover:bg-green-500 text-white rounded-lg font-bold shadow-lg transition-colors"}," ã‚¿ãƒ¼ãƒ³çµ‚äº† ")):m("",!0)]),T(t).insuranceTypeChoices&&T(t).insuranceTypeChoices.length>0?(i(),s("div",za,[g("div",Ra,[n[9]||(n[9]=g("h2",{class:"text-2xl font-bold text-gray-800 mb-4"},"ä¿é™ºã‚’é¸æŠ",-1)),g("div",Na,[(i(!0),s(L,null,_(T(t).insuranceTypeChoices,e=>(i(),s("div",{key:e.insuranceType,class:"border-2 border-gray-200 rounded-lg p-4 hover:border-blue-500 cursor-pointer transition-colors",onClick:a=>T(t).selectInsurance(e.insuranceType)},[g("h3",Ba,y(e.name),1),g("p",Ha,y(e.description),1)],8,ja))),128))])])])):m("",!0),o(Pt),o(Nt),o(ta),"draw"===T(t).currentPhase?(i(),s("div",Oa,[o(Gt)])):m("",!0)]),o(At),n[10]||(n[10]=g("div",{class:"absolute inset-0 z-0 opacity-10 pointer-events-none"},[g("div",{class:"absolute top-1/4 left-1/4 w-96 h-96 bg-purple-500 rounded-full blur-3xl"}),g("div",{class:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-blue-500 rounded-full blur-3xl"})],-1)),o(ca)]))}}),Va={class:"app-container",role:"application","aria-label":"äººç”Ÿå……å®Ÿã‚²ãƒ¼ãƒ "},Ka={key:0,id:"main-content",class:"game-view",role:"main","aria-label":"ã‚²ãƒ¼ãƒ ç”»é¢"},Ua={key:1,id:"main-content",class:"home-view",role:"main","aria-label":"ãƒ›ãƒ¼ãƒ ç”»é¢"},Qa={class:"home-container"},qa={key:1,class:"desktop-error"},Wa={class:"desktop-error-actions"},Ja=["onClick"],Za=["onClick"],Ya=z(O(a({__name:"App",setup(e){const t=d(!1),a=d(!1),n=d(!1),r=$({loader:async()=>function(e,t,a){let n=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};const s=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),o=i?.nonce||i?.getAttribute("nonce");n=e(t.map(e=>{if(e=function(e,t){return new URL(e,t).href}(e,a),e in B)return;B[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(a)for(let a=s.length-1;a>=0;a--){const n=s[a];if(n.href===e&&(!t||"stylesheet"===n.rel))return}else if(document.querySelector(`link[href="${e}"]${n}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,o&&i.setAttribute("nonce",o),document.head.appendChild(i),t?new Promise((t,a)=>{i.addEventListener("load",t),i.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})}(()=>import("./MobileErrorHandler-WPpGFazDFKSb.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),errorComponent:{render:()=>P("div")},delay:200,timeout:1e4}),c=d();let p=null,v=null;const f=()=>{t.value=!0,v?.announceScreenChange("ã‚²ãƒ¼ãƒ ç”»é¢","ã‚²ãƒ¼ãƒ ãŒé–‹å§‹ã•ã‚Œã¾ã—ãŸ")},b=()=>{t.value=!0,v?.announceScreenChange("ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«","ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹ã—ã¾ã™"),setTimeout(()=>{const e=new CustomEvent("startTutorial");window.dispatchEvent(e)},100)},x=()=>{t.value=!1,v?.announceScreenChange("ãƒ›ãƒ¼ãƒ ç”»é¢","ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚Šã¾ã—ãŸ")},w=e=>{console.log("ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸ:",e),e.screenReaderEnabled&&v?.announce("ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã—ãŸ",{priority:"assertive"})},k=e=>{const t=e.message.toLowerCase();return t.includes("dynamically imported module")||t.includes("failed to fetch")?"dynamic-import":t.includes("network")||t.includes("fetch")?"network":t.includes("permission")||t.includes("cors")?"permission":t.includes("cannot read")||t.includes("undefined")?"runtime":"unknown"},E=(e,t,a)=>{console.error("Home screen error:",e,a)},S=e=>{console.log("Error report:",e)};return u(()=>{console.log("App Version: v2025.12.06.0230 - Debug Build"),n.value=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),p=new lt,v=new V,p.registerShortcut({key:"h",modifiers:["alt"],description:"ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚‹",action:()=>{t.value&&x()}}),p.registerShortcut({key:"g",modifiers:["alt"],description:"ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹",action:()=>{t.value||f()}}),p.registerShortcut({key:"t",modifiers:["alt"],description:"ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹",action:()=>{t.value||b()}}),p.registerShortcut({key:"a",modifiers:["alt"],description:"ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šã‚’é–‹ã",action:()=>{a.value=!0,v?.announce("ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šã‚’é–‹ãã¾ã—ãŸ",{priority:"assertive"})}}),setTimeout(()=>{const e=c.value?.gameButtonRef,t=c.value?.tutorialButtonRef,a=document.querySelector(".back-to-home-btn");null!=e&&p?.registerFocusableElement(e,{priority:100,group:"main-actions",onFocus:()=>v?.announce("ã‚²ãƒ¼ãƒ é–‹å§‹ãƒœã‚¿ãƒ³ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹")}),null!=t&&p?.registerFocusableElement(t,{priority:90,group:"main-actions",onFocus:()=>v?.announce("ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«é–‹å§‹ãƒœã‚¿ãƒ³ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹")}),null!=a&&p?.registerFocusableElement(a,{priority:100,group:"game-actions",onFocus:()=>v?.announce("ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹")})},100),v.announceScreenChange("ãƒ›ãƒ¼ãƒ ç”»é¢","äººç”Ÿå……å®Ÿã‚²ãƒ¼ãƒ  ã¸ã‚ˆã†ã“ãã€‚Alt+Gã§ã‚²ãƒ¼ãƒ é–‹å§‹ã€Alt+Tã§ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã€Alt+Aã§ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šã€F1ã§ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤ºã§ãã¾ã™")}),C(()=>{p?.destroy(),v?.destroy()}),(e,d)=>(i(),s("div",Va,[d[5]||(d[5]=g("div",{class:"skip-links"},[g("a",{href:"#main-content",class:"skip-link"},"ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ç§»å‹•"),g("a",{href:"#navigation",class:"skip-link"},"ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã«ç§»å‹•")],-1)),o(ot),o(G,{type:"slide",direction:"left",duration:400,intensity:"normal"},{default:l(()=>[t.value?(i(),s("div",Ka,[o(Ne,{fallback:"detailed","can-recover":!0},{default:l(()=>[o(Ga,{onBackToHome:x})]),_:1}),g("button",{ref:"backToHomeButtonRef",class:"back-to-home-btn","aria-label":"ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚‹ (Alt+H)","aria-keyshortcuts":"Alt+H",onClick:x},d[2]||(d[2]=[g("span",{class:"btn-icon","aria-hidden":"true"},"â†",-1),g("span",{class:"btn-text"},"ãƒ›ãƒ¼ãƒ ",-1)]),512)])):(i(),s("div",Ua,[o(Ne,{fallback:"custom","can-recover":!0,onError:E},{error:l(({error:e,retry:t,reload:a})=>[e?(i(),s(L,{key:0},[n.value?(i(),h(T(r),{key:0,error:e,"error-type":k(e),onRetry:t,onGoHome:a,onReportError:S},null,8,["error","error-type","onRetry","onGoHome"])):(i(),s("div",qa,[d[3]||(d[3]=g("h2",null,"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",-1)),g("p",null,y(e.message),1),g("div",Wa,[g("button",{class:"error-btn",onClick:t},"ã‚‚ã†ä¸€åº¦è©¦ã™",8,Ja),g("button",{class:"error-btn secondary",onClick:a},"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",8,Za)])]))],64)):m("",!0)]),default:l(()=>[g("div",Qa,[o(dt),o(ht,{ref_key:"navigationRef",ref:c,onStartGame:f,onStartTutorial:b},null,512)])]),_:1})]))]),_:1}),d[6]||(d[6]=g("footer",{id:"footer",class:"sr-only",role:"contentinfo"},[g("p",null,"äººç”Ÿå……å®Ÿã‚²ãƒ¼ãƒ  - ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«ãªWebã‚²ãƒ¼ãƒ ä½“é¨“")],-1)),o(be,{"is-open":a.value,onClose:d[0]||(d[0]=e=>a.value=!1),onSettingsChanged:w},null,8,["is-open"]),o(_e,{enabled:!0}),t.value?m("",!0):(i(),s("button",{key:0,class:"accessibility-button","aria-label":"ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šã‚’é–‹ã (Alt+A)","aria-keyshortcuts":"Alt+A",title:"ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®š",onClick:d[1]||(d[1]=e=>a.value=!0)},d[4]||(d[4]=[g("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},[g("path",{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9H15L13.5 7.5C13 7 12.5 6.5 11.9 6.5H12.1C11.5 6.5 11 7 10.5 7.5L7.91 10.09C7.66 10.34 7.66 10.76 7.91 11.01L10.5 13.6C11 14.1 11.5 14.6 12.1 14.6H11.9C12.5 14.6 13 14.1 13.5 13.6L15 12.1H21C21.6 12.1 22 11.7 22 11.1V10C22 9.4 21.6 9 21 9ZM8.5 12.5L12 16L15.5 12.5L12 22L8.5 12.5Z",fill:"currentColor"})],-1)])))]))}}),[["__scopeId","data-v-27fdd51e"]])),Xa=N();Ya.use(Xa),async function(){try{if("serviceWorker"in navigator){const e=await navigator.serviceWorker.getRegistrations();let t=!1;for(const a of e)await a.unregister(),console.log("ğŸ—‘ï¸ Service Worker unregistered"),t=!0;if(t&&!sessionStorage.getItem("sw_cleaned"))return console.log("ğŸ”„ Reloading to clear SW cache..."),sessionStorage.setItem("sw_cleaned","true"),void window.location.reload()}Ya.mount("#app"),console.log("ğŸš€ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒèµ·å‹•ã—ã¾ã—ãŸ")}catch(e){console.error("ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ:",e)}}();export{O as _};
//# sourceMappingURL=index-CEsiSAOz.js.map
