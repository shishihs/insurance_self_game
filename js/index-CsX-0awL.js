const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/analytics-ImNIcNXw.js","js/vue-vendor-Dh8Oc06C.js","js/vendor-CLepEF8l.js","js/game-logic-DYTtuDyT.js","js/chart-vendor-Xt8I3p8E.js","css/analytics-Zo70LLDG.css","js/feedback-Bk8qjEas.js","css/feedback-BYlN7yR3.css","js/GameCanvas-BZ9_4VV0.js","js/game-engine-BEWVGSCW.js","js/phaser-core-DawqAqIN.js","js/game-scenes-gl4Q2JUG.js","css/GameCanvas-CD2PfjGS.css","css/css-vendor-B7VT8aW2.css"])))=>i.map(i=>d[i]);
var Be=Object.defineProperty,je=Object.defineProperties;var qe=Object.getOwnPropertyDescriptors;var _e=Object.getOwnPropertySymbols;var Ke=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable;var me=(o,e,t)=>e in o?Be(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,C=(o,e)=>{for(var t in e||(e={}))Ke.call(e,t)&&me(o,t,e[t]);if(_e)for(var t of _e(e))Ge.call(e,t)&&me(o,t,e[t]);return o},R=(o,e)=>je(o,qe(e));var p=(o,e,t)=>me(o,typeof e!="symbol"?e+"":e,t);var f=(o,e,t)=>new Promise((s,i)=>{var n=u=>{try{d(t.next(u))}catch(m){i(m)}},r=u=>{try{d(t.throw(u))}catch(m){i(m)}},d=u=>u.done?s(u.value):Promise.resolve(u.value).then(n,r);d((t=t.apply(o,e)).next())});import{d as N,g as V,c as w,l as D,T as le,z as U,A as ve,o as v,f as _,h as ie,w as We,y as ke,b as T,a as c,j as O,v as ge,k as F,s as X,u as Le,t as x,p as Me,i as ue,e as we,n as Z,B as M,F as te,r as se,C as Qe,q as Ce,D as Je,E as Fe,G as Ye,H as Oe,I as pe,J as Xe}from"./vue-vendor-Dh8Oc06C.js";/* empty css                   */import{_ as z}from"./analytics-ImNIcNXw.js";import"./vendor-CLepEF8l.js";import"./game-logic-DYTtuDyT.js";import"./chart-vendor-Xt8I3p8E.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=t(i);fetch(i.href,n)}})();const Ze="modulepreload",et=function(o){return"/insurance_self_game/"+o},De={},he=function(e,t,s){let i=Promise.resolve();if(t&&t.length>0){let u=function(m){return Promise.all(m.map(h=>Promise.resolve(h).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),d=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));i=u(t.map(m=>{if(m=et(m),m in De)return;De[m]=!0;const h=m.endsWith(".css"),E=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${E}`))return;const S=document.createElement("link");if(S.rel=h?"stylesheet":Ze,h||(S.as="script"),S.crossOrigin="",S.href=m,d&&S.setAttribute("nonce",d),document.head.appendChild(S),h)return new Promise((y,g)=>{S.addEventListener("load",y),S.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${m}`)))})}))}function n(r){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=r,window.dispatchEvent(d),!d.defaultPrevented)throw r}return i.then(r=>{for(const d of r||[])d.status==="rejected"&&n(d.reason);return e().catch(n)})},tt={class:"transition-animations"},st=N({__name:"TransitionAnimations",props:{type:{default:"fade"},direction:{default:"right"},duration:{default:300},easing:{default:"cubic-bezier(0.4, 0, 0.2, 1)"},intensity:{default:"normal"}},setup(o){const e=o,t=V(()=>`${e.type}-${e.direction}-${e.intensity}`),s=r=>{const d=r;d.style.transitionDuration=`${e.duration}ms`,d.style.transitionTimingFunction=e.easing},i=(r,d)=>{setTimeout(d,e.duration)},n=(r,d)=>{setTimeout(d,e.duration)};return(r,d)=>(v(),w("div",tt,[D(le,{name:t.value,mode:"out-in",onBeforeEnter:s,onEnter:i,onLeave:n},{default:U(()=>[ve(r.$slots,"default",{},void 0,!0)]),_:3},8,["name"])]))}}),it=z(st,[["__scopeId","data-v-c53a8e8b"]]);class He{constructor(){p(this,"liveRegions",new Map);p(this,"gameStatusElement");p(this,"cardDetailsElement");p(this,"announcementQueue",[]);p(this,"isProcessingQueue",!1);this.createLiveRegions(),this.createGameStatusElements(),this.setupAriaDescriptions()}announce(e,t={priority:"polite"}){t.interrupt&&this.clearQueue(),this.announcementQueue.push({message:e,options:t}),this.processQueue()}announceGameState(e){const{type:t,message:s,context:i}=e;this.updateGameStatus(t,s,i);const n=this.getPriorityForGameState(t);this.announce(s,{priority:n,persist:!0})}announceCardDetails(e){const t=this.createCardDescription(e);this.cardDetailsElement.textContent=t,this.announce(`ã‚«ãƒ¼ãƒ‰é¸æŠ: ${t}`,{priority:"polite"})}announceError(e){this.announce(`ã‚¨ãƒ©ãƒ¼: ${e}`,{priority:"assertive",interrupt:!0})}announceSuccess(e){this.announce(`æˆåŠŸ: ${e}`,{priority:"polite"})}announceProgress(e,t,s){const i=Math.round(e/t*100),n=`${s}: ${e}/${t} (${i}%)`;this.announce(n,{priority:"polite"})}announceOptions(e,t){const s=e.length,i=e[t],n=`é¸æŠè‚¢ ${t+1}/${s}: ${i}`;this.announce(n,{priority:"polite"})}announceTimer(e,t="seconds"){const s=t==="seconds"?"ç§’":"åˆ†";let i;e<=0?i="æ™‚é–“åˆ‡ã‚Œã§ã™":e<=10&&t==="seconds"?i=`æ®‹ã‚Š${e}${s}`:e<=60&&t==="seconds"?i=`æ®‹ã‚Š${e}${s}`:i=`æ®‹ã‚Šæ™‚é–“: ${e}${s}`;const n=e<=10?"assertive":"polite";this.announce(i,{priority:n})}announceScreenChange(e,t){let s=`ç”»é¢ãŒå¤‰æ›´ã•ã‚Œã¾ã—ãŸ: ${e}`;t&&(s+=`. ${t}`),this.announce(s,{priority:"assertive",persist:!0})}announceKeyboardHelp(){const t=`ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ: ${["Tabã‚­ãƒ¼ã§æ¬¡ã®è¦ç´ ã«ç§»å‹•","Shift+Tabã§å‰ã®è¦ç´ ã«ç§»å‹•","Enterã‚­ãƒ¼ã¾ãŸã¯ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã§é¸æŠ","F1ã‚­ãƒ¼ã§ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º"].join(", ")}`;this.announce(t,{priority:"polite",persist:!0})}announceGameStats(e){const s=`ã‚²ãƒ¼ãƒ çµ±è¨ˆ. ${Object.entries(e).map(([i,n])=>`${this.translateStatKey(i)}: ${n}`).join(", ")}`;this.announce(s,{priority:"polite",persist:!0})}announceRegionStatus(e,t){const s=t.length,i=this.getItemType(t);let n;s===0?n=`${e}ã¯ç©ºã§ã™`:s===1?n=`${e}ã«${i}ãŒ1ã¤ã‚ã‚Šã¾ã™`:n=`${e}ã«${i}ãŒ${s}å€‹ã‚ã‚Šã¾ã™`,this.announce(n,{priority:"polite"})}announceDragDrop(e,t){let s;switch(e){case"start":s=`${t.itemName}ã®ãƒ‰ãƒ©ãƒƒã‚°ã‚’é–‹å§‹ã—ã¾ã—ãŸ`;break;case"move":s=`${t.targetName}ã®ä¸Šã«ç§»å‹•ä¸­`;break;case"drop":s=t.success?`${t.targetName}ã«${t.itemName}ã‚’ãƒ‰ãƒ­ãƒƒãƒ—ã—ã¾ã—ãŸ`:`ãƒ‰ãƒ­ãƒƒãƒ—ã«å¤±æ•—ã—ã¾ã—ãŸ: ${t.reason}`;break;case"cancel":s="ãƒ‰ãƒ©ãƒƒã‚°æ“ä½œã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¾ã—ãŸ";break}const i=e==="drop"&&!t.success?"assertive":"polite";this.announce(s,{priority:i})}createLiveRegions(){const e=document.createElement("div");e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),e.setAttribute("aria-atomic","false"),e.className="sr-only",e.id="live-region-polite",document.body.appendChild(e),this.liveRegions.set("polite",e);const t=document.createElement("div");t.setAttribute("aria-live","assertive"),t.setAttribute("aria-relevant","additions text"),t.setAttribute("aria-atomic","true"),t.className="sr-only",t.id="live-region-assertive",document.body.appendChild(t),this.liveRegions.set("assertive",t)}createGameStatusElements(){this.gameStatusElement=document.createElement("div"),this.gameStatusElement.id="game-status",this.gameStatusElement.className="sr-only",this.gameStatusElement.setAttribute("aria-label","ã‚²ãƒ¼ãƒ çŠ¶æ…‹"),document.body.appendChild(this.gameStatusElement),this.cardDetailsElement=document.createElement("div"),this.cardDetailsElement.id="card-details",this.cardDetailsElement.className="sr-only",this.cardDetailsElement.setAttribute("aria-label","ã‚«ãƒ¼ãƒ‰è©³ç´°"),document.body.appendChild(this.cardDetailsElement)}setupAriaDescriptions(){const e=document.createElement("style");e.textContent=`
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }
      
      .sr-only-focusable:focus {
        position: static;
        width: auto;
        height: auto;
        padding: inherit;
        margin: inherit;
        overflow: visible;
        clip: auto;
        white-space: normal;
      }
    `,document.head.appendChild(e)}processQueue(){return f(this,null,function*(){if(!(this.isProcessingQueue||this.announcementQueue.length===0)){for(this.isProcessingQueue=!0;this.announcementQueue.length>0;){const{message:e,options:t}=this.announcementQueue.shift();t.delay&&(yield this.delay(t.delay)),yield this.performAnnouncement(e,t),yield this.delay(100)}this.isProcessingQueue=!1}})}performAnnouncement(e,t){return f(this,null,function*(){const s=this.liveRegions.get(t.priority);if(s)if(t.persist||(s.textContent="",yield this.delay(10)),t.persist){const i=document.createElement("div");i.textContent=e,s.appendChild(i),setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i)},5e3)}else s.textContent=e})}updateGameStatus(e,t,s){const i=C({type:e,message:t,timestamp:new Date().toISOString()},s);this.gameStatusElement.setAttribute("data-game-state",JSON.stringify(i)),this.gameStatusElement.textContent=t}createCardDescription(e){const t=[e.name];return e.type&&t.push(`ç¨®é¡: ${this.translateCardType(e.type)}`),e.power!==void 0&&t.push(`ãƒ‘ãƒ¯ãƒ¼: ${e.power}`),e.cost!==void 0&&t.push(`ã‚³ã‚¹ãƒˆ: ${e.cost}`),e.description&&t.push(`èª¬æ˜: ${e.description}`),t.join(", ")}getPriorityForGameState(e){return["challenge_result","game_end","error"].includes(e)?"assertive":"polite"}translateStatKey(e){return{vitality:"æ´»åŠ›",turn:"ã‚¿ãƒ¼ãƒ³",cardsInHand:"æ‰‹æœ­æšæ•°",challengesCompleted:"å®Œäº†ãƒãƒ£ãƒ¬ãƒ³ã‚¸æ•°",insuranceCards:"ä¿é™ºã‚«ãƒ¼ãƒ‰æ•°"}[e]||e}translateCardType(e){return{life:"ãƒ©ã‚¤ãƒ•ã‚«ãƒ¼ãƒ‰",insurance:"ä¿é™ºã‚«ãƒ¼ãƒ‰",challenge:"ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã‚«ãƒ¼ãƒ‰",dream:"ãƒ‰ãƒªãƒ¼ãƒ ã‚«ãƒ¼ãƒ‰"}[e]||e}getItemType(e){if(e.length===0)return"ã‚¢ã‚¤ãƒ†ãƒ ";const t=e[0];return t.type?this.translateCardType(t.type):"ã‚¢ã‚¤ãƒ†ãƒ "}clearQueue(){this.announcementQueue=[],this.liveRegions.forEach(e=>{e.textContent=""})}delay(e){return new Promise(t=>setTimeout(t,e))}destroy(){var e,t;this.liveRegions.forEach(s=>{s.parentNode&&s.parentNode.removeChild(s)}),(e=this.gameStatusElement)!=null&&e.parentNode&&this.gameStatusElement.parentNode.removeChild(this.gameStatusElement),(t=this.cardDetailsElement)!=null&&t.parentNode&&this.cardDetailsElement.parentNode.removeChild(this.cardDetailsElement),this.clearQueue()}}const nt={class:"modal-content",role:"dialog","aria-labelledby":"accessibility-title","aria-describedby":"accessibility-description"},rt={style:{position:"absolute",width:"0",height:"0"}},ot=["innerHTML"],at={class:"modal-header"},ct={class:"modal-body"},lt={class:"settings-section"},ut={class:"setting-item"},dt={class:"setting-item"},mt={for:"high-contrast"},gt={class:"setting-item"},pt={class:"settings-section"},ht={class:"setting-item"},ft={for:"reduce-motion"},yt={key:0,class:"setting-item"},vt={class:"range-value"},wt={class:"settings-section"},bt={class:"setting-item"},St={for:"screen-reader"},Et={class:"setting-item"},kt={for:"audio-descriptions"},Ct={class:"setting-item"},At={class:"range-value"},xt={class:"settings-section"},It={class:"setting-item"},Tt={for:"sticky-keys"},_t={class:"setting-item"},Lt={class:"modal-footer"},Dt=N({__name:"AccessibilitySettings",props:{isOpen:{type:Boolean}},emits:["close","settingsChanged"],setup(o,{emit:e}){const t=o,s=e,i={colorScheme:"default",highContrast:!1,fontSize:"medium",reduceMotion:!1,animationSpeed:1,screenReaderEnabled:!1,audioDescriptions:!1,soundEffectsVolume:70,stickyKeys:!1,keyRepeatDelay:500,touchTargetSize:"default"},n=_(C({},i)),r=_(null),d={default:"",protanopia:`
    <filter id="protanopia">
      <feColorMatrix type="matrix" values="
        0.567, 0.433, 0,     0, 0
        0.558, 0.442, 0,     0, 0
        0,     0.242, 0.758, 0, 0
        0,     0,     0,     1, 0
      "/>
    </filter>
  `,deuteranopia:`
    <filter id="deuteranopia">
      <feColorMatrix type="matrix" values="
        0.625, 0.375, 0,   0, 0
        0.7,   0.3,   0,   0, 0
        0,     0.3,   0.7, 0, 0
        0,     0,     0,   1, 0
      "/>
    </filter>
  `,tritanopia:`
    <filter id="tritanopia">
      <feColorMatrix type="matrix" values="
        0.95, 0.05,  0,     0, 0
        0,    0.433, 0.567, 0, 0
        0,    0.475, 0.525, 0, 0
        0,    0,     0,     1, 0
      "/>
    </filter>
  `,achromatopsia:`
    <filter id="achromatopsia">
      <feColorMatrix type="matrix" values="
        0.299, 0.587, 0.114, 0, 0
        0.299, 0.587, 0.114, 0, 0
        0.299, 0.587, 0.114, 0, 0
        0,     0,     0,     1, 0
      "/>
    </filter>
  `},u=()=>{localStorage.setItem("accessibility-settings",JSON.stringify(n.value)),s("settingsChanged",n.value),h()},m=()=>{const g=localStorage.getItem("accessibility-settings");if(g)try{n.value=C(C({},i),JSON.parse(g))}catch(a){console.error("Failed to load accessibility settings:",a)}},h=()=>{const g=document.documentElement;n.value.colorScheme!=="default"?g.style.filter=`url(#${n.value.colorScheme})`:g.style.filter="",g.classList.toggle("high-contrast",n.value.highContrast);const a={small:"14px",medium:"16px",large:"20px","extra-large":"24px"};g.style.setProperty("--base-font-size",a[n.value.fontSize]),g.classList.toggle("reduce-motion",n.value.reduceMotion),g.style.setProperty("--animation-speed-multiplier",String(n.value.animationSpeed));const l={default:"44px",large:"56px","extra-large":"72px"};g.style.setProperty("--touch-target-size",l[n.value.touchTargetSize]),r.value&&r.value.announce("ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸ",{priority:"polite"})},E=(g,a)=>{const l=n.value[g];n.value[g]=a,h(),setTimeout(()=>{n.value[g]===a&&(n.value[g]=l,h())},3e3)},S=()=>{n.value=C({},i),u(),r.value&&r.value.announce("ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ",{priority:"assertive"})},y=()=>{const g=a=>{if(t.isOpen&&a.ctrlKey&&a.altKey)switch(a.key){case"c":const l=["default","protanopia","deuteranopia","tritanopia","achromatopsia"],A=l.indexOf(n.value.colorScheme);n.value.colorScheme=l[(A+1)%l.length],u();break;case"h":n.value.highContrast=!n.value.highContrast,u();break;case"m":n.value.reduceMotion=!n.value.reduceMotion,u();break}};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)};return ie(()=>{m(),h(),r.value=new He;const g=y();return()=>{var a;g(),(a=r.value)==null||a.destroy()}}),We(()=>n.value,()=>{u()},{deep:!0}),(g,a)=>(v(),ke(le,{name:"modal"},{default:U(()=>[g.isOpen?(v(),w("div",{key:0,class:"accessibility-modal",onClick:a[13]||(a[13]=Me(l=>s("close"),["self"]))},[c("div",nt,[(v(),w("svg",rt,[c("defs",{innerHTML:Object.values(d).join("")},null,8,ot)])),c("div",at,[a[15]||(a[15]=c("h2",{id:"accessibility-title"},"ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®š",-1)),c("button",{onClick:a[0]||(a[0]=l=>s("close")),class:"close-button","aria-label":"è¨­å®šã‚’é–‰ã˜ã‚‹"},a[14]||(a[14]=[c("span",{"aria-hidden":"true"},"Ã—",-1)]))]),a[36]||(a[36]=c("div",{id:"accessibility-description",class:"sr-only"}," ã‚²ãƒ¼ãƒ ã®ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã§ãã¾ã™ã€‚ Ctrl+Alt+Cã§è‰²è¦šè¨­å®šã€Ctrl+Alt+Hã§ãƒã‚¤ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆã€Ctrl+Alt+Mã§ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³å‰Šæ¸›ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã¾ã™ã€‚ ",-1)),c("div",ct,[c("section",lt,[a[22]||(a[22]=c("h3",null,"è¦–è¦šè¨­å®š",-1)),c("div",ut,[a[17]||(a[17]=c("label",{for:"color-scheme"},"è‰²è¦šã‚µãƒãƒ¼ãƒˆ",-1)),O(c("select",{id:"color-scheme","onUpdate:modelValue":a[1]||(a[1]=l=>n.value.colorScheme=l),onChange:u},a[16]||(a[16]=[c("option",{value:"default"},"æ¨™æº–",-1),c("option",{value:"protanopia"},"èµ¤è‰²è¦šç•°å¸¸ï¼ˆ1å‹ï¼‰",-1),c("option",{value:"deuteranopia"},"ç·‘è‰²è¦šç•°å¸¸ï¼ˆ2å‹ï¼‰",-1),c("option",{value:"tritanopia"},"é’è‰²è¦šç•°å¸¸ï¼ˆ3å‹ï¼‰",-1),c("option",{value:"achromatopsia"},"å…¨è‰²è¦šç•°å¸¸",-1)]),544),[[ge,n.value.colorScheme]]),c("button",{onClick:a[2]||(a[2]=l=>E("colorScheme",n.value.colorScheme)),class:"preview-button","aria-label":"è‰²è¦šè¨­å®šã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼"}," ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ ")]),c("div",dt,[c("label",mt,[O(c("input",{id:"high-contrast",type:"checkbox","onUpdate:modelValue":a[3]||(a[3]=l=>n.value.highContrast=l),onChange:u},null,544),[[X,n.value.highContrast]]),a[18]||(a[18]=F(" ãƒã‚¤ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ ",-1))]),a[19]||(a[19]=c("span",{class:"setting-description"}," ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆã‚’é«˜ã‚ã¦è¦–èªæ€§ã‚’å‘ä¸Šã•ã›ã¾ã™ ",-1))]),c("div",gt,[a[21]||(a[21]=c("label",{for:"font-size"},"æ–‡å­—ã‚µã‚¤ã‚º",-1)),O(c("select",{id:"font-size","onUpdate:modelValue":a[4]||(a[4]=l=>n.value.fontSize=l),onChange:u},a[20]||(a[20]=[c("option",{value:"small"},"å°ï¼ˆ14pxï¼‰",-1),c("option",{value:"medium"},"ä¸­ï¼ˆ16pxï¼‰",-1),c("option",{value:"large"},"å¤§ï¼ˆ20pxï¼‰",-1),c("option",{value:"extra-large"},"ç‰¹å¤§ï¼ˆ24pxï¼‰",-1)]),544),[[ge,n.value.fontSize]])])]),c("section",pt,[a[26]||(a[26]=c("h3",null,"ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š",-1)),c("div",ht,[c("label",ft,[O(c("input",{id:"reduce-motion",type:"checkbox","onUpdate:modelValue":a[5]||(a[5]=l=>n.value.reduceMotion=l),onChange:u},null,544),[[X,n.value.reduceMotion]]),a[23]||(a[23]=F(" ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‰Šæ¸› ",-1))]),a[24]||(a[24]=c("span",{class:"setting-description"}," ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æœ€å°é™ã«æŠ‘ãˆã¾ã™ ",-1))]),n.value.reduceMotion?T("",!0):(v(),w("div",yt,[a[25]||(a[25]=c("label",{for:"animation-speed"},"ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é€Ÿåº¦",-1)),O(c("input",{id:"animation-speed",type:"range",min:"0.1",max:"2.0",step:"0.1","onUpdate:modelValue":a[6]||(a[6]=l=>n.value.animationSpeed=l),onChange:u},null,544),[[Le,n.value.animationSpeed,void 0,{number:!0}]]),c("span",vt,x(n.value.animationSpeed)+"x",1)]))]),c("section",wt,[a[30]||(a[30]=c("h3",null,"ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªè¨­å®š",-1)),c("div",bt,[c("label",St,[O(c("input",{id:"screen-reader",type:"checkbox","onUpdate:modelValue":a[7]||(a[7]=l=>n.value.screenReaderEnabled=l),onChange:u},null,544),[[X,n.value.screenReaderEnabled]]),a[27]||(a[27]=F(" ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œã‚’æœ‰åŠ¹åŒ– ",-1))])]),c("div",Et,[c("label",kt,[O(c("input",{id:"audio-descriptions",type:"checkbox","onUpdate:modelValue":a[8]||(a[8]=l=>n.value.audioDescriptions=l),onChange:u},null,544),[[X,n.value.audioDescriptions]]),a[28]||(a[28]=F(" éŸ³å£°èª¬æ˜ã‚’æœ‰åŠ¹åŒ– ",-1))])]),c("div",Ct,[a[29]||(a[29]=c("label",{for:"sound-volume"},"åŠ¹æœéŸ³ã®éŸ³é‡",-1)),O(c("input",{id:"sound-volume",type:"range",min:"0",max:"100",step:"5","onUpdate:modelValue":a[9]||(a[9]=l=>n.value.soundEffectsVolume=l),onChange:u},null,544),[[Le,n.value.soundEffectsVolume,void 0,{number:!0}]]),c("span",At,x(n.value.soundEffectsVolume)+"%",1)])]),c("section",xt,[a[35]||(a[35]=c("h3",null,"ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³è¨­å®š",-1)),c("div",It,[c("label",Tt,[O(c("input",{id:"sticky-keys",type:"checkbox","onUpdate:modelValue":a[10]||(a[10]=l=>n.value.stickyKeys=l),onChange:u},null,544),[[X,n.value.stickyKeys]]),a[31]||(a[31]=F(" ã‚¹ãƒ†ã‚£ãƒƒã‚­ãƒ¼ã‚­ãƒ¼ ",-1))]),a[32]||(a[32]=c("span",{class:"setting-description"}," ä¿®é£¾ã‚­ãƒ¼ã‚’ä¸€åº¦ã«æŠ¼ã™å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ ",-1))]),c("div",_t,[a[34]||(a[34]=c("label",{for:"touch-target-size"},"ã‚¿ãƒƒãƒã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚µã‚¤ã‚º",-1)),O(c("select",{id:"touch-target-size","onUpdate:modelValue":a[11]||(a[11]=l=>n.value.touchTargetSize=l),onChange:u},a[33]||(a[33]=[c("option",{value:"default"},"æ¨™æº–ï¼ˆ44pxï¼‰",-1),c("option",{value:"large"},"å¤§ï¼ˆ56pxï¼‰",-1),c("option",{value:"extra-large"},"ç‰¹å¤§ï¼ˆ72pxï¼‰",-1)]),544),[[ge,n.value.touchTargetSize]])])])]),c("div",Lt,[c("button",{onClick:S,class:"reset-button","aria-label":"ã™ã¹ã¦ã®è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆ"}," è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆ "),c("button",{onClick:a[12]||(a[12]=l=>s("close")),class:"save-button","aria-label":"è¨­å®šã‚’ä¿å­˜ã—ã¦é–‰ã˜ã‚‹"}," ä¿å­˜ã—ã¦é–‰ã˜ã‚‹ ")])])])):T("",!0)]),_:1}))}}),$t=z(Dt,[["__scopeId","data-v-edce860d"]]);class Rt{constructor(e={}){p(this,"focusedElement",null);p(this,"indicator");p(this,"options");this.options={color:e.color||"#818CF8",width:e.width||3,style:e.style||"solid",offset:e.offset||4,borderRadius:e.borderRadius||8},this.indicator=this.createIndicator(),document.body.appendChild(this.indicator),this.setupEventListeners()}createIndicator(){const e=document.createElement("div");return e.className="focus-indicator",e.style.cssText=`
      position: fixed;
      pointer-events: none;
      z-index: 10000;
      transition: all 200ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
      opacity: 0;
      border: ${this.options.width}px ${this.options.style} ${this.options.color};
      border-radius: ${this.options.borderRadius}px;
      box-shadow: 0 0 20px rgba(129, 140, 248, 0.4);
    `,e}setupEventListeners(){document.addEventListener("focusin",this.handleFocusIn.bind(this)),document.addEventListener("focusout",this.handleFocusOut.bind(this)),window.addEventListener("scroll",this.updatePosition.bind(this),!0),window.addEventListener("resize",this.updatePosition.bind(this)),new MutationObserver(()=>{this.focusedElement&&this.updatePosition()}).observe(document.body,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["style","class"]})}handleFocusIn(e){const t=e.target;this.isFocusableElement(t)&&(this.focusedElement=t,this.showIndicator(t))}handleFocusOut(){this.focusedElement=null,this.hideIndicator()}isFocusableElement(e){return["button","input","select","textarea","a[href]",'[tabindex]:not([tabindex="-1"])',"[contenteditable]"].some(s=>e.matches(s)||e.closest(s))}showIndicator(e){const t=e.getBoundingClientRect(),s=this.options.offset;this.indicator.style.left=`${t.left-s}px`,this.indicator.style.top=`${t.top-s}px`,this.indicator.style.width=`${t.width+s*2}px`,this.indicator.style.height=`${t.height+s*2}px`,this.indicator.style.opacity="1";const n=window.getComputedStyle(e).borderRadius;n&&n!=="0px"&&(this.indicator.style.borderRadius=n)}hideIndicator(){this.indicator.style.opacity="0"}updatePosition(){this.focusedElement&&this.focusedElement===document.activeElement&&this.showIndicator(this.focusedElement)}setOptions(e){Object.assign(this.options,e),this.indicator.style.border=`${this.options.width}px ${this.options.style} ${this.options.color}`,this.indicator.style.borderRadius=`${this.options.borderRadius}px`,this.focusedElement&&this.updatePosition()}destroy(){this.indicator.remove(),document.removeEventListener("focusin",this.handleFocusIn.bind(this)),document.removeEventListener("focusout",this.handleFocusOut.bind(this)),window.removeEventListener("scroll",this.updatePosition.bind(this),!0),window.removeEventListener("resize",this.updatePosition.bind(this))}}const Pt={key:0,class:"keyboard-hints",role:"tooltip","aria-live":"polite"},Mt={class:"hints-list"},Ft={class:"hint-key"},Ot={class:"hint-description"},Ht={key:0,class:"settings-panel"},Nt=["value"],zt=["value"],Ut=N({__name:"VisualIndicators",props:{enabled:{type:Boolean,default:!0},color:{default:"#818CF8"},width:{default:3},style:{default:"solid"},offset:{default:4},borderRadius:{default:8},showKeyboardHints:{type:Boolean,default:!0},reducedMotion:{type:Boolean,default:!1}},setup(o,{expose:e}){const s=o,i=_(s.enabled),n=_({color:s.color,width:s.width,style:s.style,offset:s.offset,borderRadius:s.borderRadius});let r=null;const d=_(!1),u=_(null),m=V(()=>({"--focus-color":n.value.color,"--focus-width":`${n.value.width}px`,"--focus-offset":`${n.value.offset}px`,"--focus-radius":`${n.value.borderRadius}px`})),h=V(()=>[{key:"Tab",description:"æ¬¡ã®è¦ç´ ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹"},{key:"Shift + Tab",description:"å‰ã®è¦ç´ ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹"},{key:"Enter",description:"é¸æŠã—ãŸè¦ç´ ã‚’å®Ÿè¡Œ"},{key:"Space",description:"ãƒœã‚¿ãƒ³ã‚„ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’æ“ä½œ"},{key:"Arrow Keys",description:"ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚„é¸æŠè‚¢ã‚’ç§»å‹•"},{key:"Escape",description:"ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚„ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹"}]),E=()=>{i.value&&!r&&(r=new Rt(n.value))},S=()=>{r&&(r.destroy(),r=null)},y=()=>{r&&r.setOptions(n.value)},g=()=>{s.showKeyboardHints&&(d.value=!0,u.value&&clearTimeout(u.value),u.value=window.setTimeout(()=>{d.value=!1},5e3))},a=()=>{d.value=!1,u.value&&(clearTimeout(u.value),u.value=null)},l=I=>{I.key==="Tab"&&g()},A=I=>{Object.assign(n.value,I),y()},L=()=>{i.value=!i.value,i.value?E():S()};return ie(()=>{E(),document.addEventListener("keydown",l),window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(n.value=R(C({},n.value),{offset:2}),y())}),ue(()=>{S(),document.removeEventListener("keydown",l),u.value&&clearTimeout(u.value)}),e({updateSettings:A,toggleEnabled:L,showKeyboardHints:g,hideKeyboardHints:a}),(I,k)=>(v(),w("div",{class:Z(["visual-indicators",{"reduced-motion":I.reducedMotion,"hints-visible":d.value}]),style:we(m.value)},[D(le,{name:"hints-fade"},{default:U(()=>[d.value&&g?(v(),w("div",Pt,[c("div",{class:"hints-header"},[k[3]||(k[3]=c("h3",{class:"hints-title"},"ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ",-1)),c("button",{onClick:a,class:"hints-close","aria-label":"ãƒ’ãƒ³ãƒˆã‚’é–‰ã˜ã‚‹"}," Ã— ")]),c("ul",Mt,[(v(!0),w(te,null,se(h.value,$=>(v(),w("li",{key:$.key,class:"hint-item"},[c("kbd",Ft,x($.key),1),c("span",Ot,x($.description),1)]))),128))])])):T("",!0)]),_:1}),M(!1)?(v(),w("div",Ht,[k[7]||(k[7]=c("h4",null,"ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼è¨­å®š",-1)),c("label",null,[O(c("input",{"onUpdate:modelValue":k[0]||(k[0]=$=>i.value=$),type:"checkbox",onChange:L},null,544),[[X,i.value]]),k[4]||(k[4]=F(" æœ‰åŠ¹ ",-1))]),c("label",null,[k[5]||(k[5]=F(" è‰²: ",-1)),c("input",{value:n.value.color,type:"color",onInput:k[1]||(k[1]=$=>A({color:$.target.value}))},null,40,Nt)]),c("label",null,[k[6]||(k[6]=F(" å¹…: ",-1)),c("input",{value:n.value.width,type:"range",min:"1",max:"10",onInput:k[2]||(k[2]=$=>A({width:parseInt($.target.value)}))},null,40,zt)])])):T("",!0)],6))}}),Vt=z(Ut,[["__scopeId","data-v-4853097c"]]),Bt=["data-severity"],jt={key:0,class:"error-minimal"},qt={key:1,class:"error-detailed"},Kt={class:"error-user-message"},Gt={class:"error-actions"},Wt=["disabled"],Qt={key:0,class:"error-details"},Jt={class:"error-technical"},Yt={key:0,class:"error-stack"},Xt={key:2,class:"error-custom"},Zt=N({__name:"ErrorBoundary",props:{fallback:{default:"detailed"},onError:{},canRecover:{type:Boolean,default:!0},recoveryMessage:{default:"ã‚¨ãƒ©ãƒ¼ã‹ã‚‰å›å¾©ã™ã‚‹ã«ã¯ã€ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„"}},emits:["error","recover"],setup(o,{emit:e}){const t=o,s=!1,i=e,n=_(!1),r=_(null),d=_(""),u=_(0),m=_(!1),h=V(()=>{if(!r.value)return"low";const l=r.value.message.toLowerCase();return l.includes("cannot read")||l.includes("undefined")?"high":l.includes("network")||l.includes("fetch")?"medium":"low"}),E=V(()=>{if(!r.value)return"";const l=r.value.message;return l.includes("Network")?"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸ":l.includes("Cannot read")?"ç”»é¢ã®è¡¨ç¤ºä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ":l.includes("undefined")||l.includes("null")?"ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ":l.includes("timeout")?"å‡¦ç†ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ":"äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ"});Qe((l,A,L)=>(console.error("[ErrorBoundary] Caught error:",l),console.error("[ErrorBoundary] Error info:",L),console.error("[ErrorBoundary] Component instance:",A),n.value=!0,r.value=l,d.value=L,u.value++,t.onError&&t.onError(l,A,L),i("error",l,L),!1));const S=()=>f(null,null,function*(){m.value=!0;try{n.value=!1,r.value=null,d.value="",i("recover"),yield new Promise(l=>setTimeout(l,100))}catch(l){console.error("[ErrorBoundary] Recovery failed:",l),n.value=!0}finally{m.value=!1}}),y=()=>{window.location.reload()},g=()=>f(null,null,function*(){if(!r.value)return;const l=`
ã‚¨ãƒ©ãƒ¼: ${r.value.message}
ã‚¹ã‚¿ãƒƒã‚¯: ${r.value.stack||"N/A"}
æƒ…å ±: ${d.value}
æ™‚åˆ»: ${new Date().toISOString()}
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ: ${navigator.userAgent}
  `.trim();try{yield navigator.clipboard.writeText(l),alert("ã‚¨ãƒ©ãƒ¼è©³ç´°ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ")}catch(A){console.error("Failed to copy error details:",A)}}),a=()=>{if(!r.value)return;const l=new CustomEvent("app:send-error-report",{detail:{error:r.value,info:d.value,component:"ErrorBoundary"}});window.dispatchEvent(l),alert("ã‚¨ãƒ©ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆã‚’é€ä¿¡ã—ã¾ã—ãŸ")};return(l,A)=>{var L,I;return n.value?(v(),w("div",{key:0,class:"error-boundary","data-severity":h.value},[l.fallback==="minimal"?(v(),w("div",jt,[A[0]||(A[0]=c("p",{class:"error-message"},"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",-1)),c("button",{onClick:y,class:"error-action-btn"}," ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ ")])):l.fallback==="detailed"?(v(),w("div",qt,[A[5]||(A[5]=Ce('<div class="error-icon" aria-hidden="true" data-v-bddb116a><svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" data-v-bddb116a><circle cx="12" cy="12" r="10" stroke-width="2" data-v-bddb116a></circle><line x1="12" y1="8" x2="12" y2="12" stroke-width="2" data-v-bddb116a></line><line x1="12" y1="16" x2="12.01" y2="16" stroke-width="2" data-v-bddb116a></line></svg></div><h2 class="error-title" data-v-bddb116a>ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</h2>',2)),c("p",Kt,x(E.value),1),c("div",Gt,[l.canRecover&&!m.value?(v(),w("button",{key:0,onClick:S,class:"error-action-btn primary",disabled:u.value>3},x(u.value>3?"å›å¾©ã§ãã¾ã›ã‚“":"å›å¾©ã‚’è©¦ã¿ã‚‹"),9,Wt)):T("",!0),c("button",{onClick:y,class:"error-action-btn secondary"}," ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ ")]),M(s)?(v(),w("details",Qt,[A[4]||(A[4]=c("summary",null,"ã‚¨ãƒ©ãƒ¼è©³ç´°ï¼ˆé–‹ç™ºè€…å‘ã‘ï¼‰",-1)),c("div",Jt,[c("p",null,[A[1]||(A[1]=c("strong",null,"ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:",-1)),F(" "+x((L=r.value)==null?void 0:L.message),1)]),c("p",null,[A[2]||(A[2]=c("strong",null,"ã‚¨ãƒ©ãƒ¼æƒ…å ±:",-1)),F(" "+x(d.value),1)]),c("p",null,[A[3]||(A[3]=c("strong",null,"ã‚¨ãƒ©ãƒ¼å›æ•°:",-1)),F(" "+x(u.value),1)]),(I=r.value)!=null&&I.stack?(v(),w("pre",Yt,x(r.value.stack),1)):T("",!0),c("div",{class:"error-dev-actions"},[c("button",{onClick:g,class:"error-action-btn small"}," è©³ç´°ã‚’ã‚³ãƒ”ãƒ¼ "),c("button",{onClick:a,class:"error-action-btn small"}," ãƒ¬ãƒãƒ¼ãƒˆé€ä¿¡ ")])])])):T("",!0)])):l.fallback==="custom"?(v(),w("div",Xt,[ve(l.$slots,"error",{error:r.value,retry:S,reload:y},void 0)])):T("",!0)],8,Bt)):ve(l.$slots,"default",{key:1},void 0)}}}),$e=z(Zt,[["__scopeId","data-v-bddb116a"]]);class es{constructor(){p(this,"patterns",[]);p(this,"fallbackMessages",new Map);this.initializeDefaultPatterns(),this.initializeFallbackMessages()}initializeDefaultPatterns(){this.patterns.push({id:"network-offline",pattern:/network|offline|connection/i,message:{title:"ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šãŒåˆ‡æ–­ã•ã‚Œã¦ã„ã¾ã™",description:"ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ã€ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚",actionLabel:"å†è©¦è¡Œ",actionType:"retry",icon:"ğŸ“¡",severity:"error",helpUrl:"/help/network-issues"},conditions:{category:["network"]}}),this.patterns.push({id:"network-timeout",pattern:/timeout|slow/i,message:{title:"æ¥ç¶šãŒé…ããªã£ã¦ã„ã¾ã™",description:"ã‚µãƒ¼ãƒãƒ¼ã¸ã®æ¥ç¶šã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã¾ã™ã€‚ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚",actionLabel:"ã‚‚ã†ä¸€åº¦è©¦ã™",actionType:"retry",icon:"â°",severity:"warning"},conditions:{category:["network","async"]}}),this.patterns.push({id:"game-save-failed",pattern:/save|storage|quota/i,message:{title:"ã‚²ãƒ¼ãƒ ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ",description:"ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å®¹é‡ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚",actionLabel:"ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ç¢ºèª",actionType:"navigate",actionData:{url:"/settings/storage"},icon:"ğŸ’¾",severity:"error",showDetails:!0},conditions:{category:["game","system"]}}),this.patterns.push({id:"game-state-corrupted",pattern:/corrupted|invalid.*state|cannot.*read.*game/i,message:{title:"ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã«å•é¡ŒãŒã‚ã‚Šã¾ã™",description:"ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ãŒç ´æã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æ–°ã—ã„ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚",actionLabel:"æ–°ã—ã„ã‚²ãƒ¼ãƒ ",actionType:"navigate",actionData:{url:"/new-game"},icon:"ğŸ®",severity:"critical",showDetails:!0},conditions:{category:["game"],severity:["high","critical"]}}),this.patterns.push({id:"ui-component-error",pattern:/component|render|mount/i,message:{title:"ç”»é¢ã®è¡¨ç¤ºã‚¨ãƒ©ãƒ¼",description:"ç”»é¢ã®ä¸€éƒ¨ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã™ã‚‹ã¨è§£æ±ºã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸ–¥ï¸",severity:"warning"},conditions:{category:["vue"]}}),this.patterns.push({id:"performance-memory",pattern:/memory|heap|stack.*overflow/i,message:{title:"ãƒ¡ãƒ¢ãƒªä¸è¶³ã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™",description:"ä»–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‰ã˜ã¦ã€ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ã—ã¦ãã ã•ã„ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"âš¡",severity:"error",helpUrl:"/help/performance"},conditions:{category:["performance","system"]}}),this.patterns.push({id:"security-cors",pattern:/cors|cross.*origin|blocked/i,message:{title:"ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ¶é™ãŒç™ºç”Ÿã—ã¾ã—ãŸ",description:"ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã«ã‚ˆã‚Šã€ä¸€éƒ¨ã®æ©Ÿèƒ½ãŒåˆ¶é™ã•ã‚Œã¦ã„ã¾ã™ã€‚",actionLabel:"ã‚µãƒãƒ¼ãƒˆã«é€£çµ¡",actionType:"contact",icon:"ğŸ”’",severity:"error",helpUrl:"/help/security-issues"},conditions:{category:["security"]}}),this.patterns.push({id:"js-undefined",pattern:/undefined|null.*property|cannot.*read/i,message:{title:"äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",description:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§äºˆæœŸã—ãªã„å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚é–‹ç™ºãƒãƒ¼ãƒ ã«å ±å‘Šã•ã‚Œã¾ã™ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"âš ï¸",severity:"error",showDetails:!0},conditions:{category:["javascript"],severity:["high","critical"]}}),this.patterns.push({id:"resource-load-failed",pattern:/loading|chunk.*error|failed.*fetch.*resource/i,message:{title:"ãƒªã‚½ãƒ¼ã‚¹ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ",description:"ãƒšãƒ¼ã‚¸ã®ä¸€éƒ¨ã®ãƒªã‚½ãƒ¼ã‚¹ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸ“¦",severity:"warning"},conditions:{category:["network","system"]}})}initializeFallbackMessages(){this.fallbackMessages.set("network",{title:"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼",description:"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"å†è©¦è¡Œ",actionType:"retry",icon:"ğŸŒ",severity:"error"}),this.fallbackMessages.set("vue",{title:"UI ã‚¨ãƒ©ãƒ¼",description:"ç”»é¢ã®è¡¨ç¤ºã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸ–¼ï¸",severity:"warning"}),this.fallbackMessages.set("javascript",{title:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼",description:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"âš™ï¸",severity:"error"}),this.fallbackMessages.set("game",{title:"ã‚²ãƒ¼ãƒ ã‚¨ãƒ©ãƒ¼",description:"ã‚²ãƒ¼ãƒ ä¸­ã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"ã‚²ãƒ¼ãƒ ã‚’å†é–‹",actionType:"retry",icon:"ğŸ®",severity:"error"}),this.fallbackMessages.set("async",{title:"å‡¦ç†ã‚¨ãƒ©ãƒ¼",description:"éåŒæœŸå‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"å†è©¦è¡Œ",actionType:"retry",icon:"â³",severity:"warning"}),this.fallbackMessages.set("performance",{title:"ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å•é¡Œ",description:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å‹•ä½œãŒé‡ããªã£ã¦ã„ã¾ã™ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸš€",severity:"warning"}),this.fallbackMessages.set("security",{title:"ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¨ãƒ©ãƒ¼",description:"ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ¶é™ã«ã‚ˆã‚Šæ“ä½œãŒåˆ¶é™ã•ã‚Œã¾ã—ãŸã€‚",actionLabel:"ã‚µãƒãƒ¼ãƒˆã«é€£çµ¡",actionType:"contact",icon:"ğŸ”",severity:"error"}),this.fallbackMessages.set("user",{title:"ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã‚¨ãƒ©ãƒ¼",description:"æ“ä½œã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"ã‚‚ã†ä¸€åº¦è©¦ã™",actionType:"retry",icon:"ğŸ‘¤",severity:"info"}),this.fallbackMessages.set("system",{title:"ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼",description:"ã‚·ã‚¹ãƒ†ãƒ ã§å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸ–¥ï¸",severity:"error"})}generateUserMessage(e){for(const s of this.patterns)if(this.matchesPattern(e,s))return this.enrichMessage(s.message,e);const t=this.fallbackMessages.get(e.category);return t?this.enrichMessage(t,e):this.enrichMessage({title:"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",description:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãæ™‚é–“ã‚’ãŠã„ã¦ã‹ã‚‰å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"â—",severity:"error"},e)}matchesPattern(e,t){if(!(t.pattern instanceof RegExp?t.pattern.test(e.message):e.message.toLowerCase().includes(t.pattern.toLowerCase())))return!1;if(t.conditions){const{category:i,severity:n,context:r}=t.conditions;if(i&&!i.includes(e.category)||n&&!n.includes(e.severity)||r&&!r(e))return!1}return!0}enrichMessage(e,t){var s,i;return new Date(t.timestamp).toLocaleTimeString(),R(C({},e),{description:`${e.description}${(i=(s=t.context)==null?void 0:s.deviceInfo)!=null&&i.isMobile?" (ãƒ¢ãƒã‚¤ãƒ«)":""}`,actionData:R(C({},e.actionData),{timestamp:t.timestamp,errorId:t.fingerprint,component:t.component})})}addPattern(e){if(this.patterns.some(s=>s.id===e.id)){console.warn(`Pattern with id "${e.id}" already exists`);return}this.patterns.unshift(e)}removePattern(e){const t=this.patterns.findIndex(s=>s.id===e);return t!==-1?(this.patterns.splice(t,1),!0):!1}getPatterns(){return[...this.patterns]}previewMessage(e,t,s="medium"){const i={message:e,category:t,severity:s,timestamp:Date.now(),userAgent:navigator.userAgent};return this.generateUserMessage(i)}getStats(){return{patternsCount:this.patterns.length,categoriesCount:this.fallbackMessages.size,patterns:this.patterns.map(e=>({id:e.id,hasConditions:!!e.conditions}))}}}const Ne=new es,ts={class:"error-notification-container",role:"alert","aria-live":"polite"},ss=["aria-label"],is={class:"notification-content"},ns={class:"notification-icon","aria-hidden":"true"},rs={class:"notification-body"},os={class:"notification-title"},as={class:"notification-description"},cs={key:0,class:"notification-actions"},ls=["onClick"],us=["onClick"],ds=["onClick"],ms={key:1,class:"notification-details"},gs={class:"detail-section"},ps={key:0,class:"detail-section"},hs={class:"detail-section"},fs={class:"detail-tag"},ys={class:"detail-tag"},vs={key:1,class:"detail-section"},ws={class:"detail-section"},bs=["onClick","aria-label"],Re=3,Ss=5e3,Es=N({__name:"ErrorNotification",setup(o,{expose:e}){const t=_([]),s=g=>{var A,L;const a=`${Date.now()}-${Math.random()}`,l=R(C({},g),{id:a,timestamp:Date.now(),autoHide:(A=g.autoHide)!=null?A:g.userMessage.severity!=="critical",hideDelay:(L=g.hideDelay)!=null?L:Ss,isExpanded:!1});t.value.unshift(l),t.value.length>Re&&(t.value=t.value.slice(0,Re)),l.autoHide&&setTimeout(()=>{i(a)},l.hideDelay)},i=g=>{const a=t.value.findIndex(l=>l.id===g);a!==-1&&t.value.splice(a,1)},n=()=>{t.value=[]},r=g=>{const a=g.detail;if(t.value.some(A=>A.originalError.fingerprint===a.fingerprint))return;const l=Ne.generateUserMessage(a);s({userMessage:l,originalError:a})},d=g=>g.icon||u(g.severity),u=g=>{switch(g){case"critical":return"ğŸš¨";case"error":return"âš ï¸";case"warning":return"â„¹ï¸";case"info":return"ğŸ’¡"}},m=g=>{switch(g){case"critical":return"notification-critical";case"error":return"notification-error";case"warning":return"notification-warning";case"info":return"notification-info"}},h=g=>{const{actionType:a,actionData:l}=g.userMessage;switch(a){case"reload":window.location.reload();break;case"retry":const A=new CustomEvent("app:retry-action",{detail:{errorId:l==null?void 0:l.errorId,component:l==null?void 0:l.component}});window.dispatchEvent(A),i(g.id);break;case"navigate":l!=null&&l.url&&(window.location.href=l.url);break;case"contact":const L=new CustomEvent("app:open-support",{detail:{errorInfo:g.originalError}});window.dispatchEvent(L);break;case"close":default:i(g.id);break}},E=g=>{const a=t.value.find(l=>l.id===g);a&&(a.isExpanded=!a.isExpanded)},S=g=>{window.open(g,"_blank","noopener,noreferrer")},y=V(()=>t.value.map((g,a)=>R(C({},g),{offset:a*(g.isExpanded?120:80),opacity:a<3?1:.5})));return ie(()=>{window.addEventListener("app:error",r),window.addEventListener("app:system-alert",g=>{const{message:a}=g.detail;s({userMessage:{title:"ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ©ãƒ¼ãƒˆ",description:a,actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸš€",severity:"critical",showDetails:!1},originalError:{message:a,category:"system",severity:"critical",timestamp:Date.now(),userAgent:navigator.userAgent},autoHide:!1})})}),ue(()=>{window.removeEventListener("app:error",r),window.removeEventListener("app:system-alert",()=>{})}),e({addNotification:s,removeNotification:i,clearAll:n,executeAction:h,toggleDetails:E}),(g,a)=>(v(),ke(Fe,{to:"body"},[c("div",ts,[D(Je,{name:"notification",tag:"div"},{default:U(()=>[(v(!0),w(te,null,se(y.value,(l,A)=>{var L;return v(),w("div",{key:l.id,class:Z(["error-notification",m(l.userMessage.severity),{expanded:l.isExpanded}]),style:we({transform:`translateY(${l.offset}px)`,opacity:l.opacity,zIndex:1e3-A}),role:"alertdialog","aria-label":`${l.userMessage.severity}ã‚¨ãƒ©ãƒ¼: ${l.userMessage.title}`},[c("div",is,[c("span",ns,x(d(l.userMessage)),1),c("div",rs,[c("h4",os,x(l.userMessage.title),1),c("p",as,x(l.userMessage.description),1),l.userMessage.actionLabel?(v(),w("div",cs,[c("button",{onClick:I=>h(l),class:"notification-action-btn primary"},x(l.userMessage.actionLabel),9,ls),l.userMessage.helpUrl?(v(),w("button",{key:0,onClick:I=>S(l.userMessage.helpUrl),class:"notification-action-btn secondary small"}," ãƒ˜ãƒ«ãƒ— ",8,us)):T("",!0),l.userMessage.showDetails?(v(),w("button",{key:1,onClick:I=>E(l.id),class:"notification-action-btn secondary small"},x(l.isExpanded?"è©³ç´°ã‚’éš ã™":"è©³ç´°ã‚’è¡¨ç¤º"),9,ds)):T("",!0)])):T("",!0),l.isExpanded&&l.userMessage.showDetails?(v(),w("div",ms,[c("div",gs,[a[0]||(a[0]=c("strong",null,"ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:",-1)),c("code",null,x(l.originalError.message),1)]),l.originalError.component?(v(),w("div",ps,[a[1]||(a[1]=c("strong",null,"ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ:",-1)),c("code",null,x(l.originalError.component),1)])):T("",!0),c("div",hs,[a[2]||(a[2]=c("strong",null,"ã‚«ãƒ†ã‚´ãƒª:",-1)),c("span",fs,x(l.originalError.category),1),a[3]||(a[3]=c("strong",null,"æ·±åˆ»åº¦:",-1)),c("span",ys,x(l.originalError.severity),1)]),(L=l.originalError.context)!=null&&L.route?(v(),w("div",vs,[a[4]||(a[4]=c("strong",null,"ãƒšãƒ¼ã‚¸:",-1)),c("code",null,x(l.originalError.context.route),1)])):T("",!0),c("div",ws,[a[5]||(a[5]=c("strong",null,"æ™‚åˆ»:",-1)),F(" "+x(new Date(l.originalError.timestamp).toLocaleString()),1)])])):T("",!0)]),c("button",{onClick:I=>i(l.id),class:"notification-close","aria-label":`é€šçŸ¥ã‚’é–‰ã˜ã‚‹: ${l.userMessage.title}`},a[6]||(a[6]=[c("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[c("line",{x1:"18",y1:"6",x2:"6",y2:"18","stroke-width":"2"}),c("line",{x1:"6",y1:"6",x2:"18",y2:"18","stroke-width":"2"})],-1)]),8,bs)]),l.autoHide?(v(),w("div",{key:0,class:"notification-progress",style:we({animationDuration:`${l.hideDelay}ms`})},null,4)):T("",!0)],14,ss)}),128))]),_:1})])]))}}),ks=z(Es,[["__scopeId","data-v-d3cf7348"]]);function ee(o){if(typeof o!="string")throw new Error("å…¥åŠ›ã¯æ–‡å­—åˆ—ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™");return o.replace(/<[^>]*>/g,"").replace(/javascript:/gi,"").replace(/on\w+\s*=/gi,"").replace(/[<>"'&]/g,e=>({"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","&":"&amp;"})[e]||e).replace(/\x00-\x1f\x7f-\x9f/g,"").trim().slice(0,1e3)}class Cs{constructor(){p(this,"attempts",new Map)}isAllowed(e,t,s){const i=Date.now(),r=(this.attempts.get(e)||[]).filter(d=>i-d<s);return r.length>=t?!1:(r.push(i),this.attempts.set(e,r),!0)}reset(e){this.attempts.delete(e)}clear(){this.attempts.clear()}}function Ae(o){if(o<=0||o>256)throw new Error("é•·ã•ã¯1ã‹ã‚‰256ã®é–“ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™");const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=new Uint8Array(o);if(typeof window!="undefined"&&window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(t);else{console.warn("âš ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è­¦å‘Š: crypto.getRandomValues ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè£…ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚");for(let s=0;s<o;s++)t[s]=Math.floor(Math.random()*256)}return Array.from(t,s=>e[s%e.length]).join("")}function ne(o){return f(this,null,function*(){if(typeof window!="undefined"&&window.crypto&&window.crypto.subtle){const t=new TextEncoder().encode(o),s=yield window.crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(s)).map(n=>n.toString(16).padStart(2,"0")).join("")}else{console.warn("âš ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è­¦å‘Š: crypto.subtle ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚ç°¡æ˜“ãƒãƒƒã‚·ãƒ¥ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚");let e=0;for(let t=0;t<o.length;t++){const s=o.charCodeAt(t);e=(e<<5)-e+s,e=e&e}return Math.abs(e).toString(16)}})}function ze(){const o="game_enc_",e="_integrity";return{setItem(s,i,n=!1){return f(this,null,function*(){try{const r=ee(s);let d=JSON.stringify(i);if(n){const m=yield this.getOrCreateEncryptionKey();d=yield this.simpleEncrypt(d,m)}const u=yield ne(d);localStorage.setItem(r,d),localStorage.setItem(r+e,u)}catch(r){throw console.error("âŒ ã‚»ã‚­ãƒ¥ã‚¢ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä¿å­˜å¤±æ•—:",r),new Error(`ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä¿å­˜ã«å¤±æ•—: ${r instanceof Error?r.message:String(r)}`)}})},getItem(s,i=!1){return f(this,null,function*(){try{const n=ee(s),r=localStorage.getItem(n),d=localStorage.getItem(n+e);if(!r)return null;if(d&&(yield ne(r))!==d)throw console.error("âŒ ãƒ‡ãƒ¼ã‚¿æ”¹ã–ã‚“ã‚’æ¤œå‡ºã—ã¾ã—ãŸ:",n),this.removeItem(n),new Error("ãƒ‡ãƒ¼ã‚¿æ”¹ã–ã‚“ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ");let u=r;if(i){const m=yield this.getOrCreateEncryptionKey();u=yield this.simpleDecrypt(u,m)}return JSON.parse(u)}catch(n){return console.error("âŒ ã‚»ã‚­ãƒ¥ã‚¢ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸èª­ã¿è¾¼ã¿å¤±æ•—:",n),null}})},removeItem(s){try{const i=ee(s);localStorage.removeItem(i),localStorage.removeItem(i+e)}catch(i){console.error("âŒ ã‚»ã‚­ãƒ¥ã‚¢ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å‰Šé™¤å¤±æ•—:",i)}},getOrCreateEncryptionKey(){return f(this,null,function*(){const s=`${o}master`;let i=localStorage.getItem(s);return i||(i=Ae(32),localStorage.setItem(s,i)),i})},simpleEncrypt(s,i){return f(this,null,function*(){const n=[];for(let r=0;r<s.length;r++){const d=i.charCodeAt(r%i.length),u=s.charCodeAt(r);n.push(String.fromCharCode(u^d))}return btoa(n.join(""))})},simpleDecrypt(s,i){return f(this,null,function*(){try{const n=atob(s),r=[];for(let d=0;d<n.length;d++){const u=i.charCodeAt(d%i.length),m=n.charCodeAt(d);r.push(String.fromCharCode(m^u))}return r.join("")}catch(n){throw new Error("å¾©å·åŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ")}})}}}class As{constructor(){p(this,"focusableElements",[]);p(this,"currentFocusIndex",-1);p(this,"shortcuts",new Map);p(this,"isActive",!0);p(this,"focusVisibleEnabled",!0);this.setupEventListeners(),this.setupFocusVisible()}registerFocusableElement(e,t={}){const s={element:e,priority:t.priority||0,group:t.group,onFocus:t.onFocus,onBlur:t.onBlur,onActivate:t.onActivate},i=this.focusableElements.findIndex(n=>n.element===e);i>=0?this.focusableElements[i]=s:this.focusableElements.push(s),this.focusableElements.sort((n,r)=>r.priority-n.priority),this.setupElementAccessibility(e)}unregisterFocusableElement(e){const t=this.focusableElements.findIndex(s=>s.element===e);t>=0&&(this.focusableElements.splice(t,1),this.currentFocusIndex>=t&&(this.currentFocusIndex=Math.max(0,this.currentFocusIndex-1)))}registerShortcut(e){const t=this.createShortcutKey(e.key,e.modifiers||[]);this.shortcuts.set(t,e)}unregisterShortcut(e,t=[]){const s=this.createShortcutKey(e,t);this.shortcuts.delete(s)}focusNext(){this.focusableElements.length!==0&&(this.currentFocusIndex=(this.currentFocusIndex+1)%this.focusableElements.length,this.setFocus(this.currentFocusIndex))}focusPrevious(){this.focusableElements.length!==0&&(this.currentFocusIndex=this.currentFocusIndex<=0?this.focusableElements.length-1:this.currentFocusIndex-1,this.setFocus(this.currentFocusIndex))}focusGroup(e){const t=this.focusableElements.filter(s=>s.group===e);if(t.length>0){const s=this.focusableElements.indexOf(t[0]);s>=0&&(this.currentFocusIndex=s,this.setFocus(s))}}focusElement(e){const t=this.focusableElements.findIndex(s=>s.element===e);t>=0&&(this.currentFocusIndex=t,this.setFocus(t))}getCurrentFocusedElement(){return this.currentFocusIndex>=0&&this.currentFocusIndex<this.focusableElements.length?this.focusableElements[this.currentFocusIndex].element:null}startFocusTrap(e){const t=this.focusableElements.filter(s=>e.contains(s.element));t.length>0&&(this.focusableElements.forEach(s=>{e.contains(s.element)||(s.element.setAttribute("tabindex","-1"),s.element.setAttribute("aria-hidden","true"))}),this.focusElement(t[0].element))}endFocusTrap(){this.focusableElements.forEach(e=>{e.element.removeAttribute("tabindex"),e.element.removeAttribute("aria-hidden")})}toggleHelp(){const e=this.createHelpPanel();document.body.appendChild(e);const t=i=>{i.key==="Escape"&&(e.remove(),document.removeEventListener("keydown",t))};document.addEventListener("keydown",t);const s=e.querySelector("button");s&&s.focus()}createSkipLinks(){const e=document.createElement("div");e.className="skip-links",e.setAttribute("aria-label","ã‚¹ã‚­ãƒƒãƒ—ãƒªãƒ³ã‚¯");const t=this.createSkipLink("ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ç§»å‹•","#main-content"),s=this.createSkipLink("ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã«ç§»å‹•","#navigation"),i=this.createSkipLink("ãƒ•ãƒƒã‚¿ãƒ¼ã«ç§»å‹•","#footer");return e.appendChild(t),e.appendChild(s),e.appendChild(i),e}setActive(e){if(this.isActive=e,!e){const t=this.getCurrentFocusedElement();t&&t.blur()}}setFocusVisible(e){this.focusVisibleEnabled=e,document.documentElement.classList.toggle("keyboard-navigation",e)}setupEventListeners(){document.addEventListener("keydown",this.handleKeyDown.bind(this)),document.addEventListener("focusin",this.handleFocusIn.bind(this)),document.addEventListener("focusout",this.handleFocusOut.bind(this)),document.addEventListener("mousedown",()=>{document.documentElement.classList.remove("keyboard-navigation")})}handleKeyDown(e){if(!this.isActive)return;const t=this.createShortcutKey(e.key,this.getActiveModifiers(e)),s=this.shortcuts.get(t);if(s){e.preventDefault(),s.action();return}switch(e.key){case"Tab":e.preventDefault(),e.shiftKey?this.focusPrevious():this.focusNext();break;case"ArrowDown":case"ArrowRight":e.preventDefault(),this.focusNext();break;case"ArrowUp":case"ArrowLeft":e.preventDefault(),this.focusPrevious();break;case"Home":e.preventDefault(),this.currentFocusIndex=0,this.setFocus(0);break;case"End":e.preventDefault(),this.currentFocusIndex=this.focusableElements.length-1,this.setFocus(this.currentFocusIndex);break;case"Enter":case" ":const i=this.getCurrentFocusedElement();if(i){e.preventDefault();const n=this.focusableElements[this.currentFocusIndex];n.onActivate?n.onActivate():i.click()}break;case"F1":e.preventDefault(),this.toggleHelp();break}}handleFocusIn(e){if(!this.focusVisibleEnabled)return;const t=e.target,s=this.focusableElements.findIndex(i=>i.element===t);if(s>=0){this.currentFocusIndex=s;const i=this.focusableElements[s];i.onFocus&&i.onFocus(),document.documentElement.classList.add("keyboard-navigation")}}handleFocusOut(e){const t=e.target,s=this.focusableElements.findIndex(i=>i.element===t);if(s>=0){const i=this.focusableElements[s];i.onBlur&&i.onBlur()}}setFocus(e){if(e<0||e>=this.focusableElements.length)return;const s=this.focusableElements[e].element;if(s.offsetParent===null){this.focusNext();return}s.focus(),s.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}setupElementAccessibility(e){var t;if(e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),!e.hasAttribute("role")){const s=e.tagName.toLowerCase();(s==="div"||s==="span")&&e.setAttribute("role","button")}if(!e.hasAttribute("aria-label")&&!e.hasAttribute("aria-labelledby")){const s=(t=e.textContent)==null?void 0:t.trim();s&&e.setAttribute("aria-label",s)}}createShortcutKey(e,t){return`${t.sort().join("+")}+${e.toLowerCase()}`}getActiveModifiers(e){const t=[];return e.ctrlKey&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&t.push("shift"),e.metaKey&&t.push("meta"),t}createSkipLink(e,t){const s=document.createElement("a");return s.href=t,s.textContent=e,s.className="skip-link",s.addEventListener("click",i=>{i.preventDefault();const n=document.querySelector(t);n&&n.focus()}),s}createHelpPanel(){const e=document.createElement("div");e.className="keyboard-help-panel",e.setAttribute("role","dialog"),e.setAttribute("aria-labelledby","help-title"),e.setAttribute("aria-modal","true");const t=Array.from(this.shortcuts.values()),s=document.createElement("div");s.className="help-content";const i=document.createElement("h2");i.id="help-title",i.textContent="ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ";const n=document.createElement("div");n.className="shortcuts-list";const r=document.createElement("div");r.className="shortcut-group";const d=document.createElement("h3");d.textContent="åŸºæœ¬ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³";const u=document.createElement("dl");if([{key:"Tab / Shift+Tab",desc:"æ¬¡/å‰ã®è¦ç´ ã«ç§»å‹•"},{key:"çŸ¢å°ã‚­ãƒ¼",desc:"æ–¹å‘ã«å¿œã˜ã¦ç§»å‹•"},{key:"Enter / Space",desc:"è¦ç´ ã‚’é¸æŠ/å®Ÿè¡Œ"},{key:"Home / End",desc:"æœ€åˆ/æœ€å¾Œã®è¦ç´ ã«ç§»å‹•"}].forEach(({key:E,desc:S})=>{const y=document.createElement("dt");y.textContent=E;const g=document.createElement("dd");g.textContent=S,u.appendChild(y),u.appendChild(g)}),r.appendChild(d),r.appendChild(u),n.appendChild(r),t.length>0){const E=document.createElement("div");E.className="shortcut-group";const S=document.createElement("h3");S.textContent="ã‚²ãƒ¼ãƒ æ“ä½œ";const y=document.createElement("dl");t.forEach(g=>{const a=document.createElement("dt");a.textContent=ee(this.formatShortcut(g));const l=document.createElement("dd");l.textContent=ee(g.description),y.appendChild(a),y.appendChild(l)}),E.appendChild(S),E.appendChild(y),n.appendChild(E)}const h=document.createElement("button");return h.type="button",h.textContent="é–‰ã˜ã‚‹ (Esc)",h.onclick=()=>e.remove(),s.appendChild(i),s.appendChild(n),s.appendChild(h),e.appendChild(s),e}formatShortcut(e){return[...(e.modifiers||[]).map(i=>i.charAt(0).toUpperCase()+i.slice(1)),e.key].join(" + ")}setupFocusVisible(){const e=document.createElement("style");e.textContent=`
      .keyboard-navigation *:focus {
        outline: 2px solid #818CF8;
        outline-offset: 2px;
        border-radius: 4px;
      }
      
      .skip-links {
        position: absolute;
        top: -40px;
        left: 6px;
        z-index: 1000;
      }
      
      .skip-link {
        position: absolute;
        left: -10000px;
        top: auto;
        width: 1px;
        height: 1px;
        overflow: hidden;
        background: #000;
        color: #fff;
        padding: 8px 16px;
        text-decoration: none;
        border-radius: 4px;
      }
      
      .skip-link:focus {
        position: static;
        width: auto;
        height: auto;
        left: auto;
        top: auto;
      }
      
      .keyboard-help-panel {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(0, 0, 0, 0.95);
        color: white;
        padding: 2rem;
        border-radius: 12px;
        max-width: 500px;
        max-height: 80vh;
        overflow-y: auto;
        z-index: 10000;
      }
      
      .help-content h2 {
        margin-top: 0;
        color: #818CF8;
      }
      
      .shortcuts-list dt {
        font-weight: bold;
        color: #FFD43B;
        margin-top: 0.5rem;
      }
      
      .shortcuts-list dd {
        margin-left: 1rem;
        margin-bottom: 0.5rem;
      }
      
      .help-content button {
        margin-top: 1rem;
        padding: 0.5rem 1rem;
        background: #818CF8;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
    `,document.head.appendChild(e)}destroy(){this.focusableElements=[],this.shortcuts.clear(),document.removeEventListener("keydown",this.handleKeyDown.bind(this)),document.removeEventListener("focusin",this.handleFocusIn.bind(this)),document.removeEventListener("focusout",this.handleFocusOut.bind(this))}}const xs={class:"app-header"},Is=N({__name:"AppHeader",setup(o){return(e,t)=>(v(),w("header",xs,t[0]||(t[0]=[Ce('<div class="hero-section" data-v-f43720aa><div class="hero-background" data-v-f43720aa><div class="hero-orb hero-orb-1" data-v-f43720aa></div><div class="hero-orb hero-orb-2" data-v-f43720aa></div><div class="hero-orb hero-orb-3" data-v-f43720aa></div></div><div class="hero-content" data-v-f43720aa><div class="brand-logo pulse" data-v-f43720aa><div class="logo-glow" data-v-f43720aa></div><span class="logo-icon" data-v-f43720aa>ğŸ›¡ï¸</span></div><h1 class="hero-title bounce-in" style="animation-delay:0.2s;" data-v-f43720aa> äººç”Ÿå……å®Ÿã‚²ãƒ¼ãƒ  </h1><p class="hero-subtitle bounce-in" style="animation-delay:0.4s;" data-v-f43720aa> Life Fulfillment - ç”Ÿå‘½ä¿é™ºã‚’ã€Œäººç”Ÿã®å‘³æ–¹ã€ã¨ã—ã¦æã </p><div class="hero-accent bounce-in" style="animation-delay:0.6s;" data-v-f43720aa><span class="accent-icon" data-v-f43720aa>âœ¨</span><span class="accent-text" data-v-f43720aa>ä¸€äººã®æ™‚é–“ã‚’ã€æœ€é«˜ã®å†’é™ºã«</span><span class="accent-icon" data-v-f43720aa>âœ¨</span></div><div class="hero-stats bounce-in" style="animation-delay:0.8s;" data-v-f43720aa><div class="stat-item" data-v-f43720aa><span class="stat-value" data-v-f43720aa>100+</span><span class="stat-label" data-v-f43720aa>ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰</span></div><div class="stat-divider" data-v-f43720aa></div><div class="stat-item" data-v-f43720aa><span class="stat-value" data-v-f43720aa>7</span><span class="stat-label" data-v-f43720aa>äººç”Ÿã‚¹ãƒ†ãƒ¼ã‚¸</span></div><div class="stat-divider" data-v-f43720aa></div><div class="stat-item" data-v-f43720aa><span class="stat-value" data-v-f43720aa>âˆ</span><span class="stat-label" data-v-f43720aa>ãƒ—ãƒ¬ã‚¤ãƒ‘ã‚¿ãƒ¼ãƒ³</span></div></div></div></div>',1)])))}}),Ts=z(Is,[["__scopeId","data-v-f43720aa"]]),_s={class:"action-section",id:"navigation",role:"navigation","aria-label":"ãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³"},Ls={class:"button-group"},Ds=N({__name:"NavigationActions",emits:["start-game","start-tutorial","open-statistics"],setup(o,{expose:e}){const t=_(),s=_();return e({gameButtonRef:t,tutorialButtonRef:s}),(i,n)=>(v(),w("section",_s,[c("div",Ls,[c("button",{ref_key:"gameButtonRef",ref:t,onClick:n[0]||(n[0]=r=>i.$emit("start-game")),class:"btn btn-primary ripple-container glow-on-hover bounce-in","aria-label":"ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã™ã‚‹ (Alt+G)","aria-keyshortcuts":"Alt+G","aria-describedby":"game-description"},n[3]||(n[3]=[c("span",{class:"btn-bg-effect"},null,-1),c("span",{class:"btn-icon","aria-hidden":"true"},"ğŸ®",-1),c("span",{class:"btn-text"},"ã‚²ãƒ¼ãƒ ã‚’ãƒ—ãƒ¬ã‚¤",-1),c("span",{class:"btn-arrow","aria-hidden":"true"},"â†’",-1)]),512),c("button",{ref_key:"tutorialButtonRef",ref:s,onClick:n[1]||(n[1]=r=>i.$emit("start-tutorial")),class:"btn btn-secondary ripple-container","aria-label":"ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹ã™ã‚‹ (Alt+T)","aria-keyshortcuts":"Alt+T","aria-describedby":"tutorial-description"},n[4]||(n[4]=[c("span",{class:"btn-bg-effect"},null,-1),c("span",{class:"btn-icon","aria-hidden":"true"},"ğŸ“š",-1),c("span",{class:"btn-text"},"ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«",-1)]),512),c("button",{onClick:n[2]||(n[2]=r=>i.$emit("open-statistics")),class:"btn btn-secondary ripple-container","aria-label":"çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’é–‹ã (Alt+S)","aria-keyshortcuts":"Alt+S","aria-describedby":"statistics-description"},n[5]||(n[5]=[c("span",{class:"btn-bg-effect"},null,-1),c("span",{class:"btn-icon","aria-hidden":"true"},"ğŸ“Š",-1),c("span",{class:"btn-text"},"çµ±è¨ˆ",-1)]))]),n[6]||(n[6]=c("div",{class:"sr-only"},[c("div",{id:"game-description"},"ä¿é™ºã‚’ãƒ†ãƒ¼ãƒã«ã—ãŸäººç”Ÿã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã—ã¾ã™"),c("div",{id:"tutorial-description"},"ã‚²ãƒ¼ãƒ ã®éŠã³æ–¹ã‚’å­¦ç¿’ã™ã‚‹ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹ã—ã¾ã™"),c("div",{id:"statistics-description"},"ãƒ—ãƒ¬ã‚¤çµ±è¨ˆã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æã‚’è¡¨ç¤ºã—ã¾ã™")],-1))]))}}),$s=z(Ds,[["__scopeId","data-v-a977deb5"]]),Rs={class:"info-section"},Ps=N({__name:"FeatureShowcase",setup(o){return(e,t)=>(v(),w("section",Rs,t[0]||(t[0]=[Ce('<div class="info-grid" data-v-f24e5bd8><div class="interactive-card glow-on-hover card-latest" data-v-f24e5bd8><div class="card-badge" data-v-f24e5bd8>NEW</div><div class="card-header" data-v-f24e5bd8><div class="card-icon-wrapper" data-v-f24e5bd8><span class="card-icon" data-v-f24e5bd8>ğŸš€</span></div><h2 class="card-title" data-v-f24e5bd8> æœ¬ç•ªãƒªãƒªãƒ¼ã‚¹ v0.3.0 </h2></div><div class="text-left space-y-3" data-v-f24e5bd8><div data-v-f24e5bd8><h3 class="font-semibold text-lg mb-2" data-v-f24e5bd8>Production Release - æœ¬ç•ªç’°å¢ƒå¯¾å¿œå®Œäº†</h3><ul class="space-y-1 text-sm" data-v-f24e5bd8><li class="flex items-start gap-2" data-v-f24e5bd8><span class="text-success mt-1" data-v-f24e5bd8>ğŸ¯</span><span data-v-f24e5bd8><strong data-v-f24e5bd8>ãƒªãƒªãƒ¼ã‚¹å“è³ª100%</strong>: ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆãƒ»å‹ãƒã‚§ãƒƒã‚¯å…¨ã¦å®Œäº†</span></li><li class="flex items-start gap-2" data-v-f24e5bd8><span class="text-success mt-1" data-v-f24e5bd8>â™¿</span><span data-v-f24e5bd8><strong data-v-f24e5bd8>ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å®Œå…¨å¯¾å¿œ</strong>: WCAG 2.1 AA 100%æº–æ‹ </span></li><li class="flex items-start gap-2" data-v-f24e5bd8><span class="text-success mt-1" data-v-f24e5bd8>ğŸ“±</span><span data-v-f24e5bd8><strong data-v-f24e5bd8>ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ–å®Œäº†</strong>: ã‚¿ãƒƒãƒæ“ä½œãƒ»ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³å¯¾å¿œ</span></li><li class="flex items-start gap-2" data-v-f24e5bd8><span class="text-success mt-1" data-v-f24e5bd8>âš¡</span><span data-v-f24e5bd8><strong data-v-f24e5bd8>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–</strong>: ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º55.8%å‰Šæ¸›é”æˆ</span></li><li class="flex items-start gap-2" data-v-f24e5bd8><span class="text-success mt-1" data-v-f24e5bd8>âœ…</span><span data-v-f24e5bd8><strong data-v-f24e5bd8>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»</strong>: è‡ªå‹•è„†å¼±æ€§æ¤œå‡ºã€ã‚³ãƒ¼ãƒ‰å“è³ªåˆ†æ</span></li></ul></div></div></div><div class="interactive-card glow-on-hover card-roadmap" data-v-f24e5bd8><div class="card-badge badge-secondary" data-v-f24e5bd8>ROADMAP</div><div class="card-header" data-v-f24e5bd8><div class="card-icon-wrapper icon-wrapper-secondary" data-v-f24e5bd8><span class="card-icon" data-v-f24e5bd8>ğŸ—ºï¸</span></div><h2 class="card-title" data-v-f24e5bd8> ä»Šå¾Œã®ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ— </h2></div><div class="text-left space-y-3" data-v-f24e5bd8><div data-v-f24e5bd8><h3 class="font-semibold mb-2" data-v-f24e5bd8>çŸ­æœŸï¼ˆ1-2é€±é–“ï¼‰</h3><ul class="space-y-1 text-sm" data-v-f24e5bd8><li class="flex items-center gap-2" data-v-f24e5bd8><span class="text-success" data-v-f24e5bd8>âœ…</span> ä¿é™ºæ›´æ–°ã‚·ã‚¹ãƒ†ãƒ  </li><li class="flex items-center gap-2" data-v-f24e5bd8><span class="text-success" data-v-f24e5bd8>âœ…</span> ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãƒ¢ãƒ¼ãƒ‰ </li><li class="flex items-center gap-2" data-v-f24e5bd8><span class="text-success" data-v-f24e5bd8>âœ…</span> ã‚µã‚¦ãƒ³ãƒ‰ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ </li><li class="flex items-center gap-2" data-v-f24e5bd8><span class="text-gray-400" data-v-f24e5bd8>â­•</span> ã‚²ãƒ¼ãƒ ãƒãƒ©ãƒ³ã‚¹å¾®èª¿æ•´ </li></ul></div><div data-v-f24e5bd8><h3 class="font-semibold mb-2" data-v-f24e5bd8>ä¸­æœŸï¼ˆ1ãƒ¶æœˆï¼‰</h3><ul class="space-y-1 text-sm" data-v-f24e5bd8><li class="flex items-center gap-2" data-v-f24e5bd8><span class="text-gray-400" data-v-f24e5bd8>â­•</span> å®Ÿç¸¾ã‚·ã‚¹ãƒ†ãƒ  </li><li class="flex items-center gap-2" data-v-f24e5bd8><span class="text-gray-400" data-v-f24e5bd8>â­•</span> è¿½åŠ ã‚·ãƒŠãƒªã‚ªï¼ˆçµå©šã€å‡ºç”£ãªã©ï¼‰ </li></ul></div></div><div class="mt-4 text-sm text-gray-600 dark:text-gray-400" data-v-f24e5bd8><a href="https://github.com/shishihs/insurance_self_game/blob/master/CHANGELOG.md" target="_blank" class="hover:text-primary transition-colors" data-v-f24e5bd8> è©³ç´°ãªå¤‰æ›´å±¥æ­´ã¨ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ— â†’ </a></div></div></div><div class="text-center mt-8 text-sm text-gray-600 dark:text-gray-400" data-v-f24e5bd8><p data-v-f24e5bd8><a href="https://github.com/shishihs/insurance_self_game" target="_blank" class="hover:text-primary transition-colors" data-v-f24e5bd8> GitHub </a><span class="mx-2" data-v-f24e5bd8>â€¢</span><a href="https://github.com/shishihs/insurance_self_game/issues" target="_blank" class="hover:text-primary transition-colors" data-v-f24e5bd8> ãƒã‚°å ±å‘Šãƒ»è¦æœ› </a></p></div>',2)])))}}),Ms=z(Ps,[["__scopeId","data-v-f24e5bd8"]]),Fs={ui:{navigation:{home:"ãƒ›ãƒ¼ãƒ ",back:"ãƒ›ãƒ¼ãƒ ",game:"ã‚²ãƒ¼ãƒ ",tutorial:"ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«",statistics:"çµ±è¨ˆ",settings:"è¨­å®š",accessibility:"ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®š",feedback:"ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯"},buttons:{start:"é–‹å§‹",startGame:"ã‚²ãƒ¼ãƒ é–‹å§‹",startTutorial:"ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«é–‹å§‹",close:"é–‰ã˜ã‚‹",cancel:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«",ok:"OK",yes:"ã¯ã„",no:"ã„ã„ãˆ",continue:"ç¶šè¡Œ",skip:"ã‚¹ã‚­ãƒƒãƒ—",next:"æ¬¡ã¸",previous:"å‰ã¸",finish:"å®Œäº†",reset:"ãƒªã‚»ãƒƒãƒˆ",save:"ä¿å­˜",load:"èª­ã¿è¾¼ã¿"},common:{loading:"èª­ã¿è¾¼ã¿ä¸­...",error:"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",success:"æˆåŠŸã—ã¾ã—ãŸ",warning:"è­¦å‘Š",info:"æƒ…å ±",confirm:"ç¢ºèª",welcome:"ã‚ˆã†ã“ã",congratulations:"ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼",gameOver:"ã‚²ãƒ¼ãƒ çµ‚äº†",newGame:"æ–°ã—ã„ã‚²ãƒ¼ãƒ ",retry:"ã‚‚ã†ä¸€åº¦"}},game:{title:"äººç”Ÿå……å®Ÿã‚²ãƒ¼ãƒ ",subtitle:"æˆ¦ç•¥çš„ãƒ©ã‚¤ãƒ•ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³",description:"äººç”Ÿã®ã•ã¾ã–ã¾ãªæ®µéšã§ãƒªã‚¹ã‚¯ã¨ä¿é™ºã®ãƒãƒ©ãƒ³ã‚¹ã‚’è€ƒãˆãªãŒã‚‰ã€å……å®Ÿã—ãŸäººç”Ÿã‚’ç›®æŒ‡ã™ã‚²ãƒ¼ãƒ ã§ã™ã€‚",stages:{youth:"é’å¹´æœŸ",adult:"æˆäººæœŸ",middleAge:"ä¸­å¹´æœŸ",elderly:"é«˜é½¢æœŸ"},elements:{vitality:"ç”Ÿå‘½åŠ›",turn:"ã‚¿ãƒ¼ãƒ³",phase:"ãƒ•ã‚§ãƒ¼ã‚º",stage:"ã‚¹ãƒ†ãƒ¼ã‚¸",round:"ãƒ©ã‚¦ãƒ³ãƒ‰",score:"ã‚¹ã‚³ã‚¢",level:"ãƒ¬ãƒ™ãƒ«"},cards:{riskCard:"ãƒªã‚¹ã‚¯ã‚«ãƒ¼ãƒ‰",insuranceCard:"ä¿é™ºã‚«ãƒ¼ãƒ‰",eventCard:"ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰",actionCard:"ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚«ãƒ¼ãƒ‰",powerCard:"ãƒ‘ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ‰"},actions:{draw:"ã‚«ãƒ¼ãƒ‰ã‚’å¼•ã",play:"ã‚«ãƒ¼ãƒ‰ã‚’ä½¿ã†",discard:"ã‚«ãƒ¼ãƒ‰ã‚’æ¨ã¦ã‚‹",buyInsurance:"ä¿é™ºã‚’è³¼å…¥",cancelInsurance:"ä¿é™ºã‚’è§£ç´„",takeRisk:"ãƒªã‚¹ã‚¯ã‚’å–ã‚‹",avoidRisk:"ãƒªã‚¹ã‚¯ã‚’å›é¿"},insurance:{types:{life:"ç”Ÿå‘½ä¿é™º",health:"å¥åº·ä¿é™º",auto:"è‡ªå‹•è»Šä¿é™º",home:"ç«ç½ä¿é™º",travel:"æ—…è¡Œä¿é™º",income:"æ‰€å¾—ä¿éšœä¿é™º",disability:"å‚·å®³ä¿é™º",longTermCare:"ä»‹è­·ä¿é™º"},terms:{premium:"ä¿é™ºæ–™",coverage:"ä¿éšœé¡",deductible:"å…è²¬é‡‘é¡",beneficiary:"å—ç›Šè€…",policy:"ä¿é™ºè¨¼åˆ¸",claim:"ä¿é™ºé‡‘è«‹æ±‚",renewal:"æ›´æ–°",cancellation:"è§£ç´„"}},risks:{categories:{health:"å¥åº·ãƒªã‚¹ã‚¯",financial:"çµŒæ¸ˆãƒªã‚¹ã‚¯",accident:"äº‹æ•…ãƒªã‚¹ã‚¯",natural:"è‡ªç„¶ç½å®³ãƒªã‚¹ã‚¯",career:"ã‚­ãƒ£ãƒªã‚¢ãƒªã‚¹ã‚¯",family:"å®¶æ—ãƒªã‚¹ã‚¯"},levels:{low:"ä½ãƒªã‚¹ã‚¯",medium:"ä¸­ãƒªã‚¹ã‚¯",high:"é«˜ãƒªã‚¹ã‚¯",extreme:"æ¥µé«˜ãƒªã‚¹ã‚¯"}}},tutorial:{title:"ã‚²ãƒ¼ãƒ ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«",welcome:"ã‚ˆã†ã“ãï¼äººç”Ÿå……å®Ÿã‚²ãƒ¼ãƒ ã®ä¸–ç•Œã¸",steps:{introduction:{title:"ã¯ã˜ã‚ã«",content:"ã“ã®ã‚²ãƒ¼ãƒ ã§ã¯ã€äººç”Ÿã®ã•ã¾ã–ã¾ãªæ®µéšã§ãƒªã‚¹ã‚¯ã¨ä¿é™ºã®ãƒãƒ©ãƒ³ã‚¹ã‚’è€ƒãˆãªãŒã‚‰é€²ã‚ã¦ã„ãã¾ã™ã€‚"},basicRules:{title:"åŸºæœ¬ãƒ«ãƒ¼ãƒ«",content:"å„ã‚¿ãƒ¼ãƒ³ã§ã‚«ãƒ¼ãƒ‰ã‚’å¼•ãã€ãƒªã‚¹ã‚¯ã«å¯¾å‡¦ã™ã‚‹ã‹ä¿é™ºã§å‚™ãˆã‚‹ã‹ã‚’æ±ºã‚ã¾ã™ã€‚"},cardTypes:{title:"ã‚«ãƒ¼ãƒ‰ã®ç¨®é¡",content:"ãƒªã‚¹ã‚¯ã‚«ãƒ¼ãƒ‰ã€ä¿é™ºã‚«ãƒ¼ãƒ‰ã€ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œãã‚Œã®ç‰¹å¾´ã‚’ç†è§£ã—ã¾ã—ã‚‡ã†ã€‚"},insuranceSystem:{title:"ä¿é™ºã‚·ã‚¹ãƒ†ãƒ ",content:"ä¿é™ºã¯äº‹å‰ã«è³¼å…¥ã™ã‚‹ã“ã¨ã§ãƒªã‚¹ã‚¯ã«å‚™ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¿é™ºæ–™ã¨ä¿éšœé¡ã‚’è€ƒæ…®ã—ã¦é¸æŠã—ã¾ã—ã‚‡ã†ã€‚"},strategy:{title:"æˆ¦ç•¥ã®ãƒã‚¤ãƒ³ãƒˆ",content:"ç”Ÿå‘½åŠ›ã‚’ç¶­æŒã—ãªãŒã‚‰ã€åŠ¹æœçš„ãªä¿é™ºæˆ¦ç•¥ã‚’ç«‹ã¦ã‚‹ã“ã¨ãŒæˆåŠŸã®éµã§ã™ã€‚"}}},statistics:{title:"çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰",sections:{overview:"æ¦‚è¦",performance:"ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹",trends:"ãƒˆãƒ¬ãƒ³ãƒ‰",detailed:"è©³ç´°åˆ†æ"},metrics:{gamesPlayed:"ãƒ—ãƒ¬ã‚¤å›æ•°",winRate:"å‹ç‡",averageScore:"å¹³å‡ã‚¹ã‚³ã‚¢",bestScore:"æœ€é«˜ã‚¹ã‚³ã‚¢",totalPlayTime:"ç·ãƒ—ãƒ¬ã‚¤æ™‚é–“",averageGameTime:"å¹³å‡ã‚²ãƒ¼ãƒ æ™‚é–“",survivalRate:"ç”Ÿå­˜ç‡",insuranceEfficiency:"ä¿é™ºåŠ¹ç‡"},charts:{vitalityTrend:"ç”Ÿå‘½åŠ›æ¨ç§»",stageAnalysis:"ã‚¹ãƒ†ãƒ¼ã‚¸åˆ¥åˆ†æ",cardUsage:"ã‚«ãƒ¼ãƒ‰ä½¿ç”¨çŠ¶æ³",decisionAnalysis:"æ„æ€æ±ºå®šåˆ†æ",riskManagement:"ãƒªã‚¹ã‚¯ç®¡ç†",insuranceCoverage:"ä¿é™ºã‚«ãƒãƒ¬ãƒƒã‚¸"}},accessibility:{title:"ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®š",sections:{visual:"è¦–è¦šè¨­å®š",audio:"éŸ³å£°è¨­å®š",interaction:"æ“ä½œè¨­å®š",display:"è¡¨ç¤ºè¨­å®š"},options:{highContrast:"ãƒã‚¤ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆ",largeText:"å¤§ããªæ–‡å­—",reduceMotion:"ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è»½æ¸›",screenReader:"ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ",keyboardNavigation:"ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³",audioCues:"éŸ³å£°ã‚­ãƒ¥ãƒ¼",subtitles:"å­—å¹•",slowAnimations:"ã‚†ã£ãã‚Šã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³"},keyboardShortcuts:{title:"ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ",homeScreen:"ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚‹ (Alt+H)",startGame:"ã‚²ãƒ¼ãƒ é–‹å§‹ (Alt+G)",startTutorial:"ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«é–‹å§‹ (Alt+T)",openStatistics:"çµ±è¨ˆã‚’é–‹ã (Alt+S)",openAccessibility:"ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®š (Alt+A)",help:"ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º (F1)"}},feedback:{title:"ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯",types:{bug:"ãƒã‚°å ±å‘Š",suggestion:"æ”¹å–„ææ¡ˆ",general:"ä¸€èˆ¬çš„ãªæ„è¦‹",rating:"è©•ä¾¡"},form:{subject:"ä»¶å",message:"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",email:"ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆä»»æ„ï¼‰",category:"ã‚«ãƒ†ã‚´ãƒª",priority:"å„ªå…ˆåº¦",submit:"é€ä¿¡",thankYou:"ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼"}},errors:{general:"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",network:"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",gameState:"ã‚²ãƒ¼ãƒ çŠ¶æ…‹ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚",save:"ã‚²ãƒ¼ãƒ ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚",load:"ã‚²ãƒ¼ãƒ ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚",invalidAction:"ç„¡åŠ¹ãªæ“ä½œã§ã™ã€‚",cardNotFound:"ã‚«ãƒ¼ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚",insufficientFunds:"è³‡é‡‘ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚",insuranceNotActive:"ä¿é™ºãŒæœ‰åŠ¹ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚"},success:{gameSaved:"ã‚²ãƒ¼ãƒ ã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚",gameLoaded:"ã‚²ãƒ¼ãƒ ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸã€‚",insurancePurchased:"ä¿é™ºã‚’è³¼å…¥ã—ã¾ã—ãŸã€‚",riskAvoided:"ãƒªã‚¹ã‚¯ã‚’å›é¿ã—ã¾ã—ãŸã€‚",levelCompleted:"ãƒ¬ãƒ™ãƒ«ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸï¼",achievementUnlocked:"å®Ÿç¸¾ã‚’ç²å¾—ã—ã¾ã—ãŸï¼"},region:{currency:"å††",currencySymbol:"Â¥",dateFormat:"YYYYå¹´MMæœˆDDæ—¥",numberFormat:"1,234",insuranceSystem:{nationalHealth:"å›½æ°‘å¥åº·ä¿é™º",employeeHealth:"å¥åº·ä¿é™º",nationalPension:"å›½æ°‘å¹´é‡‘",employeePension:"åšç”Ÿå¹´é‡‘",longTermCare:"ä»‹è­·ä¿é™º",workersComp:"åŠ´ç½ä¿é™º",unemployment:"é›‡ç”¨ä¿é™º"},risks:{earthquake:"åœ°éœ‡",typhoon:"å°é¢¨",flood:"æ´ªæ°´",aging:"é«˜é½¢åŒ–",recession:"ä¸æ³",deflation:"ãƒ‡ãƒ•ãƒ¬"}},ageGroups:{young:{title:"è‹¥ã„ä¸–ä»£ã¸ã®ä¿é™ºã‚¢ãƒ‰ãƒã‚¤ã‚¹",message:"å°†æ¥ã«å‘ã‘ãŸåŸºç›¤ä½œã‚ŠãŒé‡è¦ã§ã™ã€‚"},middle:{title:"åƒãç››ã‚Šä¸–ä»£ã¸ã®ä¿é™ºã‚¢ãƒ‰ãƒã‚¤ã‚¹",message:"å®¶æ—ã‚’å®ˆã‚‹ãŸã‚ã®ä¿éšœã‚’æ¤œè¨ã—ã¾ã—ã‚‡ã†ã€‚"},senior:{title:"ã‚·ãƒ‹ã‚¢ä¸–ä»£ã¸ã®ä¿é™ºã‚¢ãƒ‰ãƒã‚¤ã‚¹",message:"åŒ»ç™‚ãƒ»ä»‹è­·ãƒªã‚¹ã‚¯ã¸ã®å‚™ãˆãŒå¤§åˆ‡ã§ã™ã€‚"}}},Os={ui:{navigation:{home:"Home",back:"Home",game:"Game",tutorial:"Tutorial",statistics:"Statistics",settings:"Settings",accessibility:"Accessibility Settings",feedback:"Feedback"},buttons:{start:"Start",startGame:"Start Game",startTutorial:"Start Tutorial",close:"Close",cancel:"Cancel",ok:"OK",yes:"Yes",no:"No",continue:"Continue",skip:"Skip",next:"Next",previous:"Previous",finish:"Finish",reset:"Reset",save:"Save",load:"Load"},common:{loading:"Loading...",error:"An error occurred",success:"Success",warning:"Warning",info:"Information",confirm:"Confirm",welcome:"Welcome",congratulations:"Congratulations!",gameOver:"Game Over",newGame:"New Game",retry:"Try Again"}},game:{title:"Life Enrichment Game",subtitle:"Strategic Life Simulation",description:"A game where you navigate through different life stages, balancing risks and insurance to achieve a fulfilling life.",stages:{youth:"Youth",adult:"Adulthood",middleAge:"Middle Age",elderly:"Elderly"},elements:{vitality:"Vitality",turn:"Turn",phase:"Phase",stage:"Stage",round:"Round",score:"Score",level:"Level"},cards:{riskCard:"Risk Card",insuranceCard:"Insurance Card",eventCard:"Event Card",actionCard:"Action Card",powerCard:"Power Card"},actions:{draw:"Draw Card",play:"Play Card",discard:"Discard Card",buyInsurance:"Buy Insurance",cancelInsurance:"Cancel Insurance",takeRisk:"Take Risk",avoidRisk:"Avoid Risk"},insurance:{types:{life:"Life Insurance",health:"Health Insurance",auto:"Auto Insurance",home:"Home Insurance",travel:"Travel Insurance",income:"Income Protection",disability:"Disability Insurance",longTermCare:"Long-term Care Insurance"},terms:{premium:"Premium",coverage:"Coverage",deductible:"Deductible",beneficiary:"Beneficiary",policy:"Policy",claim:"Claim",renewal:"Renewal",cancellation:"Cancellation"}},risks:{categories:{health:"Health Risk",financial:"Financial Risk",accident:"Accident Risk",natural:"Natural Disaster Risk",career:"Career Risk",family:"Family Risk"},levels:{low:"Low Risk",medium:"Medium Risk",high:"High Risk",extreme:"Extreme Risk"}}},tutorial:{title:"Game Tutorial",welcome:"Welcome to the Life Enrichment Game!",steps:{introduction:{title:"Introduction",content:"In this game, you'll navigate through different life stages while balancing risks and insurance."},basicRules:{title:"Basic Rules",content:"Each turn, draw cards and decide whether to face risks or protect yourself with insurance."},cardTypes:{title:"Card Types",content:"There are risk cards, insurance cards, and event cards. Learn their characteristics."},insuranceSystem:{title:"Insurance System",content:"Purchase insurance in advance to prepare for risks. Consider premiums and coverage amounts."},strategy:{title:"Strategy Tips",content:"Maintain your vitality while developing an effective insurance strategy for success."}}},statistics:{title:"Statistics Dashboard",sections:{overview:"Overview",performance:"Performance",trends:"Trends",detailed:"Detailed Analysis"},metrics:{gamesPlayed:"Games Played",winRate:"Win Rate",averageScore:"Average Score",bestScore:"Best Score",totalPlayTime:"Total Play Time",averageGameTime:"Average Game Time",survivalRate:"Survival Rate",insuranceEfficiency:"Insurance Efficiency"},charts:{vitalityTrend:"Vitality Trend",stageAnalysis:"Stage Analysis",cardUsage:"Card Usage",decisionAnalysis:"Decision Analysis",riskManagement:"Risk Management",insuranceCoverage:"Insurance Coverage"}},accessibility:{title:"Accessibility Settings",sections:{visual:"Visual Settings",audio:"Audio Settings",interaction:"Interaction Settings",display:"Display Settings"},options:{highContrast:"High Contrast",largeText:"Large Text",reduceMotion:"Reduce Motion",screenReader:"Screen Reader Support",keyboardNavigation:"Keyboard Navigation",audioCues:"Audio Cues",subtitles:"Subtitles",slowAnimations:"Slow Animations"},keyboardShortcuts:{title:"Keyboard Shortcuts",homeScreen:"Return to Home Screen (Alt+H)",startGame:"Start Game (Alt+G)",startTutorial:"Start Tutorial (Alt+T)",openStatistics:"Open Statistics (Alt+S)",openAccessibility:"Accessibility Settings (Alt+A)",help:"Show Help (F1)"}},feedback:{title:"Feedback",types:{bug:"Bug Report",suggestion:"Suggestion",general:"General Opinion",rating:"Rating"},form:{subject:"Subject",message:"Message",email:"Email (Optional)",category:"Category",priority:"Priority",submit:"Submit",thankYou:"Thank you for your feedback!"}},errors:{general:"An error occurred.",network:"A network error occurred.",gameState:"Failed to load game state.",save:"Failed to save game.",load:"Failed to load game.",invalidAction:"Invalid action.",cardNotFound:"Card not found.",insufficientFunds:"Insufficient funds.",insuranceNotActive:"Insurance is not active."},success:{gameSaved:"Game saved.",gameLoaded:"Game loaded.",insurancePurchased:"Insurance purchased.",riskAvoided:"Risk avoided.",levelCompleted:"Level completed!",achievementUnlocked:"Achievement unlocked!"},region:{currency:"USD",currencySymbol:"$",dateFormat:"MM/DD/YYYY",numberFormat:"1,234",insuranceSystem:{nationalHealth:"Medicare",employeeHealth:"Employer Health Insurance",nationalPension:"Social Security",employeePension:"401(k)",longTermCare:"Long-term Care Insurance",workersComp:"Workers' Compensation",unemployment:"Unemployment Insurance"},risks:{earthquake:"Earthquake",hurricane:"Hurricane",flood:"Flood",recession:"Recession",inflation:"Inflation",jobLoss:"Job Loss"}},ageGroups:{young:{title:"Insurance Advice for Young Adults",message:"Building a foundation for your future is important."},middle:{title:"Insurance Advice for Working Adults",message:"Consider protection for your family."},senior:{title:"Insurance Advice for Seniors",message:"Healthcare and long-term care preparation is essential."}}},Hs={ui:{navigation:{home:"é¦–é¡µ",back:"é¦–é¡µ",game:"æ¸¸æˆ",tutorial:"æ•™ç¨‹",statistics:"ç»Ÿè®¡",settings:"è®¾ç½®",accessibility:"æ— éšœç¢è®¾ç½®",feedback:"åé¦ˆ"},buttons:{start:"å¼€å§‹",startGame:"å¼€å§‹æ¸¸æˆ",startTutorial:"å¼€å§‹æ•™ç¨‹",close:"å…³é—­",cancel:"å–æ¶ˆ",ok:"ç¡®å®š",yes:"æ˜¯",no:"å¦",continue:"ç»§ç»­",skip:"è·³è¿‡",next:"ä¸‹ä¸€æ­¥",previous:"ä¸Šä¸€æ­¥",finish:"å®Œæˆ",reset:"é‡ç½®",save:"ä¿å­˜",load:"åŠ è½½"},common:{loading:"åŠ è½½ä¸­...",error:"å‘ç”Ÿé”™è¯¯",success:"æˆåŠŸ",warning:"è­¦å‘Š",info:"ä¿¡æ¯",confirm:"ç¡®è®¤",welcome:"æ¬¢è¿",congratulations:"æ­å–œï¼",gameOver:"æ¸¸æˆç»“æŸ",newGame:"æ–°æ¸¸æˆ",retry:"é‡è¯•"}},game:{title:"äººç”Ÿå……å®æ¸¸æˆ",subtitle:"æˆ˜ç•¥äººç”Ÿæ¨¡æ‹Ÿ",description:"åœ¨äººç”Ÿçš„ä¸åŒé˜¶æ®µä¸­ï¼Œå¹³è¡¡é£é™©ä¸ä¿é™©ï¼Œè¿½æ±‚å……å®äººç”Ÿçš„æ¸¸æˆã€‚",stages:{youth:"é’å¹´æœŸ",adult:"æˆå¹´æœŸ",middleAge:"ä¸­å¹´æœŸ",elderly:"è€å¹´æœŸ"},elements:{vitality:"ç”Ÿå‘½åŠ›",turn:"å›åˆ",phase:"é˜¶æ®µ",stage:"å…³å¡",round:"è½®æ¬¡",score:"å¾—åˆ†",level:"ç­‰çº§"},cards:{riskCard:"é£é™©å¡",insuranceCard:"ä¿é™©å¡",eventCard:"äº‹ä»¶å¡",actionCard:"è¡ŒåŠ¨å¡",powerCard:"åŠ›é‡å¡"},actions:{draw:"æŠ½å¡",play:"å‡ºç‰Œ",discard:"å¼ƒç‰Œ",buyInsurance:"è´­ä¹°ä¿é™©",cancelInsurance:"å–æ¶ˆä¿é™©",takeRisk:"æ‰¿æ‹…é£é™©",avoidRisk:"è§„é¿é£é™©"},insurance:{types:{life:"äººå¯¿ä¿é™©",health:"å¥åº·ä¿é™©",auto:"è½¦é™©",home:"æˆ¿å±‹ä¿é™©",travel:"æ—…è¡Œä¿é™©",income:"æ”¶å…¥ä¿éšœä¿é™©",disability:"æ„å¤–ä¼¤å®³ä¿é™©",longTermCare:"é•¿æœŸæŠ¤ç†ä¿é™©"},terms:{premium:"ä¿è´¹",coverage:"ä¿é¢",deductible:"å…èµ”é¢",beneficiary:"å—ç›Šäºº",policy:"ä¿å•",claim:"ç†èµ”",renewal:"ç»­ä¿",cancellation:"é€€ä¿"}},risks:{categories:{health:"å¥åº·é£é™©",financial:"ç»æµé£é™©",accident:"æ„å¤–é£é™©",natural:"è‡ªç„¶ç¾å®³é£é™©",career:"èŒä¸šé£é™©",family:"å®¶åº­é£é™©"},levels:{low:"ä½é£é™©",medium:"ä¸­ç­‰é£é™©",high:"é«˜é£é™©",extreme:"æé«˜é£é™©"}}},tutorial:{title:"æ¸¸æˆæ•™ç¨‹",welcome:"æ¬¢è¿æ¥åˆ°äººç”Ÿå……å®æ¸¸æˆçš„ä¸–ç•Œï¼",steps:{introduction:{title:"ä»‹ç»",content:"åœ¨è¿™ä¸ªæ¸¸æˆä¸­ï¼Œæ‚¨å°†åœ¨äººç”Ÿçš„ä¸åŒé˜¶æ®µä¸­å¹³è¡¡é£é™©ä¸ä¿é™©ã€‚"},basicRules:{title:"åŸºæœ¬è§„åˆ™",content:"æ¯å›åˆæŠ½å–å¡ç‰Œï¼Œå†³å®šæ˜¯é¢å¯¹é£é™©è¿˜æ˜¯ç”¨ä¿é™©æ¥é˜²èŒƒã€‚"},cardTypes:{title:"å¡ç‰Œç±»å‹",content:"æœ‰é£é™©å¡ã€ä¿é™©å¡å’Œäº‹ä»¶å¡ã€‚äº†è§£å®ƒä»¬å„è‡ªçš„ç‰¹ç‚¹ã€‚"},insuranceSystem:{title:"ä¿é™©ç³»ç»Ÿ",content:"æå‰è´­ä¹°ä¿é™©æ¥é˜²èŒƒé£é™©ã€‚è¦è€ƒè™‘ä¿è´¹å’Œä¿é¢ã€‚"},strategy:{title:"ç­–ç•¥è¦ç‚¹",content:"åœ¨ç»´æŒç”Ÿå‘½åŠ›çš„åŒæ—¶ï¼Œåˆ¶å®šæœ‰æ•ˆçš„ä¿é™©ç­–ç•¥æ˜¯æˆåŠŸçš„å…³é”®ã€‚"}}},statistics:{title:"ç»Ÿè®¡ä»ªè¡¨æ¿",sections:{overview:"æ¦‚è§ˆ",performance:"è¡¨ç°",trends:"è¶‹åŠ¿",detailed:"è¯¦ç»†åˆ†æ"},metrics:{gamesPlayed:"æ¸¸æˆæ¬¡æ•°",winRate:"èƒœç‡",averageScore:"å¹³å‡å¾—åˆ†",bestScore:"æœ€é«˜å¾—åˆ†",totalPlayTime:"æ€»æ¸¸æˆæ—¶é—´",averageGameTime:"å¹³å‡æ¸¸æˆæ—¶é—´",survivalRate:"ç”Ÿå­˜ç‡",insuranceEfficiency:"ä¿é™©æ•ˆç‡"},charts:{vitalityTrend:"ç”Ÿå‘½åŠ›è¶‹åŠ¿",stageAnalysis:"é˜¶æ®µåˆ†æ",cardUsage:"å¡ç‰Œä½¿ç”¨æƒ…å†µ",decisionAnalysis:"å†³ç­–åˆ†æ",riskManagement:"é£é™©ç®¡ç†",insuranceCoverage:"ä¿é™©è¦†ç›–"}},accessibility:{title:"æ— éšœç¢è®¾ç½®",sections:{visual:"è§†è§‰è®¾ç½®",audio:"éŸ³é¢‘è®¾ç½®",interaction:"äº¤äº’è®¾ç½®",display:"æ˜¾ç¤ºè®¾ç½®"},options:{highContrast:"é«˜å¯¹æ¯”åº¦",largeText:"å¤§å­—ä½“",reduceMotion:"å‡å°‘åŠ¨ç”»",screenReader:"å±å¹•é˜…è¯»å™¨æ”¯æŒ",keyboardNavigation:"é”®ç›˜å¯¼èˆª",audioCues:"éŸ³é¢‘æç¤º",subtitles:"å­—å¹•",slowAnimations:"æ…¢é€ŸåŠ¨ç”»"},keyboardShortcuts:{title:"é”®ç›˜å¿«æ·é”®",homeScreen:"è¿”å›é¦–é¡µ (Alt+H)",startGame:"å¼€å§‹æ¸¸æˆ (Alt+G)",startTutorial:"å¼€å§‹æ•™ç¨‹ (Alt+T)",openStatistics:"æ‰“å¼€ç»Ÿè®¡ (Alt+S)",openAccessibility:"æ— éšœç¢è®¾ç½® (Alt+A)",help:"æ˜¾ç¤ºå¸®åŠ© (F1)"}},feedback:{title:"åé¦ˆ",types:{bug:"é”™è¯¯æŠ¥å‘Š",suggestion:"æ”¹è¿›å»ºè®®",general:"ä¸€èˆ¬æ„è§",rating:"è¯„ä»·"},form:{subject:"ä¸»é¢˜",message:"æ¶ˆæ¯",email:"é‚®ç®±ï¼ˆå¯é€‰ï¼‰",category:"ç±»åˆ«",priority:"ä¼˜å…ˆçº§",submit:"æäº¤",thankYou:"æ„Ÿè°¢æ‚¨çš„åé¦ˆï¼"}},errors:{general:"å‘ç”Ÿé”™è¯¯ã€‚",network:"ç½‘ç»œé”™è¯¯ã€‚",gameState:"æ¸¸æˆçŠ¶æ€åŠ è½½å¤±è´¥ã€‚",save:"æ¸¸æˆä¿å­˜å¤±è´¥ã€‚",load:"æ¸¸æˆåŠ è½½å¤±è´¥ã€‚",invalidAction:"æ— æ•ˆæ“ä½œã€‚",cardNotFound:"æœªæ‰¾åˆ°å¡ç‰Œã€‚",insufficientFunds:"èµ„é‡‘ä¸è¶³ã€‚",insuranceNotActive:"ä¿é™©æœªç”Ÿæ•ˆã€‚"},success:{gameSaved:"æ¸¸æˆå·²ä¿å­˜ã€‚",gameLoaded:"æ¸¸æˆå·²åŠ è½½ã€‚",insurancePurchased:"ä¿é™©å·²è´­ä¹°ã€‚",riskAvoided:"é£é™©å·²è§„é¿ã€‚",levelCompleted:"å…³å¡å®Œæˆï¼",achievementUnlocked:"æˆå°±è§£é”ï¼"},region:{currency:"äººæ°‘å¸",currencySymbol:"Â¥",dateFormat:"YYYYå¹´MMæœˆDDæ—¥",numberFormat:"1,234",insuranceSystem:{nationalHealth:"åŸé•‡èŒå·¥åŸºæœ¬åŒ»ç–—ä¿é™©",employeeHealth:"èŒå·¥åŒ»ç–—ä¿é™©",nationalPension:"åŸé•‡èŒå·¥åŸºæœ¬å…»è€ä¿é™©",employeePension:"ä¼ä¸šå¹´é‡‘",longTermCare:"é•¿æœŸæŠ¤ç†ä¿é™©",workersComp:"å·¥ä¼¤ä¿é™©",unemployment:"å¤±ä¸šä¿é™©"},risks:{earthquake:"åœ°éœ‡",flood:"æ´ªæ°´",typhoon:"å°é£",smog:"é›¾éœ¾",economicSlowdown:"ç»æµæ”¾ç¼“",agingPopulation:"äººå£è€é¾„åŒ–"}},ageGroups:{young:{title:"å¹´è½»äººä¿é™©å»ºè®®",message:"ä¸ºæœªæ¥æ‰“å¥½åŸºç¡€å¾ˆé‡è¦ã€‚"},middle:{title:"ä¸­å¹´äººä¿é™©å»ºè®®",message:"è€ƒè™‘ä¸ºå®¶åº­æä¾›ä¿éšœã€‚"},senior:{title:"è€å¹´äººä¿é™©å»ºè®®",message:"åŒ»ç–—å’ŒæŠ¤ç†é£é™©çš„å‡†å¤‡è‡³å…³é‡è¦ã€‚"}}},Ns={ui:{navigation:{home:"í™ˆ",back:"í™ˆ",game:"ê²Œì„",tutorial:"íŠœí† ë¦¬ì–¼",statistics:"í†µê³„",settings:"ì„¤ì •",accessibility:"ì ‘ê·¼ì„± ì„¤ì •",feedback:"í”¼ë“œë°±"},buttons:{start:"ì‹œì‘",startGame:"ê²Œì„ ì‹œì‘",startTutorial:"íŠœí† ë¦¬ì–¼ ì‹œì‘",close:"ë‹«ê¸°",cancel:"ì·¨ì†Œ",ok:"í™•ì¸",yes:"ì˜ˆ",no:"ì•„ë‹ˆì˜¤",continue:"ê³„ì†",skip:"ê±´ë„ˆë›°ê¸°",next:"ë‹¤ìŒ",previous:"ì´ì „",finish:"ì™„ë£Œ",reset:"ì´ˆê¸°í™”",save:"ì €ì¥",load:"ë¶ˆëŸ¬ì˜¤ê¸°"},common:{loading:"ë¡œë”© ì¤‘...",error:"ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤",success:"ì„±ê³µ",warning:"ê²½ê³ ",info:"ì •ë³´",confirm:"í™•ì¸",welcome:"í™˜ì˜í•©ë‹ˆë‹¤",congratulations:"ì¶•í•˜í•©ë‹ˆë‹¤!",gameOver:"ê²Œì„ ì¢…ë£Œ",newGame:"ìƒˆ ê²Œì„",retry:"ë‹¤ì‹œ ì‹œë„"}},game:{title:"ì¸ìƒ ì¶©ì‹¤ ê²Œì„",subtitle:"ì „ëµì  ì¸ìƒ ì‹œë®¬ë ˆì´ì…˜",description:"ì¸ìƒì˜ ë‹¤ì–‘í•œ ë‹¨ê³„ì—ì„œ ìœ„í—˜ê³¼ ë³´í—˜ì˜ ê· í˜•ì„ ê³ ë ¤í•˜ë©° ì¶©ì‹¤í•œ ì¸ìƒì„ ëª©í‘œë¡œ í•˜ëŠ” ê²Œì„ì…ë‹ˆë‹¤.",stages:{youth:"ì²­ë…„ê¸°",adult:"ì„±ì¸ê¸°",middleAge:"ì¤‘ë…„ê¸°",elderly:"ë…¸ë…„ê¸°"},elements:{vitality:"ìƒëª…ë ¥",turn:"í„´",phase:"í˜ì´ì¦ˆ",stage:"ìŠ¤í…Œì´ì§€",round:"ë¼ìš´ë“œ",score:"ì ìˆ˜",level:"ë ˆë²¨"},cards:{riskCard:"ìœ„í—˜ ì¹´ë“œ",insuranceCard:"ë³´í—˜ ì¹´ë“œ",eventCard:"ì´ë²¤íŠ¸ ì¹´ë“œ",actionCard:"ì•¡ì…˜ ì¹´ë“œ",powerCard:"íŒŒì›Œ ì¹´ë“œ"},actions:{draw:"ì¹´ë“œ ë½‘ê¸°",play:"ì¹´ë“œ ì‚¬ìš©",discard:"ì¹´ë“œ ë²„ë¦¬ê¸°",buyInsurance:"ë³´í—˜ êµ¬ë§¤",cancelInsurance:"ë³´í—˜ í•´ì§€",takeRisk:"ìœ„í—˜ ê°ìˆ˜",avoidRisk:"ìœ„í—˜ íšŒí”¼"},insurance:{types:{life:"ìƒëª…ë³´í—˜",health:"ê±´ê°•ë³´í—˜",auto:"ìë™ì°¨ë³´í—˜",home:"í™”ì¬ë³´í—˜",travel:"ì—¬í–‰ìë³´í—˜",income:"ì†Œë“ë³´ì¥ë³´í—˜",disability:"ìƒí•´ë³´í—˜",longTermCare:"ì¥ê¸°ìš”ì–‘ë³´í—˜"},terms:{premium:"ë³´í—˜ë£Œ",coverage:"ë³´ì¥ê¸ˆì•¡",deductible:"ìê¸°ë¶€ë‹´ê¸ˆ",beneficiary:"ìˆ˜ìµì",policy:"ë³´í—˜ì¦ê¶Œ",claim:"ë³´í—˜ê¸ˆ ì²­êµ¬",renewal:"ê°±ì‹ ",cancellation:"í•´ì§€"}},risks:{categories:{health:"ê±´ê°• ìœ„í—˜",financial:"ê²½ì œì  ìœ„í—˜",accident:"ì‚¬ê³  ìœ„í—˜",natural:"ìì—°ì¬í•´ ìœ„í—˜",career:"ì§ì—… ìœ„í—˜",family:"ê°€ì¡± ìœ„í—˜"},levels:{low:"ë‚®ì€ ìœ„í—˜",medium:"ì¤‘ê°„ ìœ„í—˜",high:"ë†’ì€ ìœ„í—˜",extreme:"ê·¹ë„ë¡œ ë†’ì€ ìœ„í—˜"}}},tutorial:{title:"ê²Œì„ íŠœí† ë¦¬ì–¼",welcome:"ì¸ìƒ ì¶©ì‹¤ ê²Œì„ì˜ ì„¸ê³„ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!",steps:{introduction:{title:"ì†Œê°œ",content:"ì´ ê²Œì„ì—ì„œëŠ” ì¸ìƒì˜ ë‹¤ì–‘í•œ ë‹¨ê³„ì—ì„œ ìœ„í—˜ê³¼ ë³´í—˜ì˜ ê· í˜•ì„ ê³ ë ¤í•˜ë©° ì§„í–‰í•©ë‹ˆë‹¤."},basicRules:{title:"ê¸°ë³¸ ê·œì¹™",content:"ê° í„´ì—ì„œ ì¹´ë“œë¥¼ ë½‘ê³ , ìœ„í—˜ì— ëŒ€ì²˜í•˜ê±°ë‚˜ ë³´í—˜ìœ¼ë¡œ ëŒ€ë¹„í• ì§€ ê²°ì •í•©ë‹ˆë‹¤."},cardTypes:{title:"ì¹´ë“œ ì¢…ë¥˜",content:"ìœ„í—˜ ì¹´ë“œ, ë³´í—˜ ì¹´ë“œ, ì´ë²¤íŠ¸ ì¹´ë“œê°€ ìˆìŠµë‹ˆë‹¤. ê°ê°ì˜ íŠ¹ì§•ì„ ì´í•´í•´ë´…ì‹œë‹¤."},insuranceSystem:{title:"ë³´í—˜ ì‹œìŠ¤í…œ",content:"ë¯¸ë¦¬ ë³´í—˜ì„ êµ¬ë§¤í•˜ì—¬ ìœ„í—˜ì— ëŒ€ë¹„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë³´í—˜ë£Œì™€ ë³´ì¥ê¸ˆì•¡ì„ ê³ ë ¤í•˜ì—¬ ì„ íƒí•˜ì„¸ìš”."},strategy:{title:"ì „ëµ í¬ì¸íŠ¸",content:"ìƒëª…ë ¥ì„ ìœ ì§€í•˜ë©´ì„œ íš¨ê³¼ì ì¸ ë³´í—˜ ì „ëµì„ ì„¸ìš°ëŠ” ê²ƒì´ ì„±ê³µì˜ ì—´ì‡ ì…ë‹ˆë‹¤."}}},statistics:{title:"í†µê³„ ëŒ€ì‹œë³´ë“œ",sections:{overview:"ê°œìš”",performance:"ì„±ê³¼",trends:"íŠ¸ë Œë“œ",detailed:"ìƒì„¸ ë¶„ì„"},metrics:{gamesPlayed:"í”Œë ˆì´ íšŸìˆ˜",winRate:"ìŠ¹ë¥ ",averageScore:"í‰ê·  ì ìˆ˜",bestScore:"ìµœê³  ì ìˆ˜",totalPlayTime:"ì´ í”Œë ˆì´ ì‹œê°„",averageGameTime:"í‰ê·  ê²Œì„ ì‹œê°„",survivalRate:"ìƒì¡´ìœ¨",insuranceEfficiency:"ë³´í—˜ íš¨ìœ¨ì„±"},charts:{vitalityTrend:"ìƒëª…ë ¥ ì¶”ì´",stageAnalysis:"ìŠ¤í…Œì´ì§€ë³„ ë¶„ì„",cardUsage:"ì¹´ë“œ ì‚¬ìš© í˜„í™©",decisionAnalysis:"ì˜ì‚¬ê²°ì • ë¶„ì„",riskManagement:"ìœ„í—˜ ê´€ë¦¬",insuranceCoverage:"ë³´í—˜ ì»¤ë²„ë¦¬ì§€"}},accessibility:{title:"ì ‘ê·¼ì„± ì„¤ì •",sections:{visual:"ì‹œê° ì„¤ì •",audio:"ìŒì„± ì„¤ì •",interaction:"ì¡°ì‘ ì„¤ì •",display:"í‘œì‹œ ì„¤ì •"},options:{highContrast:"ê³ ëŒ€ë¹„",largeText:"í° ê¸€ì",reduceMotion:"ì• ë‹ˆë©”ì´ì…˜ ê°ì†Œ",screenReader:"ìŠ¤í¬ë¦° ë¦¬ë” ì§€ì›",keyboardNavigation:"í‚¤ë³´ë“œ ë‚´ë¹„ê²Œì´ì…˜",audioCues:"ìŒì„± ì‹ í˜¸",subtitles:"ìë§‰",slowAnimations:"ëŠë¦° ì• ë‹ˆë©”ì´ì…˜"},keyboardShortcuts:{title:"í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤",homeScreen:"í™ˆ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸° (Alt+H)",startGame:"ê²Œì„ ì‹œì‘ (Alt+G)",startTutorial:"íŠœí† ë¦¬ì–¼ ì‹œì‘ (Alt+T)",openStatistics:"í†µê³„ ì—´ê¸° (Alt+S)",openAccessibility:"ì ‘ê·¼ì„± ì„¤ì • (Alt+A)",help:"ë„ì›€ë§ í‘œì‹œ (F1)"}},feedback:{title:"í”¼ë“œë°±",types:{bug:"ë²„ê·¸ ë¦¬í¬íŠ¸",suggestion:"ê°œì„  ì œì•ˆ",general:"ì¼ë°˜ ì˜ê²¬",rating:"í‰ê°€"},form:{subject:"ì œëª©",message:"ë©”ì‹œì§€",email:"ì´ë©”ì¼ (ì„ íƒì‚¬í•­)",category:"ì¹´í…Œê³ ë¦¬",priority:"ìš°ì„ ìˆœìœ„",submit:"ì œì¶œ",thankYou:"í”¼ë“œë°±ì„ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!"}},errors:{general:"ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",network:"ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",gameState:"ê²Œì„ ìƒíƒœ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",save:"ê²Œì„ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",load:"ê²Œì„ ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",invalidAction:"ìœ íš¨í•˜ì§€ ì•Šì€ ë™ì‘ì…ë‹ˆë‹¤.",cardNotFound:"ì¹´ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",insufficientFunds:"ìê¸ˆì´ ë¶€ì¡±í•©ë‹ˆë‹¤.",insuranceNotActive:"ë³´í—˜ì´ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."},success:{gameSaved:"ê²Œì„ì„ ì €ì¥í–ˆìŠµë‹ˆë‹¤.",gameLoaded:"ê²Œì„ì„ ë¡œë“œí–ˆìŠµë‹ˆë‹¤.",insurancePurchased:"ë³´í—˜ì„ êµ¬ë§¤í–ˆìŠµë‹ˆë‹¤.",riskAvoided:"ìœ„í—˜ì„ íšŒí”¼í–ˆìŠµë‹ˆë‹¤.",levelCompleted:"ë ˆë²¨ì„ í´ë¦¬ì–´í–ˆìŠµë‹ˆë‹¤!",achievementUnlocked:"ì—…ì ì„ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤!"},region:{currency:"ì›",currencySymbol:"â‚©",dateFormat:"YYYYë…„ MMì›” DDì¼",numberFormat:"1,234",insuranceSystem:{nationalHealth:"êµ­ë¯¼ê±´ê°•ë³´í—˜",employeeHealth:"ì§ì¥ê±´ê°•ë³´í—˜",nationalPension:"êµ­ë¯¼ì—°ê¸ˆ",employeePension:"í‡´ì§ì—°ê¸ˆ",longTermCare:"ì¥ê¸°ìš”ì–‘ë³´í—˜",workersComp:"ì‚°ì¬ë³´í—˜",unemployment:"ê³ ìš©ë³´í—˜"},risks:{earthquake:"ì§€ì§„",typhoon:"íƒœí’",flood:"í™ìˆ˜",fineDust:"ë¯¸ì„¸ë¨¼ì§€",economicRecession:"ê²½ê¸°ì¹¨ì²´",agingSociety:"ê³ ë ¹í™” ì‚¬íšŒ"}},ageGroups:{young:{title:"ì Šì€ ì„¸ëŒ€ë¥¼ ìœ„í•œ ë³´í—˜ ì¡°ì–¸",message:"ë¯¸ë˜ë¥¼ ìœ„í•œ ê¸°ë°˜ ë§ˆë ¨ì´ ì¤‘ìš”í•©ë‹ˆë‹¤."},middle:{title:"ì§ì¥ì¸ ì„¸ëŒ€ë¥¼ ìœ„í•œ ë³´í—˜ ì¡°ì–¸",message:"ê°€ì¡±ì„ ì§€í‚¤ê¸° ìœ„í•œ ë³´ì¥ì„ ê³ ë ¤í•´ë³´ì„¸ìš”."},senior:{title:"ì‹œë‹ˆì–´ ì„¸ëŒ€ë¥¼ ìœ„í•œ ë³´í—˜ ì¡°ì–¸",message:"ì˜ë£Œ ë° ìš”ì–‘ ìœ„í—˜ì— ëŒ€í•œ ëŒ€ë¹„ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤."}}},de=["ja","en","zh","ko"],fe={ja:"æ—¥æœ¬èª",en:"English",zh:"ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰",ko:"í•œêµ­ì–´"},zs=[];function Us(){const o=navigator.language.split("-")[0];return de.includes(o)?o:"ja"}function Vs(){try{const o=localStorage.getItem("insurance-game-locale");return de.includes(o)?o:null}catch(o){return null}}function Bs(o){try{localStorage.setItem("insurance-game-locale",o)}catch(e){console.warn("Failed to save locale to localStorage:",e)}}function js(){return Vs()||Us()}const qs={legacy:!1,locale:js(),fallbackLocale:"ja",messages:{ja:Fs,en:Os,zh:Hs,ko:Ns},numberFormats:{ja:{currency:{style:"currency",currency:"JPY",currencyDisplay:"symbol"},decimal:{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:2}},en:{currency:{style:"currency",currency:"USD",currencyDisplay:"symbol"},decimal:{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:2}},zh:{currency:{style:"currency",currency:"CNY",currencyDisplay:"symbol"},decimal:{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:2}},ko:{currency:{style:"currency",currency:"KRW",currencyDisplay:"symbol"},decimal:{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}}},datetimeFormats:{ja:{short:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"long",day:"numeric",weekday:"long"}},en:{short:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"long",day:"numeric",weekday:"long"}},zh:{short:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"long",day:"numeric",weekday:"long"}},ko:{short:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"long",day:"numeric",weekday:"long"}}}},xe=Ye(qs);function Ks(o){if(!de.includes(o)){console.warn(`Unsupported locale: ${o}`);return}xe.global.locale.value=o,Bs(o),document.documentElement.lang=o,document.documentElement.dir=zs.includes(o)?"rtl":"ltr"}function Gs(){return xe.global.locale.value}const Ws={key:0,class:"language-dropdown"},Qs=["aria-label","aria-expanded"],Js={class:"current-flag","aria-hidden":"true"},Ys={key:0,class:"current-label"},Xs=["aria-label"],Zs=["aria-selected","tabindex","onClick","onKeydown"],ei={class:"option-flag","aria-hidden":"true"},ti={class:"option-label"},si={key:0,class:"option-check","aria-hidden":"true"},ii={key:1,class:"language-buttons"},ni=["aria-label","aria-pressed","onClick"],ri={class:"button-flag","aria-hidden":"true"},oi={key:0,class:"button-label"},ai={key:2,class:"language-flags"},ci=["aria-label","title","onClick"],li=N({__name:"LanguageSwitcher",props:{mode:{default:"dropdown"},compact:{type:Boolean,default:!1},ariaLabel:{default:""}},setup(o){const{t:e}=Oe(),t=o,s=_(!1),i=_(Gs()),n=V(()=>fe[i.value]),r=V(()=>de.map(y=>({value:y,label:fe[y],flag:d(y),isActive:y===i.value})));function d(y){return{ja:"ğŸ‡¯ğŸ‡µ",en:"ğŸ‡ºğŸ‡¸",zh:"ğŸ‡¨ğŸ‡³",ko:"ğŸ‡°ğŸ‡·"}[y]}function u(y){i.value=y,Ks(y),s.value=!1;const g=`Language changed to ${fe[y]}`;m(g)}function m(y){const g=document.createElement("div");g.setAttribute("aria-live","polite"),g.setAttribute("aria-atomic","true"),g.className="sr-only",g.textContent=y,document.body.appendChild(g),setTimeout(()=>document.body.removeChild(g),1e3)}function h(){s.value=!s.value}function E(y){y.target.closest(".language-switcher")||(s.value=!1)}function S(y,g){var a;switch(y.key){case"Enter":case" ":y.preventDefault(),g?u(g):h();break;case"Escape":if(s.value){s.value=!1;const l=document.querySelector(".language-trigger");l==null||l.focus()}break;case"ArrowDown":if(t.mode==="dropdown"&&s.value){y.preventDefault();const l=document.querySelector('.language-option:not([aria-selected="true"]) + .language-option');l==null||l.focus()}break;case"ArrowUp":if(t.mode==="dropdown"&&s.value){y.preventDefault();const l=(a=document.querySelector('.language-option[aria-selected="true"]'))==null?void 0:a.previousElementSibling;l==null||l.focus()}break}}return ie(()=>{document.addEventListener("click",E)}),ue(()=>{document.removeEventListener("click",E)}),(y,g)=>(v(),w("div",{class:Z(["language-switcher",[`language-switcher--${y.mode}`,{"language-switcher--compact":y.compact}]])},[y.mode==="dropdown"?(v(),w("div",Ws,[c("button",{class:"language-trigger","aria-label":y.ariaLabel||M(e)("accessibility.options.changeLanguage","Change Language"),"aria-expanded":s.value,"aria-haspopup":"listbox",onClick:h,onKeydown:S},[c("span",Js,x(d(i.value)),1),y.compact?T("",!0):(v(),w("span",Ys,x(n.value),1)),c("span",{class:Z(["dropdown-icon",{"dropdown-icon--open":s.value}]),"aria-hidden":"true"}," â–¼ ",2)],40,Qs),D(le,{name:"dropdown"},{default:U(()=>[s.value?(v(),w("ul",{key:0,class:"language-options",role:"listbox","aria-label":M(e)("ui.navigation.selectLanguage","Select Language")},[(v(!0),w(te,null,se(r.value,a=>(v(),w("li",{key:a.value,class:"language-option",role:"option","aria-selected":a.isActive,tabindex:a.isActive?0:-1,onClick:l=>u(a.value),onKeydown:l=>S(l,a.value)},[c("span",ei,x(a.flag),1),c("span",ti,x(a.label),1),a.isActive?(v(),w("span",si,"âœ“")):T("",!0)],40,Zs))),128))],8,Xs)):T("",!0)]),_:1})])):y.mode==="buttons"?(v(),w("div",ii,[(v(!0),w(te,null,se(r.value,a=>(v(),w("button",{key:a.value,class:Z(["language-button",{"language-button--active":a.isActive}]),"aria-label":`${M(e)("ui.navigation.switchTo","Switch to")} ${a.label}`,"aria-pressed":a.isActive,onClick:l=>u(a.value)},[c("span",ri,x(a.flag),1),y.compact?T("",!0):(v(),w("span",oi,x(a.label),1))],10,ni))),128))])):y.mode==="flags"?(v(),w("div",ai,[(v(!0),w(te,null,se(r.value,a=>(v(),w("button",{key:a.value,class:Z(["language-flag",{"language-flag--active":a.isActive}]),"aria-label":`${M(e)("ui.navigation.switchTo","Switch to")} ${a.label}`,title:a.label,onClick:l=>u(a.value)},x(a.flag),11,ci))),128))])):T("",!0)],2))}}),ui=z(li,[["__scopeId","data-v-ee196843"]]),di={class:"app-container",role:"application","aria-label":"äººç”Ÿå……å®Ÿã‚²ãƒ¼ãƒ "},mi={key:0,class:"game-view",id:"main-content",role:"main","aria-label":"ã‚²ãƒ¼ãƒ ç”»é¢"},gi={key:1,class:"home-view",id:"main-content",role:"main","aria-label":"ãƒ›ãƒ¼ãƒ ç”»é¢"},pi={class:"home-container"},hi={class:"info-section"},fi={class:"language-switcher-container"},yi=["aria-label","title"],vi=N({__name:"App",setup(o){const{t:e}=Oe(),t=_(!1),s=_(!1),i=_(!1),n=pe(()=>he(()=>import("./analytics-ImNIcNXw.js").then(I=>I.S),__vite__mapDeps([0,1,2,3,4,5]))),r=pe(()=>he(()=>import("./feedback-Bk8qjEas.js"),__vite__mapDeps([6,1,2,3,0,4,5,7]))),d=pe(()=>he(()=>import("./GameCanvas-BZ9_4VV0.js"),__vite__mapDeps([8,9,1,2,3,10,11,0,4,5,12,13]))),u=_();let m=null,h=null;const E=_({stage:"youth",turn:1,vitality:100,phase:"setup"}),S=()=>{t.value=!0,h==null||h.announceScreenChange("ã‚²ãƒ¼ãƒ ç”»é¢","ã‚²ãƒ¼ãƒ ãŒé–‹å§‹ã•ã‚Œã¾ã—ãŸ")},y=()=>{t.value=!0,h==null||h.announceScreenChange("ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«","ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹ã—ã¾ã™"),setTimeout(()=>{const I=new CustomEvent("startTutorial");window.dispatchEvent(I)},100)},g=()=>{t.value=!1,h==null||h.announceScreenChange("ãƒ›ãƒ¼ãƒ ç”»é¢","ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚Šã¾ã—ãŸ")},a=()=>{i.value=!0,h==null||h.announceScreenChange("çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰","çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’é–‹ãã¾ã—ãŸ")},l=()=>{i.value=!1,h==null||h.announceScreenChange("ãƒ›ãƒ¼ãƒ ç”»é¢","ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚Šã¾ã—ãŸ")},A=I=>{console.log("ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸ:",I),I.screenReaderEnabled&&(h==null||h.announce("ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã—ãŸ",{priority:"assertive"}))},L=(I,k)=>{console.log(`ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é€ä¿¡å®Œäº†: ${k} (${I})`)};return ie(()=>{m=new As,h=new He,m.registerShortcut({key:"h",modifiers:["alt"],description:"ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚‹",action:()=>{t.value&&g()}}),m.registerShortcut({key:"g",modifiers:["alt"],description:"ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹",action:()=>{t.value||S()}}),m.registerShortcut({key:"t",modifiers:["alt"],description:"ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹",action:()=>{t.value||y()}}),m.registerShortcut({key:"a",modifiers:["alt"],description:"ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šã‚’é–‹ã",action:()=>{s.value=!0,h==null||h.announce("ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šã‚’é–‹ãã¾ã—ãŸ",{priority:"assertive"})}}),m.registerShortcut({key:"s",modifiers:["alt"],description:"çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’é–‹ã",action:()=>{!t.value&&!i.value&&a()}}),setTimeout(()=>{var Ie,Te;const I=(Ie=u.value)==null?void 0:Ie.gameButtonRef,k=(Te=u.value)==null?void 0:Te.tutorialButtonRef,$=document.querySelector(".back-to-home-btn");I!=null&&(m==null||m.registerFocusableElement(I,{priority:100,group:"main-actions",onFocus:()=>h==null?void 0:h.announce("ã‚²ãƒ¼ãƒ é–‹å§‹ãƒœã‚¿ãƒ³ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹")})),k!=null&&(m==null||m.registerFocusableElement(k,{priority:90,group:"main-actions",onFocus:()=>h==null?void 0:h.announce("ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«é–‹å§‹ãƒœã‚¿ãƒ³ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹")})),$!=null&&(m==null||m.registerFocusableElement($,{priority:100,group:"game-actions",onFocus:()=>h==null?void 0:h.announce("ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹")}))},100),h.announceScreenChange("ãƒ›ãƒ¼ãƒ ç”»é¢","äººç”Ÿå……å®Ÿã‚²ãƒ¼ãƒ  ã¸ã‚ˆã†ã“ãã€‚Alt+Gã§ã‚²ãƒ¼ãƒ é–‹å§‹ã€Alt+Tã§ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã€Alt+Sã§çµ±è¨ˆã€Alt+Aã§ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šã€F1ã§ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤ºã§ãã¾ã™")}),ue(()=>{m==null||m.destroy(),h==null||h.destroy()}),(I,k)=>(v(),w("div",di,[k[5]||(k[5]=c("div",{class:"skip-links"},[c("a",{href:"#main-content",class:"skip-link"},"ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ç§»å‹•"),c("a",{href:"#navigation",class:"skip-link"},"ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã«ç§»å‹•")],-1)),D(ks),D(it,{type:"slide",direction:"left",duration:400,intensity:"normal"},{default:U(()=>[t.value?(v(),w("div",mi,[D($e,{fallback:"detailed","can-recover":!0},{default:U(()=>[D(M(d))]),_:1}),c("button",{ref:"backToHomeButtonRef",onClick:g,class:"back-to-home-btn","aria-label":"ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚‹ (Alt+H)","aria-keyshortcuts":"Alt+H"},k[3]||(k[3]=[c("span",{class:"btn-icon","aria-hidden":"true"},"â†",-1),c("span",{class:"btn-text"},"ãƒ›ãƒ¼ãƒ ",-1)]),512)])):(v(),w("div",gi,[D($e,{fallback:"minimal"},{default:U(()=>[c("div",pi,[D(Ts),D($s,{onStartGame:S,onStartTutorial:y,onOpenStatistics:a,ref_key:"navigationRef",ref:u},null,512),c("section",hi,[D(Ms)])])]),_:1})]))]),_:1}),k[6]||(k[6]=c("footer",{class:"sr-only",id:"footer",role:"contentinfo"},[c("p",null,"äººç”Ÿå……å®Ÿã‚²ãƒ¼ãƒ  - ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«ãªWebã‚²ãƒ¼ãƒ ä½“é¨“")],-1)),D($t,{"is-open":s.value,onClose:k[0]||(k[0]=$=>s.value=!1),onSettingsChanged:A},null,8,["is-open"]),D(Vt,{enabled:!0}),c("div",fi,[D(ui,{mode:"dropdown",compact:!0,"aria-label":M(e)("accessibility.options.changeLanguage","Change Language")},null,8,["aria-label"])]),c("button",{onClick:k[1]||(k[1]=$=>s.value=!0),class:"accessibility-button","aria-label":M(e)("accessibility.keyboardShortcuts.openAccessibility","ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šã‚’é–‹ã (Alt+A)"),"aria-keyshortcuts":"Alt+A",title:M(e)("accessibility.title","ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®š")},k[4]||(k[4]=[c("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},[c("path",{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9H15L13.5 7.5C13 7 12.5 6.5 11.9 6.5H12.1C11.5 6.5 11 7 10.5 7.5L7.91 10.09C7.66 10.34 7.66 10.76 7.91 11.01L10.5 13.6C11 14.1 11.5 14.6 12.1 14.6H11.9C12.5 14.6 13 14.1 13.5 13.6L15 12.1H21C21.6 12.1 22 11.7 22 11.1V10C22 9.4 21.6 9 21 9ZM8.5 12.5L12 16L15.5 12.5L12 22L8.5 12.5Z",fill:"currentColor"})],-1)]),8,yi),(v(),ke(Fe,{to:"body"},[i.value?(v(),w("div",{key:0,class:"modal-overlay",onClick:l},[c("div",{class:"modal-content",onClick:k[2]||(k[2]=Me(()=>{},["stop"]))},[D(M(n),{"auto-refresh":!0,onClose:l})])])):T("",!0)])),D(M(r),{"game-state":E.value,"show-stats":!0,"auto-survey":!0,onFeedbackSubmitted:L},null,8,["game-state"])]))}}),wi=z(vi,[["__scopeId","data-v-e3a45ac9"]]),B=class B{constructor(){p(this,"suspiciousActivities",[]);p(this,"rateLimiters",new Map);p(this,"securityMetrics",{totalThreatsBlocked:0,totalInputValidations:0,totalRateLimitViolations:0,sessionStartTime:Date.now()})}static getInstance(){return B.instance||(B.instance=new B),B.instance}getSecurityMetrics(){return R(C({},this.securityMetrics),{uptime:Date.now()-this.securityMetrics.sessionStartTime,currentThreats:this.suspiciousActivities.filter(e=>Date.now()-e.timestamp.getTime()<6e4).length})}cleanupRateLimiters(){for(const e of this.rateLimiters.values())e.cleanup()}logSuspiciousActivity(e){const t=R(C({},e),{id:Ae(16),timestamp:new Date});this.suspiciousActivities.push(t),this.securityMetrics.totalThreatsBlocked++,this.suspiciousActivities.length>1e3&&(this.suspiciousActivities=this.suspiciousActivities.slice(-1e3)),this.getRecentActivitiesByType(e.type,6e4).length>=5&&(t.severity="high",t.description+=" (æ”»æ’ƒãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º)"),(t.severity==="high"||t.severity==="critical")&&(console.warn(`ğŸš¨ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è­¦å‘Š [${t.severity.toUpperCase()}]: ${t.description}`),t.severity==="critical"&&this.handleCriticalThreat(t)),this.persistActivityToStorage(t)}getRecentActivitiesByType(e,t){const s=Date.now()-t;return this.suspiciousActivities.filter(i=>i.type===e&&i.timestamp.getTime()>s)}persistActivityToStorage(e){try{setTimeout(()=>{const t=JSON.parse(localStorage.getItem("security_incidents")||"[]");t.push(R(C({},e),{timestamp:e.timestamp.toISOString()}));const s=t.slice(-500);localStorage.setItem("security_incidents",JSON.stringify(s))},0)}catch(t){console.error("ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ­ã‚°ã®æ°¸ç¶šåŒ–ã«å¤±æ•—:",t)}}checkRateLimit(e,t,s,i=6e4){this.rateLimiters.has(e)||this.rateLimiters.set(e,new Cs);const n=this.rateLimiters.get(e),r=n.isAllowed(e,t,s,i);if(!r){this.securityMetrics.totalRateLimitViolations++;const d=n.getRemainingAttempts(e,t,s),u=n.getNextAttemptTime(e,s);this.logSuspiciousActivity({type:"rate_limit_exceeded",description:`ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚’è¶…é: ${e}`,severity:d===0?"high":"medium",source:e,metadata:{maxAttempts:t,windowMs:s,blockDurationMs:i,remainingAttempts:d,nextAttemptTime:u}})}return r}getSuspiciousActivities(e=100){return this.suspiciousActivities.slice(-e).sort((t,s)=>s.timestamp.getTime()-t.timestamp.getTime())}generateSecurityReport(){const e=this.getSuspiciousActivities(),t={},s={},i={};e.forEach(r=>{t[r.type]=(t[r.type]||0)+1,s[r.severity]=(s[r.severity]||0)+1;const d=new Date(r.timestamp).getHours();i[d]=(i[d]||0)+1});const n=this.getSecurityMetrics();return{totalActivities:e.length,typeBreakdown:t,severityBreakdown:s,hourlyBreakdown:i,recentActivities:e.slice(0,10),generateTime:new Date,metrics:n,recommendations:this.generateSecurityRecommendations(t,s)}}generateSecurityRecommendations(e,t){const s=[];return e.rate_limit_exceeded>10&&s.push("ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã®å¼·åŒ–ã‚’æ¤œè¨ã—ã¦ãã ã•ã„"),e.invalid_input>5&&s.push("å…¥åŠ›æ¤œè¨¼ã®å¼·åŒ–ã‚’æ¤œè¨ã—ã¦ãã ã•ã„"),e.csp_violation>0&&s.push("Content Security Policyã®è¦‹ç›´ã—ã‚’æ¤œè¨ã—ã¦ãã ã•ã„"),t.critical>0&&s.push("ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãªè„…å¨ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚ç³»çµ±ç®¡ç†è€…ã«é€£çµ¡ã—ã¦ãã ã•ã„"),s.length===0&&s.push("ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£çŠ¶æ…‹ã¯è‰¯å¥½ã§ã™"),s}handleCriticalThreat(e){try{localStorage.clear(),sessionStorage.clear()}catch(t){console.error("ç·Šæ€¥æ™‚ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¯ãƒªã‚¢ã«å¤±æ•—:",t)}console.error("ğŸš¨ CRITICAL SECURITY THREAT DETECTED ğŸš¨"),console.error("Activity:",e),console.error("All storage has been cleared as a security measure."),typeof window!="undefined"&&setTimeout(()=>{window.location.reload()},1e3)}};p(B,"instance");let b=B;function bi(o,e=10){function t(i,n=0){if(n>e||i===null||typeof i!="object")return n;if(s.has(i))return b.getInstance().logSuspiciousActivity({type:"circular_reference",description:"å¾ªç’°å‚ç…§ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ",severity:"medium",source:"input_validation",metadata:{currentDepth:n}}),e+1;s.add(i);try{if(Array.isArray(i))return i.length>1e4?(b.getInstance().logSuspiciousActivity({type:"oversized_array",description:`ç•°å¸¸ã«å¤§ããªé…åˆ—: ${i.length}å€‹ã®è¦ç´ `,severity:"high",source:"input_validation",metadata:{arrayLength:i.length,currentDepth:n}}),e+1):Math.max(n,...i.map(d=>t(d,n+1)));const r=Object.keys(i);return r.length>1e3?(b.getInstance().logSuspiciousActivity({type:"oversized_object",description:`ç•°å¸¸ã«å¤šãã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£: ${r.length}å€‹`,severity:"high",source:"input_validation",metadata:{propertyCount:r.length,currentDepth:n}}),e+1):Math.max(n,...Object.values(i).map(d=>t(d,n+1)))}finally{s.delete(i)}}const s=new Set;return t(o)<=e}function Si(o,e={}){const{maxLength:t=1e3,allowedTypes:s=["string","number","boolean"],sanitize:i=!0,maxDepth:n=10,checkPatterns:r=[]}=e,d=[];let u;const m=typeof o;if(!s.includes(m))return d.push(`ç„¡åŠ¹ãªå‹: ${m}`),{isValid:!1,errors:d};if(o==null&&!s.includes("null"))return d.push("nullã¾ãŸã¯undefinedã¯è¨±å¯ã•ã‚Œã¦ã„ã¾ã›ã‚“"),{isValid:!1,errors:d};if(m==="string"){const E=o;E.length>t&&d.push(`æ–‡å­—åˆ—ãŒé•·ã™ãã¾ã™: ${E.length}/${t}`);for(const S of r)S.test(E)||d.push(`ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°å¤±æ•—: ${S.source}`);if(i)try{u=Ei(E)}catch(S){d.push(`ã‚µãƒ‹ã‚¿ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼: ${S instanceof Error?S.message:String(S)}`)}}return o&&typeof o=="object"&&(bi(o,n)||d.push(`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ·±åº¦ãŒåˆ¶é™ã‚’è¶…ãˆã¦ã„ã¾ã™: ${n}`)),{isValid:d.length===0,sanitizedInput:u,errors:d}}function Ei(o){return o.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\/\/.*$/gm,"").replace(/['"`;]/g,"").replace(/\b(SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|EXEC|UNION|SCRIPT)\b/gi,"").replace(/[()&|!=<>]/g,"").replace(/[{}$]/g,"").replace(/[\/\[\]@]/g,"").replace(/[;&|`$\\]/g,"").replace(/[\x00-\x1f\x7f-\x9f\ufeff]/g,"").trim()}function ki(){typeof window!="undefined"&&document.addEventListener("securitypolicyviolation",o=>{b.getInstance().logSuspiciousActivity({type:"csp_violation",description:`CSPé•å: ${o.violatedDirective}`,severity:"high",source:o.sourceFile||"unknown",metadata:{violatedDirective:o.violatedDirective,blockedURI:o.blockedURI,lineNumber:o.lineNumber,columnNumber:o.columnNumber}})})}function Ci(){typeof window!="undefined"&&window.MutationObserver&&new MutationObserver(e=>{e.forEach(t=>{t.type==="childList"&&t.addedNodes.forEach(s=>{if(s.nodeType===Node.ELEMENT_NODE){const i=s;if(i.tagName==="SCRIPT"){const n=i.getAttribute("src");n&&!n.startsWith(window.location.origin)&&b.getInstance().logSuspiciousActivity({type:"external_script_injection",description:`å¤–éƒ¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å‹•çš„è¿½åŠ ã‚’æ¤œå‡º: ${n}`,severity:"critical",source:"dom_monitor",metadata:{scriptSrc:n}})}}})})}).observe(document.body,{childList:!0,subtree:!0})}function Ai(){if(typeof window!="undefined"){const o=window.fetch;window.fetch=function(...t){const s=t[0],i=t[1]||{};return typeof s=="string"&&s.startsWith("http")&&!s.startsWith(window.location.origin)&&b.getInstance().logSuspiciousActivity({type:"external_network_request",description:`å¤–éƒ¨ãƒ‰ãƒ¡ã‚¤ãƒ³ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆ: ${s}`,severity:"medium",source:"network_monitor",metadata:{url:s,method:i.method||"GET"}}),o.apply(this,t)};const e=window.XMLHttpRequest;window.XMLHttpRequest=function(){const t=new e,s=t.open;return t.open=function(i,n,...r){return typeof n=="string"&&n.startsWith("http")&&!n.startsWith(window.location.origin)&&b.getInstance().logSuspiciousActivity({type:"external_xhr_request",description:`å¤–éƒ¨ãƒ‰ãƒ¡ã‚¤ãƒ³ã¸ã®XHRãƒªã‚¯ã‚¨ã‚¹ãƒˆ: ${n}`,severity:"medium",source:"network_monitor",metadata:{url:n,method:i}}),s.apply(this,[i,n,...r])},t}}}function xi(){if(typeof window!="undefined"){let o=!1,e=Date.now();const t={sizeDetection(){return window.outerHeight-window.innerHeight>160||window.outerWidth-window.innerWidth>160},consoleDetection(){const s=performance.now();return console.log("%c","color: transparent"),performance.now()-s>100},debuggerDetection(){const s=performance.now();try{Function("debugger")()}catch(n){}return performance.now()-s>100},contextMenuDetection(){return!document.addEventListener}};setInterval(()=>{const s=Date.now(),i={size:t.sizeDetection(),console:s-e>5e3?t.consoleDetection():!1,debugger:s-e>1e4?t.debuggerDetection():!1,contextMenu:!1},n=Object.values(i).some(Boolean);n&&!o?(o=!0,b.getInstance().logSuspiciousActivity({type:"devtools_opened",description:"é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ",severity:"low",source:"devtools_detector",metadata:{detectionMethods:i,outerHeight:window.outerHeight,innerHeight:window.innerHeight,outerWidth:window.outerWidth,innerWidth:window.innerWidth,userAgent:navigator.userAgent,timestamp:s}}),Ii()):!n&&o&&(o=!1),s-e>5e3&&(e=s)},1e3)}}function Ii(){console.warn("%cğŸš¨ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è­¦å‘Š","color: red; font-size: 24px; font-weight: bold;"),console.warn(`%cã“ã®ã‚µã‚¤ãƒˆã¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£è¦–ä¸‹ã«ã‚ã‚Šã¾ã™ã€‚
é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã®ä½¿ç”¨ã¯è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚`,"color: orange; font-size: 14px;");const o=b.getInstance(),e=navigator.userAgent;o.checkRateLimit(`devtools_user_${e}`,10,6e4)||console.warn("âš ï¸ é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ä½¿ç”¨ã«ã‚ˆã‚‹ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãŒç™ºå‹•ã—ã¾ã—ãŸ")}function Ti(){try{ki(),Ci(),Ai(),xi(),_i(),Li(),Di(),$i(),Ri(),console.log("ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚·ã‚¹ãƒ†ãƒ ãŒåˆæœŸåŒ–ã•ã‚Œã¾ã—ãŸ (å¼·åŒ–ç‰ˆ)")}catch(o){console.error("âŒ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ:",o),b.getInstance().logSuspiciousActivity({type:"security_init_failure",description:`ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼: ${o instanceof Error?o.message:String(o)}`,severity:"critical",source:"security_initialization",metadata:{error:o}})}}function _i(){document.addEventListener("input",o=>{const e=o.target;if(e&&e.value){const t=Si(e.value,{maxLength:1e3,sanitize:!0,checkPatterns:[/^[^<>"'&{}$]*$/]});t.isValid||b.getInstance().logSuspiciousActivity({type:"invalid_input",description:`ç„¡åŠ¹ãªå…¥åŠ›ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ: ${t.errors.join(", ")}`,severity:"medium",source:"input_validation_monitor",metadata:{inputValue:e.value.slice(0,100),errors:t.errors,elementType:e.type,elementName:e.name}})}})}function Li(){typeof window!="undefined"&&window.performance&&setInterval(()=>{if("memory"in performance){const e=performance.memory,t=Math.round(e.usedJSHeapSize/1024/1024),s=Math.round(e.jsHeapSizeLimit/1024/1024),i=t/s*100;i>80&&b.getInstance().logSuspiciousActivity({type:"high_memory_usage",description:`ãƒ¡ãƒ¢ãƒªä½¿ç”¨ç‡ãŒé«˜ã„ã§ã™: ${i.toFixed(1)}%`,severity:"medium",source:"performance_monitor",metadata:{usedMB:t,limitMB:s,usagePercent:i}})}},3e4)}function Di(){const o=new Map;setInterval(()=>{const t=Object.keys(window).length,s=o.get("global")||0;t>s+100&&b.getInstance().logSuspiciousActivity({type:"potential_memory_leak",description:`ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ•°ãŒæ€¥æ¿€ã«å¢—åŠ : ${t}`,severity:"medium",source:"memory_leak_detector",metadata:{currentCount:t,previousCount:s,increase:t-s}}),o.set("global",t)},6e4)}function $i(){const o={crypto:!!window.crypto,subtle:!!(window.crypto&&window.crypto.subtle),csp:!!document.querySelector('meta[http-equiv="Content-Security-Policy"]'),https:window.location.protocol==="https:",referrerPolicy:!!document.querySelector('meta[name="referrer"]')},e=Object.entries(o).filter(([,t])=>!t).map(([t])=>t);e.length>0&&b.getInstance().logSuspiciousActivity({type:"missing_security_features",description:`ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½ãŒä¸ååˆ†: ${e.join(", ")}`,severity:"medium",source:"initial_security_check",metadata:{missingFeatures:e,allFeatures:o}})}function Ri(){setInterval(()=>{b.getInstance().cleanupRateLimiters()},300*1e3),setInterval(()=>{const o=b.getInstance().generateSecurityReport();o.totalActivities>0&&console.log("ğŸ“Š ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒãƒ¼ãƒˆ:",o)},3600*1e3),setInterval(()=>{const o=JSON.parse(localStorage.getItem("security_incidents")||"[]"),e=Date.now()-1440*60*1e3,t=o.filter(s=>new Date(s.timestamp).getTime()>e);localStorage.setItem("security_incidents",JSON.stringify(t))},1440*60*1e3)}const j=class j{constructor(){p(this,"trustedDomains",[]);p(this,"allowedTags",["b","i","em","strong","br","p"]);p(this,"allowedAttributes",["class","data-*"])}static getInstance(){return j.instance||(j.instance=new j),j.instance}setTrustedDomains(e){this.trustedDomains=e.map(t=>t.toLowerCase())}setAllowedTags(e){this.allowedTags=e.map(t=>t.toLowerCase())}sanitizeHTML(e){if(typeof e!="string")return"";let t=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;");for(const s of this.allowedTags){const i=new RegExp(`&lt;(${s})&gt;`,"gi"),n=new RegExp(`&lt;\\/(${s})&gt;`,"gi");t=t.replace(i,"<$1>").replace(n,"</$1>")}return t.slice(0,1e4)}escapeJavaScript(e){return typeof e!="string"?"":e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\x08/g,"\\b").replace(/\f/g,"\\f").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/[\x00-\x1f\x7f-\x9f]/g,t=>`\\u${`0000${t.charCodeAt(0).toString(16)}`.slice(-4)}`)}sanitizeURL(e){if(typeof e!="string")return"";try{const t=new URL(e);return["http:","https:","mailto:","tel:"].includes(t.protocol)?this.trustedDomains.length>0&&!this.trustedDomains.some(n=>t.hostname.endsWith(n))&&t.protocol!=="mailto:"&&t.protocol!=="tel:"?(b.getInstance().logSuspiciousActivity({type:"untrusted_domain",description:`ä¿¡é ¼ã•ã‚Œã¦ã„ãªã„ãƒ‰ãƒ¡ã‚¤ãƒ³: ${t.hostname}`,severity:"medium",source:"xss_protection",metadata:{originalUrl:e,hostname:t.hostname}}),""):t.toString():(b.getInstance().logSuspiciousActivity({type:"blocked_dangerous_protocol",description:`å±é™ºãªãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ãƒ–ãƒ­ãƒƒã‚¯: ${t.protocol}`,severity:"high",source:"xss_protection",metadata:{originalUrl:e,protocol:t.protocol}}),"")}catch(t){return b.getInstance().logSuspiciousActivity({type:"invalid_url",description:`ç„¡åŠ¹ãªURL: ${e}`,severity:"medium",source:"xss_protection",metadata:{originalUrl:e,error:t instanceof Error?t.message:String(t)}}),""}}validateDOMOperation(e,t,s){if(!e||!t)return!1;if(t==="innerHTML"&&s){const i=this.sanitizeHTML(s);if(i!==s)return b.getInstance().logSuspiciousActivity({type:"blocked_unsafe_dom",description:"unsafe innerHTMLæ“ä½œã‚’ãƒ–ãƒ­ãƒƒã‚¯",severity:"high",source:"xss_protection",metadata:{operation:t,originalValue:s.slice(0,200),sanitizedValue:i.slice(0,200)}}),!1}if(t==="setAttribute"&&s){const[i]=s.split("=",1);if(["onload","onerror","onclick","onmouseover","style"].includes(i.toLowerCase()))return b.getInstance().logSuspiciousActivity({type:"blocked_dangerous_attribute",description:`å±é™ºãªå±æ€§è¨­å®šã‚’ãƒ–ãƒ­ãƒƒã‚¯: ${i}`,severity:"high",source:"xss_protection",metadata:{operation:t,attributeName:i}}),!1}return!0}};p(j,"instance");let be=j;const q=class q{constructor(){p(this,"tokenStore",new Map);p(this,"validOrigins",[])}static getInstance(){return q.instance||(q.instance=new q),q.instance}setValidOrigins(e){this.validOrigins=e.map(t=>t.toLowerCase())}generateTokenForAction(e,t=30){const s=generateCSRFToken(),i=Date.now()+t*60*1e3;return this.tokenStore.set(e,{token:s,expires:i}),this.cleanupExpiredTokens(),s}validateTokenForAction(e,t){const s=this.tokenStore.get(e);if(!s)return b.getInstance().logSuspiciousActivity({type:"csrf_token_missing",description:`CSRF token not found for action: ${e}`,severity:"high",source:"csrf_protection",metadata:{action:e}}),!1;if(Date.now()>s.expires)return this.tokenStore.delete(e),b.getInstance().logSuspiciousActivity({type:"csrf_token_expired",description:`CSRF token expired for action: ${e}`,severity:"medium",source:"csrf_protection",metadata:{action:e}}),!1;const i=validateCSRFToken(t,s.token);return i||b.getInstance().logSuspiciousActivity({type:"csrf_token_invalid",description:`Invalid CSRF token for action: ${e}`,severity:"high",source:"csrf_protection",metadata:{action:e}}),i&&this.tokenStore.delete(e),i}validateOrigin(e){if(!e)return!1;const t=e.toLowerCase();if(this.validOrigins.length===0)return t===window.location.origin.toLowerCase();const s=this.validOrigins.includes(t);return s||b.getInstance().logSuspiciousActivity({type:"csrf_invalid_origin",description:`Invalid origin: ${e}`,severity:"high",source:"csrf_protection",metadata:{providedOrigin:e,validOrigins:this.validOrigins}}),s}validateReferer(e){if(!e)return!1;try{const t=new URL(e),s=window.location.origin.toLowerCase();return t.origin.toLowerCase()===s}catch(t){return b.getInstance().logSuspiciousActivity({type:"csrf_invalid_referer",description:`Invalid referer: ${e}`,severity:"medium",source:"csrf_protection",metadata:{referer:e}}),!1}}cleanupExpiredTokens(){const e=Date.now();for(const[t,s]of this.tokenStore.entries())e>s.expires&&this.tokenStore.delete(t)}clearAllTokens(){this.tokenStore.clear()}};p(q,"instance");let Se=q;var H;let Pi=(H=class{constructor(){p(this,"nonces",new Set);p(this,"cspDirectives",new Map)}static getInstance(){return H.instance||(H.instance=new H),H.instance}generateScriptNonce(){const e=generateCSRFToken();return this.nonces.add(e),setTimeout(()=>{this.nonces.delete(e)},3600*1e3),e}validateNonce(e){return this.nonces.has(e)}setDirective(e,t){this.cspDirectives.set(e,[...t])}addToDirective(e,t){const s=this.cspDirectives.get(e)||[];s.includes(t)||(s.push(t),this.cspDirectives.set(e,s))}generateCSPHeader(){const e=[];for(const[t,s]of this.cspDirectives.entries())e.push(`${t} ${s.join(" ")}`);return e.join("; ")}applyCSPToDocument(){const e=document.querySelector('meta[http-equiv="Content-Security-Policy"]');e&&e.remove();const t=document.createElement("meta");t.httpEquiv="Content-Security-Policy",t.content=this.generateCSPHeader(),document.head.appendChild(t),console.log("ğŸ›¡ï¸ CSP updated:",t.content)}executeScriptSafely(e,t){const s=t||this.generateScriptNonce();if(!this.validateNonce(s))return b.getInstance().logSuspiciousActivity({type:"invalid_script_nonce",description:"Invalid nonce for script execution",severity:"high",source:"csp_manager",metadata:{nonce:s}}),!1;try{const i=document.createElement("script");return i.nonce=s,i.textContent=e,document.head.appendChild(i),document.head.removeChild(i),!0}catch(i){return b.getInstance().logSuspiciousActivity({type:"script_execution_failed",description:"Safe script execution failed",severity:"medium",source:"csp_manager",metadata:{error:i instanceof Error?i.message:String(i),nonce:s}}),!1}}},p(H,"instance"),H);const K=class K{constructor(){p(this,"xssProtection",be.getInstance());p(this,"csrfProtection",Se.getInstance());p(this,"cspManager",Pi.getInstance())}static getInstance(){return K.instance||(K.instance=new K),K.instance}validateFormSubmission(e,t){const s=new FormData(e);let i=!0;if(t){const r=e.getAttribute("data-action")||"form_submit";this.csrfProtection.validateTokenForAction(r,t)||(i=!1)}const n=document.referrer||window.location.origin;this.csrfProtection.validateOrigin(n)||(i=!1);for(const[r,d]of s.entries())if(typeof d=="string")try{const u=ee(d);u!==d&&b.getInstance().logSuspiciousActivity({type:"form_input_sanitized",description:`Form input was sanitized: ${r}`,severity:"low",source:"security_interceptor",metadata:{fieldName:r,original:d.slice(0,100),sanitized:u.slice(0,100)}})}catch(u){i=!1,b.getInstance().logSuspiciousActivity({type:"form_input_validation_failed",description:`Form input validation failed: ${r}`,severity:"high",source:"security_interceptor",metadata:{fieldName:r,error:u instanceof Error?u.message:String(u)}})}return i}validateAjaxRequest(e,t,s,i){let n=!0;if(this.xssProtection.sanitizeURL(e)||(n=!1),["POST","PUT","DELETE","PATCH"].includes(t.toUpperCase())&&(s["X-CSRF-Token"]||(b.getInstance().logSuspiciousActivity({type:"missing_csrf_token",description:`CSRF token missing for ${t} request`,severity:"high",source:"security_interceptor",metadata:{url:e,method:t}}),n=!1)),i&&typeof i=="object")try{const u=JSON.stringify(i);u.length>1e5&&(b.getInstance().logSuspiciousActivity({type:"oversized_request_payload",description:`Request payload too large: ${u.length} bytes`,severity:"medium",source:"security_interceptor",metadata:{url:e,method:t,payloadSize:u.length}}),n=!1)}catch(u){n=!1}return n}initialize(){this.xssProtection.setTrustedDomains([window.location.hostname,"cdn.jsdelivr.net","unpkg.com"]),this.csrfProtection.setValidOrigins([window.location.origin]),this.cspManager.setDirective("default-src",["'self'"]),this.cspManager.setDirective("script-src",["'self'","'unsafe-inline'"]),this.cspManager.setDirective("style-src",["'self'","'unsafe-inline'"]),this.cspManager.setDirective("img-src",["'self'","data:","blob:"]),this.cspManager.setDirective("connect-src",["'self'"]),this.cspManager.setDirective("font-src",["'self'","data:"]),this.cspManager.setDirective("object-src",["'none'"]),this.cspManager.setDirective("frame-src",["'none'"]),console.log("ğŸ›¡ï¸ Security Interceptor initialized")}};p(K,"instance");let re=K;typeof window!="undefined"&&document.addEventListener("DOMContentLoaded",()=>{re.getInstance().initialize()});const G=class G{constructor(){p(this,"currentNonce","");p(this,"nonceExpiry",0);p(this,"directives",{});p(this,"violations",[]);p(this,"reportEndpoint","")}static getInstance(){return G.instance||(G.instance=new G),G.instance}initialize(){this.setupDefaultDirectives(),this.setupViolationReporting(),this.updateCSPMetaTag(),this.scheduleNonceRotation(),console.log("ğŸ›¡ï¸ CSP Manager initialized with dynamic nonce support")}setupDefaultDirectives(){this.directives={"default-src":["'self'"],"script-src":["'self'",`'nonce-${this.generateNewNonce()}'`,"'strict-dynamic'"],"style-src":["'self'","'unsafe-inline'","'nonce-${nonce}'"],"img-src":["'self'","data:","blob:","https:"],"font-src":["'self'","data:","https:"],"connect-src":["'self'","https:"],"media-src":["'self'"],"object-src":["'none'"],"frame-src":["'none'"],"worker-src":["'self'","blob:"],"manifest-src":["'self'"],"base-uri":["'self'"],"form-action":["'self'"],"frame-ancestors":["'none'"],"report-uri":["/api/csp-violation-report"]}}generateNewNonce(){return this.currentNonce=Ae(32),this.nonceExpiry=Date.now()+900*1e3,b.getInstance().logSuspiciousActivity({type:"nonce_generated",description:"New CSP nonce generated",severity:"low",source:"csp_manager",metadata:{nonceLength:this.currentNonce.length,expiryTime:new Date(this.nonceExpiry).toISOString()}}),this.currentNonce}getCurrentNonce(){return Date.now()>this.nonceExpiry&&(this.generateNewNonce(),this.updateCSPMetaTag()),this.currentNonce}validateNonce(e){if(Date.now()>this.nonceExpiry)return b.getInstance().logSuspiciousActivity({type:"expired_nonce_used",description:"Attempt to use expired nonce",severity:"medium",source:"csp_manager",metadata:{providedNonce:`${e.slice(0,8)}...`,expired:!0,expiryTime:new Date(this.nonceExpiry).toISOString()}}),!1;const s=e===this.currentNonce;return s||b.getInstance().logSuspiciousActivity({type:"invalid_nonce_used",description:"Invalid nonce provided",severity:"high",source:"csp_manager",metadata:{providedNonce:`${e.slice(0,8)}...`,expectedNonce:`${this.currentNonce.slice(0,8)}...`}}),s}setDirective(e,t){this.directives[e]=[...t],this.updateCSPMetaTag()}addToDirective(e,t){this.directives[e]||(this.directives[e]=[]),this.directives[e].includes(t)||(this.directives[e].push(t),this.updateCSPMetaTag())}removeFromDirective(e,t){this.directives[e]&&(this.directives[e]=this.directives[e].filter(s=>s!==t),this.updateCSPMetaTag())}generateCSPHeader(){const e=[];for(const[t,s]of Object.entries(this.directives))if(s&&s.length>0){let i=s.join(" ");i=i.replace(/\$\{nonce\}/g,this.getCurrentNonce()),e.push(`${t} ${i}`)}return e.join("; ")}updateCSPMetaTag(){if(typeof document=="undefined")return;const e=document.querySelector('meta[http-equiv="Content-Security-Policy"]');e&&e.remove();const t=document.createElement("meta");t.httpEquiv="Content-Security-Policy",t.content=this.generateCSPHeader(),document.head.appendChild(t);const s=document.documentElement.outerHTML;s.includes("PLACEHOLDER_NONCE")&&(document.documentElement.outerHTML=s.replace(/PLACEHOLDER_NONCE/g,this.getCurrentNonce())),b.getInstance().logSuspiciousActivity({type:"csp_updated",description:"CSP policy updated",severity:"low",source:"csp_manager",metadata:{policy:`${t.content.slice(0,200)}...`,nonce:`${this.currentNonce.slice(0,8)}...`}})}setupViolationReporting(){typeof document!="undefined"&&document.addEventListener("securitypolicyviolation",e=>{const t={blockedURI:e.blockedURI,columnNumber:e.columnNumber,documentURI:e.documentURI,effectiveDirective:e.effectiveDirective,lineNumber:e.lineNumber,originalPolicy:e.originalPolicy,referrer:e.referrer,sample:e.sample,sourceFile:e.sourceFile,statusCode:e.statusCode,violatedDirective:e.violatedDirective,timestamp:new Date().toISOString()};this.violations.push(t),this.violations.length>100&&(this.violations=this.violations.slice(-100)),b.getInstance().logSuspiciousActivity({type:"csp_violation",description:`CSP violation: ${e.violatedDirective}`,severity:this.assessViolationSeverity(e),source:"csp_violation_handler",metadata:t}),this.reportEndpoint&&this.sendViolationReport(t)})}assessViolationSeverity(e){return e.violatedDirective.startsWith("script-src")?e.blockedURI.includes("javascript:")||e.blockedURI.includes("data:")?"critical":"high":e.sample&&(e.sample.includes("eval(")||e.sample.includes("Function(")||e.sample.includes("setTimeout(")||e.sample.includes("setInterval("))?"high":e.effectiveDirective.includes("-src")&&!e.blockedURI.startsWith(window.location.origin)?"medium":"low"}sendViolationReport(e){return f(this,null,function*(){try{yield fetch(this.reportEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({"csp-report":e})})}catch(t){console.warn("CSP violation report failed:",t)}})}scheduleNonceRotation(){setInterval(()=>{this.generateNewNonce(),this.updateCSPMetaTag()},600*1e3)}executeScriptWithNonce(e){if(typeof document=="undefined")return!1;try{const t=document.createElement("script");return t.nonce=this.getCurrentNonce(),t.textContent=e,document.head.appendChild(t),document.head.removeChild(t),!0}catch(t){return b.getInstance().logSuspiciousActivity({type:"safe_script_execution_failed",description:"Failed to execute script with nonce",severity:"medium",source:"csp_manager",metadata:{error:t instanceof Error?t.message:String(t),codeLength:e.length}}),!1}}addStyleWithNonce(e){if(typeof document=="undefined")return!1;try{const t=document.createElement("style");return t.nonce=this.getCurrentNonce(),t.textContent=e,document.head.appendChild(t),!0}catch(t){return b.getInstance().logSuspiciousActivity({type:"safe_style_addition_failed",description:"Failed to add style with nonce",severity:"medium",source:"csp_manager",metadata:{error:t instanceof Error?t.message:String(t),cssLength:e.length}}),!1}}getViolationHistory(e=50){return this.violations.slice(-e)}getViolationStats(){const e={total:this.violations.length,byDirective:{},bySource:{}};return this.violations.forEach(t=>{const s=t.effectiveDirective||"unknown",i=t.sourceFile||"inline";e.byDirective[s]=(e.byDirective[s]||0)+1,e.bySource[i]=(e.bySource[i]||0)+1}),e}setReportEndpoint(e){this.reportEndpoint=e,this.addToDirective("report-uri",e)}debugCSP(){console.group("ğŸ›¡ï¸ CSP Debug Information"),console.log("Current Nonce:",this.currentNonce),console.log("Nonce Expiry:",new Date(this.nonceExpiry)),console.log("Current Policy:",this.generateCSPHeader()),console.log("Violation Count:",this.violations.length),console.log("Recent Violations:",this.violations.slice(-5)),console.groupEnd()}};p(G,"instance");let oe=G;const W=class W{static getInstance(){return W.instance||(W.instance=new W),W.instance}initializeSecurityHeaders(){this.setContentTypeOptions(),this.setFrameOptions(),this.setXSSProtection(),this.setReferrerPolicy(),this.setPermissionsPolicy(),this.setStrictTransportSecurity(),this.setCrossOriginPolicies(),console.log("ğŸ›¡ï¸ Security headers initialized")}setContentTypeOptions(){this.updateMetaTag("X-Content-Type-Options","nosniff")}setFrameOptions(){this.updateMetaTag("X-Frame-Options","DENY")}setXSSProtection(){this.updateMetaTag("X-XSS-Protection","1; mode=block")}setReferrerPolicy(){if(!document.querySelector('meta[name="referrer"]')){const t=document.createElement("meta");t.name="referrer",t.content="strict-origin-when-cross-origin",document.head.appendChild(t)}}setPermissionsPolicy(){const e=["geolocation=()","microphone=()","camera=()","fullscreen=(self)","payment=()","usb=()","serial=()","hid=()","midi=()","clipboard-read=()","clipboard-write=(self)","accelerometer=()","gyroscope=()","magnetometer=()","ambient-light-sensor=()","encrypted-media=()","picture-in-picture=()","display-capture=()"].join(", ");this.updateMetaTag("Permissions-Policy",e)}setStrictTransportSecurity(){window.location.protocol==="https:"&&this.updateMetaTag("Strict-Transport-Security","max-age=31536000; includeSubDomains; preload")}setCrossOriginPolicies(){this.updateMetaTag("Cross-Origin-Embedder-Policy","require-corp"),this.updateMetaTag("Cross-Origin-Opener-Policy","same-origin"),this.updateMetaTag("Cross-Origin-Resource-Policy","same-origin")}updateMetaTag(e,t){if(typeof document=="undefined")return;let s=document.querySelector(`meta[http-equiv="${e}"]`);s||(s=document.createElement("meta"),s.httpEquiv=e,document.head.appendChild(s)),s.content=t}validateSecurityHeaders(){const e=["Content-Security-Policy","X-Content-Type-Options","X-Frame-Options","X-XSS-Protection","Strict-Transport-Security","Cross-Origin-Embedder-Policy","Cross-Origin-Opener-Policy"],t=[],s=[],i=[];return e.forEach(r=>{document.querySelector(`meta[http-equiv="${r}"]`)?t.push(r):s.push(r)}),window.location.protocol!=="https:"&&i.push("HTTPSã®ä½¿ç”¨ã‚’å¼·ãæ¨å¥¨ã—ã¾ã™"),document.querySelector('meta[name="referrer"]')||i.push("Referrer Policyã®è¨­å®šã‚’æ¨å¥¨ã—ã¾ã™"),{valid:t,missing:s,recommendations:i}}};p(W,"instance");let ae=W;typeof window!="undefined"&&document.addEventListener("DOMContentLoaded",()=>{const o=oe.getInstance(),e=ae.getInstance();o.initialize(),e.initializeSecurityHeaders()});const Q=class Q{constructor(){p(this,"storage",ze());p(this,"eventQueue",[]);p(this,"isProcessingQueue",!1);p(this,"maxEventsInMemory",1e3);p(this,"maxEventsInStorage",5e3);p(this,"sessionId");p(this,"config",{enableStackTrace:!0,enableGeoLocation:!1,enablePerformanceMetrics:!0,autoFlushInterval:1e4,compressionThreshold:100});this.sessionId=this.generateSessionId(),this.startAutoFlush(),this.setupUnloadHandler()}static getInstance(){return Q.instance||(Q.instance=new Q),Q.instance}generateSessionId(){const e=Date.now().toString(36),t=Math.random().toString(36).substr(2,9);return`session_${e}_${t}`}logSecurityEvent(r,d,u,m){return f(this,arguments,function*(e,t,s,i,n={}){try{const h={id:yield this.generateEventId(),timestamp:new Date,eventType:e,severity:t,source:s,message:i,metadata:C(R(C({},n),{url:window.location.href,referrer:document.referrer,viewport:{width:window.innerWidth,height:window.innerHeight}}),this.config.enablePerformanceMetrics&&this.getPerformanceMetrics()),userAgent:navigator.userAgent,sessionId:this.sessionId,stackTrace:this.config.enableStackTrace?this.captureStackTrace():void 0,hash:""};h.hash=yield this.calculateEventHash(h),this.eventQueue.push(h),this.eventQueue.length>this.maxEventsInMemory&&(this.eventQueue=this.eventQueue.slice(-this.maxEventsInMemory)),(t==="critical"||t==="high")&&(yield this.flushQueue()),b.getInstance().logSuspiciousActivity({type:e,description:i,severity:t,source:s,metadata:n})}catch(h){console.error("ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒ­ã‚°è¨˜éŒ²ã«å¤±æ•—:",h),console.warn(`ğŸš¨ Security Event: ${e} [${t.toUpperCase()}] ${i}`)}})}generateEventId(){return f(this,null,function*(){const e=Date.now().toString(),t=Math.random().toString();return(yield ne(e+t)).slice(0,16)})}calculateEventHash(e){return f(this,null,function*(){const t=JSON.stringify({id:e.id,timestamp:e.timestamp.toISOString(),eventType:e.eventType,severity:e.severity,source:e.source,message:e.message,sessionId:e.sessionId});return yield ne(t)})}captureStackTrace(){try{throw new Error}catch(e){return e instanceof Error&&e.stack?e.stack.split(`
`).slice(3,8).join(`
`):""}}getPerformanceMetrics(){if(!performance)return{};const e=performance.getEntriesByType("navigation")[0],t=performance.memory;return{loadTime:e?e.loadEventEnd-e.loadEventStart:0,domContentLoaded:e?e.domContentLoadedEventEnd-e.domContentLoadedEventStart:0,memoryUsage:t?{used:Math.round(t.usedJSHeapSize/1024/1024),total:Math.round(t.totalJSHeapSize/1024/1024),limit:Math.round(t.jsHeapSizeLimit/1024/1024)}:null,timing:performance.now()}}flushQueue(){return f(this,null,function*(){if(!(this.isProcessingQueue||this.eventQueue.length===0)){this.isProcessingQueue=!0;try{const s=[...(yield this.storage.getItem("security_audit_log",!0))||[],...this.eventQueue].slice(-this.maxEventsInStorage),i=s.length>=this.config.compressionThreshold;yield this.storage.setItem("security_audit_log",s,i),yield this.updateAuditMetadata(s),this.eventQueue=[],console.log(`ğŸ“ ${s.length}ä»¶ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆãŒãƒ­ã‚°ã«è¨˜éŒ²ã•ã‚Œã¾ã—ãŸ`)}catch(e){console.error("ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ­ã‚°ã®ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã«å¤±æ•—:",e),this.eventQueue.length>this.maxEventsInMemory&&(this.eventQueue=this.eventQueue.slice(-Math.floor(this.maxEventsInMemory/2)))}finally{this.isProcessingQueue=!1}}})}updateAuditMetadata(e){return f(this,null,function*(){const t={lastUpdated:new Date().toISOString(),totalEvents:e.length,oldestEvent:e.length>0?e[0].timestamp.toISOString():null,newestEvent:e.length>0?e[e.length-1].timestamp.toISOString():null,sessionId:this.sessionId,eventTypes:[...new Set(e.map(s=>s.eventType))],sources:[...new Set(e.map(s=>s.source))],severityCounts:{critical:e.filter(s=>s.severity==="critical").length,high:e.filter(s=>s.severity==="high").length,medium:e.filter(s=>s.severity==="medium").length,low:e.filter(s=>s.severity==="low").length}};yield this.storage.setItem("security_audit_metadata",t,!0)})}searchEvents(){return f(this,arguments,function*(e={}){try{let s=(yield this.storage.getItem("security_audit_log",!0))||[];if(e.startDate&&(s=s.filter(i=>new Date(i.timestamp)>=e.startDate)),e.endDate&&(s=s.filter(i=>new Date(i.timestamp)<=e.endDate)),e.eventTypes&&e.eventTypes.length>0&&(s=s.filter(i=>e.eventTypes.includes(i.eventType))),e.severities&&e.severities.length>0&&(s=s.filter(i=>e.severities.includes(i.severity))),e.sources&&e.sources.length>0&&(s=s.filter(i=>e.sources.includes(i.source))),e.searchTerm){const i=e.searchTerm.toLowerCase();s=s.filter(n=>n.message.toLowerCase().includes(i)||n.eventType.toLowerCase().includes(i)||n.source.toLowerCase().includes(i))}return s.sort((i,n)=>new Date(n.timestamp).getTime()-new Date(i.timestamp).getTime())}catch(t){return console.error("ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆæ¤œç´¢ã«å¤±æ•—:",t),[]}})}generateAuditReport(e,t){return f(this,null,function*(){const s=new Date,i=e||new Date(s.getTime()-10080*60*1e3),n=t||s,r=yield this.searchEvents({startDate:i,endDate:n}),d={critical:r.filter(g=>g.severity==="critical").length,high:r.filter(g=>g.severity==="high").length,medium:r.filter(g=>g.severity==="medium").length,low:r.filter(g=>g.severity==="low").length},u=new Map,m=new Map;r.forEach(g=>{u.set(g.eventType,(u.get(g.eventType)||0)+1),m.set(g.source,(m.get(g.source)||0)+1)});const h=Array.from(u.entries()).map(([g,a])=>({type:g,count:a})).sort((g,a)=>a.count-g.count).slice(0,10),E=Array.from(m.entries()).map(([g,a])=>({source:g,count:a})).sort((g,a)=>a.count-g.count).slice(0,10),S=this.calculateSeverityTrend(r,i,n),y=this.generateRecommendations(r,d);return{generatedAt:s,period:{start:i,end:n},summary:{totalEvents:r.length,criticalEvents:d.critical,highSeverityEvents:d.high,mediumSeverityEvents:d.medium,lowSeverityEvents:d.low,uniqueEventTypes:u.size,uniqueSources:m.size},topEventTypes:h,topSources:E,severityTrend:S,recommendations:y,events:r.slice(0,100)}})}calculateSeverityTrend(e,t,s){const i=[];for(let r=new Date(t);r<=s;r.setTime(r.getTime()+864e5)){const d=r.toISOString().split("T")[0],u=e.filter(m=>m.timestamp.toISOString().split("T")[0]===d);i.push({date:d,critical:u.filter(m=>m.severity==="critical").length,high:u.filter(m=>m.severity==="high").length,medium:u.filter(m=>m.severity==="medium").length,low:u.filter(m=>m.severity==="low").length})}return i}generateRecommendations(e,t){const s=[];t.critical>0&&s.push("ğŸš¨ ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚å³åº§ã«å¯¾å¿œãŒå¿…è¦ã§ã™ã€‚");const i=new Map;e.forEach(m=>{i.set(m.eventType,(i.get(m.eventType)||0)+1)});const n=Array.from(i.entries()).filter(([,m])=>m>10).sort((m,h)=>h[1]-m[1]);return n.length>0&&s.push(`âš ï¸ é »ç™ºã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆ: ${n[0][0]} (${n[0][1]}å›)ã€‚ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åˆ†æã—ã€æ ¹æœ¬åŸå› ã‚’èª¿æŸ»ã—ã¦ãã ã•ã„ã€‚`),e.filter(m=>m.eventType.includes("rate_limit")).length>20&&s.push("ğŸ›¡ï¸ å¤§é‡ã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™é•åãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚ãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹æ”»æ’ƒã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚"),e.filter(m=>m.eventType.includes("xss")||m.eventType.includes("script_injection")).length>0&&s.push("ğŸš« XSSæ”»æ’ƒã®è©¦è¡ŒãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚å…¥åŠ›æ¤œè¨¼ã¨CSPã®å¼·åŒ–ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚"),e.filter(m=>m.eventType==="devtools_opened").length>50&&s.push("ğŸ”§ é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã®é »ç¹ãªä½¿ç”¨ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚æœ¬ç•ªç’°å¢ƒã§ã®ç›£è¦–ã‚’å¼·åŒ–ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚"),s.length===0&&s.push("âœ… ç¾åœ¨ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£çŠ¶æ…‹ã¯è‰¯å¥½ã§ã™ã€‚ç¶™ç¶šçš„ãªç›£è¦–ã‚’ç¶šã‘ã¦ãã ã•ã„ã€‚"),s}startAutoFlush(){setInterval(()=>{this.eventQueue.length>0&&this.flushQueue()},this.config.autoFlushInterval)}setupUnloadHandler(){window.addEventListener("beforeunload",()=>{if(this.eventQueue.length>0)try{if(navigator.sendBeacon){const e=JSON.stringify(this.eventQueue);navigator.sendBeacon("/api/security-events",e)}else this.flushQueue()}catch(e){console.warn("ãƒšãƒ¼ã‚¸ã‚¢ãƒ³ãƒ­ãƒ¼ãƒ‰æ™‚ã®ãƒ­ã‚°ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã«å¤±æ•—:",e)}})}exportAuditLog(e="json"){return f(this,null,function*(){const t=(yield this.storage.getItem("security_audit_log",!0))||[];if(e==="json")return JSON.stringify(t,null,2);{const i=[["ID","Timestamp","Event Type","Severity","Source","Message","User Agent","Session ID"].join(",")];return t.forEach(n=>{const r=[n.id,n.timestamp.toISOString(),n.eventType,n.severity,n.source,`"${n.message.replace(/"/g,'""')}"`,`"${n.userAgent.replace(/"/g,'""')}"`,n.sessionId||""];i.push(r.join(","))}),i.join(`
`)}})}clearAuditLog(){return f(this,null,function*(){try{yield this.storage.removeItem("security_audit_log"),yield this.storage.removeItem("security_audit_metadata"),this.eventQueue=[],yield this.logSecurityEvent("audit_log_cleared","medium","security_audit_logger","ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»ãƒ­ã‚°ãŒã‚¯ãƒªã‚¢ã•ã‚Œã¾ã—ãŸ",{clearedAt:new Date().toISOString(),sessionId:this.sessionId}),console.log("ğŸ—‘ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»ãƒ­ã‚°ãŒã‚¯ãƒªã‚¢ã•ã‚Œã¾ã—ãŸ")}catch(e){throw console.error("ç›£æŸ»ãƒ­ã‚°ã®ã‚¯ãƒªã‚¢ã«å¤±æ•—:",e),e}})}updateConfig(e){this.config=C(C({},this.config),e),console.log("âš™ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»ãƒ­ã‚°ã®è¨­å®šãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸ:",e)}getConfig(){return C({},this.config)}getStatistics(){return f(this,null,function*(){const e=yield this.storage.getItem("security_audit_metadata",!0);return{queueSize:this.eventQueue.length,totalEventsLogged:(e==null?void 0:e.totalEvents)||0,oldestEvent:(e==null?void 0:e.oldestEvent)||null,newestEvent:(e==null?void 0:e.newestEvent)||null,sessionId:this.sessionId}})}};p(Q,"instance");let Y=Q;if(typeof window!="undefined"){const o=Y.getInstance();window.addEventListener("error",t=>{var s;o.logSecurityEvent("javascript_error","medium","global_error_handler",`JavaScriptã‚¨ãƒ©ãƒ¼: ${t.message}`,{filename:t.filename,lineno:t.lineno,colno:t.colno,error:(s=t.error)==null?void 0:s.toString()})}),window.addEventListener("unhandledrejection",t=>{var s,i;o.logSecurityEvent("unhandled_promise_rejection","medium","global_promise_handler",`æœªå‡¦ç†ã®Promise rejection: ${t.reason}`,{reason:(s=t.reason)==null?void 0:s.toString(),stack:(i=t.reason)==null?void 0:i.stack})});const e=console.error;console.error=function(...t){return o.logSecurityEvent("console_error","low","console_override",`Console Error: ${t.join(" ")}`,{args:t}),e.apply(console,t)}}function Ue(){return f(this,null,function*(){try{console.log("ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚·ã‚¹ãƒ†ãƒ ã‚’åˆæœŸåŒ–ä¸­..."),Ti();const o=oe.getInstance(),e=ae.getInstance();o.initialize(),e.initializeSecurityHeaders(),re.getInstance().initialize(),yield Y.getInstance().logSecurityEvent("security_system_initialized","low","security_init","ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚·ã‚¹ãƒ†ãƒ ãŒæ­£å¸¸ã«åˆæœŸåŒ–ã•ã‚Œã¾ã—ãŸ",{timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href,features:{csp:!0,xssProtection:!0,csrfProtection:!0,auditLogging:!0,secureStorage:!0}}),yield Ve(),Mi(),Fi(),console.log("âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚·ã‚¹ãƒ†ãƒ ã®åˆæœŸåŒ–ãŒå®Œäº†ã—ã¾ã—ãŸ")}catch(o){throw console.error("âŒ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ã«å¤±æ•—:",o),Oi(),new Error(`ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–å¤±æ•—: ${o instanceof Error?o.message:String(o)}`)}})}function Ve(){return f(this,null,function*(){var i;const o=Y.getInstance(),e=[];window.location.protocol!=="https:"&&window.location.hostname!=="localhost"&&e.push("HTTPS ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã›ã‚“"),(i=window.crypto)!=null&&i.subtle||e.push("Web Crypto API ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“");try{const n=ze();yield n.setItem("__security_test__",{test:!0},!0);const r=yield n.getItem("__security_test__",!0);(!r||r.test!==!0)&&e.push("ã‚»ã‚­ãƒ¥ã‚¢ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã›ã‚“"),n.removeItem("__security_test__")}catch(n){e.push("ã‚»ã‚­ãƒ¥ã‚¢ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®ãƒ†ã‚¹ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ")}document.querySelector('meta[http-equiv="Content-Security-Policy"]')||e.push("Content-Security-Policy ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“"),["X-Content-Type-Options","X-Frame-Options","X-XSS-Protection"].forEach(n=>{document.querySelector(`meta[http-equiv="${n}"]`)||e.push(`${n} ãƒ˜ãƒƒãƒ€ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“`)}),e.length>0?yield o.logSecurityEvent("security_configuration_issues","medium","security_validator",`ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã«å•é¡ŒãŒã‚ã‚Šã¾ã™: ${e.join(", ")}`,{issues:e}):yield o.logSecurityEvent("security_configuration_valid","low","security_validator","ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã¯æ­£å¸¸ã§ã™")})}function Mi(){const o=Y.getInstance();let e=!0;document.addEventListener("visibilitychange",()=>f(null,null,function*(){document.hidden&&e?(e=!1,yield o.logSecurityEvent("tab_hidden","low","visibility_monitor","ã‚¿ãƒ–ãŒéã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ãªã‚Šã¾ã—ãŸ")):!document.hidden&&!e&&(e=!0,yield o.logSecurityEvent("tab_visible","low","visibility_monitor","ã‚¿ãƒ–ãŒã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ãªã‚Šã¾ã—ãŸ"))})),document.addEventListener("contextmenu",s=>f(null,null,function*(){s.preventDefault(),yield o.logSecurityEvent("context_menu_blocked","low","context_menu_blocker","å³ã‚¯ãƒªãƒƒã‚¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ",{target:s.target instanceof Element?s.target.tagName:"unknown",coordinates:{x:s.clientX,y:s.clientY}})})),document.addEventListener("keydown",s=>f(null,null,function*(){[{key:"F12"},{key:"I",ctrlKey:!0,shiftKey:!0},{key:"J",ctrlKey:!0,shiftKey:!0},{key:"U",ctrlKey:!0},{key:"S",ctrlKey:!0,shiftKey:!0}].some(r=>s.key===r.key&&(!r.ctrlKey||s.ctrlKey)&&(!r.shiftKey||s.shiftKey))&&(s.preventDefault(),yield o.logSecurityEvent("dangerous_shortcut_blocked","medium","keyboard_monitor",`å±é™ºãªã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ: ${s.key}`,{key:s.key,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,altKey:s.altKey}))}));const t=window.fetch;window.fetch=function(s,i){return f(this,null,function*(){const n=typeof s=="string"?s:s.toString();return n.startsWith("http")&&!n.startsWith(window.location.origin)&&(yield o.logSecurityEvent("external_fetch_request","medium","fetch_monitor",`å¤–éƒ¨ãƒ‰ãƒ¡ã‚¤ãƒ³ã¸ã®Fetchãƒªã‚¯ã‚¨ã‚¹ãƒˆ: ${n}`,{url:n,method:(i==null?void 0:i.method)||"GET",headers:i==null?void 0:i.headers})),(n.includes("eval")||n.includes("javascript:")||n.includes("data:"))&&(yield o.logSecurityEvent("suspicious_fetch_url","high","fetch_monitor",`ä¸å¯©ãªFetch URL: ${n}`,{url:n})),t.call(this,s,i)})},window.addEventListener("storage",s=>f(null,null,function*(){var i,n;yield o.logSecurityEvent("storage_changed","low","storage_monitor","LocalStorage/SessionStorageãŒå¤‰æ›´ã•ã‚Œã¾ã—ãŸ",{key:s.key,oldValue:(i=s.oldValue)==null?void 0:i.substring(0,100),newValue:(n=s.newValue)==null?void 0:n.substring(0,100),storageArea:s.storageArea===localStorage?"localStorage":"sessionStorage"})})),window.addEventListener("beforeunload",()=>f(null,null,function*(){yield o.logSecurityEvent("page_unload","low","unload_monitor","ãƒšãƒ¼ã‚¸ãŒé–‰ã˜ã‚‰ã‚Œã‚ˆã†ã¨ã—ã¦ã„ã¾ã™")}))}function Fi(){const o=Y.getInstance();setInterval(()=>f(null,null,function*(){try{if("memory"in performance){const s=performance.memory,i=Math.round(s.usedJSHeapSize/1024/1024),n=Math.round(s.jsHeapSizeLimit/1024/1024),r=i/n*100;r>90&&(yield o.logSecurityEvent("high_memory_usage","medium","periodic_check",`ãƒ¡ãƒ¢ãƒªä½¿ç”¨ç‡ãŒé«˜ã„ã§ã™: ${r.toFixed(1)}%`,{usedMB:i,limitMB:n,usage:r}))}const e=document.querySelectorAll("script[src]"),t=Array.from(e).filter(s=>{const i=s.getAttribute("src");return i&&!i.startsWith(window.location.origin)&&!i.startsWith("/")});t.length>5&&(yield o.logSecurityEvent("excessive_external_scripts","medium","periodic_check",`éåº¦ã®å¤–éƒ¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ: ${t.length}å€‹`,{count:t.length,sources:t.map(s=>s.getAttribute("src")).slice(0,10)}))}catch(e){console.warn("å®šæœŸã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ä¸­ã«ã‚¨ãƒ©ãƒ¼:",e)}}),3e4),setInterval(()=>f(null,null,function*(){try{let e=0;for(const s in localStorage)localStorage.hasOwnProperty(s)&&(e+=localStorage[s].length+s.length);const t=e/(1024*1024);t>5&&(yield o.logSecurityEvent("large_localstorage_usage","low","periodic_check",`LocalStorageã®ä½¿ç”¨é‡ãŒå¤§ãã„ã§ã™: ${t.toFixed(2)}MB`)),yield Ve()}catch(e){console.warn("è©³ç´°ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ä¸­ã«ã‚¨ãƒ©ãƒ¼:",e)}}),300*1e3),setInterval(()=>f(null,null,function*(){try{const e=yield o.generateAuditReport(new Date(Date.now()-36e5),new Date);e.summary.totalEvents>0&&console.log("ğŸ“Š ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ™‚é–“ãƒ¬ãƒãƒ¼ãƒˆ:",{æœŸé–“:"éå»1æ™‚é–“",ç·ã‚¤ãƒ™ãƒ³ãƒˆæ•°:e.summary.totalEvents,ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«:e.summary.criticalEvents,é«˜:e.summary.highSeverityEvents,ä¸­:e.summary.mediumSeverityEvents,ä½:e.summary.lowSeverityEvents,æ¨å¥¨äº‹é …:e.recommendations})}catch(e){console.warn("ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆä¸­ã«ã‚¨ãƒ©ãƒ¼:",e)}}),3600*1e3)}function Oi(){console.warn("âš ï¸ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’è¨­å®šä¸­...");const o=Element.prototype.innerHTML;Object.defineProperty(Element.prototype,"innerHTML",{set(t){if(typeof t=="string"){const s=t.replace(/<script[^>]*>.*?<\/script>/gi,"").replace(/javascript:/gi,"").replace(/on\w+\s*=/gi,"");o.call(this,s)}else o.call(this,t)},get(){return o.call(this)}}),document.querySelectorAll("form").forEach(t=>{if(!t.querySelector('input[name="csrf_token"]')){const s=document.createElement("input");s.type="hidden",s.name="csrf_token",s.value=Math.random().toString(36).substr(2,15),t.appendChild(s)}}),console.log("âœ… ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãŒè¨­å®šã•ã‚Œã¾ã—ãŸ")}typeof window!="undefined"&&document.addEventListener("DOMContentLoaded",()=>{Ue().catch(o=>{console.error("ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚·ã‚¹ãƒ†ãƒ è‡ªå‹•åˆæœŸåŒ–å¤±æ•—:",o)})});class Hi{constructor(){p(this,"logs",[]);p(this,"warnings",[]);p(this,"maxLogs",1e3);p(this,"logRotationSize",100);p(this,"storageKey","game_error_logs");p(this,"warningStorageKey","game_warning_logs");p(this,"analyticsBuffer",[]);p(this,"realtimeListeners",[]);p(this,"sessionId");p(this,"userId");p(this,"buildVersion");p(this,"isAnalyzing",!1);this.sessionId=this.generateSessionId(),this.buildVersion="unknown",this.loadFromStorage(),this.startRealtimeAnalysis()}log(e,t,s="auto"){const i={id:this.generateId(),timestamp:Date.now(),errorInfo:e,context:t,sessionId:this.sessionId,userId:this.userId,buildVersion:this.buildVersion,source:s,correlationId:this.generateCorrelationId(e),resolved:!1,impact:this.calculateBusinessImpact(e)};this.logs.push(i),this.analyticsBuffer.push(i),this.notifyRealtimeListeners(i),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs+this.logRotationSize)),this.saveToStorage(),this.checkAlertConditions(i)}logWarning(e){const t=C({id:this.generateId()},e);this.warnings.push(t),this.warnings.length>this.maxLogs/2&&(this.warnings=this.warnings.slice(-this.maxLogs/2+this.logRotationSize)),this.saveToStorage()}getLogs(e){let t=[...this.logs];return e&&(e.severity&&(t=t.filter(s=>s.errorInfo.severity===e.severity)),e.category&&(t=t.filter(s=>s.errorInfo.category===e.category)),e.startTime&&(t=t.filter(s=>s.timestamp>=e.startTime)),e.endTime&&(t=t.filter(s=>s.timestamp<=e.endTime)),e.limit&&(t=t.slice(-e.limit))),t}getWarnings(e){return e?this.warnings.slice(-e):[...this.warnings]}getStatistics(e){const t=e?this.getLogs({startTime:e.start,endTime:e.end}):this.logs,s={total:t.length,bySeverity:{low:0,medium:0,high:0,critical:0},byCategory:{vue:0,javascript:0,network:0,async:0,user:0,system:0},errorRate:0,mostCommonErrors:[]},i=new Map;if(t.forEach(n=>{s.bySeverity[n.errorInfo.severity]++,s.byCategory[n.errorInfo.category]++;const r=n.errorInfo.message;i.set(r,(i.get(r)||0)+1)}),t.length>0){const n=t[t.length-1].timestamp-t[0].timestamp;s.errorRate=n>0?t.length/n*6e4:0}return s.mostCommonErrors=Array.from(i.entries()).sort((n,r)=>r[1]-n[1]).slice(0,5).map(([n,r])=>({message:n,count:r})),s}searchErrors(e){const t=typeof e=="string"?new RegExp(e,"i"):e;return this.logs.filter(s=>t.test(s.errorInfo.message)||s.errorInfo.stack&&t.test(s.errorInfo.stack))}export(e="json"){if(e==="json")return JSON.stringify({logs:this.logs,warnings:this.warnings,exported:new Date().toISOString()},null,2);const t=["ID","Timestamp","Severity","Category","Message","Component","URL","Stack"],s=this.logs.map(i=>[i.id,new Date(i.timestamp).toISOString(),i.errorInfo.severity,i.errorInfo.category,`"${i.errorInfo.message.replace(/"/g,'""')}"`,i.errorInfo.component||"",i.errorInfo.url||"",i.errorInfo.stack?`"${i.errorInfo.stack.replace(/"/g,'""')}"`:""]);return[t.join(","),...s.map(i=>i.join(","))].join(`
`)}clear(){this.logs=[],this.warnings=[],this.saveToStorage()}pruneOldLogs(e){const t=Date.now()-e;this.logs=this.logs.filter(s=>s.timestamp>t),this.warnings=this.warnings.filter(s=>s.timestamp>t),this.saveToStorage()}loadFromStorage(){try{const e=localStorage.getItem(this.storageKey),t=localStorage.getItem(this.warningStorageKey);e&&(this.logs=JSON.parse(e)),t&&(this.warnings=JSON.parse(t))}catch(e){console.error("Failed to load error logs from storage:",e)}}saveToStorage(){try{const e=this.logs.slice(-100),t=this.warnings.slice(-50);localStorage.setItem(this.storageKey,JSON.stringify(e)),localStorage.setItem(this.warningStorageKey,JSON.stringify(t))}catch(e){if(e instanceof DOMException&&e.name==="QuotaExceededError"){this.logs=this.logs.slice(-50),this.warnings=this.warnings.slice(-25);try{this.saveToStorage()}catch(t){console.error("Failed to save error logs to storage")}}}}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateCorrelationId(e){const t=`${e.category}_${e.component||"unknown"}_${e.message.split(" ")[0]}`;let s=0;for(let i=0;i<t.length;i++){const n=t.charCodeAt(i);s=(s<<5)-s+n,s=s&s}return`corr_${Math.abs(s).toString(16)}`}calculateBusinessImpact(e){if(e.category==="game"&&e.severity==="critical")return"critical";if(e.category==="security")return"high";if(e.category==="network")return"medium";switch(e.severity){case"critical":return"critical";case"high":return"high";case"medium":return"medium";case"low":return"low"}}notifyRealtimeListeners(e){this.realtimeListeners.forEach(t=>{try{t(e)}catch(s){console.warn("[ErrorLogger] Realtime listener failed:",s)}})}logToConsole(e){const t={low:"ğŸŸ¢",medium:"ğŸŸ¡",high:"ğŸŸ ",critical:"ğŸ”´"}[e.impact||"low"];console.group(`ğŸš¨ Error Log [${e.id}] ${t}`),console.error("Error Info:",e.errorInfo),console.log("Impact:",e.impact),console.log("Source:",e.source),e.correlationId&&console.log("Correlation ID:",e.correlationId),e.context&&console.log("Context:",e.context),console.groupEnd()}checkAlertConditions(e){const t=Date.now()-3e5,s=this.logs.filter(i=>i.timestamp>t&&i.errorInfo.severity==="critical").length;if(s>=3&&this.triggerAlert("critical-error-spike",{count:s,timespan:"5 minutes",latestError:e}),e.correlationId){const i=this.logs.filter(n=>n.correlationId===e.correlationId&&n.timestamp>Date.now()-12e4).length;i>=5&&this.triggerAlert("repeated-error",{correlationId:e.correlationId,count:i,errorType:e.errorInfo.message})}}triggerAlert(e,t){const s=new CustomEvent("app:error-alert",{detail:{type:e,data:t,timestamp:Date.now()}});window.dispatchEvent(s)}startRealtimeAnalysis(){setInterval(()=>{!this.isAnalyzing&&this.analyticsBuffer.length>0&&this.performRealtimeAnalysis()},3e4)}performRealtimeAnalysis(){return f(this,null,function*(){if(this.analyticsBuffer.length!==0){this.isAnalyzing=!0;try{const e=[...this.analyticsBuffer];this.analyticsBuffer=[];const t=this.analyzeErrorPatterns(e),s=this.analyzeTrends(e),i=this.detectAnomalies(e),n=new CustomEvent("app:error-analysis",{detail:{patterns:t,trends:s,anomalies:i,timestamp:Date.now(),sampleSize:e.length}});window.dispatchEvent(n)}catch(e){console.error("[ErrorLogger] Realtime analysis failed:",e)}finally{this.isAnalyzing=!1}}})}analyzeErrorPatterns(e){const t={byCategory:new Map,byComponent:new Map,byCorrelation:new Map,topErrors:[]},s=new Map;return e.forEach(i=>{const n=i.errorInfo.category;t.byCategory.set(n,(t.byCategory.get(n)||0)+1);const r=i.errorInfo.component||"unknown";t.byComponent.set(r,(t.byComponent.get(r)||0)+1),i.correlationId&&t.byCorrelation.set(i.correlationId,(t.byCorrelation.get(i.correlationId)||0)+1);const d=i.errorInfo.message,u=s.get(d)||{count:0,severity:i.errorInfo.severity};s.set(d,{count:u.count+1,severity:i.errorInfo.severity})}),t.topErrors=Array.from(s.entries()).sort((i,n)=>n[1].count-i[1].count).slice(0,5).map(([i,n])=>({message:i,count:n.count,severity:n.severity})),t}analyzeTrends(e){if(e.length<2)return null;const t=new Map,s=300*1e3;e.forEach(d=>{const u=Math.floor(d.timestamp/s)*s,m=new Date(u).toISOString();t.set(m,(t.get(m)||0)+1)});const i=Array.from(t.entries()).sort((d,u)=>new Date(d[0]).getTime()-new Date(u[0]).getTime());if(i.length<2)return null;const n=i.map(([,d])=>d),r=this.calculateTrend(n);return{timeSlots:i,trend:r>0?"increasing":r<0?"decreasing":"stable",trendValue:r}}calculateTrend(e){const t=e.length,s=t*(t-1)/2,i=e.reduce((d,u)=>d+u,0),n=e.reduce((d,u,m)=>d+m*u,0),r=e.reduce((d,u,m)=>d+m*m,0);return(t*n-s*i)/(t*r-s*s)}detectAnomalies(e){const t=[];e.length>10&&t.push({type:"high_frequency",description:"Unusually high error frequency detected",count:e.length,severity:"high"});const s=new Set(e.map(r=>r.errorInfo.message)),i=new Set(this.logs.slice(0,-e.length).map(r=>r.errorInfo.message)),n=Array.from(s).filter(r=>!i.has(r));return n.length>0&&t.push({type:"new_error_types",description:"New error types detected",newErrors:n,severity:"medium"}),t}addRealtimeListener(e){return this.realtimeListeners.push(e),()=>{const t=this.realtimeListeners.indexOf(e);t!==-1&&this.realtimeListeners.splice(t,1)}}markAsResolved(e,t){const s=this.logs.find(i=>i.id===e);return s?(s.resolved=!0,s.resolvedBy=t,this.saveToStorage(),!0):!1}getRelatedErrors(e){return this.logs.filter(t=>t.correlationId===e)}setUserId(e){this.userId=e}getAdvancedStatistics(e){const t=e?this.getLogs({startTime:e.start,endTime:e.end}):this.logs,s=this.getStatistics(e),i=t.filter(u=>u.resolved),n=i.length>0?i.reduce((u,m)=>u+60*1e3,0)/i.length:0,r={low:t.filter(u=>u.impact==="low").length,medium:t.filter(u=>u.impact==="medium").length,high:t.filter(u=>u.impact==="high").length,critical:t.filter(u=>u.impact==="critical").length},d={user:t.filter(u=>u.source==="user").length,system:t.filter(u=>u.source==="system").length,auto:t.filter(u=>u.source==="auto").length};return R(C({},s),{mttr:n,impactStats:r,sourceStats:d,resolutionRate:t.length>0?i.length/t.length:0,correlationGroups:this.getCorrelationGroups(t)})}getCorrelationGroups(e){const t=new Map;return e.forEach(s=>{if(s.correlationId){const i=t.get(s.correlationId)||{count:0,resolved:0};i.count++,s.resolved&&i.resolved++,t.set(s.correlationId,i)}}),Array.from(t.entries()).map(([s,i])=>C({id:s},i)).sort((s,i)=>i.count-s.count)}generateId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}}class Ni{constructor(e={}){p(this,"options");p(this,"queue",[]);p(this,"isReporting",!1);p(this,"sessionId");p(this,"sessionStartTime");p(this,"pageViews",0);p(this,"reportInterval",null);p(this,"maxQueueSize",50);p(this,"batchSize",10);this.options=C({endpoint:"",apiKey:"",environment:"production",userId:"",sessionId:this.generateSessionId(),metadata:{}},e),this.sessionId=this.options.sessionId,this.sessionStartTime=Date.now(),this.trackPageView(),this.options.endpoint&&this.startBatchReporting()}report(e,t){if(this.options.environment==="development"){console.log("[ErrorReporter] Skipping report in development environment");return}const s={errorInfo:e,environment:this.options.environment,browser:this.getBrowserInfo(),screen:this.getScreenInfo(),memory:this.getMemoryInfo(),sessionInfo:{id:this.sessionId,startTime:this.sessionStartTime,duration:Date.now()-this.sessionStartTime,pageViews:this.pageViews},userId:this.options.userId,metadata:C(C({},this.options.metadata),t)};this.queue.push(s),this.queue.length>this.maxQueueSize&&(this.queue=this.queue.slice(-this.maxQueueSize)),e.severity==="critical"&&this.flushQueue()}flushQueue(){return f(this,null,function*(){if(!(this.isReporting||this.queue.length===0||!this.options.endpoint)){this.isReporting=!0;try{for(;this.queue.length>0;){const e=this.queue.splice(0,this.batchSize);yield this.sendBatch(e)}}catch(e){console.error("[ErrorReporter] Failed to send error reports:",e)}finally{this.isReporting=!1}}})}sendBatch(e){return f(this,null,function*(){const t={reports:e,timestamp:Date.now(),apiKey:this.options.apiKey},s=yield fetch(this.options.endpoint,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":this.options.apiKey},body:JSON.stringify(t)});if(!s.ok)throw new Error(`Failed to send error reports: ${s.statusText}`)})}getBrowserInfo(){const e=navigator.userAgent,t={name:"Unknown",version:"Unknown",platform:navigator.platform||"Unknown"};if(e.includes("Chrome")){t.name="Chrome";const s=e.match(/Chrome\/(\d+)/);s&&(t.version=s[1])}else if(e.includes("Firefox")){t.name="Firefox";const s=e.match(/Firefox\/(\d+)/);s&&(t.version=s[1])}else if(e.includes("Safari")){t.name="Safari";const s=e.match(/Version\/(\d+)/);s&&(t.version=s[1])}else if(e.includes("Edge")){t.name="Edge";const s=e.match(/Edge\/(\d+)/);s&&(t.version=s[1])}return t}getScreenInfo(){return{width:window.screen.width,height:window.screen.height,pixelRatio:window.devicePixelRatio||1}}getMemoryInfo(){if("memory"in performance){const e=performance.memory;return{used:e.usedJSHeapSize,total:e.totalJSHeapSize,limit:e.jsHeapSizeLimit}}}trackPageView(){this.pageViews++;const e=history.pushState;history.pushState=(...t)=>(this.pageViews++,e.apply(history,t))}startBatchReporting(){this.reportInterval=window.setInterval(()=>{this.flushQueue()},3e4),window.addEventListener("beforeunload",()=>{this.flushQueue()}),document.addEventListener("visibilitychange",()=>{document.hidden&&this.flushQueue()})}generateSessionId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}setUserId(e){this.options.userId=e}updateMetadata(e){this.options.metadata=C(C({},this.options.metadata),e)}getStats(){return{queueSize:this.queue.length,sessionDuration:Date.now()-this.sessionStartTime,pageViews:this.pageViews,isReporting:this.isReporting}}destroy(){this.reportInterval&&(clearInterval(this.reportInterval),this.reportInterval=null),this.flushQueue()}}class zi{constructor(){p(this,"strategies",[]);p(this,"recoveryAttempts",new Map);p(this,"recoveryHistory",[]);p(this,"maxHistorySize",100);p(this,"gameStateBackup",null);p(this,"performanceBaseline",null);this.registerDefaultStrategies(),this.initializePerformanceBaseline()}initializePerformanceBaseline(){var e;try{const t=((e=performance.memory)==null?void 0:e.usedJSHeapSize)||0,s=performance.now();this.performanceBaseline={memory:t,timing:s}}catch(t){console.warn("[Recovery] Failed to initialize performance baseline:",t)}}registerDefaultStrategies(){this.registerStrategy({name:"network-retry",description:"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã®å†è©¦è¡Œã¨å¾©æ—§",condition:e=>e.category==="network"||e.message.includes("Failed to fetch")||e.message.includes("Network"),recover:e=>f(this,null,function*(){console.log("[Recovery] Attempting network recovery...");const t=yield this.diagnoseNetworkStatus();return t.isOffline&&(yield this.waitForOnline(3e4)),yield this.clearDNSCache(),this.getRecoveryAttempts("network-retry")>=2?yield this.enableOfflineMode():t.isOnline}),maxRetries:3,retryDelay:2e3,priority:8,healthCheck:()=>this.checkNetworkHealth()}),this.registerStrategy({name:"memory-cleanup",description:"ãƒ¡ãƒ¢ãƒªã®æœ€é©åŒ–ã¨ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—",condition:e=>e.message.includes("out of memory")||e.message.includes("Maximum call stack")||e.category==="performance",recover:e=>f(this,null,function*(){console.log("[Recovery] Attempting memory cleanup...");const t=this.getCurrentMemoryUsage();yield this.performMemoryCleanup();const s=this.getCurrentMemoryUsage(),i=t-s;return console.log(`[Recovery] Memory cleanup completed. Reduced: ${(i/1024/1024).toFixed(1)}MB`),i>10*1024*1024}),maxRetries:2,retryDelay:1e3,priority:7,healthCheck:()=>this.checkMemoryHealth()}),this.registerStrategy({name:"vue-component-remount",description:"Vueã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å†ãƒã‚¦ãƒ³ãƒˆã¨çŠ¶æ…‹å¾©æ—§",condition:e=>e.category==="vue",recover:e=>f(this,null,function*(){console.log("[Recovery] Attempting Vue component recovery...");const t=e.component||"unknown";yield this.backupComponentState(t);const s=new CustomEvent("app:remount-component",{detail:{component:t,preserveState:!0,errorId:e.fingerprint}});return window.dispatchEvent(s),yield new Promise(i=>setTimeout(i,1e3)),yield this.restoreComponentState(t),!0}),maxRetries:2,retryDelay:1e3,priority:6,rollback:()=>f(this,null,function*(){console.log("[Recovery] Vue recovery failed, reloading page"),location.reload()})}),this.registerStrategy({name:"storage-cleanup",condition:e=>e.message.includes("QuotaExceededError")||e.message.includes("storage"),recover:()=>f(this,null,function*(){return console.log("[Recovery] Attempting storage cleanup..."),this.cleanupLocalStorage(),!0}),maxRetries:1}),this.registerStrategy({name:"game-state-recovery",description:"ã‚²ãƒ¼ãƒ çŠ¶æ…‹ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰ã®å¾©æ—§",condition:e=>e.category==="game"||e.message.includes("game")||e.message.includes("state"),recover:e=>f(this,null,function*(){if(console.log("[Recovery] Attempting game state recovery..."),yield this.restoreGameState()){const s=new CustomEvent("app:reinitialize-game",{detail:{reason:"error-recovery",errorId:e.fingerprint}});return window.dispatchEvent(s),!0}return!1}),maxRetries:1,priority:9,prerequisites:["memory-cleanup"],rollback:()=>f(this,null,function*(){const e=new CustomEvent("app:start-new-game",{detail:{reason:"recovery-failed"}});window.dispatchEvent(e)})}),this.registerStrategy({name:"async-retry",description:"éåŒæœŸå‡¦ç†ã®å†è©¦è¡Œ",condition:e=>e.category==="async"&&!e.message.includes("Network"),recover:e=>f(this,null,function*(){console.log("[Recovery] Attempting async operation retry...");const t=this.getRecoveryAttempts("async-retry"),s=Math.min(1e3*Math.pow(2,t),1e4);yield new Promise(n=>setTimeout(n,s));const i=new CustomEvent("app:retry-async-operation",{detail:{originalError:e,attempt:t+1}});return window.dispatchEvent(i),!0}),maxRetries:3,retryDelay:1e3,priority:4}),this.registerStrategy({name:"security-fallback",description:"ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ¶é™ã‚’å›é¿ã™ã‚‹ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯",condition:e=>e.category==="security"||e.message.includes("CORS")||e.message.includes("blocked"),recover:e=>f(this,null,function*(){console.log("[Recovery] Attempting security fallback...");const t=new CustomEvent("app:enable-security-fallback",{detail:{reason:e.message}});return window.dispatchEvent(t),!0}),maxRetries:1,priority:5})}registerStrategy(e){const t=e.priority||0,s=this.strategies.findIndex(i=>(i.priority||0)<t);s===-1?this.strategies.push(e):this.strategies.splice(s,0,e)}tryRecover(e){return f(this,null,function*(){console.log("[Recovery] Attempting recovery for error:",e.message);for(const s of this.strategies)if(s.condition(e)){const i=this.getRecoveryAttempts(s.name),n=s.maxRetries||1;if(i>=n){console.log(`[Recovery] Max retries reached for strategy: ${s.name}`);continue}try{i>0&&s.retryDelay&&(yield new Promise(u=>setTimeout(u,s.retryDelay))),this.incrementRecoveryAttempts(s.name);const r=yield s.recover(),d={success:r,strategyUsed:s.name,attemptsCount:i+1};return this.addToHistory(e,d),r&&(console.log(`[Recovery] Successfully recovered using strategy: ${s.name}`),this.resetRecoveryAttempts(s.name)),d}catch(r){console.error(`[Recovery] Strategy ${s.name} failed:`,r);const d={success:!1,strategyUsed:s.name,attemptsCount:i+1,error:r};return this.addToHistory(e,d),d}}const t={success:!1,attemptsCount:0};return this.addToHistory(e,t),t})}waitForOnline(e=3e4){return f(this,null,function*(){if(!navigator.onLine)return new Promise(t=>{const s=()=>{window.removeEventListener("online",s),t()};window.addEventListener("online",s),setTimeout(()=>{window.removeEventListener("online",s),t()},e)})})}cleanupEventListeners(){const e=new CustomEvent("app:cleanup-listeners");window.dispatchEvent(e)}clearCaches(){try{sessionStorage.clear()}catch(t){console.error("[Recovery] Failed to clear session storage:",t)}const e=new CustomEvent("app:clear-caches");window.dispatchEvent(e)}cleanupLocalStorage(){try{const e=[],t=Date.now();for(let s=0;s<localStorage.length;s++){const i=localStorage.key(s);if(i)try{const n=localStorage.getItem(i);if(!n)continue;const r=JSON.parse(n);r.expiry&&r.expiry<t&&e.push(i)}catch(n){}}if(e.forEach(s=>localStorage.removeItem(s)),e.length===0){const s=[];for(let i=0;i<localStorage.length;i++){const n=localStorage.key(i);n&&n.startsWith("game_")&&s.push(n)}s.length>0&&localStorage.removeItem(s[0])}}catch(e){console.error("[Recovery] Failed to cleanup local storage:",e)}}getRecoveryAttempts(e){return this.recoveryAttempts.get(e)||0}incrementRecoveryAttempts(e){const t=this.getRecoveryAttempts(e);this.recoveryAttempts.set(e,t+1)}resetRecoveryAttempts(e){this.recoveryAttempts.delete(e)}addToHistory(e,t){this.recoveryHistory.push({timestamp:Date.now(),errorInfo:e,result:t}),this.recoveryHistory.length>this.maxHistorySize&&(this.recoveryHistory=this.recoveryHistory.slice(-this.maxHistorySize))}getStatistics(){const e=this.recoveryHistory.filter(i=>i.result.success).length,t=this.recoveryHistory.filter(i=>!i.result.success).length,s=new Map;return this.recoveryHistory.forEach(i=>{if(i.result.strategyUsed){const n=s.get(i.result.strategyUsed)||{success:0,failed:0};i.result.success?n.success++:n.failed++,s.set(i.result.strategyUsed,n)}}),{total:this.recoveryHistory.length,successful:e,failed:t,successRate:this.recoveryHistory.length>0?e/this.recoveryHistory.length:0,byStrategy:Object.fromEntries(s),currentAttempts:Object.fromEntries(this.recoveryAttempts)}}diagnoseNetworkStatus(){return f(this,null,function*(){if(!navigator.onLine)return{isOnline:!1,isOffline:!0};try{const t=performance.now(),s=yield fetch("/favicon.ico",{method:"HEAD",cache:"no-cache"}),i=performance.now()-t,n=navigator.connection,r=(n==null?void 0:n.effectiveType)||"unknown";return{isOnline:s.ok,isOffline:!s.ok,latency:i,bandwidth:r}}catch(t){return{isOnline:!1,isOffline:!0}}})}clearDNSCache(){return f(this,null,function*(){try{"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CLEAR_DNS_CACHE"})}catch(e){console.warn("[Recovery] Could not clear DNS cache:",e)}})}enableOfflineMode(){return f(this,null,function*(){try{const e=new CustomEvent("app:enable-offline-mode",{detail:{reason:"network-recovery-failed"}});return window.dispatchEvent(e),!0}catch(e){return console.error("[Recovery] Failed to enable offline mode:",e),!1}})}checkNetworkHealth(){return f(this,null,function*(){try{return(yield fetch("/api/health",{method:"GET",cache:"no-cache",signal:AbortSignal.timeout(5e3)})).ok}catch(e){return navigator.onLine}})}getCurrentMemoryUsage(){var e;try{return((e=performance.memory)==null?void 0:e.usedJSHeapSize)||0}catch(t){return 0}}performMemoryCleanup(){return f(this,null,function*(){this.clearCaches(),yield new Promise(e=>setTimeout(e,100)),this.cleanupEventListeners(),yield new Promise(e=>setTimeout(e,100)),yield this.cleanupDOMElements(),"gc"in window&&window.gc(),yield this.detectAndFixMemoryLeaks()})}cleanupDOMElements(){return f(this,null,function*(){document.querySelectorAll('[style*="display: none"]').forEach(s=>{s.parentNode&&!s.hasAttribute("data-keep")&&s.parentNode.removeChild(s)});const t=document.querySelectorAll("[data-log-entry]");t.length>100&&Array.from(t).slice(0,t.length-50).forEach(i=>i.remove())})}detectAndFixMemoryLeaks(){return f(this,null,function*(){const e=new CustomEvent("app:detect-memory-leaks");window.dispatchEvent(e),this.cleanupOrphanedTimers()})}cleanupOrphanedTimers(){const e=new CustomEvent("app:cleanup-timers");window.dispatchEvent(e)}checkMemoryHealth(){return f(this,null,function*(){const e=this.getCurrentMemoryUsage();if(!this.performanceBaseline||e===0)return!0;const t=e-this.performanceBaseline.memory,s=100*1024*1024;return t<s})}backupComponentState(e){return f(this,null,function*(){const t=new CustomEvent("app:backup-component-state",{detail:{component:e}});window.dispatchEvent(t)})}restoreComponentState(e){return f(this,null,function*(){const t=new CustomEvent("app:restore-component-state",{detail:{component:e}});window.dispatchEvent(t)})}restoreGameState(){return f(this,null,function*(){try{const e=localStorage.getItem("game_state_backup");if(e){const s=JSON.parse(e),i=new CustomEvent("app:restore-game-state",{detail:{state:s,source:"backup"}});return window.dispatchEvent(i),!0}const t=localStorage.getItem("game_autosave");if(t){const s=JSON.parse(t),i=new CustomEvent("app:restore-game-state",{detail:{state:s,source:"autosave"}});return window.dispatchEvent(i),!0}return!1}catch(e){return console.error("[Recovery] Failed to restore game state:",e),!1}})}checkPrerequisites(e){return f(this,null,function*(){if(!e.prerequisites||e.prerequisites.length===0)return!0;for(const t of e.prerequisites){const s=this.strategies.find(i=>i.name===t);if(s)try{if(!(yield s.recover({})))return console.log(`[Recovery] Prerequisite ${t} failed`),!1}catch(i){return console.error(`[Recovery] Prerequisite ${t} threw error:`,i),!1}}return!0})}tryAdvancedRecover(e){return f(this,null,function*(){console.log("[Recovery] Starting advanced recovery for error:",e.message);const t=[...this.strategies].sort((i,n)=>(n.priority||0)-(i.priority||0));for(const i of t)if(i.condition(e)){const n=this.getRecoveryAttempts(i.name),r=i.maxRetries||1;if(n>=r){console.log(`[Recovery] Max retries reached for strategy: ${i.name}`);continue}if(!(yield this.checkPrerequisites(i))){console.log(`[Recovery] Prerequisites not met for strategy: ${i.name}`);continue}try{n>0&&i.retryDelay&&(yield new Promise(E=>setTimeout(E,i.retryDelay))),this.incrementRecoveryAttempts(i.name);const u=yield i.recover(e);let m=!0;u&&i.healthCheck&&(m=yield i.healthCheck(),m||console.log(`[Recovery] Health check failed for strategy: ${i.name}`));const h={success:u&&m,strategyUsed:i.name,attemptsCount:n+1};return this.addToHistory(e,h),h.success?(console.log(`[Recovery] Successfully recovered using strategy: ${i.name}`),this.resetRecoveryAttempts(i.name),h):(i.rollback&&(console.log(`[Recovery] Rolling back strategy: ${i.name}`),yield i.rollback()),h)}catch(u){if(console.error(`[Recovery] Strategy ${i.name} failed:`,u),i.rollback)try{yield i.rollback()}catch(h){console.error(`[Recovery] Rollback failed for ${i.name}:`,h)}const m={success:!1,strategyUsed:i.name,attemptsCount:n+1,error:u};return this.addToHistory(e,m),m}}const s={success:!1,attemptsCount:0};return this.addToHistory(e,s),s})}clear(){this.recoveryAttempts.clear(),this.recoveryHistory=[],this.gameStateBackup=null,this.performanceBaseline=null}}const J=class J{constructor(e={}){p(this,"errorLogger");p(this,"errorReporter");p(this,"errorRecovery");p(this,"options");p(this,"errorCount",0);p(this,"errorTimestamps",[]);p(this,"isInitialized",!1);p(this,"duplicateErrors",new Map);p(this,"errorPerformanceHistory",[]);this.options=C({enableLogging:!0,enableReporting:!0,enableRecovery:!0,logToConsole:!0,reportToServer:!1,showUserNotification:!0,maxErrorsPerMinute:10,recoveryStrategies:new Map},e),this.errorLogger=new Hi,this.errorReporter=new Ni,this.errorRecovery=new zi}static getInstance(e){return J.instance||(J.instance=new J(e)),J.instance}setupVueErrorHandler(e){e.config.errorHandler=(t,s,i)=>{this.handleError({message:t.message||"Unknown Vue error",stack:t.stack,component:(s==null?void 0:s.$options.name)||"Unknown",props:s==null?void 0:s.$props,info:i,timestamp:Date.now(),userAgent:navigator.userAgent,severity:this.determineSeverity(t),category:"vue"})},e.config.warnHandler=(t,s,i)=>{this.options.logToConsole&&console.warn(`Vue warning: ${t}
Trace: ${i}`),this.errorLogger.logWarning({message:t,component:(s==null?void 0:s.$options.name)||"Unknown",trace:i,timestamp:Date.now()})}}setupGlobalHandlers(){if(this.isInitialized){console.warn("GlobalErrorHandler is already initialized");return}if(window.onerror=(e,t,s,i,n)=>(this.handleError({message:typeof e=="string"?e:"Unknown error",stack:n==null?void 0:n.stack,url:t,line:s,column:i,timestamp:Date.now(),userAgent:navigator.userAgent,severity:this.determineSeverity(n),category:"javascript"}),!0),window.addEventListener("unhandledrejection",e=>{var t;this.handleError({message:`Unhandled Promise rejection: ${e.reason}`,stack:(t=e.reason)==null?void 0:t.stack,timestamp:Date.now(),userAgent:navigator.userAgent,severity:"high",category:"async"}),e.preventDefault()}),"PerformanceObserver"in window){const e=new PerformanceObserver(t=>{for(const s of t.getEntries())s.entryType==="resource"&&"responseStatus"in s&&s.responseStatus>=400&&this.handleError({message:`Network error: ${s.name}`,url:s.name,timestamp:Date.now(),userAgent:navigator.userAgent,severity:"medium",category:"network"})});try{e.observe({entryTypes:["resource"]})}catch(t){}}this.isInitialized=!0}handleError(e){const t=this.enhanceErrorInfo(e);if(!this.checkRateLimit()){console.error("Error rate limit exceeded");return}if(this.errorCount++,t.fingerprint=this.generateFingerprint(t),this.isDuplicateError(t)){console.log("Duplicate error detected, skipping notification"),this.options.enableLogging&&this.errorLogger.log(t);return}this.options.enableLogging&&(this.errorLogger.log(t),this.options.logToConsole&&this.logStructuredError(t)),this.options.enableReporting&&this.options.reportToServer&&this.errorReporter.report(t),this.options.enableRecovery&&this.errorRecovery.tryAdvancedRecover(t).then(s=>{const i=new CustomEvent("app:recovery-result",{detail:{success:s.success,strategy:s.strategyUsed,attempts:s.attemptsCount,errorId:t.fingerprint}});if(window.dispatchEvent(i),s.success){console.log(`[ErrorHandler] Auto-recovery successful using ${s.strategyUsed}`);const n=new CustomEvent("app:error",{detail:{message:`ã‚¨ãƒ©ãƒ¼ã‹ã‚‰è‡ªå‹•å¾©æ—§ã—ã¾ã—ãŸ (${s.strategyUsed})`,severity:"info",category:"system",timestamp:Date.now(),userAgent:navigator.userAgent,context:{originalError:t.fingerprint,recoveryStrategy:s.strategyUsed}}});window.dispatchEvent(n)}}).catch(s=>{console.error("[ErrorHandler] Recovery failed:",s),this.handleError({message:`Recovery system failure: ${s.message}`,stack:s.stack,category:"system",severity:"high",timestamp:Date.now(),userAgent:navigator.userAgent,context:{originalError:t.fingerprint,recoveryError:!0}})}),this.options.showUserNotification&&t.severity!=="low"&&this.notifyUser(t),this.trackErrorPerformance(t)}determineSeverity(e){if(!e)return"low";const t=e.message||e.toString(),s=e.stack||"";return t.includes("Cannot read property")||t.includes("Cannot access before initialization")||t.includes("is not defined")||t.includes("Maximum call stack")||t.includes("Out of memory")||t.includes("Script error")||t.includes("ChunkLoadError")||s.includes("at Object.exports")||e.name==="TypeError"&&t.includes("null")?"critical":t.includes("Network error")||t.includes("Failed to fetch")||t.includes("Promise rejection")||t.includes("Timeout")||t.includes("CORS")||t.includes("401")||t.includes("403")||t.includes("500")||t.includes("Game state")||t.includes("Save failed")||e.name==="SecurityError"?"high":t.includes("Warning")||t.includes("Deprecated")||t.includes("Performance")||t.includes("Slow")||t.includes("404")||t.includes("Render")||t.includes("Animation")?"medium":"low"}checkRateLimit(){const e=Date.now(),t=e-6e4;return this.errorTimestamps=this.errorTimestamps.filter(s=>s>t),this.errorTimestamps.length>=this.options.maxErrorsPerMinute?!1:(this.errorTimestamps.push(e),!0)}notifyUser(e){let t="ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ";switch(e.category){case"network":t="ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸ";break;case"async":t="å‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ";break;case"vue":t="ç”»é¢ã®è¡¨ç¤ºã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ";break;default:t="äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ"}this.showErrorNotification(t,e.severity)}showErrorNotification(e,t){console.warn(`[User Notification] ${t.toUpperCase()}: ${e}`);const s=new CustomEvent("app:error",{detail:{message:e,severity:t}});window.dispatchEvent(s)}getErrorStats(){return{totalErrors:this.errorCount,recentErrors:this.errorTimestamps.length,logs:this.errorLogger.getLogs(),isHealthy:this.errorTimestamps.length<this.options.maxErrorsPerMinute/2}}reset(){this.errorCount=0,this.errorTimestamps=[],this.errorLogger.clear()}enhanceErrorInfo(e){var n;const t=R(C({},e.context),{route:window.location.pathname,deviceInfo:{isMobile:/Mobile|Android|iPhone|iPad/.test(navigator.userAgent),screenSize:`${window.screen.width}x${window.screen.height}`,connection:((n=navigator.connection)==null?void 0:n.effectiveType)||"unknown"}}),s=[...e.tags||[],e.category,e.severity,t.deviceInfo.isMobile?"mobile":"desktop"],i=[...e.breadcrumbs||[],{timestamp:Date.now(),category:"error",message:"Error captured by handler",data:{component:e.component}}];return R(C({},e),{context:t,tags:s,breadcrumbs:i})}generateFingerprint(e){var i;const t=[e.message,e.component||"unknown",e.category,((i=e.context)==null?void 0:i.route)||"unknown"].join("|");let s=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);s=(s<<5)-s+r,s=s&s}return Math.abs(s).toString(16)}isDuplicateError(e){if(!e.fingerprint)return!1;const t=Date.now(),s=this.duplicateErrors.get(e.fingerprint)||0;return t-s<6e4?!0:(this.duplicateErrors.set(e.fingerprint,t),!1)}logStructuredError(e){const t={message:e.message,severity:e.severity,category:e.category,component:e.component,fingerprint:e.fingerprint,context:e.context,tags:e.tags,timestamp:new Date(e.timestamp).toISOString()};console.group(`ğŸš¨ [${e.severity.toUpperCase()}] ${e.category}`),console.error("Message:",e.message),console.log("Data:",t),e.stack&&console.log("Stack:",e.stack),console.groupEnd()}trackErrorPerformance(e){this.errorPerformanceHistory.push({timestamp:Date.now(),severity:e.severity});const t=Date.now()-36e5;this.errorPerformanceHistory=this.errorPerformanceHistory.filter(i=>i.timestamp>t),this.errorPerformanceHistory.filter(i=>i.severity==="critical"&&i.timestamp>Date.now()-3e5).length>=3&&this.triggerSystemAlert("Multiple critical errors detected")}triggerSystemAlert(e){console.error(`ğŸš€ SYSTEM ALERT: ${e}`);const t=new CustomEvent("app:system-alert",{detail:{message:e,timestamp:Date.now()}});window.dispatchEvent(t)}addBreadcrumb(e,t,s){console.log(`[Breadcrumb] ${e}: ${t}`,s)}getHealthStatus(){const e=this.errorTimestamps.filter(s=>s>Date.now()-3e5).length,t=this.errorPerformanceHistory.filter(s=>s.severity==="critical"&&s.timestamp>Date.now()-3e5).length;return{isHealthy:e<this.options.maxErrorsPerMinute/2&&t===0,recentErrorCount:e,criticalErrorCount:t,totalErrors:this.errorCount,rateLimit:{current:this.errorTimestamps.length,max:this.options.maxErrorsPerMinute}}}destroy(){window.onerror=null,window.removeEventListener("unhandledrejection",()=>{}),this.duplicateErrors.clear(),this.errorPerformanceHistory=[],this.reset(),this.isInitialized=!1}};p(J,"instance");let Ee=J;const Pe={BASE_URL:"/insurance_self_game/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};class Ui{constructor(e,t="unknown",s="unknown"){p(this,"sessionId");p(this,"buildVersion");p(this,"environment");p(this,"gameStateProvider");p(this,"componentProvider");p(this,"featureProvider");this.sessionId=e,this.buildVersion=t,this.environment=s}setGameStateProvider(e){this.gameStateProvider=e}setComponentProvider(e){this.componentProvider=e}setFeatureProvider(e){this.featureProvider=e}collect(e={}){const t=C({includeMemory:!0,includePerformance:!0,includeGameState:!0,includeExperimental:!1,sanitize:!0,maxDataSize:102400},e);try{const s={timestamp:new Date().toISOString(),sessionId:this.sessionId,buildVersion:this.buildVersion,environment:this.environment,system:this.collectSystemInfo(),performance:this.collectPerformanceInfo(t),application:this.collectApplicationInfo(t),features:this.collectFeatureInfo()};return t.includeExperimental&&(s.experimental=this.collectExperimentalInfo()),t.maxDataSize&&JSON.stringify(s).length>t.maxDataSize?(console.warn("[DebugInfoCollector] Data size exceeds limit, truncating..."),this.truncateData(s,t.maxDataSize)):t.sanitize?this.sanitizeData(s):s}catch(s){return console.error("[DebugInfoCollector] Failed to collect debug info:",s),{timestamp:new Date().toISOString(),sessionId:this.sessionId,buildVersion:this.buildVersion,environment:this.environment,system:{userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine,screenResolution:`${screen.width}x${screen.height}`,viewportSize:`${window.innerWidth}x${window.innerHeight}`,devicePixelRatio:window.devicePixelRatio,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone},performance:{timing:{navigationStart:0,loadComplete:0,domReady:0}},application:{url:this.sanitizeUrl(window.location.href),referrer:this.sanitizeUrl(document.referrer),activeFeatures:[],errorCount:0},features:{localStorage:!1,sessionStorage:!1,webGL:!1,webWorker:!1,serviceWorker:!1,notifications:!1,geolocation:!1,mediaDevices:!1}}}}collectSystemInfo(){return{userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine,screenResolution:`${screen.width}x${screen.height}`,viewportSize:`${window.innerWidth}x${window.innerHeight}`,devicePixelRatio:window.devicePixelRatio,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}}collectPerformanceInfo(e){const t={timing:{navigationStart:performance.timing.navigationStart,loadComplete:performance.timing.loadEventEnd-performance.timing.navigationStart,domReady:performance.timing.domContentLoadedEventEnd-performance.timing.navigationStart}};if(e.includeMemory&&"memory"in performance){const s=performance.memory;t.memory={used:s.usedJSHeapSize,total:s.totalJSHeapSize,limit:s.jsHeapSizeLimit}}if(e.includePerformance&&"getEntriesByType"in performance)try{const s=performance.getEntriesByType("paint"),i=s.find(r=>r.name==="first-paint"),n=s.find(r=>r.name==="first-contentful-paint");i&&(t.timing.firstPaint=i.startTime),n&&(t.timing.firstContentfulPaint=n.startTime)}catch(s){}if("connection"in navigator){const s=navigator.connection;t.connection={effectiveType:s.effectiveType||"unknown",downlink:s.downlink||0,rtt:s.rtt||0}}return t}collectApplicationInfo(e){const t={url:this.sanitizeUrl(window.location.href),referrer:this.sanitizeUrl(document.referrer),activeFeatures:this.featureProvider?this.featureProvider():this.detectActiveFeatures(),errorCount:this.getErrorCount()};if(e.includeGameState&&this.gameStateProvider)try{t.gameState=this.gameStateProvider()}catch(i){t.gameState="error"}if(this.componentProvider)try{t.currentComponent=this.componentProvider()}catch(i){}window.location.pathname&&(t.routePath=window.location.pathname);const s=this.getLastError();return s&&(t.lastError=s),t}collectFeatureInfo(){return{localStorage:this.testFeature(()=>"localStorage"in window&&window.localStorage!==null),sessionStorage:this.testFeature(()=>"sessionStorage"in window&&window.sessionStorage!==null),webGL:this.testFeature(()=>this.hasWebGL()),webWorker:this.testFeature(()=>"Worker"in window),serviceWorker:this.testFeature(()=>"serviceWorker"in navigator),notifications:this.testFeature(()=>"Notification"in window),geolocation:this.testFeature(()=>"geolocation"in navigator),mediaDevices:this.testFeature(()=>"mediaDevices"in navigator)}}collectExperimentalInfo(){return{flags:this.getFeatureFlags(),abTests:this.getABTests(),featureToggles:this.getFeatureToggles()}}testFeature(e){try{return e()}catch(t){return!1}}hasWebGL(){try{const e=document.createElement("canvas");return!!(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){return!1}}sanitizeUrl(e){if(!e)return"";try{const t=new URL(e),s=new URLSearchParams;return t.searchParams.forEach((i,n)=>{this.isSensitiveParam(n)||s.set(n,i)}),`${t.origin}${t.pathname}${s.toString()?`?${s.toString()}`:""}`}catch(t){return e.split("?")[0].split("#")[0]}}isSensitiveParam(e){return["token","auth","session","key","secret","password","pwd","pass","api_key","apikey","access_token","refresh_token","jwt","bearer"].some(s=>e.toLowerCase().includes(s))}detectActiveFeatures(){const e=[];document.querySelector("[data-game-canvas]")&&e.push("game"),document.querySelector("[data-tutorial]")&&e.push("tutorial"),document.querySelector("[data-statistics]")&&e.push("statistics"),document.querySelector("[data-settings]")&&e.push("settings");try{localStorage.getItem("game_settings")&&e.push("settings-saved"),localStorage.getItem("game_progress")&&e.push("progress-saved"),localStorage.getItem("tutorial_completed")&&e.push("tutorial-completed")}catch(t){}return e}getErrorCount(){try{const e=window.__errorHandling;if(e!=null&&e.getStatistics)return e.getStatistics().totalErrors||0}catch(e){}return 0}getLastError(){try{const e=window.__errorHandling;if(e!=null&&e.getStatistics){const t=e.getStatistics();if(t.logs&&t.logs.length>0){const s=t.logs[t.logs.length-1];return{message:s.errorInfo.message,timestamp:s.timestamp,severity:s.errorInfo.severity}}}}catch(e){}}getFeatureFlags(){const e={};try{Object.keys(Pe).filter(s=>s.startsWith("VITE_FEATURE_FLAG_")).forEach(s=>{const i=s.replace("VITE_FEATURE_FLAG_","").toLowerCase();e[i]=Pe[s]==="true"})}catch(t){}return e}getABTests(){const e={};try{const t=localStorage.getItem("ab_tests");t&&Object.assign(e,JSON.parse(t))}catch(t){}return e}getFeatureToggles(){const e={};try{const t=localStorage.getItem("feature_toggles");t&&Object.assign(e,JSON.parse(t))}catch(t){}return e}sanitizeData(e){const t=JSON.parse(JSON.stringify(e));return t.system.userAgent&&(t.system.userAgent=this.sanitizeUserAgent(t.system.userAgent)),t}sanitizeUserAgent(e){return e.split(" ").filter(i=>i.includes("Chrome")||i.includes("Firefox")||i.includes("Safari")||i.includes("Edge")||i.includes("Mobile")||i.includes("Windows")||i.includes("Mac")||i.includes("Linux")).slice(0,5).join(" ")}truncateData(e,t){const s=C({},e);return delete s.experimental,s.performance.memory&&delete s.performance.memory,s.performance.connection&&delete s.performance.connection,JSON.stringify(s).length>t&&(s.application={url:s.application.url,errorCount:s.application.errorCount,activeFeatures:[]}),s}}let ye=null;function Vi(o,e,t){return ye||(ye=new Ui(o||"unknown",e||void 0||"unknown",t||"production")),ye}class Bi{constructor(){p(this,"globalHandler");p(this,"isInitialized",!1);p(this,"config",{});p(this,"debugCollector")}initialize(e={}){if(this.isInitialized){console.warn("[ErrorHandlingSystem] Already initialized");return}this.config=C({enableLogging:!0,enableReporting:!0,enableRecovery:!0,enableUserNotifications:!0,maxErrorsPerMinute:10,logToConsole:!1,reportToServer:!0,environment:"production"},e),this.globalHandler=Ee.getInstance({enableLogging:this.config.enableLogging,enableReporting:this.config.enableReporting,enableRecovery:this.config.enableRecovery,logToConsole:this.config.logToConsole,reportToServer:this.config.reportToServer,showUserNotification:this.config.enableUserNotifications,maxErrorsPerMinute:this.config.maxErrorsPerMinute}),this.globalHandler.setupGlobalHandlers(),this.debugCollector=Vi(this.generateSessionId(),this.config.buildVersion,this.config.environment),this.config.userId&&this.setUserId(this.config.userId),this.setupEventListeners(),this.isInitialized=!0,console.log("[ErrorHandlingSystem] Initialized successfully",{config:this.config,environment:this.config.environment})}integrateWithVue(e){if(!this.globalHandler)throw new Error("ErrorHandlingSystem must be initialized before Vue integration");this.globalHandler.setupVueErrorHandler(e)}setUserId(e){if(this.config.userId=e,this.globalHandler)try{this.globalHandler.errorReporter.setUserId(e)(this.globalHandler).errorLogger.setUserId(e)}catch(t){console.warn("[ErrorHandlingSystem] Failed to set user ID:",t)}}reportError(e,t,s="user"){if(!this.globalHandler){console.error("[ErrorHandlingSystem] Not initialized");return}const i={message:typeof e=="string"?e:e.message,stack:typeof e=="object"?e.stack:void 0,category:s,severity:"medium",timestamp:Date.now(),userAgent:navigator.userAgent,context:R(C({},t),{source:"manual-report",userId:this.config.userId})};this.globalHandler.handleError(i)}addErrorPattern(e){Ne.addPattern(e)}getHealthStatus(){return this.globalHandler?this.globalHandler.getHealthStatus():{isHealthy:!1,error:"Not initialized"}}getStatistics(){return this.globalHandler?this.globalHandler.getErrorStats():null}addErrorListener(e){const t=s=>{e(s.detail)};return window.addEventListener("app:error",t),()=>{window.removeEventListener("app:error",t)}}setupEventListeners(){window.addEventListener("app:error-alert",e=>{this.config.onAlert&&this.config.onAlert(e.detail.type,e.detail.data)}),window.addEventListener("app:system-alert",e=>{console.error(`ğŸš¨ SYSTEM ALERT: ${e.detail.message}`),this.config.onAlert&&this.config.onAlert("system-alert",e.detail)}),window.addEventListener("app:recovery-result",e=>{this.config.onRecovery&&this.config.onRecovery(e.detail.success,e.detail.strategy)}),this.setupPerformanceMonitoring()}setupVueDevToolsIntegration(){const e=window.__VUE_DEVTOOLS_GLOBAL_HOOK__;this.addErrorListener(t=>{e.emit("app:error",{type:"error",payload:{error:t,timestamp:Date.now()}})})}setupPerformanceMonitoring(){if("memory"in performance&&setInterval(()=>{const e=performance.memory,t=e.usedJSHeapSize,s=e.jsHeapSizeLimit;t/s>.8&&this.reportError("High memory usage detected",{memoryUsed:t,memoryLimit:s,percentage:Math.round(t/s*100)},"performance")},3e4),"PerformanceObserver"in window)try{new PerformanceObserver(t=>{for(const s of t.getEntries())s.duration>50&&this.reportError("Long task detected",{duration:s.duration,startTime:s.startTime,name:s.name},"performance")}).observe({entryTypes:["longtask"]})}catch(e){console.warn("[ErrorHandlingSystem] Long task monitoring not supported:",e)}}collectDebugInfo(e){if(this.debugCollector)try{return this.debugCollector.collect(e)}catch(s){console.error("[ErrorHandlingSystem] Failed to collect debug info:",s)}const t={timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href,config:this.config,isInitialized:this.isInitialized};return"memory"in performance&&(t.memory=performance.memory),"connection"in navigator&&(t.connection=navigator.connection),t.timing=performance.timing,this.globalHandler&&(t.errorStats=this.getStatistics(),t.healthStatus=this.getHealthStatus()),t}setGameStateProvider(e){this.debugCollector&&this.debugCollector.setGameStateProvider(e)}setComponentProvider(e){this.debugCollector&&this.debugCollector.setComponentProvider(e)}setFeatureProvider(e){this.debugCollector&&this.debugCollector.setFeatureProvider(e)}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}destroy(){this.globalHandler&&(this.globalHandler.destroy(),this.globalHandler=void 0),this.isInitialized=!1,console.log("[ErrorHandlingSystem] Destroyed")}}const P=new Bi,ji={install(o,e={}){P.initialize(e),P.integrateWithVue(o),o.config.globalProperties.$errorHandling={reportError:P.reportError.bind(P),getHealth:P.getHealthStatus.bind(P),getStats:P.getStatistics.bind(P),collectDebugInfo:P.collectDebugInfo.bind(P)},o.provide("errorHandling",P)}};class qi{constructor(){p(this,"registration",null);p(this,"updateAvailable",!1);p(this,"refreshing",!1)}register(){return f(this,arguments,function*(e={}){if(!("serviceWorker"in navigator)){console.log("Service Worker is not supported");return}try{const t="/insurance_self_game/",s=yield navigator.serviceWorker.register(`${t}service-worker.js`,{scope:t});this.registration=s,console.log("Service Worker registered:",s),e.onSuccess&&e.onSuccess(s),this.checkForUpdates(s,e),this.setupNetworkListeners(e),this.setupRefreshListener(),setInterval(()=>{s.update()},3600*1e3)}catch(t){console.error("Service Worker registration failed:",t),e.onError&&e.onError(t)}})}checkForUpdates(e,t){e.installing&&this.trackInstalling(e.installing,t),e.waiting&&(this.updateAvailable=!0,t.onUpdate&&t.onUpdate(e)),e.addEventListener("updatefound",()=>{const s=e.installing;s&&this.trackInstalling(s,t)})}trackInstalling(e,t){e.addEventListener("statechange",()=>{e.state==="installed"&&navigator.serviceWorker.controller&&(this.updateAvailable=!0,t.onUpdate&&t.onUpdate(this.registration))})}setupNetworkListeners(e){window.addEventListener("online",()=>{console.log("Network: Online"),e.onOnline&&e.onOnline()}),window.addEventListener("offline",()=>{console.log("Network: Offline"),e.onOffline&&e.onOffline()})}setupRefreshListener(){navigator.serviceWorker.addEventListener("controllerchange",()=>{this.refreshing||(this.refreshing=!0,window.location.reload())})}update(){return f(this,null,function*(){if(this.registration)try{yield this.registration.update(),this.registration.waiting&&this.registration.waiting.postMessage({type:"SKIP_WAITING"})}catch(e){console.error("Service Worker update failed:",e)}})}clearCache(){return f(this,null,function*(){if(navigator.serviceWorker.controller&&(navigator.serviceWorker.controller.postMessage({type:"CLEAR_CACHE"}),"caches"in window)){const e=yield caches.keys();yield Promise.all(e.map(t=>caches.delete(t)))}})}unregister(){return f(this,null,function*(){if(this.registration)try{(yield this.registration.unregister())&&(console.log("Service Worker unregistered"),this.registration=null)}catch(e){console.error("Service Worker unregistration failed:",e)}})}isUpdateAvailable(){return this.updateAvailable}isOfflineReady(){return this.registration!==null&&this.registration.active!==null}}const Ki=new qi;function Gi(){return f(this,arguments,function*(o={}){window.addEventListener("load",()=>{Ki.register(o)})})}const Wi={color:"rgba(255, 255, 255, 0.6)",duration:700,opacity:.6,centered:!1,disabled:!1};function Qi(o,e,t={}){const s=C(C({},Wi),t);if(s.disabled)return;o.classList.contains("ripple-container")||o.classList.add("ripple-container");const i=document.createElement("span");i.classList.add("ripple");const n=o.getBoundingClientRect(),r=Math.max(n.width,n.height),d=r/2;let u,m;if(s.centered)u=n.width/2,m=n.height/2;else{const E="touches"in e?e.touches[0].clientX:e.clientX,S="touches"in e?e.touches[0].clientY:e.clientY;u=E-n.left,m=S-n.top}Object.assign(i.style,{width:`${r}px`,height:`${r}px`,left:`${u-d}px`,top:`${m-d}px`,backgroundColor:s.color,opacity:s.opacity.toString(),animationDuration:`${s.duration}ms`}),o.appendChild(i);const h=()=>{i.parentNode&&i.parentNode.removeChild(i)};i.addEventListener("animationend",h),setTimeout(h,s.duration+100)}function Ji(o,e={}){const t=s=>{Qi(o,s,e)};return o.addEventListener("mousedown",t),o.addEventListener("touchstart",t,{passive:!0}),()=>{o.removeEventListener("mousedown",t),o.removeEventListener("touchstart",t)}}function Yi(){const o=()=>{document.querySelectorAll(".ripple-container").forEach(s=>{const i=s;i._hasRipple||(Ji(i),i._hasRipple=!0)})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",o):o();const e=new MutationObserver(t=>{let s=!1;t.forEach(i=>{i.type==="childList"&&i.addedNodes.forEach(n=>{var r,d;if(n.nodeType===Node.ELEMENT_NODE){const u=n;((r=u.classList)!=null&&r.contains("ripple-container")||((d=u.querySelectorAll)==null?void 0:d.call(u,".ripple-container").length)>0)&&(s=!0)}})}),s&&setTimeout(o,0)});return e.observe(document.body,{childList:!0,subtree:!0}),()=>{e.disconnect()}}const ce=Xe(wi);ce.use(xe);ce.use(ji,{enableLogging:!0,enableReporting:!0,enableRecovery:!0,enableUserNotifications:!0,logToConsole:!1,reportToServer:!0,maxErrorsPerMinute:20,environment:"production",buildVersion:void 0,reportEndpoint:void 0,reportApiKey:void 0,onError:o=>{console.log("[App] Error reported:",o.message)},onRecovery:(o,e)=>{console.log(`[App] Recovery ${o?"succeeded":"failed"}${e?` using ${e}`:""}`)},onAlert:(o,e)=>{console.warn(`[App] Alert: ${o}`,e)}});function Xi(){return f(this,null,function*(){try{yield Ue(),console.log("ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚·ã‚¹ãƒ†ãƒ ãŒæ­£å¸¸ã«åˆæœŸåŒ–ã•ã‚Œã¾ã—ãŸ"),ce.mount("#app")}catch(o){console.error("ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ:",o),P.reportError(o,{component:"app-initialization"},"system"),console.warn("âš ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚·ã‚¹ãƒ†ãƒ ãªã—ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã—ã¾ã™"),ce.mount("#app")}})}Xi();Yi();Gi({onSuccess:o=>{console.log("PWA: Service Worker ç™»éŒ²æˆåŠŸ",o)},onUpdate:o=>{console.log("PWA: æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒåˆ©ç”¨å¯èƒ½ã§ã™",o)},onOffline:()=>{console.log("PWA: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰")},onOnline:()=>{console.log("PWA: ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã«å¾©å¸°")},onError:o=>{console.error("PWA: Service Worker ã‚¨ãƒ©ãƒ¼",o),P.reportError(o,{component:"service-worker"},"system")}});export{he as _};
//# sourceMappingURL=index-CsX-0awL.js.map
