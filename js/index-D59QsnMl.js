const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./MobileErrorHandler-R1TliYqhxxBB.js","./vue-vendor-Cmj67njg.js","./vendor-BMyQpWla.js","./game-logic-Bxx5KxXJIXCp.js","../css/MobileErrorHandler-BRt2uNlx.css","../css/css-vendor-bSBXe4IY.css"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,n,a)=>((t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a)(t,"symbol"!=typeof n?n+"":n,a);/* empty css                       */import{j as n,f as a,k as s,l as i,p as o,T as r,q as l,s as c,r as d,u,w as p,v as h,x as m,y as v,z as f,A as b,B as g,C as y,D as x,E as w,F as k,G as C,H as E,I as S,J as _,K as L,L as T,M as $,N as M,O as I,P as A,n as F,Q as D,R as P,S as R,U as z,V as j}from"./vue-vendor-Cmj67njg.js";import{d as V,c as N}from"./vendor-BMyQpWla.js";import{G as O,V as B,A as H}from"./game-logic-Bxx5KxXJIXCp.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const G={},K={class:"transition-animations"},U=(e,t)=>{const n=e.__vccOpts||e;for(const[a,s]of t)n[a]=s;return n},Q=U(n({__name:"TransitionAnimations",props:{type:{default:"fade"},direction:{default:"right"},duration:{default:300},easing:{default:"cubic-bezier(0.4, 0, 0.2, 1)"},intensity:{default:"normal"}},setup(e){const t=e,n=a(()=>`${t.type}-${t.direction}-${t.intensity}`),d=e=>{const n=e;n.style.transitionDuration=`${t.duration}ms`,n.style.transitionTimingFunction=t.easing},u=(e,n)=>{setTimeout(n,t.duration)},p=(e,n)=>{setTimeout(n,t.duration)};return(e,t)=>(i(),s("div",K,[o(r,{name:n.value,mode:"out-in",onBeforeEnter:d,onEnter:u,onLeave:p},{default:l(()=>[c(e.$slots,"default",{},void 0)]),_:3},8,["name"])]))}}),[["__scopeId","data-v-23af9bdf"]]);class q{constructor(){t(this,"liveRegions",new Map),t(this,"gameStatusElement"),t(this,"cardDetailsElement"),t(this,"announcementQueue",[]),t(this,"isProcessingQueue",!1),this.createLiveRegions(),this.createGameStatusElements(),this.setupAriaDescriptions()}announce(e,t={priority:"polite"}){t.interrupt&&this.clearQueue(),this.announcementQueue.push({message:e,options:t}),this.processQueue()}announceGameState(e){const{type:t,message:n,context:a}=e;this.updateGameStatus(t,n,a);const s=this.getPriorityForGameState(t);this.announce(n,{priority:s,persist:!0})}announceCardDetails(e){const t=this.createCardDescription(e);this.cardDetailsElement.textContent=t,this.announce(`ã‚«ãƒ¼ãƒ‰é¸æŠ: ${t}`,{priority:"polite"})}announceError(e){this.announce(`ã‚¨ãƒ©ãƒ¼: ${e}`,{priority:"assertive",interrupt:!0})}announceSuccess(e){this.announce(`æˆåŠŸ: ${e}`,{priority:"polite"})}announceProgress(e,t,n){const a=`${n}: ${e}/${t} (${Math.round(e/t*100)}%)`;this.announce(a,{priority:"polite"})}announceOptions(e,t){const n=`é¸æŠè‚¢ ${t+1}/${e.length}: ${e[t]}`;this.announce(n,{priority:"polite"})}announceTimer(e,t="seconds"){const n="seconds"===t?"ç§’":"åˆ†";let a;a=e<=0?"æ™‚é–“åˆ‡ã‚Œã§ã™":e<=10&&"seconds"===t||e<=60&&"seconds"===t?`æ®‹ã‚Š${e}${n}`:`æ®‹ã‚Šæ™‚é–“: ${e}${n}`;const s=e<=10?"assertive":"polite";this.announce(a,{priority:s})}announceScreenChange(e,t){let n=`ç”»é¢ãŒå¤‰æ›´ã•ã‚Œã¾ã—ãŸ: ${e}`;t&&(n+=`. ${t}`),this.announce(n,{priority:"assertive",persist:!0})}announceKeyboardHelp(){const e=`ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ: ${["Tabã‚­ãƒ¼ã§æ¬¡ã®è¦ç´ ã«ç§»å‹•","Shift+Tabã§å‰ã®è¦ç´ ã«ç§»å‹•","Enterã‚­ãƒ¼ã¾ãŸã¯ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã§é¸æŠ","F1ã‚­ãƒ¼ã§ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º"].join(", ")}`;this.announce(e,{priority:"polite",persist:!0})}announceGameStats(e){const t=`ã‚²ãƒ¼ãƒ çµ±è¨ˆ. ${Object.entries(e).map(([e,t])=>`${this.translateStatKey(e)}: ${t}`).join(", ")}`;this.announce(t,{priority:"polite",persist:!0})}announceRegionStatus(e,t){const n=t.length,a=this.getItemType(t);let s;s=0===n?`${e}ã¯ç©ºã§ã™`:1===n?`${e}ã«${a}ãŒ1ã¤ã‚ã‚Šã¾ã™`:`${e}ã«${a}ãŒ${n}å€‹ã‚ã‚Šã¾ã™`,this.announce(s,{priority:"polite"})}announceDragDrop(e,t){let n;switch(e){case"start":n=`${t.itemName}ã®ãƒ‰ãƒ©ãƒƒã‚°ã‚’é–‹å§‹ã—ã¾ã—ãŸ`;break;case"move":n=`${t.targetName}ã®ä¸Šã«ç§»å‹•ä¸­`;break;case"drop":n=t.success?`${t.targetName}ã«${t.itemName}ã‚’ãƒ‰ãƒ­ãƒƒãƒ—ã—ã¾ã—ãŸ`:`ãƒ‰ãƒ­ãƒƒãƒ—ã«å¤±æ•—ã—ã¾ã—ãŸ: ${t.reason}`;break;case"cancel":n="ãƒ‰ãƒ©ãƒƒã‚°æ“ä½œã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¾ã—ãŸ"}const a="drop"!==e||t.success?"polite":"assertive";this.announce(n,{priority:a})}createLiveRegions(){const e=document.createElement("div");e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),e.setAttribute("aria-atomic","false"),e.className="sr-only",e.id="live-region-polite",document.body.appendChild(e),this.liveRegions.set("polite",e);const t=document.createElement("div");t.setAttribute("aria-live","assertive"),t.setAttribute("aria-relevant","additions text"),t.setAttribute("aria-atomic","true"),t.className="sr-only",t.id="live-region-assertive",document.body.appendChild(t),this.liveRegions.set("assertive",t)}createGameStatusElements(){this.gameStatusElement=document.createElement("div"),this.gameStatusElement.id="game-status",this.gameStatusElement.className="sr-only",this.gameStatusElement.setAttribute("aria-label","ã‚²ãƒ¼ãƒ çŠ¶æ…‹"),document.body.appendChild(this.gameStatusElement),this.cardDetailsElement=document.createElement("div"),this.cardDetailsElement.id="card-details",this.cardDetailsElement.className="sr-only",this.cardDetailsElement.setAttribute("aria-label","ã‚«ãƒ¼ãƒ‰è©³ç´°"),document.body.appendChild(this.cardDetailsElement)}setupAriaDescriptions(){const e=document.createElement("style");e.textContent="\n      .sr-only {\n        position: absolute;\n        width: 1px;\n        height: 1px;\n        padding: 0;\n        margin: -1px;\n        overflow: hidden;\n        clip: rect(0, 0, 0, 0);\n        white-space: nowrap;\n        border: 0;\n      }\n      \n      .sr-only-focusable:focus {\n        position: static;\n        width: auto;\n        height: auto;\n        padding: inherit;\n        margin: inherit;\n        overflow: visible;\n        clip: auto;\n        white-space: normal;\n      }\n    ",document.head.appendChild(e)}async processQueue(){if(!this.isProcessingQueue&&0!==this.announcementQueue.length){for(this.isProcessingQueue=!0;this.announcementQueue.length>0;){const{message:e,options:t}=this.announcementQueue.shift();t.delay&&await this.delay(t.delay),await this.performAnnouncement(e,t),await this.delay(100)}this.isProcessingQueue=!1}}async performAnnouncement(e,t){const n=this.liveRegions.get(t.priority);if(n)if(t.persist||(n.textContent="",await this.delay(10)),t.persist){const t=document.createElement("div");t.textContent=e,n.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},5e3)}else n.textContent=e}updateGameStatus(e,t,n){const a={type:e,message:t,timestamp:(new Date).toISOString(),...n};this.gameStatusElement.setAttribute("data-game-state",JSON.stringify(a)),this.gameStatusElement.textContent=t}createCardDescription(e){const t=[e.name];return e.type&&t.push(`ç¨®é¡: ${this.translateCardType(e.type)}`),void 0!==e.power&&t.push(`ãƒ‘ãƒ¯ãƒ¼: ${e.power}`),void 0!==e.cost&&t.push(`ã‚³ã‚¹ãƒˆ: ${e.cost}`),e.description&&t.push(`èª¬æ˜: ${e.description}`),t.join(", ")}getPriorityForGameState(e){return["challenge_result","game_end","error"].includes(e)?"assertive":"polite"}translateStatKey(e){return{vitality:"æ´»åŠ›",turn:"ã‚¿ãƒ¼ãƒ³",cardsInHand:"æ‰‹æœ­æšæ•°",challengesCompleted:"å®Œäº†ãƒãƒ£ãƒ¬ãƒ³ã‚¸æ•°",insuranceCards:"ä¿é™ºã‚«ãƒ¼ãƒ‰æ•°"}[e]||e}translateCardType(e){return{life:"ãƒ©ã‚¤ãƒ•ã‚«ãƒ¼ãƒ‰",insurance:"ä¿é™ºã‚«ãƒ¼ãƒ‰",challenge:"ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã‚«ãƒ¼ãƒ‰",dream:"ãƒ‰ãƒªãƒ¼ãƒ ã‚«ãƒ¼ãƒ‰"}[e]||e}getItemType(e){if(0===e.length)return"ã‚¢ã‚¤ãƒ†ãƒ ";const t=e[0];return t.type?this.translateCardType(t.type):"ã‚¢ã‚¤ãƒ†ãƒ "}clearQueue(){this.announcementQueue=[],this.liveRegions.forEach(e=>{e.textContent=""})}async delay(e){return new Promise(t=>setTimeout(t,e))}destroy(){this.liveRegions.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),this.gameStatusElement?.parentNode&&this.gameStatusElement.parentNode.removeChild(this.gameStatusElement),this.cardDetailsElement?.parentNode&&this.cardDetailsElement.parentNode.removeChild(this.cardDetailsElement),this.clearQueue()}}const J={class:"modal-content",role:"dialog","aria-labelledby":"accessibility-title","aria-describedby":"accessibility-description"},W={style:{position:"absolute",width:"0",height:"0"}},Z=["innerHTML"],Y={class:"modal-header"},X={class:"modal-body"},ee={class:"settings-section"},te={class:"setting-item"},ne={class:"setting-item"},ae={for:"high-contrast"},se={class:"setting-item"},ie={class:"settings-section"},oe={class:"setting-item"},re={for:"reduce-motion"},le={key:0,class:"setting-item"},ce={class:"range-value"},de={class:"settings-section"},ue={class:"setting-item"},pe={for:"screen-reader"},he={class:"setting-item"},me={for:"audio-descriptions"},ve={class:"setting-item"},fe={class:"range-value"},be={class:"settings-section"},ge={class:"setting-item"},ye={for:"sticky-keys"},xe={class:"setting-item"},we={class:"modal-footer"},ke=U(n({__name:"AccessibilitySettings",props:{isOpen:{type:Boolean}},emits:["close","settingsChanged"],setup(e,{emit:t}){const n=e,a=t,o={colorScheme:"default",highContrast:!1,fontSize:"medium",reduceMotion:!1,animationSpeed:1,screenReaderEnabled:!1,audioDescriptions:!1,soundEffectsVolume:70,stickyKeys:!1,keyRepeatDelay:500,touchTargetSize:"default"},c=d({...o}),C=d(null),E={default:"",protanopia:'\n    <filter id="protanopia">\n      <feColorMatrix type="matrix" values="\n        0.567, 0.433, 0,     0, 0\n        0.558, 0.442, 0,     0, 0\n        0,     0.242, 0.758, 0, 0\n        0,     0,     0,     1, 0\n      "/>\n    </filter>\n  ',deuteranopia:'\n    <filter id="deuteranopia">\n      <feColorMatrix type="matrix" values="\n        0.625, 0.375, 0,   0, 0\n        0.7,   0.3,   0,   0, 0\n        0,     0.3,   0.7, 0, 0\n        0,     0,     0,   1, 0\n      "/>\n    </filter>\n  ',tritanopia:'\n    <filter id="tritanopia">\n      <feColorMatrix type="matrix" values="\n        0.95, 0.05,  0,     0, 0\n        0,    0.433, 0.567, 0, 0\n        0,    0.475, 0.525, 0, 0\n        0,    0,     0,     1, 0\n      "/>\n    </filter>\n  ',achromatopsia:'\n    <filter id="achromatopsia">\n      <feColorMatrix type="matrix" values="\n        0.299, 0.587, 0.114, 0, 0\n        0.299, 0.587, 0.114, 0, 0\n        0.299, 0.587, 0.114, 0, 0\n        0,     0,     0,     1, 0\n      "/>\n    </filter>\n  '},S=()=>{localStorage.setItem("accessibility-settings",JSON.stringify(c.value)),a("settingsChanged",c.value),_()},_=()=>{const e=document.documentElement;"default"!==c.value.colorScheme?e.style.filter=`url(#${c.value.colorScheme})`:e.style.filter="",e.classList.toggle("high-contrast",c.value.highContrast),e.style.setProperty("--base-font-size",{small:"14px",medium:"16px",large:"20px","extra-large":"24px"}[c.value.fontSize]),e.classList.toggle("reduce-motion",c.value.reduceMotion),e.style.setProperty("--animation-speed-multiplier",String(c.value.animationSpeed)),e.style.setProperty("--touch-target-size",{default:"44px",large:"56px","extra-large":"72px"}[c.value.touchTargetSize]),C.value&&C.value.announce("ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸ",{priority:"polite"})},L=()=>{c.value={...o},S(),C.value&&C.value.announce("ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ",{priority:"assertive"})};return u(()=>{(()=>{const e=localStorage.getItem("accessibility-settings");if(e)try{c.value={...o,...JSON.parse(e)}}catch(t){console.error("Failed to load accessibility settings:",t)}})(),_(),C.value=new q;const e=(()=>{const e=e=>{if(n.isOpen&&e.ctrlKey&&e.altKey)switch(e.key){case"c":const e=["default","protanopia","deuteranopia","tritanopia","achromatopsia"],t=e.indexOf(c.value.colorScheme);c.value.colorScheme=e[(t+1)%e.length],S();break;case"h":c.value.highContrast=!c.value.highContrast,S();break;case"m":c.value.reduceMotion=!c.value.reduceMotion,S()}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}})();return()=>{e(),C.value?.destroy()}}),p(()=>c.value,()=>{S()},{deep:!0}),(e,t)=>(i(),h(r,{name:"modal"},{default:l(()=>[e.isOpen?(i(),s("div",{key:0,class:"accessibility-modal",onClick:t[13]||(t[13]=v(e=>a("close"),["self"]))},[f("div",J,[(i(),s("svg",W,[f("defs",{innerHTML:Object.values(E).join("")},null,8,Z)])),f("div",Y,[t[15]||(t[15]=f("h2",{id:"accessibility-title"},"ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®š",-1)),f("button",{class:"close-button","aria-label":"è¨­å®šã‚’é–‰ã˜ã‚‹",onClick:t[0]||(t[0]=e=>a("close"))},t[14]||(t[14]=[f("span",{"aria-hidden":"true"},"Ã—",-1)]))]),t[36]||(t[36]=f("div",{id:"accessibility-description",class:"sr-only"}," ã‚²ãƒ¼ãƒ ã®ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã§ãã¾ã™ã€‚ Ctrl+Alt+Cã§è‰²è¦šè¨­å®šã€Ctrl+Alt+Hã§ãƒã‚¤ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆã€Ctrl+Alt+Mã§ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³å‰Šæ¸›ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã¾ã™ã€‚ ",-1)),f("div",X,[f("section",ee,[t[22]||(t[22]=f("h3",null,"è¦–è¦šè¨­å®š",-1)),f("div",te,[t[17]||(t[17]=f("label",{for:"color-scheme"},"è‰²è¦šã‚µãƒãƒ¼ãƒˆ",-1)),b(f("select",{id:"color-scheme","onUpdate:modelValue":t[1]||(t[1]=e=>c.value.colorScheme=e),onChange:S},t[16]||(t[16]=[f("option",{value:"default"},"æ¨™æº–",-1),f("option",{value:"protanopia"},"èµ¤è‰²è¦šç•°å¸¸ï¼ˆ1å‹ï¼‰",-1),f("option",{value:"deuteranopia"},"ç·‘è‰²è¦šç•°å¸¸ï¼ˆ2å‹ï¼‰",-1),f("option",{value:"tritanopia"},"é’è‰²è¦šç•°å¸¸ï¼ˆ3å‹ï¼‰",-1),f("option",{value:"achromatopsia"},"å…¨è‰²è¦šç•°å¸¸",-1)]),544),[[x,c.value.colorScheme]]),f("button",{class:"preview-button","aria-label":"è‰²è¦šè¨­å®šã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼",onClick:t[2]||(t[2]=e=>((e,t)=>{const n=c.value[e];c.value[e]=t,_(),setTimeout(()=>{c.value[e]===t&&(c.value[e]=n,_())},3e3)})("colorScheme",c.value.colorScheme))}," ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ ")]),f("div",ne,[f("label",ae,[b(f("input",{id:"high-contrast","onUpdate:modelValue":t[3]||(t[3]=e=>c.value.highContrast=e),type:"checkbox",onChange:S},null,544),[[w,c.value.highContrast]]),t[18]||(t[18]=g(" ãƒã‚¤ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ ",-1))]),t[19]||(t[19]=f("span",{class:"setting-description"}," ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆã‚’é«˜ã‚ã¦è¦–èªæ€§ã‚’å‘ä¸Šã•ã›ã¾ã™ ",-1))]),f("div",se,[t[21]||(t[21]=f("label",{for:"font-size"},"æ–‡å­—ã‚µã‚¤ã‚º",-1)),b(f("select",{id:"font-size","onUpdate:modelValue":t[4]||(t[4]=e=>c.value.fontSize=e),onChange:S},t[20]||(t[20]=[f("option",{value:"small"},"å°ï¼ˆ14pxï¼‰",-1),f("option",{value:"medium"},"ä¸­ï¼ˆ16pxï¼‰",-1),f("option",{value:"large"},"å¤§ï¼ˆ20pxï¼‰",-1),f("option",{value:"extra-large"},"ç‰¹å¤§ï¼ˆ24pxï¼‰",-1)]),544),[[x,c.value.fontSize]])])]),f("section",ie,[t[26]||(t[26]=f("h3",null,"ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š",-1)),f("div",oe,[f("label",re,[b(f("input",{id:"reduce-motion","onUpdate:modelValue":t[5]||(t[5]=e=>c.value.reduceMotion=e),type:"checkbox",onChange:S},null,544),[[w,c.value.reduceMotion]]),t[23]||(t[23]=g(" ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‰Šæ¸› ",-1))]),t[24]||(t[24]=f("span",{class:"setting-description"}," ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æœ€å°é™ã«æŠ‘ãˆã¾ã™ ",-1))]),c.value.reduceMotion?m("",!0):(i(),s("div",le,[t[25]||(t[25]=f("label",{for:"animation-speed"},"ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é€Ÿåº¦",-1)),b(f("input",{id:"animation-speed","onUpdate:modelValue":t[6]||(t[6]=e=>c.value.animationSpeed=e),type:"range",min:"0.1",max:"2.0",step:"0.1",onChange:S},null,544),[[k,c.value.animationSpeed,void 0,{number:!0}]]),f("span",ce,y(c.value.animationSpeed)+"x",1)]))]),f("section",de,[t[30]||(t[30]=f("h3",null,"ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªè¨­å®š",-1)),f("div",ue,[f("label",pe,[b(f("input",{id:"screen-reader","onUpdate:modelValue":t[7]||(t[7]=e=>c.value.screenReaderEnabled=e),type:"checkbox",onChange:S},null,544),[[w,c.value.screenReaderEnabled]]),t[27]||(t[27]=g(" ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œã‚’æœ‰åŠ¹åŒ– ",-1))])]),f("div",he,[f("label",me,[b(f("input",{id:"audio-descriptions","onUpdate:modelValue":t[8]||(t[8]=e=>c.value.audioDescriptions=e),type:"checkbox",onChange:S},null,544),[[w,c.value.audioDescriptions]]),t[28]||(t[28]=g(" éŸ³å£°èª¬æ˜ã‚’æœ‰åŠ¹åŒ– ",-1))])]),f("div",ve,[t[29]||(t[29]=f("label",{for:"sound-volume"},"åŠ¹æœéŸ³ã®éŸ³é‡",-1)),b(f("input",{id:"sound-volume","onUpdate:modelValue":t[9]||(t[9]=e=>c.value.soundEffectsVolume=e),type:"range",min:"0",max:"100",step:"5",onChange:S},null,544),[[k,c.value.soundEffectsVolume,void 0,{number:!0}]]),f("span",fe,y(c.value.soundEffectsVolume)+"%",1)])]),f("section",be,[t[35]||(t[35]=f("h3",null,"ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³è¨­å®š",-1)),f("div",ge,[f("label",ye,[b(f("input",{id:"sticky-keys","onUpdate:modelValue":t[10]||(t[10]=e=>c.value.stickyKeys=e),type:"checkbox",onChange:S},null,544),[[w,c.value.stickyKeys]]),t[31]||(t[31]=g(" ã‚¹ãƒ†ã‚£ãƒƒã‚­ãƒ¼ã‚­ãƒ¼ ",-1))]),t[32]||(t[32]=f("span",{class:"setting-description"}," ä¿®é£¾ã‚­ãƒ¼ã‚’ä¸€åº¦ã«æŠ¼ã™å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ ",-1))]),f("div",xe,[t[34]||(t[34]=f("label",{for:"touch-target-size"},"ã‚¿ãƒƒãƒã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚µã‚¤ã‚º",-1)),b(f("select",{id:"touch-target-size","onUpdate:modelValue":t[11]||(t[11]=e=>c.value.touchTargetSize=e),onChange:S},t[33]||(t[33]=[f("option",{value:"default"},"æ¨™æº–ï¼ˆ44pxï¼‰",-1),f("option",{value:"large"},"å¤§ï¼ˆ56pxï¼‰",-1),f("option",{value:"extra-large"},"ç‰¹å¤§ï¼ˆ72pxï¼‰",-1)]),544),[[x,c.value.touchTargetSize]])])])]),f("div",we,[f("button",{class:"reset-button","aria-label":"ã™ã¹ã¦ã®è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆ",onClick:L}," è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆ "),f("button",{class:"save-button","aria-label":"è¨­å®šã‚’ä¿å­˜ã—ã¦é–‰ã˜ã‚‹",onClick:t[12]||(t[12]=e=>a("close"))}," ä¿å­˜ã—ã¦é–‰ã˜ã‚‹ ")])])])):m("",!0)]),_:1}))}}),[["__scopeId","data-v-a0f37523"]]);class Ce{constructor(e={}){t(this,"focusedElement",null),t(this,"indicator"),t(this,"options"),this.options={color:e.color||"#818CF8",width:e.width||3,style:e.style||"solid",offset:e.offset||4,borderRadius:e.borderRadius||8},this.indicator=this.createIndicator(),document.body.appendChild(this.indicator),this.setupEventListeners()}createIndicator(){const e=document.createElement("div");return e.className="focus-indicator",e.style.cssText=`\n      position: fixed;\n      pointer-events: none;\n      z-index: 10000;\n      transition: all 200ms cubic-bezier(0.25, 0.46, 0.45, 0.94);\n      opacity: 0;\n      border: ${this.options.width}px ${this.options.style} ${this.options.color};\n      border-radius: ${this.options.borderRadius}px;\n      box-shadow: 0 0 20px rgba(129, 140, 248, 0.4);\n    `,e}setupEventListeners(){document.addEventListener("focusin",this.handleFocusIn.bind(this)),document.addEventListener("focusout",this.handleFocusOut.bind(this)),window.addEventListener("scroll",this.updatePosition.bind(this),!0),window.addEventListener("resize",this.updatePosition.bind(this)),new MutationObserver(()=>{this.focusedElement&&this.updatePosition()}).observe(document.body,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["style","class"]})}handleFocusIn(e){const t=e.target;this.isFocusableElement(t)&&(this.focusedElement=t,this.showIndicator(t))}handleFocusOut(){this.focusedElement=null,this.hideIndicator()}isFocusableElement(e){return["button","input","select","textarea","a[href]",'[tabindex]:not([tabindex="-1"])',"[contenteditable]"].some(t=>e.matches(t)||e.closest(t))}showIndicator(e){const t=e.getBoundingClientRect(),n=this.options.offset;this.indicator.style.left=t.left-n+"px",this.indicator.style.top=t.top-n+"px",this.indicator.style.width=`${t.width+2*n}px`,this.indicator.style.height=`${t.height+2*n}px`,this.indicator.style.opacity="1";const a=window.getComputedStyle(e).borderRadius;a&&"0px"!==a&&(this.indicator.style.borderRadius=a)}hideIndicator(){this.indicator.style.opacity="0"}updatePosition(){this.focusedElement&&this.focusedElement===document.activeElement&&this.showIndicator(this.focusedElement)}setOptions(e){Object.assign(this.options,e),this.indicator.style.border=`${this.options.width}px ${this.options.style} ${this.options.color}`,this.indicator.style.borderRadius=`${this.options.borderRadius}px`,this.focusedElement&&this.updatePosition()}destroy(){this.indicator.remove(),document.removeEventListener("focusin",this.handleFocusIn.bind(this)),document.removeEventListener("focusout",this.handleFocusOut.bind(this)),window.removeEventListener("scroll",this.updatePosition.bind(this),!0),window.removeEventListener("resize",this.updatePosition.bind(this))}}const Ee={key:0,class:"keyboard-hints",role:"tooltip","aria-live":"polite"},Se={class:"hints-list"},_e={class:"hint-key"},Le={class:"hint-description"},Te={key:0,class:"settings-panel"},$e=["value"],Me=["value"],Ie=U(n({__name:"VisualIndicators",props:{enabled:{type:Boolean,default:!0},color:{default:"#818CF8"},width:{default:3},style:{default:"solid"},offset:{default:4},borderRadius:{default:8},showKeyboardHints:{type:Boolean,default:!0},reducedMotion:{type:Boolean,default:!1}},setup(e,{expose:t}){const n=e,c=d(n.enabled),p=d({color:n.color,width:n.width,style:n.style,offset:n.offset,borderRadius:n.borderRadius});let h=null;const v=d(!1),x=d(null),k=a(()=>({"--focus-color":p.value.color,"--focus-width":`${p.value.width}px`,"--focus-offset":`${p.value.offset}px`,"--focus-radius":`${p.value.borderRadius}px`})),$=a(()=>[{key:"Tab",description:"æ¬¡ã®è¦ç´ ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹"},{key:"Shift + Tab",description:"å‰ã®è¦ç´ ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹"},{key:"Enter",description:"é¸æŠã—ãŸè¦ç´ ã‚’å®Ÿè¡Œ"},{key:"Space",description:"ãƒœã‚¿ãƒ³ã‚„ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’æ“ä½œ"},{key:"Arrow Keys",description:"ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚„é¸æŠè‚¢ã‚’ç§»å‹•"},{key:"Escape",description:"ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚„ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹"}]),M=()=>{c.value&&!h&&(h=new Ce(p.value))},I=()=>{h&&(h.destroy(),h=null)},A=()=>{h&&h.setOptions(p.value)},F=()=>{n.showKeyboardHints&&(v.value=!0,x.value&&clearTimeout(x.value),x.value=window.setTimeout(()=>{v.value=!1},5e3))},D=()=>{v.value=!1,x.value&&(clearTimeout(x.value),x.value=null)},P=e=>{"Tab"===e.key&&F()},R=e=>{Object.assign(p.value,e),A()},z=()=>{c.value=!c.value,c.value?M():I()};return u(()=>{M(),document.addEventListener("keydown",P),window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(p.value={...p.value,offset:2},A())}),C(()=>{I(),document.removeEventListener("keydown",P),x.value&&clearTimeout(x.value)}),t({updateSettings:R,toggleEnabled:z,showKeyboardHints:F,hideKeyboardHints:D}),(e,t)=>(i(),s("div",{class:S(["visual-indicators",{"reduced-motion":e.reducedMotion,"hints-visible":v.value}]),style:E(k.value)},[o(r,{name:"hints-fade"},{default:l(()=>[v.value&&F?(i(),s("div",Ee,[f("div",{class:"hints-header"},[t[3]||(t[3]=f("h3",{class:"hints-title"},"ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ",-1)),f("button",{class:"hints-close","aria-label":"ãƒ’ãƒ³ãƒˆã‚’é–‰ã˜ã‚‹",onClick:D}," Ã— ")]),f("ul",Se,[(i(!0),s(_,null,L($.value,e=>(i(),s("li",{key:e.key,class:"hint-item"},[f("kbd",_e,y(e.key),1),f("span",Le,y(e.description),1)]))),128))])])):m("",!0)]),_:1}),T(!1)?(i(),s("div",Te,[t[7]||(t[7]=f("h4",null,"ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼è¨­å®š",-1)),f("label",null,[b(f("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),type:"checkbox",onChange:z},null,544),[[w,c.value]]),t[4]||(t[4]=g(" æœ‰åŠ¹ ",-1))]),f("label",null,[t[5]||(t[5]=g(" è‰²: ",-1)),f("input",{value:p.value.color,type:"color",onInput:t[1]||(t[1]=e=>R({color:e.target.value}))},null,40,$e)]),f("label",null,[t[6]||(t[6]=g(" å¹…: ",-1)),f("input",{value:p.value.width,type:"range",min:"1",max:"10",onInput:t[2]||(t[2]=e=>R({width:parseInt(e.target.value)}))},null,40,Me)])])):m("",!0)],6))}}),[["__scopeId","data-v-3bb81bcd"]]),Ae=["data-severity"],Fe={key:0,class:"error-minimal"},De={key:1,class:"error-detailed"},Pe={class:"error-user-message"},Re={class:"error-actions"},ze=["disabled"],je={key:0,class:"error-details"},Ve={class:"error-technical"},Ne={key:0,class:"error-stack"},Oe={key:2,class:"error-custom"},Be=U(n({__name:"ErrorBoundary",props:{fallback:{default:"detailed"},onError:{},canRecover:{type:Boolean,default:!0},recoveryMessage:{default:"ã‚¨ãƒ©ãƒ¼ã‹ã‚‰å›å¾©ã™ã‚‹ã«ã¯ã€ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„"}},emits:["error","recover"],setup(e,{emit:t}){const n=e,o=t,r=d(!1),l=d(null),u=d(""),p=d(0),h=d(!1),v=a(()=>{if(!l.value)return"low";const e=l.value.message.toLowerCase();return e.includes("cannot read")||e.includes("undefined")?"high":e.includes("network")||e.includes("fetch")?"medium":"low"}),b=a(()=>{if(!l.value)return"";const e=l.value.message;return e.includes("dynamically imported module")||e.includes("Failed to fetch")?"ã‚¢ãƒ—ãƒªã®ä¸€éƒ¨ãŒèª­ã¿è¾¼ã‚ã¾ã›ã‚“ã§ã—ãŸã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„":e.includes("Network")||e.includes("fetch")?"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸ":e.includes("Cannot read")||e.includes("Cannot access")?"ç”»é¢ã®è¡¨ç¤ºä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ":e.includes("undefined")||e.includes("null")?"ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ":e.includes("timeout")?"å‡¦ç†ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„":e.includes("Permission denied")||e.includes("CORS")?"ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“":"äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ"});$((e,t,a)=>(console.error("[ErrorBoundary] Caught error:",e),console.error("[ErrorBoundary] Error info:",a),console.error("[ErrorBoundary] Component instance:",t),r.value=!0,l.value=e,u.value=a,p.value++,n.onError&&n.onError(e,t,a),o("error",e,a),!1));const x=async()=>{h.value=!0;try{r.value=!1,l.value=null,u.value="",o("recover"),await new Promise(e=>setTimeout(e,100))}catch(e){console.error("[ErrorBoundary] Recovery failed:",e),r.value=!0}finally{h.value=!1}},w=()=>{window.location.reload()},k=async()=>{if(!l.value)return;const e=`\nã‚¨ãƒ©ãƒ¼: ${l.value.message}\nã‚¹ã‚¿ãƒƒã‚¯: ${l.value.stack||"N/A"}\næƒ…å ±: ${u.value}\næ™‚åˆ»: ${(new Date).toISOString()}\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ: ${navigator.userAgent}\n  `.trim();try{await navigator.clipboard.writeText(e),console.info("ã‚¨ãƒ©ãƒ¼è©³ç´°ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ")}catch(t){console.error("Failed to copy error details:",t)}},C=()=>{if(!l.value)return;const e=new CustomEvent("app:send-error-report",{detail:{error:l.value,info:u.value,component:"ErrorBoundary"}});window.dispatchEvent(e),console.info("ã‚¨ãƒ©ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆã‚’é€ä¿¡ã—ã¾ã—ãŸ")};return(e,t)=>r.value?(i(),s("div",{key:0,class:"error-boundary","data-severity":v.value},["minimal"===e.fallback?(i(),s("div",Fe,[t[0]||(t[0]=f("p",{class:"error-message"},"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",-1)),f("button",{class:"error-action-btn",onClick:w}," ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ ")])):"detailed"===e.fallback?(i(),s("div",De,[t[5]||(t[5]=M('<div class="error-icon" aria-hidden="true" data-v-e0c6feb8><svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" data-v-e0c6feb8><circle cx="12" cy="12" r="10" stroke-width="2" data-v-e0c6feb8></circle><line x1="12" y1="8" x2="12" y2="12" stroke-width="2" data-v-e0c6feb8></line><line x1="12" y1="16" x2="12.01" y2="16" stroke-width="2" data-v-e0c6feb8></line></svg></div><h2 class="error-title" data-v-e0c6feb8>ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</h2>',2)),f("p",Pe,y(b.value),1),f("div",Re,[e.canRecover&&!h.value?(i(),s("button",{key:0,class:"error-action-btn primary",disabled:p.value>3,onClick:x},y(p.value>3?"å›å¾©ã§ãã¾ã›ã‚“":"å›å¾©ã‚’è©¦ã¿ã‚‹"),9,ze)):m("",!0),f("button",{class:"error-action-btn secondary",onClick:w}," ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ ")]),T(!1)?(i(),s("details",je,[t[4]||(t[4]=f("summary",null,"ã‚¨ãƒ©ãƒ¼è©³ç´°ï¼ˆé–‹ç™ºè€…å‘ã‘ï¼‰",-1)),f("div",Ve,[f("p",null,[t[1]||(t[1]=f("strong",null,"ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:",-1)),g(" "+y(l.value?.message),1)]),f("p",null,[t[2]||(t[2]=f("strong",null,"ã‚¨ãƒ©ãƒ¼æƒ…å ±:",-1)),g(" "+y(u.value),1)]),f("p",null,[t[3]||(t[3]=f("strong",null,"ã‚¨ãƒ©ãƒ¼å›æ•°:",-1)),g(" "+y(p.value),1)]),l.value?.stack?(i(),s("pre",Ne,y(l.value.stack),1)):m("",!0),f("div",{class:"error-dev-actions"},[f("button",{class:"error-action-btn small",onClick:k}," è©³ç´°ã‚’ã‚³ãƒ”ãƒ¼ "),f("button",{class:"error-action-btn small",onClick:C}," ãƒ¬ãƒãƒ¼ãƒˆé€ä¿¡ ")])])])):m("",!0)])):"custom"===e.fallback?(i(),s("div",Oe,[c(e.$slots,"error",{error:l.value,retry:x,reload:w},void 0)])):m("",!0)],8,Ae)):c(e.$slots,"default",{key:1},void 0)}}),[["__scopeId","data-v-e0c6feb8"]]),He=new class{constructor(){t(this,"patterns",[]),t(this,"fallbackMessages",new Map),this.initializeDefaultPatterns(),this.initializeFallbackMessages()}initializeDefaultPatterns(){this.patterns.push({id:"network-offline",pattern:/network|offline|connection/i,message:{title:"ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šãŒåˆ‡æ–­ã•ã‚Œã¦ã„ã¾ã™",description:"ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ã€ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚",actionLabel:"å†è©¦è¡Œ",actionType:"retry",icon:"ğŸ“¡",severity:"error",helpUrl:"/help/network-issues"},conditions:{category:["network"]}}),this.patterns.push({id:"network-timeout",pattern:/timeout|slow/i,message:{title:"æ¥ç¶šãŒé…ããªã£ã¦ã„ã¾ã™",description:"ã‚µãƒ¼ãƒãƒ¼ã¸ã®æ¥ç¶šã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã¾ã™ã€‚ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚",actionLabel:"ã‚‚ã†ä¸€åº¦è©¦ã™",actionType:"retry",icon:"â°",severity:"warning"},conditions:{category:["network","async"]}}),this.patterns.push({id:"game-save-failed",pattern:/save|storage|quota/i,message:{title:"ã‚²ãƒ¼ãƒ ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ",description:"ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å®¹é‡ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚",actionLabel:"ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ç¢ºèª",actionType:"navigate",actionData:{url:"/settings/storage"},icon:"ğŸ’¾",severity:"error",showDetails:!0},conditions:{category:["game","system"]}}),this.patterns.push({id:"game-state-corrupted",pattern:/corrupted|invalid.*state|cannot.*read.*game/i,message:{title:"ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã«å•é¡ŒãŒã‚ã‚Šã¾ã™",description:"ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ãŒç ´æã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æ–°ã—ã„ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚",actionLabel:"æ–°ã—ã„ã‚²ãƒ¼ãƒ ",actionType:"navigate",actionData:{url:"/new-game"},icon:"ğŸ®",severity:"critical",showDetails:!0},conditions:{category:["game"],severity:["high","critical"]}}),this.patterns.push({id:"ui-component-error",pattern:/component|render|mount/i,message:{title:"ç”»é¢ã®è¡¨ç¤ºã‚¨ãƒ©ãƒ¼",description:"ç”»é¢ã®ä¸€éƒ¨ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã™ã‚‹ã¨è§£æ±ºã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸ–¥ï¸",severity:"warning"},conditions:{category:["vue"]}}),this.patterns.push({id:"performance-memory",pattern:/memory|heap|stack.*overflow/i,message:{title:"ãƒ¡ãƒ¢ãƒªä¸è¶³ã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™",description:"ä»–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‰ã˜ã¦ã€ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ã—ã¦ãã ã•ã„ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"âš¡",severity:"error",helpUrl:"/help/performance"},conditions:{category:["performance","system"]}}),this.patterns.push({id:"security-cors",pattern:/cors|cross.*origin|blocked/i,message:{title:"ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ¶é™ãŒç™ºç”Ÿã—ã¾ã—ãŸ",description:"ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã«ã‚ˆã‚Šã€ä¸€éƒ¨ã®æ©Ÿèƒ½ãŒåˆ¶é™ã•ã‚Œã¦ã„ã¾ã™ã€‚",actionLabel:"ã‚µãƒãƒ¼ãƒˆã«é€£çµ¡",actionType:"contact",icon:"ğŸ”’",severity:"error",helpUrl:"/help/security-issues"},conditions:{category:["security"]}}),this.patterns.push({id:"js-undefined",pattern:/undefined|null.*property|cannot.*read/i,message:{title:"äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",description:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§äºˆæœŸã—ãªã„å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚é–‹ç™ºãƒãƒ¼ãƒ ã«å ±å‘Šã•ã‚Œã¾ã™ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"âš ï¸",severity:"error",showDetails:!0},conditions:{category:["javascript"],severity:["high","critical"]}}),this.patterns.push({id:"resource-load-failed",pattern:/loading|chunk.*error|failed.*fetch.*resource/i,message:{title:"ãƒªã‚½ãƒ¼ã‚¹ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ",description:"ãƒšãƒ¼ã‚¸ã®ä¸€éƒ¨ã®ãƒªã‚½ãƒ¼ã‚¹ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸ“¦",severity:"warning"},conditions:{category:["network","system"]}})}initializeFallbackMessages(){this.fallbackMessages.set("network",{title:"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼",description:"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"å†è©¦è¡Œ",actionType:"retry",icon:"ğŸŒ",severity:"error"}),this.fallbackMessages.set("vue",{title:"UI ã‚¨ãƒ©ãƒ¼",description:"ç”»é¢ã®è¡¨ç¤ºã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸ–¼ï¸",severity:"warning"}),this.fallbackMessages.set("javascript",{title:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼",description:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"âš™ï¸",severity:"error"}),this.fallbackMessages.set("game",{title:"ã‚²ãƒ¼ãƒ ã‚¨ãƒ©ãƒ¼",description:"ã‚²ãƒ¼ãƒ ä¸­ã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"ã‚²ãƒ¼ãƒ ã‚’å†é–‹",actionType:"retry",icon:"ğŸ®",severity:"error"}),this.fallbackMessages.set("async",{title:"å‡¦ç†ã‚¨ãƒ©ãƒ¼",description:"éåŒæœŸå‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"å†è©¦è¡Œ",actionType:"retry",icon:"â³",severity:"warning"}),this.fallbackMessages.set("performance",{title:"ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å•é¡Œ",description:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å‹•ä½œãŒé‡ããªã£ã¦ã„ã¾ã™ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸš€",severity:"warning"}),this.fallbackMessages.set("security",{title:"ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¨ãƒ©ãƒ¼",description:"ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ¶é™ã«ã‚ˆã‚Šæ“ä½œãŒåˆ¶é™ã•ã‚Œã¾ã—ãŸã€‚",actionLabel:"ã‚µãƒãƒ¼ãƒˆã«é€£çµ¡",actionType:"contact",icon:"ğŸ”",severity:"error"}),this.fallbackMessages.set("user",{title:"ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã‚¨ãƒ©ãƒ¼",description:"æ“ä½œã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"ã‚‚ã†ä¸€åº¦è©¦ã™",actionType:"retry",icon:"ğŸ‘¤",severity:"info"}),this.fallbackMessages.set("system",{title:"ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼",description:"ã‚·ã‚¹ãƒ†ãƒ ã§å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸ–¥ï¸",severity:"error"})}generateUserMessage(e){for(const n of this.patterns)if(this.matchesPattern(e,n))return this.enrichMessage(n.message,e);const t=this.fallbackMessages.get(e.category);return t?this.enrichMessage(t,e):this.enrichMessage({title:"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",description:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãæ™‚é–“ã‚’ãŠã„ã¦ã‹ã‚‰å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"â—",severity:"error"},e)}matchesPattern(e,t){if(!(t.pattern instanceof RegExp?t.pattern.test(e.message):e.message.toLowerCase().includes(t.pattern.toLowerCase())))return!1;if(t.conditions){const{category:n,severity:a,context:s}=t.conditions;if(n&&!n.includes(e.category))return!1;if(a&&!a.includes(e.severity))return!1;if(s&&!s(e))return!1}return!0}enrichMessage(e,t){return new Date(t.timestamp).toLocaleTimeString(),{...e,description:`${e.description}${t.context?.deviceInfo?.isMobile?" (ãƒ¢ãƒã‚¤ãƒ«)":""}`,actionData:{...e.actionData,timestamp:t.timestamp,errorId:t.fingerprint,component:t.component}}}addPattern(e){this.patterns.some(t=>t.id===e.id)?console.warn(`Pattern with id "${e.id}" already exists`):this.patterns.unshift(e)}removePattern(e){const t=this.patterns.findIndex(t=>t.id===e);return-1!==t&&(this.patterns.splice(t,1),!0)}getPatterns(){return[...this.patterns]}previewMessage(e,t,n="medium"){const a={message:e,category:t,severity:n,timestamp:Date.now(),userAgent:navigator.userAgent};return this.generateUserMessage(a)}getStats(){return{patternsCount:this.patterns.length,categoriesCount:this.fallbackMessages.size,patterns:this.patterns.map(e=>({id:e.id,hasConditions:Boolean(e.conditions)}))}}},Ge={class:"error-notification-container",role:"alert","aria-live":"polite"},Ke=["aria-label"],Ue={class:"notification-content"},Qe={class:"notification-icon","aria-hidden":"true"},qe={class:"notification-body"},Je={class:"notification-title"},We={class:"notification-description"},Ze={key:0,class:"notification-actions"},Ye=["onClick"],Xe=["onClick"],et=["onClick"],tt={key:1,class:"notification-details"},nt={class:"detail-section"},at={key:0,class:"detail-section"},st={class:"detail-section"},it={class:"detail-tag"},ot={class:"detail-tag"},rt={key:1,class:"detail-section"},lt={class:"detail-section"},ct=["aria-label","onClick"],dt=U(n({__name:"ErrorNotification",setup(e,{expose:t}){const n=d([]),r=e=>{const t=`${Date.now()}-${Math.random()}`,a={...e,id:t,timestamp:Date.now(),autoHide:e.autoHide??"critical"!==e.userMessage.severity,hideDelay:e.hideDelay??5e3,isExpanded:!1};n.value.unshift(a),n.value.length>3&&(n.value=n.value.slice(0,3)),a.autoHide&&setTimeout(()=>{c(t)},a.hideDelay)},c=e=>{const t=n.value.findIndex(t=>t.id===e);-1!==t&&n.value.splice(t,1)},p=e=>{const t=e.detail;if(n.value.some(e=>e.originalError.fingerprint===t.fingerprint))return;const a=He.generateUserMessage(t);r({userMessage:a,originalError:t})},v=e=>{switch(e){case"critical":return"ğŸš¨";case"error":return"âš ï¸";case"warning":return"â„¹ï¸";case"info":return"ğŸ’¡"}},b=e=>{switch(e){case"critical":return"notification-critical";case"error":return"notification-error";case"warning":return"notification-warning";case"info":return"notification-info"}},x=e=>{const{actionType:t,actionData:n}=e.userMessage;switch(t){case"reload":window.location.reload();break;case"retry":const t=new CustomEvent("app:retry-action",{detail:{errorId:n?.errorId,component:n?.component}});window.dispatchEvent(t),c(e.id);break;case"navigate":n?.url&&(window.location.href=n.url);break;case"contact":const a=new CustomEvent("app:open-support",{detail:{errorInfo:e.originalError}});window.dispatchEvent(a);break;default:c(e.id)}},w=e=>{const t=n.value.find(t=>t.id===e);t&&(t.isExpanded=!t.isExpanded)},k=a(()=>n.value.map((e,t)=>({...e,offset:t*(e.isExpanded?120:80),opacity:t<3?1:.5})));return u(()=>{window.addEventListener("app:error",p),window.addEventListener("app:system-alert",e=>{const{message:t}=e.detail;r({userMessage:{title:"ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ©ãƒ¼ãƒˆ",description:t,actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸš€",severity:"critical",showDetails:!1},originalError:{message:t,category:"system",severity:"critical",timestamp:Date.now(),userAgent:navigator.userAgent},autoHide:!1})})}),C(()=>{window.removeEventListener("app:error",p),window.removeEventListener("app:system-alert",()=>{})}),t({addNotification:r,removeNotification:c,clearAll:()=>{n.value=[]},executeAction:x,toggleDetails:w}),(e,t)=>(i(),h(A,{to:"body"},[f("div",Ge,[o(I,{name:"notification",tag:"div"},{default:l(()=>[(i(!0),s(_,null,L(k.value,(e,n)=>{return i(),s("div",{key:e.id,class:S(["error-notification",b(e.userMessage.severity),{expanded:e.isExpanded}]),style:E({transform:`translateY(${e.offset}px)`,opacity:e.opacity,zIndex:1e3-n}),role:"alertdialog","aria-label":`${e.userMessage.severity}ã‚¨ãƒ©ãƒ¼: ${e.userMessage.title}`},[f("div",Ue,[f("span",Qe,y((a=e.userMessage,a.icon||v(a.severity))),1),f("div",qe,[f("h4",Je,y(e.userMessage.title),1),f("p",We,y(e.userMessage.description),1),e.userMessage.actionLabel?(i(),s("div",Ze,[f("button",{class:"notification-action-btn primary",onClick:t=>x(e)},y(e.userMessage.actionLabel),9,Ye),e.userMessage.helpUrl?(i(),s("button",{key:0,class:"notification-action-btn secondary small",onClick:t=>{return n=e.userMessage.helpUrl,void window.open(n,"_blank","noopener,noreferrer");var n}}," ãƒ˜ãƒ«ãƒ— ",8,Xe)):m("",!0),e.userMessage.showDetails?(i(),s("button",{key:1,class:"notification-action-btn secondary small",onClick:t=>w(e.id)},y(e.isExpanded?"è©³ç´°ã‚’éš ã™":"è©³ç´°ã‚’è¡¨ç¤º"),9,et)):m("",!0)])):m("",!0),e.isExpanded&&e.userMessage.showDetails?(i(),s("div",tt,[f("div",nt,[t[0]||(t[0]=f("strong",null,"ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:",-1)),f("code",null,y(e.originalError.message),1)]),e.originalError.component?(i(),s("div",at,[t[1]||(t[1]=f("strong",null,"ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ:",-1)),f("code",null,y(e.originalError.component),1)])):m("",!0),f("div",st,[t[2]||(t[2]=f("strong",null,"ã‚«ãƒ†ã‚´ãƒª:",-1)),f("span",it,y(e.originalError.category),1),t[3]||(t[3]=f("strong",null,"æ·±åˆ»åº¦:",-1)),f("span",ot,y(e.originalError.severity),1)]),e.originalError.context?.route?(i(),s("div",rt,[t[4]||(t[4]=f("strong",null,"ãƒšãƒ¼ã‚¸:",-1)),f("code",null,y(e.originalError.context.route),1)])):m("",!0),f("div",lt,[t[5]||(t[5]=f("strong",null,"æ™‚åˆ»:",-1)),g(" "+y(new Date(e.originalError.timestamp).toLocaleString()),1)])])):m("",!0)]),f("button",{class:"notification-close","aria-label":`é€šçŸ¥ã‚’é–‰ã˜ã‚‹: ${e.userMessage.title}`,onClick:t=>c(e.id)},t[6]||(t[6]=[f("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[f("line",{x1:"18",y1:"6",x2:"6",y2:"18","stroke-width":"2"}),f("line",{x1:"6",y1:"6",x2:"18",y2:"18","stroke-width":"2"})],-1)]),8,ct)]),e.autoHide?(i(),s("div",{key:0,class:"notification-progress",style:E({animationDuration:`${e.hideDelay}ms`})},null,4)):m("",!0)],14,Ke);var a}),128))]),_:1})])]))}}),[["__scopeId","data-v-eac2682b"]]);function ut(e){if("string"!=typeof e)throw new Error("å…¥åŠ›ã¯æ–‡å­—åˆ—ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™");return e.replace(/<[^>]*>/g,"").replace(/javascript:/gi,"").replace(/on\w+\s*=/gi,"").replace(/[<>"'&]/g,e=>({"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","&":"&amp;"}[e]||e)).replace(/[\u0002-\u001F\u007F-\u009F]/g,"").trim().slice(0,1e3)}class pt{constructor(){t(this,"focusableElements",[]),t(this,"currentFocusIndex",-1),t(this,"shortcuts",new Map),t(this,"isActive",!0),t(this,"focusVisibleEnabled",!0),this.setupEventListeners(),this.setupFocusVisible()}registerFocusableElement(e,t={}){const n={element:e,priority:t.priority||0,group:t.group,onFocus:t.onFocus,onBlur:t.onBlur,onActivate:t.onActivate},a=this.focusableElements.findIndex(t=>t.element===e);a>=0?this.focusableElements[a]=n:this.focusableElements.push(n),this.focusableElements.sort((e,t)=>t.priority-e.priority),this.setupElementAccessibility(e)}unregisterFocusableElement(e){const t=this.focusableElements.findIndex(t=>t.element===e);t>=0&&(this.focusableElements.splice(t,1),this.currentFocusIndex>=t&&(this.currentFocusIndex=Math.max(0,this.currentFocusIndex-1)))}registerShortcut(e){const t=this.createShortcutKey(e.key,e.modifiers||[]);this.shortcuts.set(t,e)}unregisterShortcut(e,t=[]){const n=this.createShortcutKey(e,t);this.shortcuts.delete(n)}focusNext(){0!==this.focusableElements.length&&(this.currentFocusIndex=(this.currentFocusIndex+1)%this.focusableElements.length,this.setFocus(this.currentFocusIndex))}focusPrevious(){0!==this.focusableElements.length&&(this.currentFocusIndex=this.currentFocusIndex<=0?this.focusableElements.length-1:this.currentFocusIndex-1,this.setFocus(this.currentFocusIndex))}focusGroup(e){const t=this.focusableElements.filter(t=>t.group===e);if(t.length>0){const e=this.focusableElements.indexOf(t[0]);e>=0&&(this.currentFocusIndex=e,this.setFocus(e))}}focusElement(e){const t=this.focusableElements.findIndex(t=>t.element===e);t>=0&&(this.currentFocusIndex=t,this.setFocus(t))}getCurrentFocusedElement(){return this.currentFocusIndex>=0&&this.currentFocusIndex<this.focusableElements.length?this.focusableElements[this.currentFocusIndex].element:null}startFocusTrap(e){const t=this.focusableElements.filter(t=>e.contains(t.element));t.length>0&&(this.focusableElements.forEach(t=>{e.contains(t.element)||(t.element.setAttribute("tabindex","-1"),t.element.setAttribute("aria-hidden","true"))}),this.focusElement(t[0].element))}endFocusTrap(){this.focusableElements.forEach(e=>{e.element.removeAttribute("tabindex"),e.element.removeAttribute("aria-hidden")})}toggleHelp(){const e=this.createHelpPanel();document.body.appendChild(e);const t=n=>{"Escape"===n.key&&(e.remove(),document.removeEventListener("keydown",t))};document.addEventListener("keydown",t);const n=e.querySelector("button");n&&n.focus()}createSkipLinks(){const e=document.createElement("div");e.className="skip-links",e.setAttribute("aria-label","ã‚¹ã‚­ãƒƒãƒ—ãƒªãƒ³ã‚¯");const t=this.createSkipLink("ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ç§»å‹•","#main-content"),n=this.createSkipLink("ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã«ç§»å‹•","#navigation"),a=this.createSkipLink("ãƒ•ãƒƒã‚¿ãƒ¼ã«ç§»å‹•","#footer");return e.appendChild(t),e.appendChild(n),e.appendChild(a),e}setActive(e){if(this.isActive=e,!e){const e=this.getCurrentFocusedElement();e&&e.blur()}}setFocusVisible(e){this.focusVisibleEnabled=e,document.documentElement.classList.toggle("keyboard-navigation",e)}setupEventListeners(){document.addEventListener("keydown",this.handleKeyDown.bind(this)),document.addEventListener("focusin",this.handleFocusIn.bind(this)),document.addEventListener("focusout",this.handleFocusOut.bind(this)),document.addEventListener("mousedown",()=>{document.documentElement.classList.remove("keyboard-navigation")})}handleKeyDown(e){if(!this.isActive)return;const t=this.createShortcutKey(e.key,this.getActiveModifiers(e)),n=this.shortcuts.get(t);if(n)return e.preventDefault(),void n.action();switch(e.key){case"Tab":e.preventDefault(),e.shiftKey?this.focusPrevious():this.focusNext();break;case"ArrowDown":case"ArrowRight":e.preventDefault(),this.focusNext();break;case"ArrowUp":case"ArrowLeft":e.preventDefault(),this.focusPrevious();break;case"Home":e.preventDefault(),this.currentFocusIndex=0,this.setFocus(0);break;case"End":e.preventDefault(),this.currentFocusIndex=this.focusableElements.length-1,this.setFocus(this.currentFocusIndex);break;case"Enter":case" ":const t=this.getCurrentFocusedElement();if(t){e.preventDefault();const n=this.focusableElements[this.currentFocusIndex];n.onActivate?n.onActivate():t.click()}break;case"F1":e.preventDefault(),this.toggleHelp()}}handleFocusIn(e){if(!this.focusVisibleEnabled)return;const t=e.target,n=this.focusableElements.findIndex(e=>e.element===t);if(n>=0){this.currentFocusIndex=n;const e=this.focusableElements[n];e.onFocus&&e.onFocus(),document.documentElement.classList.add("keyboard-navigation")}}handleFocusOut(e){const t=e.target,n=this.focusableElements.findIndex(e=>e.element===t);if(n>=0){const e=this.focusableElements[n];e.onBlur&&e.onBlur()}}setFocus(e){if(e<0||e>=this.focusableElements.length)return;const t=this.focusableElements[e].element;null!==t.offsetParent?(t.focus(),t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})):this.focusNext()}setupElementAccessibility(e){if(e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),!e.hasAttribute("role")){const t=e.tagName.toLowerCase();"div"!==t&&"span"!==t||e.setAttribute("role","button")}if(!e.hasAttribute("aria-label")&&!e.hasAttribute("aria-labelledby")){const t=e.textContent?.trim();t&&e.setAttribute("aria-label",t)}}createShortcutKey(e,t){return`${t.sort().join("+")}+${e.toLowerCase()}`}getActiveModifiers(e){const t=[];return e.ctrlKey&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&t.push("shift"),e.metaKey&&t.push("meta"),t}createSkipLink(e,t){const n=document.createElement("a");return n.href=t,n.textContent=e,n.className="skip-link",n.addEventListener("click",e=>{e.preventDefault();const n=document.querySelector(t);n&&n.focus()}),n}createHelpPanel(){const e=document.createElement("div");e.className="keyboard-help-panel",e.setAttribute("role","dialog"),e.setAttribute("aria-labelledby","help-title"),e.setAttribute("aria-modal","true");const t=Array.from(this.shortcuts.values()),n=document.createElement("div");n.className="help-content";const a=document.createElement("h2");a.id="help-title",a.textContent="ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ";const s=document.createElement("div");s.className="shortcuts-list";const i=document.createElement("div");i.className="shortcut-group";const o=document.createElement("h3");o.textContent="åŸºæœ¬ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³";const r=document.createElement("dl");if([{key:"Tab / Shift+Tab",desc:"æ¬¡/å‰ã®è¦ç´ ã«ç§»å‹•"},{key:"çŸ¢å°ã‚­ãƒ¼",desc:"æ–¹å‘ã«å¿œã˜ã¦ç§»å‹•"},{key:"Enter / Space",desc:"è¦ç´ ã‚’é¸æŠ/å®Ÿè¡Œ"},{key:"Home / End",desc:"æœ€åˆ/æœ€å¾Œã®è¦ç´ ã«ç§»å‹•"}].forEach(({key:e,desc:t})=>{const n=document.createElement("dt");n.textContent=e;const a=document.createElement("dd");a.textContent=t,r.appendChild(n),r.appendChild(a)}),i.appendChild(o),i.appendChild(r),s.appendChild(i),t.length>0){const e=document.createElement("div");e.className="shortcut-group";const n=document.createElement("h3");n.textContent="ã‚²ãƒ¼ãƒ æ“ä½œ";const a=document.createElement("dl");t.forEach(e=>{const t=document.createElement("dt");t.textContent=ut(this.formatShortcut(e));const n=document.createElement("dd");n.textContent=ut(e.description),a.appendChild(t),a.appendChild(n)}),e.appendChild(n),e.appendChild(a),s.appendChild(e)}const l=document.createElement("button");return l.type="button",l.textContent="é–‰ã˜ã‚‹ (Esc)",l.onclick=()=>{e.remove()},n.appendChild(a),n.appendChild(s),n.appendChild(l),e.appendChild(n),e}formatShortcut(e){return[...(e.modifiers||[]).map(e=>e.charAt(0).toUpperCase()+e.slice(1)),e.key].join(" + ")}setupFocusVisible(){const e=document.createElement("style");e.textContent="\n      .keyboard-navigation *:focus {\n        outline: 2px solid #818CF8;\n        outline-offset: 2px;\n        border-radius: 4px;\n      }\n      \n      .skip-links {\n        position: absolute;\n        top: -40px;\n        left: 6px;\n        z-index: 1000;\n      }\n      \n      .skip-link {\n        position: absolute;\n        left: -10000px;\n        top: auto;\n        width: 1px;\n        height: 1px;\n        overflow: hidden;\n        background: #000;\n        color: #fff;\n        padding: 8px 16px;\n        text-decoration: none;\n        border-radius: 4px;\n      }\n      \n      .skip-link:focus {\n        position: static;\n        width: auto;\n        height: auto;\n        left: auto;\n        top: auto;\n      }\n      \n      .keyboard-help-panel {\n        position: fixed;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        background: rgba(0, 0, 0, 0.95);\n        color: white;\n        padding: 2rem;\n        border-radius: 12px;\n        max-width: 500px;\n        max-height: 80vh;\n        overflow-y: auto;\n        z-index: 10000;\n      }\n      \n      .help-content h2 {\n        margin-top: 0;\n        color: #818CF8;\n      }\n      \n      .shortcuts-list dt {\n        font-weight: bold;\n        color: #FFD43B;\n        margin-top: 0.5rem;\n      }\n      \n      .shortcuts-list dd {\n        margin-left: 1rem;\n        margin-bottom: 0.5rem;\n      }\n      \n      .help-content button {\n        margin-top: 1rem;\n        padding: 0.5rem 1rem;\n        background: #818CF8;\n        color: white;\n        border: none;\n        border-radius: 4px;\n        cursor: pointer;\n      }\n    ",document.head.appendChild(e)}destroy(){this.focusableElements=[],this.shortcuts.clear(),document.removeEventListener("keydown",this.handleKeyDown.bind(this)),document.removeEventListener("focusin",this.handleFocusIn.bind(this)),document.removeEventListener("focusout",this.handleFocusOut.bind(this))}}const ht={class:"app-header"},mt=U(n({__name:"AppHeader",setup:e=>(e,t)=>(i(),s("header",ht,t[0]||(t[0]=[M('<div class="hero-section" data-v-8bbf6362><div class="hero-background" data-v-8bbf6362><div class="hero-orb hero-orb-1" data-v-8bbf6362></div><div class="hero-orb hero-orb-2" data-v-8bbf6362></div><div class="hero-orb hero-orb-3" data-v-8bbf6362></div></div><div class="hero-content" data-v-8bbf6362><div class="brand-logo pulse" data-v-8bbf6362><div class="logo-glow" data-v-8bbf6362></div><span class="logo-icon" data-v-8bbf6362>ğŸ›¡ï¸</span></div><h1 class="hero-title bounce-in" style="animation-delay:0.2s;" data-v-8bbf6362> äººç”Ÿå……å®Ÿã‚²ãƒ¼ãƒ  </h1><p class="hero-subtitle bounce-in" style="animation-delay:0.4s;" data-v-8bbf6362> Life Fulfillment - ç”Ÿå‘½ä¿é™ºã‚’ã€Œäººç”Ÿã®å‘³æ–¹ã€ã¨ã—ã¦æã </p><div class="hero-accent bounce-in" style="animation-delay:0.6s;" data-v-8bbf6362><span class="accent-icon" data-v-8bbf6362>âœ¨</span><span class="accent-text" data-v-8bbf6362>ä¸€äººã®æ™‚é–“ã‚’ã€æœ€é«˜ã®å†’é™ºã«</span><span class="accent-icon" data-v-8bbf6362>âœ¨</span></div><div class="hero-stats bounce-in" style="animation-delay:0.8s;" data-v-8bbf6362><div class="stat-item" data-v-8bbf6362><span class="stat-value" data-v-8bbf6362>100+</span><span class="stat-label" data-v-8bbf6362>ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰</span></div><div class="stat-divider" data-v-8bbf6362></div><div class="stat-item" data-v-8bbf6362><span class="stat-value" data-v-8bbf6362>7</span><span class="stat-label" data-v-8bbf6362>äººç”Ÿã‚¹ãƒ†ãƒ¼ã‚¸</span></div><div class="stat-divider" data-v-8bbf6362></div><div class="stat-item" data-v-8bbf6362><span class="stat-value" data-v-8bbf6362>âˆ</span><span class="stat-label" data-v-8bbf6362>ãƒ—ãƒ¬ã‚¤ãƒ‘ã‚¿ãƒ¼ãƒ³</span></div></div></div></div>',1)])))}),[["__scopeId","data-v-8bbf6362"]]),vt={class:"modal-container"},ft={class:"modal-header"},bt=["innerHTML"],gt=U(n({__name:"RulebookModal",props:{isOpen:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const n=e,c=t,b=d(),y=d(),x=a(()=>(()=>{let e="# ãƒ©ã‚¤ãƒ•ãƒ»ã‚¤ãƒ³ã‚·ãƒ¥ã‚¢ãƒ©ãƒ³ã‚¹ãƒ»ã‚µãƒã‚¤ãƒãƒ« (Life Insurance Survival) ãƒ«ãƒ¼ãƒ«ãƒ–ãƒƒã‚¯ã€Ver 3.0ã€‘\n\n## 1. ã‚²ãƒ¼ãƒ ã®æ¦‚è¦\n**ã€Œäººç”Ÿã¯ã€æ”»ã‚ã¨å®ˆã‚Šã®ãƒãƒ©ãƒ³ã‚¹ã ã€‚ã€**\n\nãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯ä¸€äººã®äººé–“ã¨ã—ã¦ã€é’å¹´æœŸã‹ã‚‰å……å®ŸæœŸã¾ã§ã®äººç”Ÿï¼ˆå…¨20ã‚¿ãƒ¼ãƒ³ï¼‰ã‚’æ­©ã¿ã¾ã™ã€‚\né™ã‚‰ã‚ŒãŸã€Œæ´»åŠ›ã€ã‚’ä½¿ã„ã€ã‚­ãƒ£ãƒªã‚¢æ§‹ç¯‰ã‚„å®¶æ—ã¨ã®æ™‚é–“ã¨ã„ã£ãŸã€Œäººç”Ÿã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€ã‚’è¡Œã„ãªãŒã‚‰ã€æ¯ã‚¿ãƒ¼ãƒ³è¨ªã‚Œã‚‹ã€Œè©¦ç·´ï¼ˆãƒãƒ£ãƒ¬ãƒ³ã‚¸ï¼‰ã€ã‚’ä¹—ã‚Šè¶Šãˆã¦ã„ãã¾ã™ã€‚\nã„ã¤è¨ªã‚Œã‚‹ã‹ã‚ã‹ã‚‰ãªã„ãƒªã‚¹ã‚¯ã«ã€Œä¿é™ºã€ã§å‚™ãˆã¤ã¤ã€æœ€çµ‚çš„ãªäººç”Ÿã®ç›®æ¨™ã€Œå¤¢ã€ã®é”æˆã¨ã€å¹¸ç¦ãªäººç”Ÿï¼ˆé«˜ã„ã‚¹ã‚³ã‚¢ï¼‰ã‚’ç›®æŒ‡ã™ã€1äººç”¨ãƒ‡ãƒƒã‚­æ§‹ç¯‰å‹ãƒ©ã‚¤ãƒ•ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚²ãƒ¼ãƒ ã§ã™ã€‚\n\n**ãƒ—ãƒ¬ã‚¤æ™‚é–“**: 15ã€œ30åˆ†  \n**å¯¾è±¡å¹´é½¢**: 14æ­³ä»¥ä¸Š\n\n---\n\n## 2. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆå†…å®¹ç‰©ï¼‰\n\n### ã‚«ãƒ¼ãƒ‰é¡\n| åç§° | èª¬æ˜ |\n|:---|:---|\n| **äººç”Ÿã‚«ãƒ¼ãƒ‰** | è¡Œå‹•ã®åŸºæœ¬ã¨ãªã‚‹ã‚«ãƒ¼ãƒ‰ã€‚åˆæœŸãƒ‡ãƒƒã‚­7æšï¼‹å ±é…¬ã§ç²å¾—ã€‚ |\n| **ä¿é™ºã‚«ãƒ¼ãƒ‰** | ãƒˆãƒ©ãƒ–ãƒ«ã‚„è©¦ç·´ã®å¤±æ•—ã‹ã‚‰èº«ã‚’å®ˆã‚‹ã‚«ãƒ¼ãƒ‰ã€‚å®šæœŸ/çµ‚èº«ã®é¸æŠãŒå¯èƒ½ã€‚ |\n| **è©¦ç·´ã‚«ãƒ¼ãƒ‰** | æ¯ã‚¿ãƒ¼ãƒ³è¨ªã‚Œã‚‹èª²é¡Œã€‚ã€Œå°±è·ã€ã€Œçµå©šã€ã€Œå®¶ã®è³¼å…¥ã€ãªã©ã€‚ |\n| **å¤¢ã‚«ãƒ¼ãƒ‰** | ã‚²ãƒ¼ãƒ ã®æœ€çµ‚ç›®æ¨™ã€‚é–‹å§‹æ™‚ã«3æšã‹ã‚‰1æšé¸ã¶ã€‚ |\n| **è€åŒ–ã‚«ãƒ¼ãƒ‰** | å±±æœ­ãŒå°½ãã‚‹ãŸã³ã«å¼·åˆ¶çš„ã«è¿½åŠ ã•ã‚Œã‚‹ã€Œè¡°ãˆã€ã®ã‚«ãƒ¼ãƒ‰ã€‚ |\n\n### ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿\n- **æ´»åŠ› (Vitality)**: ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ä½“åŠ›ã€‚0ã«ãªã‚‹ã¨ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã€‚\n- **è²¯è“„ (Savings)**: ä½™è£•è³‡é‡‘ã€‚ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’å—ã‘ãŸéš›ã«æ´»åŠ›ã®ä»£ã‚ã‚Šã«ä½¿ç”¨å¯èƒ½ã€‚\n- **ã‚¹ãƒ†ãƒ¼ã‚¸**: é’å¹´æœŸ â†’ ä¸­å¹´æœŸ â†’ å……å®ŸæœŸã®3æ®µéšã€‚\n\n---\n\n## 3. ã‚«ãƒ¼ãƒ‰è©³ç´°\n\n### 3.1 äººç”Ÿã‚«ãƒ¼ãƒ‰ï¼ˆåˆæœŸãƒ‡ãƒƒã‚­7æšï¼‰\nã‚²ãƒ¼ãƒ é–‹å§‹æ™‚ã«æŒã£ã¦ã„ã‚‹ã‚«ãƒ¼ãƒ‰ã§ã™ã€‚\n\n| ã‚«ãƒ¼ãƒ‰å | ã‚³ã‚¹ãƒˆ | ãƒ‘ãƒ¯ãƒ¼ | èª¬æ˜ |\n|:---|:---:|:---:|:---|\n| **æœã®ã‚¸ãƒ§ã‚®ãƒ³ã‚°** | 1 | 2 | å¥åº·çš„ãªä¸€æ—¥ã®å§‹ã¾ã‚Š |\n| **æ „é¤Šãƒãƒ©ãƒ³ã‚¹ã®è‰¯ã„é£Ÿäº‹** | 2 | 4 | ä½“èª¿ç®¡ç†ã®åŸºæœ¬ |\n| **æ–°ã—ã„ã‚¹ã‚­ãƒ«ã®ç¿’å¾—** | 2 | 4 | æˆé•·ã¸ã®æŠ•è³‡ |\n| **ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯** | 1 | 2 | ä»²é–“ã¨ã®å”åŠ› |\n| **å®¶æ—ã¨ã®å›£ã‚‰ã‚“** | 1 | 2 | å¿ƒã®å……é›» |\n| **è¶£å‘³ã®æ™‚é–“** | 1 | 2 | ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã‚¿ã‚¤ãƒ  |\n| **è¨ˆç”»çš„ãªè²¯è“„** | 2 | 4 | å°†æ¥ã¸ã®å‚™ãˆ |\n\n### 3.2 ä¿é™ºã‚«ãƒ¼ãƒ‰\nè©¦ç·´ã®å¤±æ•—ã«ã‚ˆã‚‹ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’è»½æ¸›ã—ãŸã‚Šã€ç‰¹æ®ŠåŠ¹æœã‚’ç™ºæ®ã—ã¾ã™ã€‚\nç²å¾—æ™‚ã«ã€Œå®šæœŸï¼ˆå®‰ã„ãƒ»æœŸé™ä»˜ãï¼‰ã€ã‹ã€Œçµ‚èº«ï¼ˆé«˜ã„ãƒ»æ°¸ç¶šï¼‰ã€ã‹ã‚’é¸æŠã§ãã‚‹ã®ãŒç‰¹å¾´ã§ã™ã€‚\n\n**ä¸»ãªç¨®é¡**:\n- **åŒ»ç™‚ä¿é™º**: ç—…æ°—ã‚„ã‚±ã‚¬ï¼ˆãƒ€ãƒ¡ãƒ¼ã‚¸ï¼‰ã«å‚™ãˆã‚‹ã€‚\n- **ç”Ÿå‘½ä¿é™º**: å®¶æ—ã‚’å®ˆã‚‹ï¼ˆé«˜ã‚«ãƒãƒ¬ãƒƒã‚¸ï¼‰ã€‚\n- **åå…¥ä¿éšœä¿é™º**: åƒã‘ãªããªã£ãŸæ™‚ã«å‚™ãˆã‚‹ã€‚\n\n### 3.3 è©¦ç·´ã‚«ãƒ¼ãƒ‰ï¼ˆChallenge Cardï¼‰\nã‚¹ãƒ†ãƒ¼ã‚¸ã”ã¨ã«é›£æ˜“åº¦ã¨å†…å®¹ãŒå¤‰åŒ–ã—ã¾ã™ã€‚\n- **å ±é…¬**: é›£æ˜“åº¦ã«å¿œã˜ã¦ã€Œä¿é™ºã‚«ãƒ¼ãƒ‰ï¼ˆä½ãƒ»ä¸­é›£æ˜“åº¦ï¼‰ã€ã‚„ã€Œè¿½åŠ ã®äººç”Ÿã‚«ãƒ¼ãƒ‰ï¼ˆé«˜é›£æ˜“åº¦ï¼‰ã€ãŒæ‰‹ã«å…¥ã‚Šã¾ã™ã€‚\n\n### 3.4 è€åŒ–ã‚«ãƒ¼ãƒ‰ï¼ˆAging Cardï¼‰\n- **åŠ¹æœ**: ä½•ã‚‚ç”Ÿã¿å‡ºã•ãªã„ãŠè·ç‰©ã‚«ãƒ¼ãƒ‰ã€‚\n- **ç™ºç”Ÿæ¡ä»¶**: å±±æœ­ï¼ˆPlayer Deckï¼‰ãŒå°½ãã¦ã€æ¨ã¦æœ­ã‹ã‚‰ãƒªã‚·ãƒ£ãƒƒãƒ•ãƒ«ã•ã‚Œã‚‹ãŸã³ã«1æšã€ãƒ‡ãƒƒã‚­ã«è¿½åŠ ã•ã‚Œã¾ã™ã€‚\n- **æˆ¦ç•¥**: ãƒ‡ãƒƒã‚­ã®å›è»¢ãŒé€Ÿã™ãã‚‹ã¨è€åŒ–ã‚‚æ—©ã¾ã‚Šã¾ã™ã€‚\n\n---\n\n## 4. ã‚²ãƒ¼ãƒ ã®æº–å‚™ï¼ˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼‰\n\n1. **ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼é¸æŠ**: ãƒ—ãƒ¬ã‚¤ã™ã‚‹ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’é¸ã³ã¾ã™ï¼ˆåˆæœŸæ´»åŠ›ã‚„è²¯è“„ã«è£œæ­£ã‚ã‚Šï¼‰ã€‚\n2. **å¤¢ã®é¸æŠ**: ãƒ©ãƒ³ãƒ€ãƒ ã«æç¤ºã•ã‚Œã‚‹3æšã®å¤¢ã‚«ãƒ¼ãƒ‰ã‹ã‚‰1æšã‚’é¸ã³ã¾ã™ã€‚ã“ã‚ŒãŒæœ€çµ‚ç›®æ¨™ã¨ãªã‚Šã¾ã™ã€‚\n3. **åˆæœŸãƒ‡ãƒƒã‚­æ§‹ç¯‰**: åˆæœŸäººç”Ÿã‚«ãƒ¼ãƒ‰7æšã‚’æŒã£ã¦ã‚¹ã‚¿ãƒ¼ãƒˆã—ã¾ã™ã€‚\n4. **æ´»åŠ›ã‚»ãƒƒãƒˆ**: ã‚¹ãƒ†ãƒ¼ã‚¸ã€Œé’å¹´æœŸã€ã®æœ€å¤§æ´»åŠ›ï¼ˆåŸºæœ¬100å‰å¾Œï¼‰ã§é–‹å§‹ã—ã¾ã™ã€‚\n\n---\n\n## 5. ã‚²ãƒ¼ãƒ ã®é€²è¡Œ\n\nå…¨20ã‚¿ãƒ¼ãƒ³ï¼ˆè¨­å®šã«ã‚ˆã‚Šå¤‰å‹•ã‚ã‚Šï¼‰ã‚’ç”ŸãæŠœãã“ã¨ãŒç›®æ¨™ã§ã™ã€‚\nå„ã‚¿ãƒ¼ãƒ³ã¯ä»¥ä¸‹ã®ãƒ•ã‚§ãƒ¼ã‚ºã§é€²è¡Œã—ã¾ã™ã€‚\n\n### ãƒ•ã‚§ãƒ¼ã‚º1: ã‚¿ãƒ¼ãƒ³é–‹å§‹ (Start Phase)\n- **æ‰‹æœ­ã®ç ´æ£„**: å‰ã®ã‚¿ãƒ¼ãƒ³ã®æ‰‹æœ­ã¯ã™ã¹ã¦æ¨ã¦æœ­ã«ãªã‚Šã¾ã™ã€‚\n- **ãƒ‰ãƒ­ãƒ¼**: å±±æœ­ã‹ã‚‰ã‚«ãƒ¼ãƒ‰ã‚’5æšå¼•ãã¾ã™ã€‚\n  - å±±æœ­ãŒè¶³ã‚Šãªã„å ´åˆã¯æ¨ã¦æœ­ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ã¦å±±æœ­ã«ã—ã¾ã™ã€‚ã“ã®æ™‚ã€**è€åŒ–ã‚«ãƒ¼ãƒ‰ãŒ1æšè¿½åŠ **ã•ã‚Œã¾ã™ã€‚\n\n### ãƒ•ã‚§ãƒ¼ã‚º2: ã‚¹ãƒ†ãƒ¼ã‚¸ã¨ç¶­æŒè²»ã®ç¢ºèª\n- ç¾åœ¨ã®ã‚¿ãƒ¼ãƒ³æ•°ã«å¿œã˜ã¦ã‚¹ãƒ†ãƒ¼ã‚¸ãŒæ¨ç§»ã—ã¦ã„ãªã„ã‹ç¢ºèªã—ã¾ã™ã€‚\n- **ä¿é™ºæ–™ã®æ”¯æ‰•ã„**: å¥‘ç´„ã—ã¦ã„ã‚‹ä¿é™ºã®ã‚³ã‚¹ãƒˆï¼ˆæ´»åŠ›ï¼‰ã‚’æ”¯æ‰•ã„ã¾ã™ã€‚æ‰•ãˆãªã„ã€ã¾ãŸã¯æ‰•ã„ãŸããªã„å ´åˆã¯è§£ç´„ã¨ãªã‚Šã¾ã™ã€‚\n- **ä¿é™ºã®æœŸé™ç¢ºèª**: å®šæœŸä¿é™ºã®æœŸé™ï¼ˆ5ã‚¿ãƒ¼ãƒ³ï¼‰ãŒåˆ‡ã‚ŒãŸå ´åˆã€ãã®ä¿é™ºã¯å¤±åŠ¹ã—ã¾ã™ã€‚\n\n### ãƒ•ã‚§ãƒ¼ã‚º3: è©¦ç·´ã®é¸æŠ (Challenge Choice Phase)\n- è©¦ç·´ãƒ‡ãƒƒã‚­ã‹ã‚‰**2æš**å¼•ã„ã¦æç¤ºã•ã‚Œã¾ã™ã€‚\n- ãã®ã†ã¡**1æšã‚’é¸ã‚“ã§**æŒ‘æˆ¦ã—ã¾ã™ã€‚é¸ã°ãªã‹ã£ãŸã‚«ãƒ¼ãƒ‰ã¯æ¨ã¦ã‚‰ã‚Œã¾ã™ã€‚\n\n### ãƒ•ã‚§ãƒ¼ã‚º4: ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¨è§£æ±º (Action & Resolution Phase)\n1. **ã‚«ãƒ¼ãƒ‰ãƒ—ãƒ¬ã‚¤**: æ‰‹æœ­ã®äººç”Ÿã‚«ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ï¼ˆã‚³ã‚¹ãƒˆã¨ã—ã¦æ´»åŠ›ã‚’æ¶ˆè²»ï¼‰ã—ã€ãƒ‘ãƒ¯ãƒ¼ã‚’è²¯ã‚ã¾ã™ã€‚\n2. **åˆè¨ˆãƒ‘ãƒ¯ãƒ¼ã®è¨ˆç®—**:\n   - `åˆè¨ˆãƒ‘ãƒ¯ãƒ¼ = (ã‚«ãƒ¼ãƒ‰ã®ãƒ‘ãƒ¯ãƒ¼åˆè¨ˆ) + (ä¿é™ºãƒœãƒ¼ãƒŠã‚¹) - (ä¿é™ºæ–™è² æ‹…)`\n3. **åˆ¤å®š**:\n   - **åˆè¨ˆãƒ‘ãƒ¯ãƒ¼ â‰§ è©¦ç·´ã®ãƒ‘ãƒ¯ãƒ¼**: **æˆåŠŸï¼** å ±é…¬ã‚’ç²å¾—ã—ã¾ã™ã€‚\n   - **åˆè¨ˆãƒ‘ãƒ¯ãƒ¼ < è©¦ç·´ã®ãƒ‘ãƒ¯ãƒ¼**: **å¤±æ•—...** ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’å—ã‘ã¾ã™ã€‚\n\n### ãƒ•ã‚§ãƒ¼ã‚º5: ã‚¿ãƒ¼ãƒ³çµ‚äº†\n- ã‚¿ãƒ¼ãƒ³æ•°ãŒé€²ã¿ã¾ã™ã€‚\n- å…¨20ã‚¿ãƒ¼ãƒ³çµŒéã€ã¾ãŸã¯ç‰¹å®šã®å‹åˆ©æ¡ä»¶ã‚’æº€ãŸã™ã¨ã‚¯ãƒªã‚¢ã¨ãªã‚Šã¾ã™ã€‚\n- æ´»åŠ›ãŒ0ã«ãªã‚‹ã¨ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã§ã™ã€‚\n\n---\n\n## 6. ã‚¹ãƒ†ãƒ¼ã‚¸æ§‹æˆ\n\näººç”Ÿã¯æ™‚é–“ï¼ˆã‚¿ãƒ¼ãƒ³æ•°ï¼‰ã¨å…±ã«ç§»ã‚ã„ã¾ã™ã€‚\n\n### é’å¹´æœŸ (Youth)\n- **æœŸé–“**: ã‚¿ãƒ¼ãƒ³ 0 ã€œ 6\n- **æœ€å¤§æ´»åŠ›**: é«˜ã„ (åŸºæœ¬100ã€œ)\n- **ç‰¹å¾´**: åŸºç¤ã‚’å›ºã‚ã‚‹æ™‚æœŸã€‚æ¯”è¼ƒçš„ç°¡å˜ãªè©¦ç·´ãŒå¤šã„ã€‚\n\n### ä¸­å¹´æœŸ (Middle Age)\n- **æœŸé–“**: ã‚¿ãƒ¼ãƒ³ 7 ã€œ 13\n- **æœ€å¤§æ´»åŠ›**: ä¸­ç¨‹åº¦ (åŸºæœ¬80)ã«æ¸›å°‘\n- **ç‰¹å¾´**: è²¬ä»»ãŒå¢—ã—ã€è©¦ç·´ã®é›£æ˜“åº¦ãŒä¸ŠãŒã‚Šã¾ã™ã€‚\n\n### å……å®ŸæœŸ (Fulfillment)\n- **æœŸé–“**: ã‚¿ãƒ¼ãƒ³ 14 ã€œ 20+\n- **æœ€å¤§æ´»åŠ›**: ä½ã„ (åŸºæœ¬60)ã«æ¸›å°‘\n- **ç‰¹å¾´**: äººç”Ÿã®é›†å¤§æˆã€‚\n\n---\n\n## 7. å‹åˆ©æ¡ä»¶ã¨æ•—åŒ—æ¡ä»¶\n\n### å‹åˆ© (Victory)\n- **ç”Ÿå­˜**: è¦å®šã‚¿ãƒ¼ãƒ³æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ20ã‚¿ãƒ¼ãƒ³ï¼‰ã‚’ç”Ÿãæ®‹ã‚‹ã€‚\n- **å¥åº·**: ãã®æ™‚ç‚¹ã§ä¸€å®šä»¥ä¸Šã®æ´»åŠ›ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ50ä»¥ä¸Šï¼‰ã‚’ç¶­æŒã—ã¦ã„ã‚‹ã“ã¨ã€‚\n\n### æ•—åŒ— (Defeat)\n- **æ´»åŠ›æ¯æ¸‡**: ã‚¿ãƒ¼ãƒ³ä¸­ã«æ´»åŠ›ãŒ0ä»¥ä¸‹ã«ãªã‚‹ã€‚\n\n---\n\n## 8. ãƒ’ãƒ³ãƒˆã¨æˆ¦ç•¥\n\n1. **ä¿é™ºã®ã€Œå®šæœŸã€ã¨ã€Œçµ‚èº«ã€**: è‹¥ã„ã†ã¡ã¯å®‰ã„ã€Œå®šæœŸã€ã§ãƒªã‚¹ã‚¯ã‚’ã‚«ãƒãƒ¼ã—ã€ä½™è£•ãŒã§ããŸã‚‰ã€Œçµ‚èº«ã€ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã®ãŒè³¢ã„æˆ¦ç•¥ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚\n2. **è€åŒ–ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«**: ãƒ‰ãƒ­ãƒ¼ã‚«ãƒ¼ãƒ‰ã‚’ä¹±ç”¨ã—ã™ãã‚‹ã¨ãƒ‡ãƒƒã‚­ã®å›è»¢ãŒæ—©ã¾ã‚Šã€è€åŒ–ã‚«ãƒ¼ãƒ‰ãŒå¢—ãˆã¦ã—ã¾ã„ã¾ã™ã€‚\n3. **è²¯è“„ã®é‡è¦æ€§**: ã„ã–ã¨ã„ã†æ™‚ã€è²¯è“„ã¯ã€Œç¬¬äºŒã®ãƒ©ã‚¤ãƒ•ã€ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚\n".replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/`([^`]+)`/g,"<code>$1</code>").replace(/^### (.+)$/gm,"<h4>$1</h4>").replace(/^## (.+)$/gm,"<h3>$1</h3>").replace(/^# (.+)$/gm,'<h2 class="main-title">$1</h2>').replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>").replace(/\*([^*]+)\*/g,"<em>$1</em>").replace(/^---$/gm,"<hr />").replace(/^- (.+)$/gm,"<li>$1</li>").replace(/\|([^|]+)\|([^|]+)\|([^|]*)\|([^|]*)\|?$/gm,(e,t,n,a,s)=>{const i=[t,n,a,s].filter(e=>void 0!==e&&""!==e.trim()).map(e=>e.trim());return i.every(e=>e.match(/^:?-+:?$/))?"":`<tr>${i.map(e=>`<td>${e}</td>`).join("")}</tr>`}).replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br />");return e=e.replace(/(<li>.*?<\/li>(?:<br \/>)?)+/g,"<ul>$&</ul>"),e=e.replace(/(<tr>.*?<\/tr>(?:<br \/>)?)+/g,'<div class="table-wrapper"><table>$&</table></div>'),e=e.replace(/<br \/><\/p>/g,"</p>"),e=e.replace(/<br \/><h/g,"<h"),e=e.replace(/<\/h(\d)><br \/>/g,"</h$1>"),e=e.replace(/<br \/><hr \/>/g,"<hr />"),e=e.replace(/<hr \/><br \/>/g,"<hr />"),e=e.replace(/<br \/><ul>/g,"<ul>"),e=e.replace(/<\/ul><br \/>/g,"</ul>"),e=e.replace(/<br \/><\/li>/g,"</li>"),e=e.replace(/<br \/><div class="table-wrapper">/g,'<div class="table-wrapper">'),e=e.replace(/<\/table><\/div><br \/>/g,"</table></div>"),e=e.replace(/<\/tr><br \/>/g,"</tr>"),`<div class="markdown-body"><p>${e}</p></div>`})()),w=()=>{c("close")};p(()=>n.isOpen,async e=>{e?(await F(),y.value?.focus(),document.body.style.overflow="hidden",b.value?.scrollTo(0,0)):document.body.style.overflow=""});const k=e=>{"Escape"===e.key&&n.isOpen&&w()};return u(()=>{document.addEventListener("keydown",k)}),C(()=>{document.removeEventListener("keydown",k),document.body.style.overflow=""}),(e,t)=>(i(),h(A,{to:"body"},[o(r,{name:"modal-fade"},{default:l(()=>[e.isOpen?(i(),s("div",{key:0,class:"modal-overlay",role:"dialog","aria-modal":"true","aria-labelledby":"rulebook-title",onClick:v(w,["self"]),onKeydown:D(w,["escape"])},[f("div",vt,[f("header",ft,[t[1]||(t[1]=f("h2",{id:"rulebook-title",class:"modal-title"},[f("span",{class:"title-icon","aria-hidden":"true"},"ğŸ“–"),g(" ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ« ")],-1)),f("button",{class:"close-btn",onClick:w,"aria-label":"é–‰ã˜ã‚‹",ref_key:"closeButtonRef",ref:y},t[0]||(t[0]=[f("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true"},[f("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),512)]),f("div",{class:"modal-content",ref_key:"contentRef",ref:b},[f("div",{class:"rulebook-content",innerHTML:x.value},null,8,bt)],512),f("footer",{class:"modal-footer"},[f("button",{class:"btn-close",onClick:w},t[2]||(t[2]=[f("span",{class:"btn-icon","aria-hidden":"true"},"âœ“",-1),g(" é–‰ã˜ã‚‹ ",-1)]))])])],32)):m("",!0)]),_:1})]))}}),[["__scopeId","data-v-5aa7de00"]]),yt={id:"navigation",class:"action-section",role:"navigation","aria-label":"ãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³"},xt={class:"button-group"},wt=U(n({__name:"NavigationActions",emits:["start-game","start-tutorial"],setup(e,{expose:t}){const n=d(!1),a=d(),r=d(),l=d();return t({gameButtonRef:a,tutorialButtonRef:r,rulebookButtonRef:l}),(e,t)=>(i(),s("section",yt,[f("div",xt,[f("button",{ref_key:"gameButtonRef",ref:a,class:"btn btn-primary ripple-container glow-on-hover bounce-in","aria-label":"ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã™ã‚‹ (Alt+G)","aria-keyshortcuts":"Alt+G","aria-describedby":"game-description",onClick:t[0]||(t[0]=t=>e.$emit("start-game"))},t[4]||(t[4]=[f("span",{class:"btn-bg-effect"},null,-1),f("span",{class:"btn-icon","aria-hidden":"true"},"ğŸ®",-1),f("span",{class:"btn-text"},"ã‚²ãƒ¼ãƒ ã‚’ãƒ—ãƒ¬ã‚¤",-1),f("span",{class:"btn-arrow","aria-hidden":"true"},"â†’",-1)]),512),f("button",{ref_key:"tutorialButtonRef",ref:r,class:"btn btn-secondary ripple-container","aria-label":"ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹ã™ã‚‹ (Alt+T)","aria-keyshortcuts":"Alt+T","aria-describedby":"tutorial-description",onClick:t[1]||(t[1]=t=>e.$emit("start-tutorial"))},t[5]||(t[5]=[f("span",{class:"btn-bg-effect"},null,-1),f("span",{class:"btn-icon","aria-hidden":"true"},"ğŸ“š",-1),f("span",{class:"btn-text"},"ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«",-1)]),512),f("button",{ref_key:"rulebookButtonRef",ref:l,class:"btn btn-tertiary ripple-container","aria-label":"ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«ã‚’èª­ã‚€ (Alt+R)","aria-keyshortcuts":"Alt+R","aria-describedby":"rulebook-description",onClick:t[2]||(t[2]=e=>n.value=!0)},t[6]||(t[6]=[f("span",{class:"btn-bg-effect"},null,-1),f("span",{class:"btn-icon","aria-hidden":"true"},"ğŸ“–",-1),f("span",{class:"btn-text"},"ãƒ«ãƒ¼ãƒ«ã‚’èª­ã‚€",-1)]),512)]),t[7]||(t[7]=f("div",{class:"sr-only"},[f("div",{id:"game-description"},"ä¿é™ºã‚’ãƒ†ãƒ¼ãƒã«ã—ãŸäººç”Ÿã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã—ã¾ã™"),f("div",{id:"tutorial-description"},"ã‚²ãƒ¼ãƒ ã®éŠã³æ–¹ã‚’å­¦ç¿’ã™ã‚‹ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹ã—ã¾ã™"),f("div",{id:"rulebook-description"},"ã‚²ãƒ¼ãƒ ã®ãƒ«ãƒ¼ãƒ«ã¨éŠã³æ–¹ã‚’è©³ã—ãèª­ã‚€ã“ã¨ãŒã§ãã¾ã™")],-1)),o(gt,{"is-open":n.value,onClose:t[3]||(t[3]=e=>n.value=!1)},null,8,["is-open"])]))}}),[["__scopeId","data-v-f31e61c4"]]),kt=V("game",()=>{const e=P(null),t=d(!1),n=d(Date.now()),s=d([]),i=d(0),o=d(100),r=d("youth"),l=d(0),c=d("setup"),u=d("not_started"),p=d(null),h=d([]),m=d([]),v=d(0),f=d([]),b=d([]),g=d(0),y=d(20),x=d(!1),w=a(()=>i.value),k=a(()=>o.value),C=a(()=>s.value),E=a(()=>r.value),S=a(()=>l.value),_=a(()=>c.value),L=a(()=>u.value),T=a(()=>p.value),$=a(()=>b.value),M=a(()=>h.value),I=a(()=>m.value),A=a(()=>v.value),F=a(()=>g.value),D=a(()=>y.value),R=a(()=>f.value),z=d("");function j(){if(!e.value)return;n.value=Date.now(),s.value=[...e.value.hand],i.value=e.value.vitality,o.value=e.value.maxVitality,r.value=e.value.stage,l.value=e.value.turn,c.value=e.value.phase,u.value=e.value.status,p.value=e.value.currentChallenge||null,h.value=[...e.value.activeInsurances],m.value=[...e.value.insuranceMarket],v.value=e.value.score,g.value=e.value.savings;const t=e.value.config?.balanceConfig?.progressionSettings||{maxTurns:20};y.value=t.maxTurns??20,f.value=e.value.cardChoices?[...e.value.cardChoices]:[],b.value=e.value.insuranceTypeChoices?[...e.value.insuranceTypeChoices]:[],console.log("[GameStore] State synced. Hand size:",s.value.length),"undefined"!=typeof window&&(window._gameStore={game:e.value})}return{game:e,isInitialized:t,vitality:w,maxVitality:k,hand:C,currentStage:E,currentTurn:S,currentPhase:_,currentStatus:L,currentChallenge:T,insuranceTypeChoices:$,lastMessage:z,initializeGame:function(n){console.log("[GameStore] initializeGame called with config:",JSON.stringify(n)),e.value=new O(n),n?.startingVitality&&n.startingVitality>200&&(console.log(`[GameStore] Forcing High Vitality Cheat: ${n.startingVitality}`),e.value._vitality=B.create(n.startingVitality,n.startingVitality)),t.value=!0,j()},startGame:function(){e.value&&(e.value.start(),j())},drawCards:async function(t){console.log("[GameStore] drawCards called",t),e.value?(await e.value.drawCards(t),console.log("[GameStore] drawCards finished, triggering update"),j()):console.error("[GameStore] Game instance is null")},startChallenge:function(t){e.value&&(e.value.startChallenge(t),j())},drawChallenge:function(){if(!e.value)return;if(e.value.currentChallenge)return;console.log("[GameStore] drawChallenge called. Deck size:",e.value.challengeDeck.size());const t=e.value.drawChallengeCard();t?(e.value.startChallenge(t),j()):(console.log("[GameStore] Challenge deck empty, advancing stage"),e.value.advanceStage(),"victory"===e.value.status?console.log("[GameStore] Victory!"):e.value.refillChallengeDeck(),j())},resolveChallenge:function(){if(!e.value)return;const t=e.value.resolveChallenge();return z.value=t.message,j(),t},selectInsurance:function(t,n="whole_life"){if(e.value){console.log("Selected insurance:",t,n);try{e.value.selectInsuranceType(t,n),j(),z.value=`${"term"===n?"å®šæœŸ":"çµ‚èº«"}${t}ä¿é™ºã«åŠ å…¥ã—ã¾ã—ãŸ`}catch(a){console.error("Failed to select insurance:",a),z.value="ä¿é™ºã®åŠ å…¥ã«å¤±æ•—ã—ã¾ã—ãŸ"}}},endTurn:function(){if(!e.value)return;const t=e.value.nextTurn();t.insuranceExpirations?z.value=t.insuranceExpirations.message:z.value=`ã‚¿ãƒ¼ãƒ³ ${e.value.turn} é–‹å§‹`,j()},toggleCardSelection:function(t){e.value&&(e.value.toggleCardSelection(t),j())},triggerUpdate:j,activeInsurances:M,insuranceMarket:I,score:A,savings:F,maxTurns:D,cardChoices:R,startChallengePhase:function(){e.value&&(e.value.startChallengePhase(),j())},selectChallengeChoice:function(t){e.value&&(e.value.startChallenge(t),j())},selectDream:async function(t){e.value&&(await e.value.selectDream(t),j())},selectCharacter:function(t){e.value&&(e.value.selectCharacter(t),j())},buyInsurance:function(t){e.value&&(e.value.cardManager.buyInsurance(t),t.cost>0&&e.value.applyDamage(t.cost),j())},isTutorialMode:x,toggleTutorialMode:function(){x.value=!x.value}}}),Ct={key:0,class:"absolute top-0 right-0 bg-red-600 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold shadow-md -mr-1 -mt-1 z-10",title:"å¤±æ•—æ™‚ã®ãƒ€ãƒ¡ãƒ¼ã‚¸"},Et={class:"flex justify-start items-center mb-2 gap-2"},St={key:0,class:"bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold shadow-md -ml-1 -mt-1 z-10 shrink-0"},_t={class:"text-xs font-bold uppercase tracking-wider opacity-70"},Lt={class:"w-full h-24 bg-gray-200 rounded-md mb-3 flex items-center justify-center overflow-hidden"},Tt={class:"text-4xl opacity-20"},$t={key:0},Mt={key:1},It={key:2},At={key:3},Ft={class:"font-bold text-lg leading-tight mb-1 text-gray-800 min-h-[3.5rem] flex items-center break-words line-clamp-2"},Dt={class:"text-xs text-gray-600 flex-grow overflow-y-auto leading-snug break-words pr-1"},Pt={class:"mt-2 pt-2 border-t border-gray-200 flex justify-start items-center gap-3"},Rt={key:0,class:"flex items-center text-red-600 font-bold"},zt={key:1,class:"flex items-center text-green-600 font-bold"},jt=n({__name:"Card",props:{card:{},isSelected:{type:Boolean},isPlayable:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const n=e,o=t,r=a(()=>({"border-yellow-400 ring-4 ring-yellow-400 shadow-xl scale-105":n.isSelected,"cursor-pointer hover:-translate-y-2 hover:shadow-2xl":n.isPlayable,"opacity-50 cursor-not-allowed":!n.isPlayable,"bg-gradient-to-br from-blue-50 to-white border-blue-400":"life"===n.card.type,"bg-gradient-to-br from-red-50 to-white border-red-500":"challenge"===n.card.type,"bg-gradient-to-br from-emerald-50 to-white border-emerald-500":"insurance"===n.card.type,"bg-gradient-to-br from-purple-50 to-white border-purple-500":"skill"===n.card.type,"bg-gradient-to-br from-amber-50 to-white border-amber-500":"dream"===n.card.type})),l=a(()=>{switch(n.card.type){case"life":return"äººç”Ÿ";case"challenge":return"è©¦ç·´";case"insurance":return"ä¿é™º";case"skill":return"ã‚¹ã‚­ãƒ«";case"dream":return"å¤¢";default:return n.card.type}});return(e,t)=>(i(),s("div",{"data-testid":"card",class:S(["w-48 h-72 rounded-xl border-2 shadow-lg flex flex-col p-4 transition-all duration-200 relative bg-white",r.value]),onClick:t[0]||(t[0]=t=>o("click",e.card))},[!e.card.penalty||"challenge"!==e.card.type&&"dream"!==e.card.type?m("",!0):(i(),s("div",Ct,[t[1]||(t[1]=f("span",{class:"text-[10px] mr-[1px]"},"ğŸ’¥",-1)),g(y(e.card.penalty),1)])),f("div",Et,[e.card.cost>0?(i(),s("div",St,y(e.card.cost),1)):m("",!0),f("span",_t,y(l.value),1)]),f("div",Lt,[f("span",Tt,["life"===e.card.type?(i(),s("span",$t,"ğŸŒ±")):"challenge"===e.card.type?(i(),s("span",Mt,"âš¡")):"insurance"===e.card.type?(i(),s("span",It,"ğŸ›¡ï¸")):(i(),s("span",At,"ğŸƒ"))])]),f("h3",Ft,y(e.card.name),1),f("p",Dt,y(e.card.description),1),f("div",Pt,[e.card.power>0?(i(),s("div",Rt,[t[2]||(t[2]=f("span",{class:"mr-1"},"âš”ï¸",-1)),f("span",null,y(e.card.power),1)])):m("",!0),e.card.coverage?(i(),s("div",zt,[t[3]||(t[3]=f("span",{class:"mr-1"},"ğŸ›¡ï¸",-1)),f("span",null,y(e.card.coverage),1)])):m("",!0)])],2))}}),Vt={key:0,"data-testid":"hand-container",class:"fixed bottom-0 left-0 right-0 h-96 flex items-end justify-center pb-4 px-4 pointer-events-none z-30"},Nt={class:"flex -space-x-12 hover:space-x-2 transition-all duration-300 pointer-events-auto"},Ot=n({__name:"Hand",setup(e){const t=kt(),n=a(()=>t.hand);function r(e){t.toggleCardSelection(e)}function l(e){return t.game?.selectedCards.includes(e)??!1}return(e,a)=>"game_over"!==T(t).currentStatus&&"victory"!==T(t).currentStatus&&"dream_selection"!==T(t).currentPhase&&"challenge_choice"!==T(t).currentPhase&&"character_selection"!==T(t).currentPhase&&"insurance_type_selection"!==T(t).currentPhase?(i(),s("div",Vt,[f("div",Nt,[(i(!0),s(_,null,L(n.value,(e,t)=>(i(),s("div",{key:e.id,class:"transform transition-transform hover:-translate-y-8 hover:z-10 origin-bottom",style:E({zIndex:t})},[o(jt,{card:e,"is-selected":l(e),"is-playable":!0,onClick:r},null,8,["card","is-selected"])],4))),128))])])):m("",!0)}}),Bt={class:"character-selector fixed inset-0 bg-slate-900/95 z-modal flex flex-col items-center justify-center p-8 backdrop-blur-sm animate-fade-in"},Ht={class:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl w-full"},Gt=["onClick"],Kt={class:"text-2xl font-bold text-white mb-2"},Ut={class:"text-slate-400 text-sm mb-4 min-h-[40px]"},Qt={class:"space-y-3"},qt={class:"flex justify-between items-center bg-slate-900/50 p-2 rounded"},Jt={class:"flex justify-between items-center bg-slate-900/50 p-2 rounded"},Wt={class:"text-yellow-400 font-bold"},Zt=U(n({__name:"CharacterSelector",emits:["select"],setup(e,{emit:t}){const n=H,a=t;return(e,t)=>(i(),s("div",Bt,[t[4]||(t[4]=f("div",{class:"text-center mb-10 max-w-2xl"},[f("h2",{class:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-cyan-400 mb-6"}," ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’é¸æŠã—ã¦ãã ã•ã„ "),f("p",{class:"text-lg text-slate-300"}," ã‚ãªãŸã®äººç”Ÿè¦³ã«æœ€ã‚‚è¿‘ã„ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚ ãã‚Œãã‚Œã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã¯ç•°ãªã‚‹åˆæœŸèƒ½åŠ›ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ ")],-1)),f("div",Ht,[(i(!0),s(_,null,L(T(n),e=>(i(),s("div",{key:e.id,class:"character-card bg-slate-800/80 border border-slate-700 rounded-xl p-6 hover:border-blue-500 hover:bg-slate-800 transition-all cursor-pointer group relative overflow-hidden",onClick:t=>{a("select",e.id)}},[t[2]||(t[2]=f("div",{class:"absolute inset-0 bg-gradient-to-br from-blue-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"},null,-1)),f("h3",Kt,y(e.name),1),f("p",Ut,y(e.description),1),f("div",Qt,[f("div",qt,[t[0]||(t[0]=f("span",{class:"text-sm text-slate-400"},"åˆæœŸæ´»åŠ›è£œæ­£",-1)),f("span",{class:S([e.initialVitalityModifier>=0?"text-green-400":"text-red-400","font-bold"])},y(e.initialVitalityModifier>0?"+":"")+y(e.initialVitalityModifier),3)]),f("div",Jt,[t[1]||(t[1]=f("span",{class:"text-sm text-slate-400"},"åˆæœŸè²¯è“„",-1)),f("span",Wt,"+"+y(e.initialSavings||0),1)])]),t[3]||(t[3]=f("div",{class:"mt-6"},[f("button",{class:"w-full py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg font-bold transition-colors"}," é¸æŠã™ã‚‹ ")],-1))],8,Gt))),128))])]))}}),[["__scopeId","data-v-f5babf26"]]),Yt={key:0,class:"fixed inset-0 bg-slate-900/95 z-modal flex flex-col items-center justify-center p-8 backdrop-blur-sm animate-fade-in"},Xt={class:"flex flex-wrap justify-center gap-8 perspective-1000"},en=U(n({__name:"DreamSelector",setup(e){const t=kt(),n=a(()=>"dream_selection"===t.currentPhase),r=a(()=>t.cardChoices);return(e,a)=>n.value?(i(),s("div",Yt,[a[0]||(a[0]=f("div",{class:"text-center mb-10 max-w-2xl"},[f("h2",{class:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400 mb-8"}," å¤¢ã‚’é¸æŠã—ã¦ãã ã•ã„ "),f("p",{class:"text-lg text-slate-300"}," å¤¢ã¯äººç”Ÿã®ç›®çš„ã‚’å®šç¾©ã—ã¾ã™ã€‚ãã‚Œãã‚Œã®å¤¢ã¯ç‰¹å®šã®ãƒ©ã‚¤ãƒ•ã‚¹ãƒ†ãƒ¼ã‚¸ã§ç‹¬è‡ªã®ãƒœãƒ¼ãƒŠã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚ ã‚ãªãŸã®é“ã‚’å°ãã‚‚ã®ã¨ã—ã¦ã€æ…é‡ã«é¸ã‚“ã§ãã ã•ã„ã€‚ ")],-1)),f("div",Xt,[(i(!0),s(_,null,L(r.value,(e,n)=>(i(),s("div",{key:e.id,class:"transform transition-all duration-300 hover:scale-110 hover:-translate-y-4 hover:shadow-2xl",style:E({animationDelay:100*n+"ms"})},[o(jt,{card:e,isPlayable:!0,onClick:n=>function(e){t.selectDream(e)}(e)},null,8,["card","onClick"])],4))),128))])])):m("",!0)}}),[["__scopeId","data-v-a2f407b7"]]),tn={key:0,class:"fixed inset-0 bg-slate-900/90 z-modal flex flex-col items-center justify-center p-8 backdrop-blur-sm animate-fade-in"},nn={class:"flex flex-wrap justify-center gap-8"},an=n({__name:"ChallengeSelector",setup(e){const t=kt(),n=a(()=>"challenge_choice"===t.currentPhase),r=a(()=>t.cardChoices);return(e,a)=>n.value?(i(),s("div",tn,[a[0]||(a[0]=f("div",{class:"text-center mb-8"},[f("h2",{class:"text-3xl font-bold text-white mb-2"},"èª²é¡Œã«ç«‹ã¡å‘ã‹ã†"),f("p",{class:"text-slate-300"},"ã“ã®ã‚¿ãƒ¼ãƒ³ã«å¯¾å‡¦ã™ã‚‹èª²é¡Œã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚")],-1)),f("div",nn,[(i(!0),s(_,null,L(r.value,e=>(i(),s("div",{key:e.id,class:"transform transition-all duration-300 hover:scale-105"},[o(jt,{card:e,isPlayable:!0,onClick:n=>function(e){t.selectChallengeChoice(e)}(e)},null,8,["card","onClick"])]))),128))])])):m("",!0)}}),sn={key:0,class:"bg-white/10 p-4 rounded-xl backdrop-blur-md border border-white/20"},on={class:"flex gap-4 overflow-x-auto pb-4 custom-scrollbar"},rn={class:"text-center mt-2"},ln={class:"text-xs bg-slate-800 text-white px-2 py-1 rounded-full"},cn=U(n({__name:"InsuranceMarket",setup(e){const t=kt(),n=a(()=>t.insuranceMarket);return(e,a)=>n.value.length>0?(i(),s("div",sn,[a[0]||(a[0]=f("h3",{class:"text-xl font-bold text-white mb-4 flex items-center"},[f("span",null,"ğŸ¥ Insurance Market"),f("span",{class:"text-xs ml-2 text-slate-300 font-normal"},"Protect your future")],-1)),f("div",on,[(i(!0),s(_,null,L(n.value,e=>(i(),s("div",{key:e.id,class:"flex-shrink-0 transform hover:scale-105 transition-transform"},[o(jt,{card:e,isPlayable:!0,onClick:n=>function(e){t.buyInsurance(e)}(e)},null,8,["card","onClick"]),f("div",rn,[f("span",ln,"Cost: "+y(e.cost),1)])]))),128))])])):m("",!0)}}),[["__scopeId","data-v-6d8cf60b"]]),dn={key:0,class:"fixed inset-0 bg-black/90 z-50 flex flex-col items-center justify-center p-8 backdrop-blur-md animate-fade-in"},un={class:"bg-slate-800/80 p-8 rounded-2xl max-w-2xl w-full border border-slate-600 shadow-2xl"},pn={class:"space-y-4 text-lg"},hn={class:"flex justify-between items-center"},mn={class:"font-mono text-3xl font-bold text-yellow-400"},vn={class:"flex justify-between items-center"},fn={class:"font-mono text-white"},bn={class:"flex justify-between items-center"},gn={class:"font-mono text-white"},yn={class:"flex justify-between items-center"},xn={class:"font-mono text-white"},wn=n({__name:"GameResult",setup(e){const t=kt(),n=a(()=>"game_over"===t.currentStatus||"victory"===t.currentStatus),o=a(()=>"victory"===t.currentStatus),r=a(()=>o.value?"ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢ï¼":"ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼"),l=a(()=>o.value?"text-yellow-400":"text-red-500");function c(){window.location.reload()}return(e,a)=>n.value?(i(),s("div",dn,[f("h2",{class:S(["text-6xl font-bold mb-8 animate-bounce",l.value])},y(r.value),3),f("div",un,[a[4]||(a[4]=f("h3",{class:"text-2xl font-bold text-white mb-6 border-b border-slate-600 pb-2"},"æœ€çµ‚çµæœ",-1)),f("div",pn,[f("div",hn,[a[0]||(a[0]=f("span",{class:"text-slate-300"},"ã‚¹ã‚³ã‚¢",-1)),f("span",mn,y(T(t).score),1)]),f("div",vn,[a[1]||(a[1]=f("span",{class:"text-slate-400"},"ç”Ÿå­˜ã‚¿ãƒ¼ãƒ³æ•°",-1)),f("span",fn,y(T(t).currentTurn),1)]),f("div",bn,[a[2]||(a[2]=f("span",{class:"text-slate-400"},"æœ€çµ‚æ´»åŠ›",-1)),f("span",gn,y(T(t).vitality)+" / "+y(T(t).maxVitality),1)]),f("div",yn,[a[3]||(a[3]=f("span",{class:"text-slate-400"},"é”æˆã—ãŸèª²é¡Œæ•°",-1)),f("span",xn,y(T(t).game?.challengesCompleted||0),1)])]),a[5]||(a[5]=f("div",{class:"mt-8 p-4 bg-slate-900/50 rounded-lg text-slate-400 text-sm italic text-center"},' "äººç”Ÿã¯æã‚Œã‚’çŸ¥ã‚‰ã¬å†’é™ºã‹ã€ç„¡ã‹ã€ãã®ã©ã¡ã‚‰ã‹ã ã€‚" ',-1))]),f("button",{onClick:c,class:"mt-12 px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold rounded-full text-xl shadow-lg hover:shadow-blue-500/50 hover:scale-105 transition-all"}," ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤ã™ã‚‹ ")])):m("",!0)}}),kn={key:0,class:"fixed top-24 left-8 z-[1000] max-w-sm w-full"},Cn={class:"relative bg-slate-900/90 backdrop-blur-xl border border-blue-500/30 rounded-2xl shadow-2xl p-6 overflow-hidden"},En={class:"relative flex items-center justify-between mb-3"},Sn={class:"flex items-center space-x-3"},_n={class:"text-2xl"},Ln={class:"font-bold text-lg text-white bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-400"},Tn={class:"relative text-slate-300 text-sm leading-relaxed mb-6"},$n=n({__name:"TutorialOverlay",setup(e){const t=kt(),n=d(!1),a=d(""),o=d(new Set),c={dream_selection:{title:"å¤¢ã‚’é¸ã¼ã†",content:"äººç”Ÿã®ç›®æ¨™ã¨ãªã‚‹ã€Œå¤¢ã€ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚ã“ã‚Œã¯å‹åˆ©æ¡ä»¶ã¨ãªã‚Šã€ã‚²ãƒ¼ãƒ ä¸­ã«ãƒœãƒ¼ãƒŠã‚¹ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã€‚è‡ªåˆ†ã®ãƒ—ãƒ¬ã‚¤ã‚¹ã‚¿ã‚¤ãƒ«ã«åˆã£ãŸã‚‚ã®ã‚’é¸ã³ã¾ã—ã‚‡ã†ï¼",icon:"ğŸŒ "},draw:{title:"ã‚¿ãƒ¼ãƒ³é–‹å§‹",content:"æ–°ã—ã„ã‚¿ãƒ¼ãƒ³ãŒå§‹ã¾ã‚Šã¾ã—ãŸï¼æ‰‹æœ­ã¯è‡ªå‹•çš„ã«è£œå……ã•ã‚Œã¾ã™ã€‚æ¬¡ã«ç«‹ã¡å‘ã‹ã†èª²é¡Œã‚’é¸ã³ã¾ã—ã‚‡ã†ï¼",icon:"âœ¨"},challenge_phase:{title:"èª²é¡Œãƒ•ã‚§ãƒ¼ã‚º",content:"äººç”Ÿã¯è©¦ç·´ã®é€£ç¶šã§ã™ã€‚ç«‹ã¡å‘ã‹ã†èª²é¡Œã‚’1ã¤é¸ã‚“ã§ãã ã•ã„ã€‚å¿…è¦ãƒ‘ãƒ¯ãƒ¼ã¨å ±é…¬ã‚’ç¢ºèªã—ã€ãƒªã‚¹ã‚¯ã‚’è¦‹æ¥µã‚ã¾ã—ã‚‡ã†ï¼",icon:"âš”ï¸"},challenge_resolution:{title:"èª²é¡Œã®è§£æ±º",content:"æ‰‹æœ­ã‹ã‚‰ã‚«ãƒ¼ãƒ‰ã‚’é¸ã‚“ã§ã€èª²é¡Œã®å¿…è¦ãƒ‘ãƒ¯ãƒ¼ã‚’æº€ãŸã—ã¦ãã ã•ã„ã€‚æ´»åŠ›ï¼ˆã‚³ã‚¹ãƒˆï¼‰ã®ä½¿ã„ã™ãã«æ³¨æ„ï¼ååˆ†ãªãƒ‘ãƒ¯ãƒ¼ãŒã‚ã‚Œã°æˆåŠŸã§ã™ï¼",icon:"ğŸ’ª"},insurance_phase:{title:"ä¿é™ºãƒ•ã‚§ãƒ¼ã‚º",content:"ä¿é™ºã¯äººç”Ÿã®ä¸æ¸¬ã®äº‹æ…‹ã«å‚™ãˆã‚‹ã‚‚ã®ã§ã™ã€‚æ´»åŠ›ã‚’æ¶ˆè²»ã—ã¦ä¿é™ºã«åŠ å…¥ã™ã‚‹ã“ã¨ã§ã€å®ˆã‚Šã¨ãƒœãƒ¼ãƒŠã‚¹ã‚’å¾—ã‚‰ã‚Œã¾ã™ã€‚å°†æ¥ã®ãƒªã‚¹ã‚¯ã‚’è»½æ¸›ã—ã¾ã—ã‚‡ã†ã€‚",icon:"ğŸ›¡ï¸"}};function u(){n.value=!1,a.value&&o.value.add(a.value)}function v(){t.toggleTutorialMode(),n.value=!1}return p(()=>t.currentPhase,e=>{if(!t.isTutorialMode)return;let s="";"dream_selection"===e?s="dream_selection":"challenge_choice"===e?s="challenge_phase":"challenge"===e?s="challenge_resolution":"insurance"===e&&(s="insurance_phase"),s&&!o.value.has(s)&&(a.value=s,n.value=!0)},{immediate:!0}),(e,o)=>(i(),h(r,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform translate-y-4 opacity-0 scale-95","enter-to-class":"transform translate-y-0 opacity-100 scale-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"transform translate-y-0 opacity-100 scale-100","leave-to-class":"transform translate-y-4 opacity-0 scale-95"},{default:l(()=>[n.value&&T(t).isTutorialMode&&c[a.value]?(i(),s("div",kn,[f("div",Cn,[o[1]||(o[1]=f("div",{class:"absolute -top-10 -right-10 w-32 h-32 bg-blue-500/20 rounded-full blur-2xl"},null,-1)),o[2]||(o[2]=f("div",{class:"absolute -bottom-10 -left-10 w-32 h-32 bg-purple-500/20 rounded-full blur-2xl"},null,-1)),f("div",En,[f("div",Sn,[f("span",_n,y(c[a.value]?.icon),1),f("h3",Ln,y(c[a.value]?.title),1)]),f("button",{onClick:u,class:"text-slate-400 hover:text-white transition-colors"},o[0]||(o[0]=[f("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[f("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))]),f("p",Tn,y(c[a.value]?.content),1),f("div",{class:"relative flex justify-between items-center pt-4 border-t border-slate-700/50"},[f("button",{onClick:v,class:"text-xs text-slate-500 hover:text-slate-300 transition-colors"}," ãƒ’ãƒ³ãƒˆã‚’è¡¨ç¤ºã—ãªã„ "),f("button",{onClick:u,class:"px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 text-white text-sm font-semibold rounded-lg shadow-lg shadow-blue-500/20 transition-all transform hover:scale-105"}," ã‚ã‹ã£ãŸ ")])])])):m("",!0)]),_:1}))}}),Mn={"data-testid":"game-board",class:"w-full h-screen bg-slate-900 text-white overflow-hidden relative font-sans selection:bg-purple-500 selection:text-white"},In={class:"absolute top-0 left-0 right-0 h-20 px-8 flex justify-between items-center bg-slate-900/50 backdrop-blur-xl border-b border-white/5 z-20 shadow-2xl"},An={class:"flex items-center space-x-8"},Fn={class:"flex flex-col"},Dn={class:"font-bold text-xl text-transparent bg-clip-text bg-gradient-to-r from-purple-300 to-purple-100"},Pn={"data-testid":"vitality",class:"flex flex-col relative group"},Rn={class:"flex items-baseline space-x-1"},zn={class:"font-bold text-2xl text-green-400 drop-shadow-[0_0_10px_rgba(74,222,128,0.3)]"},jn={class:"text-sm text-slate-600 font-medium"},Vn={class:"absolute -bottom-2 left-0 w-24 h-1 bg-slate-700 rounded-full overflow-hidden"},Nn={class:"flex flex-col"},On={class:"font-bold text-xl text-blue-400"},Bn={class:"flex items-center space-x-6"},Hn={class:"flex flex-col items-end"},Gn={class:"flex items-baseline space-x-1"},Kn={class:"font-bold text-2xl text-white"},Un={class:"text-sm text-slate-600 font-medium"},Qn={class:"flex flex-col items-end min-w-[100px]"},qn={class:"font-bold text-lg text-blue-200"},Jn={class:"absolute inset-0 flex items-center justify-center z-10 pointer-events-none"},Wn={class:"relative group"},Zn={key:0,class:"absolute -inset-4 bg-yellow-500/20 rounded-full blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-700"},Yn={key:0,class:"absolute top-28 bg-white/10 border border-white/10 backdrop-blur-md text-white px-8 py-3 rounded-full shadow-xl animate-fade-in-down z-50"},Xn={class:"absolute right-0 top-0 bottom-0 w-64 pt-24 pb-64 px-6 flex flex-col justify-center items-end z-30 pointer-events-none"},ea={class:"pointer-events-auto space-y-4 flex flex-col items-end w-full"},ta={class:"fixed bottom-8 left-8 z-10 flex flex-col items-center opacity-40 group hover:opacity-100 transition-opacity cursor-default"},na={class:"text-[10px] text-slate-500"},aa={key:0,class:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-8 backdrop-blur-sm animate-fade-in"},sa={class:"bg-gray-900 border border-gray-700 rounded-2xl p-8 max-w-5xl w-full shadow-2xl relative overflow-hidden"},ia={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},oa={class:"relative z-10"},ra={class:"flex items-center justify-between mb-4"},la={class:"text-xs font-bold px-2 py-1 rounded bg-gray-700 text-gray-300"},ca={class:"font-bold text-xl text-white mb-2 group-hover:text-blue-300 transition-colors"},da={class:"text-sm text-gray-400 mb-6 min-h-[40px] leading-relaxed"},ua={class:"space-y-3 mt-auto"},pa=["onClick"],ha={class:"flex flex-col items-start text-xs"},ma={class:"opacity-70"},va={class:"bg-black/30 px-3 py-1 rounded text-xs font-mono group-hover/btn:bg-white/20"},fa=["onClick"],ba={class:"bg-black/30 px-3 py-1 rounded text-xs font-mono group-hover/btn:bg-white/20"},ga={key:2,class:"fixed bottom-32 right-8 z-40 max-w-xl pointer-events-auto"},ya={class:"absolute bottom-0 left-0 right-0 z-20 pointer-events-auto"},xa=n({__name:"GameBoard",setup(e){const t=kt(),n=a(()=>({draw:"ãƒ‰ãƒ­ãƒ¼",challenge_choice:"èª²é¡Œé¸æŠ",challenge:"æŒ‘æˆ¦",resolution:"è§£æ±º",market:"ä¿é™ºå¸‚å ´",end:"ã‚¿ãƒ¼ãƒ³çµ‚äº†",insurance_type_selection:"ä¿é™ºé¸æŠ"}[t.currentPhase]||t.currentPhase.toUpperCase())),r=a(()=>({youth:"é’å¹´æœŸ",middle:"å£®å¹´æœŸ",fulfillment:"å……å®ŸæœŸ"}[t.currentStage]||t.currentStage));async function l(){await t.endTurn()}async function c(){t.startChallengePhase()}return u(()=>{if(!t.game){const e=window.__GAME_CONFIG__;t.initializeGame(e),t.startGame()}}),(e,a)=>(i(),s("div",Mn,[a[21]||(a[21]=M('<div class="absolute inset-0 z-0"><div class="absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-slate-800 via-slate-900 to-black"></div><div class="absolute top-0 left-0 w-full h-full bg-[url(&#39;/noise.png&#39;)] opacity-5 pointer-events-none"></div><div class="absolute top-1/4 left-1/4 w-[500px] h-[500px] bg-purple-600/20 rounded-full blur-[100px] animate-pulse-slow"></div><div class="absolute bottom-1/4 right-1/4 w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-[100px] animate-pulse-slow delay-1000"></div></div>',1)),f("div",In,[f("div",An,[f("div",Fn,[a[2]||(a[2]=f("span",{class:"text-[10px] sm:text-xs text-slate-400 uppercase tracking-widest font-semibold"},"Stage",-1)),f("span",Dn,y(r.value),1)]),f("div",Pn,[a[3]||(a[3]=f("span",{class:"text-[10px] sm:text-xs text-slate-400 uppercase tracking-widest font-semibold"},"Vitality",-1)),f("div",Rn,[f("span",zn,y(T(t).vitality),1),f("span",jn,"/ "+y(T(t).maxVitality),1)]),f("div",Vn,[f("div",{class:"h-full bg-gradient-to-r from-green-500 to-emerald-400 transition-all duration-500",style:E({width:`${Math.min(100,T(t).vitality/T(t).maxVitality*100)}%`})},null,4)])]),f("div",Nn,[a[4]||(a[4]=f("span",{class:"text-[10px] sm:text-xs text-slate-400 uppercase tracking-widest font-semibold"},"Savings",-1)),f("span",On,y(T(t).savings),1)])]),f("div",Bn,[f("div",Hn,[a[5]||(a[5]=f("span",{class:"text-[10px] sm:text-xs text-slate-400 uppercase tracking-widest font-semibold"},"Turn",-1)),f("div",Gn,[f("span",Kn,y(T(t).currentTurn),1),f("span",Un,"/ "+y(T(t).maxTurns),1)])]),a[7]||(a[7]=f("div",{class:"w-px h-8 bg-white/10 mx-2"},null,-1)),f("div",Qn,[a[6]||(a[6]=f("span",{class:"text-[10px] sm:text-xs text-slate-400 uppercase tracking-widest font-semibold"},"Phase",-1)),f("span",qn,y(n.value),1)]),f("button",{onClick:a[0]||(a[0]=e=>T(t).toggleTutorialMode()),class:"p-2 rounded-full hover:bg-white/10 transition-colors relative group"},[f("span",{class:S(["text-xl filter",T(t).isTutorialMode?"grayscale-0 opacity-100":"grayscale opacity-40"])},"ğŸ“",2)])])]),f("div",Jn,[f("div",{class:S(["transform -translate-y-12 flex flex-col items-center pointer-events-auto transition-all duration-500",{"scale-100 opacity-100":T(t).currentChallenge,"scale-90 opacity-0":!T(t).currentChallenge}])},[f("div",Wn,[T(t).currentChallenge?(i(),s("div",Zn)):m("",!0),a[8]||(a[8]=f("h2",{class:"text-slate-500 uppercase tracking-[0.2em] text-xs text-center mb-6 font-bold"},"Current Challenge",-1)),T(t).currentChallenge?(i(),h(jt,{key:1,card:T(t).currentChallenge,class:"shadow-2xl"},null,8,["card"])):m("",!0)])],2),T(t).lastMessage?(i(),s("div",Yn,y(T(t).lastMessage),1)):m("",!0)]),f("div",Xn,[f("div",ea,["draw"!==T(t).currentPhase||T(t).currentChallenge?m("",!0):(i(),s("button",{key:0,onClick:c,class:"group w-full relative overflow-hidden bg-gradient-to-r from-yellow-600 to-amber-700 hover:from-yellow-500 hover:to-amber-600 text-white rounded-xl font-bold shadow-lg transition-all duration-200 transform hover:scale-105 hover:shadow-yellow-500/20"},a[9]||(a[9]=[f("div",{class:"px-6 py-4 flex items-center justify-between"},[f("span",{class:"text-lg"},"èª²é¡Œã«æŒ‘ã‚€"),f("span",{class:"text-2xl group-hover:translate-x-1 transition-transform"},"âš”ï¸")],-1)]))),"challenge"===T(t).currentPhase?(i(),s("button",{key:1,onClick:a[1]||(a[1]=e=>T(t).resolveChallenge()),class:"group w-full relative overflow-hidden bg-gradient-to-r from-red-600 to-rose-700 hover:from-red-500 hover:to-rose-600 text-white rounded-xl font-bold shadow-lg transition-all duration-200 transform hover:scale-105 hover:shadow-red-500/20"},a[10]||(a[10]=[f("div",{class:"px-6 py-4 flex items-center justify-between"},[f("span",{class:"text-lg"},"è§£æ±ºã™ã‚‹"),f("span",{class:"text-2xl group-hover:rotate-12 transition-transform"},"ğŸ²")],-1)]))):m("",!0),"resolution"===T(t).currentPhase||"end"===T(t).currentPhase?(i(),s("button",{key:2,onClick:l,class:"group w-full relative overflow-hidden bg-gradient-to-r from-emerald-600 to-green-700 hover:from-emerald-500 hover:to-green-600 text-white rounded-xl font-bold shadow-lg transition-all duration-200 transform hover:scale-105 hover:shadow-green-500/20 text-left"},a[11]||(a[11]=[M('<div class="px-5 py-3"><div class="flex items-center justify-between mb-1"><span class="text-lg text-white">æ¬¡ã®ã‚¿ãƒ¼ãƒ³ã¸</span><span class="text-xl group-hover:translate-x-1 transition-transform">â¡ï¸</span></div><div class="text-[10px] text-green-100 opacity-80 font-normal"> â€»æ‰‹æœ­ã¯ã™ã¹ã¦æ¨ã¦ã‚‰ã‚Œã¾ã™ </div></div>',1)]))):m("",!0)])]),f("div",ta,[a[12]||(a[12]=f("div",{class:"w-20 h-28 border-2 border-dashed border-slate-500 rounded-lg flex items-center justify-center bg-slate-800/50"},[f("span",{class:"text-2xl"},"ğŸ“š")],-1)),a[13]||(a[13]=f("span",{class:"text-xs text-slate-400 mt-2 font-bold tracking-wider"},"DECK",-1)),f("span",na,y(T(t).game?.playerDeck.size()??0)+" Cards",1)]),a[22]||(a[22]=M('<div class="fixed bottom-8 right-8 z-10 flex flex-col items-center opacity-40 group hover:opacity-100 transition-opacity cursor-default"><div class="w-20 h-28 border-2 border-dashed border-slate-500 rounded-lg flex items-center justify-center bg-slate-800/50"><span class="text-2xl">ğŸ—‘ï¸</span></div><span class="text-xs text-slate-400 mt-2 font-bold tracking-wider">DISCARD</span><span class="text-[10px] text-slate-500">Reset on Turn End</span></div>',1)),T(t).insuranceTypeChoices&&T(t).insuranceTypeChoices.length>0?(i(),s("div",aa,[f("div",sa,[a[18]||(a[18]=f("div",{class:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500"},null,-1)),a[19]||(a[19]=f("h2",{class:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-400 mb-2"},"ä¿é™ºãƒ—ãƒ©ãƒ³ã®é¸æŠ",-1)),a[20]||(a[20]=f("p",{class:"text-gray-400 mb-8"},"å°†æ¥ã®ãƒªã‚¹ã‚¯ã«å‚™ãˆã€æœ€é©ãªä¿é™ºã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚",-1)),f("div",ia,[(i(!0),s(_,null,L(T(t).insuranceTypeChoices,e=>(i(),s("div",{key:e.insuranceType,class:"group relative bg-gray-800/50 border border-gray-700/50 rounded-xl p-6 hover:bg-gray-800 hover:border-blue-500/50 transition-all duration-300 flex flex-col"},[a[17]||(a[17]=f("div",{class:"absolute inset-0 bg-blue-500/5 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity"},null,-1)),f("div",oa,[f("div",ra,[a[14]||(a[14]=f("span",{class:"text-3xl filter grayscale group-hover:grayscale-0 transition-all"},"ğŸ›¡ï¸",-1)),f("span",la,"Type: "+y(e.insuranceType),1)]),f("h3",ca,y(e.name),1),f("p",da,y(e.description),1),f("div",ua,[f("button",{onClick:v(n=>T(t).selectInsurance(e.insuranceType,"term"),["stop"]),class:"w-full py-3 px-4 bg-gray-700 hover:bg-blue-600 text-gray-200 hover:text-white rounded-lg text-sm font-bold transition-all flex justify-between items-center group/btn"},[f("span",ha,[a[15]||(a[15]=f("span",{class:"font-bold text-sm"},"å®šæœŸä¿é™º",-1)),f("span",ma,y(e.termOption.duration)+"ã‚¿ãƒ¼ãƒ³é™å®š",1)]),f("span",va,"Cost: "+y(e.termOption.cost),1)],8,pa),f("button",{onClick:v(n=>T(t).selectInsurance(e.insuranceType,"whole_life"),["stop"]),class:"w-full py-3 px-4 bg-gray-700 hover:bg-emerald-600 text-gray-200 hover:text-white rounded-lg text-sm font-bold transition-all flex justify-between items-center group/btn"},[a[16]||(a[16]=f("span",{class:"flex flex-col items-start text-xs"},[f("span",{class:"font-bold text-sm"},"çµ‚èº«ä¿é™º"),f("span",{class:"opacity-70"},"æ°¸ç¶šåŠ¹æœ")],-1)),f("span",ba,"Cost: "+y(e.wholeLifeOption.cost),1)],8,fa)])])]))),128))])])])):m("",!0),"character_selection"===T(t).currentPhase?(i(),h(Zt,{key:1,onSelect:T(t).selectCharacter},null,8,["onSelect"])):m("",!0),o(en),o(an),o(wn),"draw"===T(t).currentPhase?(i(),s("div",ga,[o(cn)])):m("",!0),f("div",ya,[o(Ot)]),o($n)]))}}),wa={class:"app-container",role:"application","aria-label":"äººç”Ÿå……å®Ÿã‚²ãƒ¼ãƒ "},ka={key:0,id:"main-content",class:"game-view",role:"main","aria-label":"ã‚²ãƒ¼ãƒ ç”»é¢"},Ca={key:1,id:"main-content",class:"home-view",role:"main","aria-label":"ãƒ›ãƒ¼ãƒ ç”»é¢"},Ea={class:"home-container"},Sa={key:1,class:"desktop-error"},_a={class:"desktop-error-actions"},La=["onClick"],Ta=["onClick"],$a=j(U(n({__name:"App",setup(e){const t=d(!1),n=d(!1),a=d(!1),r=R({loader:async()=>function(e,t,n){let a=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};const s=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),o=i?.nonce||i?.getAttribute("nonce");a=e(t.map(e=>{if(e=function(e,t){return new URL(e,t).href}(e,n),e in G)return;G[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(n)for(let n=s.length-1;n>=0;n--){const a=s[n];if(a.href===e&&(!t||"stylesheet"===a.rel))return}else if(document.querySelector(`link[href="${e}"]${a}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,o&&i.setAttribute("nonce",o),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})}(()=>import("./MobileErrorHandler-R1TliYqhxxBB.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),errorComponent:{render:()=>z("div")},delay:200,timeout:1e4}),c=d();let p=null,v=null;const b=()=>{t.value=!0,v?.announceScreenChange("ã‚²ãƒ¼ãƒ ç”»é¢","ã‚²ãƒ¼ãƒ ãŒé–‹å§‹ã•ã‚Œã¾ã—ãŸ")},g=()=>{t.value=!0,v?.announceScreenChange("ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«","ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹ã—ã¾ã™"),setTimeout(()=>{const e=new CustomEvent("startTutorial");window.dispatchEvent(e)},100)},x=()=>{t.value=!1,v?.announceScreenChange("ãƒ›ãƒ¼ãƒ ç”»é¢","ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚Šã¾ã—ãŸ")},w=e=>{e.screenReaderEnabled&&v?.announce("ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã—ãŸ",{priority:"assertive"})},k=e=>{const t=e.message.toLowerCase();return t.includes("dynamically imported module")||t.includes("failed to fetch")?"dynamic-import":t.includes("network")||t.includes("fetch")?"network":t.includes("permission")||t.includes("cors")?"permission":t.includes("cannot read")||t.includes("undefined")?"runtime":"unknown"},E=(e,t,n)=>{console.error("Home screen error:",e,n)},S=e=>{console.info("Error report:",e)};return u(()=>{console.info("App Version: v2025.12.09.0212 - UI Polish (JP Labels, Hand/Overlay Fix)"),console.log("[DEBUG] App mounted at "+(new Date).toISOString()),a.value=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),p=new pt,v=new q,p.registerShortcut({key:"h",modifiers:["alt"],description:"ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚‹",action:()=>{t.value&&x()}}),p.registerShortcut({key:"g",modifiers:["alt"],description:"ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹",action:()=>{t.value||b()}}),p.registerShortcut({key:"t",modifiers:["alt"],description:"ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹",action:()=>{t.value||g()}}),p.registerShortcut({key:"a",modifiers:["alt"],description:"ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šã‚’é–‹ã",action:()=>{n.value=!0,v?.announce("ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šã‚’é–‹ãã¾ã—ãŸ",{priority:"assertive"})}}),setTimeout(()=>{const e=c.value?.gameButtonRef,t=c.value?.tutorialButtonRef,n=document.querySelector(".back-to-home-btn");null!=e&&p?.registerFocusableElement(e,{priority:100,group:"main-actions",onFocus:()=>v?.announce("ã‚²ãƒ¼ãƒ é–‹å§‹ãƒœã‚¿ãƒ³ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹")}),null!=t&&p?.registerFocusableElement(t,{priority:90,group:"main-actions",onFocus:()=>v?.announce("ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«é–‹å§‹ãƒœã‚¿ãƒ³ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹")}),null!=n&&p?.registerFocusableElement(n,{priority:100,group:"game-actions",onFocus:()=>v?.announce("ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹")})},100),v.announceScreenChange("ãƒ›ãƒ¼ãƒ ç”»é¢","äººç”Ÿå……å®Ÿã‚²ãƒ¼ãƒ  ã¸ã‚ˆã†ã“ãã€‚Alt+Gã§ã‚²ãƒ¼ãƒ é–‹å§‹ã€Alt+Tã§ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã€Alt+Aã§ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šã€F1ã§ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤ºã§ãã¾ã™")}),C(()=>{p?.destroy(),v?.destroy()}),(e,d)=>(i(),s("div",wa,[d[5]||(d[5]=f("div",{class:"skip-links"},[f("a",{href:"#main-content",class:"skip-link"},"ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ç§»å‹•"),f("a",{href:"#navigation",class:"skip-link"},"ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã«ç§»å‹•")],-1)),o(dt),o(Q,{type:"slide",direction:"left",duration:400,intensity:"normal"},{default:l(()=>[t.value?(i(),s("div",ka,[o(Be,{fallback:"detailed","can-recover":!0},{default:l(()=>[o(xa,{onBackToHome:x})]),_:1}),f("button",{ref:"backToHomeButtonRef",class:"back-to-home-btn","aria-label":"ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚‹ (Alt+H)","aria-keyshortcuts":"Alt+H",onClick:x},d[2]||(d[2]=[f("span",{class:"btn-icon","aria-hidden":"true"},"â†",-1),f("span",{class:"btn-text"},"ãƒ›ãƒ¼ãƒ ",-1)]),512)])):(i(),s("div",Ca,[o(Be,{fallback:"custom","can-recover":!0,onError:E},{error:l(({error:e,retry:t,reload:n})=>[e?(i(),s(_,{key:0},[a.value?(i(),h(T(r),{key:0,error:e,"error-type":k(e),onRetry:t,onGoHome:n,onReportError:S},null,8,["error","error-type","onRetry","onGoHome"])):(i(),s("div",Sa,[d[3]||(d[3]=f("h2",null,"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",-1)),f("p",null,y(e.message),1),f("div",_a,[f("button",{class:"error-btn",onClick:t},"ã‚‚ã†ä¸€åº¦è©¦ã™",8,La),f("button",{class:"error-btn secondary",onClick:n},"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",8,Ta)])]))],64)):m("",!0)]),default:l(()=>[f("div",Ea,[o(mt),o(wt,{ref_key:"navigationRef",ref:c,onStartGame:b,onStartTutorial:g},null,512)])]),_:1})]))]),_:1}),d[6]||(d[6]=f("footer",{id:"footer",class:"sr-only",role:"contentinfo"},[f("p",null,"äººç”Ÿå……å®Ÿã‚²ãƒ¼ãƒ  - ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«ãªWebã‚²ãƒ¼ãƒ ä½“é¨“")],-1)),o(ke,{"is-open":n.value,onClose:d[0]||(d[0]=e=>n.value=!1),onSettingsChanged:w},null,8,["is-open"]),o(Ie,{enabled:!0}),t.value?m("",!0):(i(),s("button",{key:0,class:"accessibility-button","aria-label":"ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šã‚’é–‹ã (Alt+A)","aria-keyshortcuts":"Alt+A",title:"ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®š",onClick:d[1]||(d[1]=e=>n.value=!0)},d[4]||(d[4]=[f("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},[f("path",{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9H15L13.5 7.5C13 7 12.5 6.5 11.9 6.5H12.1C11.5 6.5 11 7 10.5 7.5L7.91 10.09C7.66 10.34 7.66 10.76 7.91 11.01L10.5 13.6C11 14.1 11.5 14.6 12.1 14.6H11.9C12.5 14.6 13 14.1 13.5 13.6L15 12.1H21C21.6 12.1 22 11.7 22 11.1V10C22 9.4 21.6 9 21 9ZM8.5 12.5L12 16L15.5 12.5L12 22L8.5 12.5Z",fill:"currentColor"})],-1)])))]))}}),[["__scopeId","data-v-65f7c109"]])),Ma=N();$a.use(Ma),async function(){try{if("serviceWorker"in navigator){const e=await navigator.serviceWorker.getRegistrations();let t=!1;for(const n of e)await n.unregister(),console.log("ğŸ—‘ï¸ Service Worker unregistered"),t=!0;if(t&&!sessionStorage.getItem("sw_cleaned"))return console.log("ğŸ”„ Reloading to clear SW cache..."),sessionStorage.setItem("sw_cleaned","true"),void window.location.reload()}$a.mount("#app"),console.log("ğŸš€ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒèµ·å‹•ã—ã¾ã—ãŸ")}catch(e){console.error("ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ:",e)}}();export{U as _};
//# sourceMappingURL=index-D59QsnMl.js.map
