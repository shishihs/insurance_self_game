{"version":3,"mappings":"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","names":["props","__props","transitionType","computed","type","direction","intensity","onBeforeEnter","el","element","style","transitionDuration","duration","transitionTimingFunction","easing","onEnter","done","setTimeout","onLeave","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_Transition","name","value","mode","_renderSlot","_ctx","$slots","ScreenReaderManager","constructor","__publicField","this","Map","createLiveRegions","createGameStatusElements","setupAriaDescriptions","announce","message","options","priority","interrupt","clearQueue","announcementQueue","push","processQueue","announceGameState","announcement","context","updateGameStatus","getPriorityForGameState","persist","announceCardDetails","card","description","createCardDescription","cardDetailsElement","textContent","announceError","announceSuccess","announceProgress","current","total","Math","round","announceOptions","currentIndex","length","announceTimer","remainingTime","unit","unitText","announceScreenChange","screenName","announceKeyboardHelp","join","announceGameStats","stats","Object","entries","map","key","translateStatKey","announceRegionStatus","regionName","items","itemCount","itemType","getItemType","announceDragDrop","phase","details","itemName","targetName","success","reason","politeRegion","document","createElement","setAttribute","className","id","body","appendChild","liveRegions","set","assertiveRegion","gameStatusElement","head","isProcessingQueue","shift","delay","performAnnouncement","region","get","messageElement","parentNode","removeChild","statusInfo","timestamp","Date","toISOString","JSON","stringify","parts","translateCardType","power","cost","includes","vitality","turn","cardsInHand","challengesCompleted","insuranceCards","life","insurance","challenge","dream","firstItem","forEach","ms","Promise","resolve","destroy","emit","__emit","defaultSettings","colorScheme","highContrast","fontSize","reduceMotion","animationSpeed","screenReaderEnabled","audioDescriptions","soundEffectsVolume","stickyKeys","keyRepeatDelay","touchTargetSize","settings","ref","screenReaderManager","colorFilters","default","protanopia","deuteranopia","tritanopia","achromatopsia","saveSettings","localStorage","setItem","applySettings","root","documentElement","filter","classList","toggle","setProperty","small","medium","large","String","resetSettings","onMounted","saved","getItem","parse","e","loadSettings","cleanup","handleKeyDown","isOpen","ctrlKey","altKey","schemes","indexOf","window","addEventListener","removeEventListener","setupKeyboardShortcuts","watch","deep","_createBlock","class","onClick","_createElementVNode","_hoisted_2","innerHTML","values","_hoisted_4","_cache","_hoisted_5","_hoisted_6","_hoisted_7","for","$event","onChange","_vModelSelect","setting","originalValue","previewSettings","_hoisted_8","_hoisted_9","_vModelCheckbox","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","min","max","step","number","_hoisted_15","_toDisplayString","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","FocusIndicatorManager","color","width","offset","borderRadius","indicator","createIndicator","setupEventListeners","cssText","handleFocusIn","bind","handleFocusOut","updatePosition","MutationObserver","focusedElement","observe","attributes","childList","subtree","attributeFilter","event","target","isFocusableElement","showIndicator","hideIndicator","some","matches","selector","closest","rect","getBoundingClientRect","left","top","height","opacity","getComputedStyle","activeElement","setOptions","assign","border","remove","isEnabled","enabled","currentOptions","focusIndicatorManager","showHints","hintTimer","indicatorStyle","keyboardShortcuts","initializeFocusIndicator","destroyFocusIndicator","updateOptions","showKeyboardHints","clearTimeout","hideKeyboardHints","handleKeydown","updateSettings","newOptions","toggleEnabled","matchMedia","onUnmounted","__expose","reducedMotion","_Fragment","_renderList","shortcut","_hoisted_3","_unref","onInput","parseInt","hasError","error","errorInfo","errorCount","isRecovering","errorSeverity","toLowerCase","userFriendlyMessage","onErrorCaptured","err","instance","info","onError","tryRecover","async","reloadPage","location","reload","copyErrorDetails","stack","navigator","userAgent","trim","clipboard","writeText","alert","sendErrorReport","CustomEvent","detail","component","dispatchEvent","fallback","canRecover","disabled","_createTextVNode","retry","userFriendlyMessages","initializeDefaultPatterns","initializeFallbackMessages","patterns","pattern","title","actionLabel","actionType","icon","severity","helpUrl","conditions","category","actionData","url","showDetails","fallbackMessages","generateUserMessage","matchesPattern","enrichMessage","RegExp","test","toLocaleTimeString","deviceInfo","isMobile","errorId","fingerprint","addPattern","p","unshift","removePattern","index","findIndex","splice","getPatterns","previewMessage","errorMessage","mockError","now","getStats","patternsCount","categoriesCount","size","hasConditions","Boolean","notifications","addNotification","notification","random","newNotification","autoHide","userMessage","hideDelay","isExpanded","slice","removeNotification","n","handleError","originalError","getDefaultIcon","getColorClass","executeAction","retryEvent","href","contactEvent","toggleDetails","find","visibleNotifications","clearAll","_Teleport","to","_TransitionGroup","tag","_normalizeClass","expanded","_normalizeStyle","transform","role","openHelp","open","route","toLocaleString","viewBox","fill","stroke","x1","y1","x2","y2","animationDuration","sanitizeInput","input","Error","replace","match","RateLimiter","isAllowed","maxAttempts","windowMs","validAttempts","attempts","time","reset","delete","clear","getRemainingAttempts","getNextAttemptTime","userAttempts","generateSecureRandomString","array","Uint8Array","crypto","getRandomValues","i","floor","Array","from","byte","chars","generateSecureHash","data","subtle","dataBuffer","TextEncoder","encode","hashBuffer","digest","b","toString","padStart","hash","charCodeAt","abs","secureLocalStorage","INTEGRITY_SUFFIX","encrypt","sanitizedKey","serialized","encryptionKey","getOrCreateEncryptionKey","simpleEncrypt","integrityHash","decrypt","item","removeItem","simpleDecrypt","SyntaxError","keyName","result","keyChar","dataChar","fromCharCode","btoa","encryptedData","atob","KeyboardManager","setupFocusVisible","registerFocusableElement","focusableElement","group","onFocus","onBlur","onActivate","existingIndex","focusableElements","sort","a","setupElementAccessibility","unregisterFocusableElement","currentFocusIndex","registerShortcut","createShortcutKey","modifiers","shortcuts","unregisterShortcut","shortcutKey","focusNext","setFocus","focusPrevious","focusGroup","groupName","groupElements","focusElement","getCurrentFocusedElement","startFocusTrap","container","focusableInContainer","contains","endFocusTrap","removeAttribute","toggleHelp","helpPanel","createHelpPanel","closeHelp","closeButton","querySelector","focus","createSkipLinks","skipLinks","skipToMain","createSkipLink","skipToNav","skipToFooter","setActive","active","isActive","currentElement","blur","setFocusVisible","focusVisibleEnabled","getActiveModifiers","preventDefault","action","shiftKey","focusableEl","click","add","offsetParent","scrollIntoView","behavior","block","inline","hasAttribute","tagName","metaKey","text","link","panel","helpContent","shortcutsList","basicGroup","basicTitle","basicDl","desc","dt","dd","gameGroup","gameTitle","gameDl","formatShortcut","onclick","m","charAt","toUpperCase","gameButtonRef","tutorialButtonRef","$emit","SUPPORTED_LOCALES","LOCALE_NAMES","ja","en","zh","ko","RTL_LOCALES","i18n","createI18n","legacy","locale","getSavedLocale","browserLang","language","split","detectBrowserLocale","fallbackLocale","messages","ui","navigation","home","back","game","tutorial","statistics","accessibility","feedback","buttons","start","startGame","startTutorial","close","cancel","ok","yes","no","continue","skip","next","previous","finish","save","load","common","loading","warning","confirm","welcome","congratulations","gameOver","newGame","subtitle","stages","youth","adult","middleAge","elderly","elements","stage","score","level","cards","riskCard","insuranceCard","eventCard","actionCard","powerCard","actions","draw","play","discard","buyInsurance","cancelInsurance","takeRisk","avoidRisk","types","health","auto","travel","income","disability","longTermCare","terms","premium","coverage","deductible","beneficiary","policy","claim","renewal","cancellation","risks","categories","financial","accident","natural","career","family","levels","low","high","extreme","steps","introduction","content","basicRules","cardTypes","insuranceSystem","strategy","sections","overview","performance","trends","detailed","metrics","gamesPlayed","winRate","averageScore","bestScore","totalPlayTime","averageGameTime","survivalRate","insuranceEfficiency","charts","vitalityTrend","stageAnalysis","cardUsage","decisionAnalysis","riskManagement","insuranceCoverage","visual","audio","interaction","display","largeText","screenReader","keyboardNavigation","audioCues","subtitles","slowAnimations","changeLanguage","homeScreen","openStatistics","openAccessibility","help","bug","suggestion","general","rating","form","subject","email","submit","thankYou","errors","network","gameState","invalidAction","cardNotFound","insufficientFunds","insuranceNotActive","gameSaved","gameLoaded","insurancePurchased","riskAvoided","levelCompleted","achievementUnlocked","currency","currencySymbol","dateFormat","numberFormat","nationalHealth","employeeHealth","nationalPension","employeePension","workersComp","unemployment","earthquake","typhoon","flood","aging","recession","deflation","ageGroups","young","middle","senior","hurricane","inflation","jobLoss","smog","economicSlowdown","agingPopulation","fineDust","economicRecession","agingSociety","numberFormats","currencyDisplay","decimal","minimumFractionDigits","maximumFractionDigits","datetimeFormats","short","year","month","day","long","weekday","t","useI18n","currentLocale","global","currentLocaleName","localeOptions","label","flag","getFlagEmoji","saveLocale","lang","dir","setLocale","announceToScreenReader","toggleDropdown","handleClickOutside","trigger","nextOption","prevOption","previousElementSibling","compact","ariaLabel","onKeydown","option","tabindex","_PWAManager","config","onLine","init","getInstance","defaultConfig","enablePushNotifications","enableBackgroundSync","enableOfflineMode","notificationSettings","gameReminders","performanceAlerts","updateNotifications","reminderInterval","registerServiceWorker","setupOnlineOfflineHandling","setupInstallPrompt","initializePushNotifications","setupBackgroundSync","registration","serviceWorker","register","scope","updateViaCache","newWorker","installing","state","controller","notifyServiceWorkerUpdate","handleServiceWorkerMessage","handleGameDataSync","handlePerformanceData","notificationPermission","requestNotificationPermission","subscribeToPushNotifications","setupNotificationScheduler","Notification","permission","requestPermission","ready","pushSubscription","pushManager","subscribe","userVisibleOnly","applicationServerKey","vapidKey","generateVAPIDKey","sendSubscriptionToServer","subscription","toJSON","interval","setInterval","scheduleGameReminder","hidden","isOnline","sendNotification","showNotification","handleOnlineStatus","syncPendingData","preloadCriticalAssets","showOfflineMessage","notifyNetworkStatus","sync","gameData","getLocalGameData","sendGameDataToServer","installPrompt","showInstallBanner","hideInstallBanner","trackInstallEvent","promptInstall","prompt","userChoice","outcome","criticalAssets","postMessage","resources","responseTime","sendPerformanceAlert","getStatus","hasServiceWorker","hasPushSubscription","canInstall","manageCaches","cacheType","updateConfig","newConfig","disable","registrations","getRegistrations","unregister","unsubscribe","pwaManager","showPrompt","isInstalling","handleInstallAvailable","handleInstalled","handleInstall","handleDismiss","dismissed","d","xmlns","cx","cy","r","showOfflineIndicator","showUpdateIndicator","showPWAStatus","pwaStatus","pwaStatusTitle","statuses","handleNetworkStatus","handleOfflineMode","handleUpdateAvailable","handleUpdate","waiting","dismissUpdate","updatePWAStatus","statusUpdateInterval","clearInterval","useGameStore","defineStore","shallowRef","isInitialized","lastUpdate","maxVitality","hand","currentStage","currentTurn","currentPhase","currentChallenge","insuranceTypeChoices","cardChoices","lastMessage","triggerUpdate","initializeGame","Game","drawCards","count","startChallenge","drawChallenge","challengeCard","challengeDeck","drawCard","resolveChallenge","selectInsurance","insuranceType","endTurn","nextTurn","insuranceExpirations","toggleCardSelection","cardClasses","isSelected","isPlayable","typeLabel","store","onCardClick","selectedCards","CardComponent","onDraw","onEndTurn","onChallenge","choice","Hand","showGame","showAccessibilitySettings","showStatistics","StatisticsDashboard","defineAsyncComponent","loader","__vitePreload","import","then","S","__VITE_PRELOAD__","errorComponent","render","h","timeout","MobileErrorHandler","FeedbackButton","defineComponent","navigationRef","keyboardManager","backToHome","closeStatistics","handleAccessibilitySettingsChanged","handleFeedbackSubmitted","feedbackId","getErrorType","handleHomeError","reportError","gameButton","tutorialButton","backButton","errorNotification","transitionAnimations","errorBoundary","GameCanvas","onBackToHome","onRetry","onGoHome","onReportError","appHeader","navigationActions","onStartGame","onStartTutorial","onOpenStatistics","featureShowcase","accessibilitySettings","onClose","onSettingsChanged","visualIndicators","languageSwitcher","_Suspense","onFeedbackSubmitted","pwaInstallPrompt","pwaStatusIndicator","_SecurityMonitor","totalThreatsBlocked","totalInputValidations","totalRateLimitViolations","sessionStartTime","getSecurityMetrics","securityMetrics","uptime","currentThreats","suspiciousActivities","getTime","cleanupRateLimiters","limiter","rateLimiters","logSuspiciousActivity","activity","suspiciousActivity","getRecentActivitiesByType","handleCriticalThreat","persistActivityToStorage","timeWindowMs","cutoff","existingLogs","trimmedLogs","checkRateLimit","blockDurationMs","has","allowed","remainingAttempts","nextAttemptTime","source","metadata","getSuspiciousActivities","limit","generateSecurityReport","activities","typeCount","severityCount","hourlyCount","hour","getHours","totalActivities","typeBreakdown","severityBreakdown","hourlyBreakdown","recentActivities","generateTime","recommendations","generateSecurityRecommendations","sessionStorage","SecurityMonitor","initializeSecurity","violatedDirective","sourceFile","blockedURI","lineNumber","columnNumber","mutations","mutation","addedNodes","node","nodeType","Node","ELEMENT_NODE","src","getAttribute","startsWith","origin","scriptSrc","originalFetch","fetch","args","method","apply","originalXHR","XMLHttpRequest","xhr","originalOpen","setupNetworkMonitoring","devtools","lastCheck","detectionMethods","sizeDetection","outerHeight","innerHeight","outerWidth","innerWidth","consoleDetection","debuggerDetection","Function","contextMenuDetection","detectionResults","console","debugger","contextMenu","isDetected","monitor","handleDevToolsDetection","setupDevToolsDetection","validation","maxLength","allowedTypes","sanitize","maxDepth","checkPatterns","sanitizedInput","inputType","isValid","stringInput","sanitizeAdvancedInput","visitedObjects","Set","getDepth","obj","currentDepth","isArray","arrayLength","keys","propertyCount","validateInputDepth","validateUserInput","inputValue","elementType","elementName","memory","usedMB","usedJSHeapSize","limitMB","jsHeapSizeLimit","usagePercent","toFixed","objectCounts","globalKeys","previousCount","currentCount","increase","setupMemoryLeakDetection","securityFeatures","csp","https","protocol","referrerPolicy","missingFeatures","supported","feature","allFeatures","performInitialSecurityCheck","incidents","oneDayAgo","recentIncidents","incident","generateCSRFToken","_XSSProtection","setTrustedDomains","domains","trustedDomains","domain","setAllowedTags","tags","allowedTags","sanitizeHTML","html","sanitized","openTagRegex","closeTagRegex","escapeJavaScript","str","sanitizeURL","parsedURL","URL","hostname","endsWith","originalUrl","validateDOMOperation","operation","sanitizedValue","attrName","attributeName","XSSProtection","_CSRFProtection","setValidOrigins","origins","validOrigins","generateTokenForAction","expiryMinutes","token","expires","tokenStore","cleanupExpiredTokens","validateTokenForAction","providedToken","tokenData","expectedToken","validateCSRFToken","validateOrigin","normalizedOrigin","providedOrigin","validateReferer","referer","refererURL","currentOrigin","clearAllTokens","CSRFProtection","CSPManager$1","_a","generateScriptNonce","nonce","nonces","validateNonce","setDirective","directive","cspDirectives","addToDirective","existing","generateCSPHeader","directives","applyCSPToDocument","existingMeta","meta","httpEquiv","executeScriptSafely","code","scriptNonce","script","_SecurityInterceptor","CSPManager","validateFormSubmission","csrfToken","formData","FormData","csrfProtection","referrer","fieldName","original","validateAjaxRequest","headers","xssProtection","jsonString","payloadSize","initialize","cspManager","SecurityInterceptor","_CSPManager","setupDefaultDirectives","setupViolationReporting","updateCSPMetaTag","scheduleNonceRotation","scriptSources","generateNewNonce","currentNonce","nonceExpiry","nonceLength","expiryTime","getCurrentNonce","providedNonce","expired","expectedNonce","removeFromDirective","v","forMetaTag","policies","metaTagInvalidDirectives","policyValues","existingCSP","cspMeta","htmlContent","outerHTML","violation","documentURI","effectiveDirective","originalPolicy","sample","statusCode","violations","assessViolationSeverity","reportEndpoint","sendViolationReport","executeScriptWithNonce","codeLength","addStyleWithNonce","css","cssLength","getViolationHistory","getViolationStats","byDirective","bySource","setReportEndpoint","endpoint","debugCSP","_SecurityHeaderManager","initializeSecurityHeaders","setContentTypeOptions","setXSSProtection","setReferrerPolicy","setPermissionsPolicy","setStrictTransportSecurity","setCrossOriginPolicies","updateMetaTag","setFrameOptions","newMeta","validateSecurityHeaders","valid","missing","header","SecurityHeaderManager","_SecurityAuditLogger","enableStackTrace","enableGeoLocation","enablePerformanceMetrics","autoFlushInterval","compressionThreshold","sessionId","generateSessionId","startAutoFlush","setupUnloadHandler","substr","logSecurityEvent","eventType","generateEventId","viewport","getPerformanceMetrics","stackTrace","captureStackTrace","calculateEventHash","eventQueue","maxEventsInMemory","flushQueue","lastLogErrorReset","logErrorCount","MAX_LOG_ERRORS_PER_MINUTE","call","eventString","getEntriesByType","loadTime","loadEventEnd","loadEventStart","domContentLoaded","domContentLoadedEventEnd","domContentLoadedEventStart","memoryUsage","used","totalJSHeapSize","timing","trimmedEvents","storage","maxEventsInStorage","shouldCompress","updateAuditMetadata","events","lastUpdated","totalEvents","oldestEvent","newestEvent","eventTypes","sources","severityCounts","critical","searchEvents","filteredEvents","startDate","endDate","severities","searchTerm","generateAuditReport","end","eventTypeCount","sourceCount","topEventTypes","topSources","severityTrend","calculateSeverityTrend","generateRecommendations","generatedAt","period","summary","criticalEvents","highSeverityEvents","mediumSeverityEvents","lowSeverityEvents","uniqueEventTypes","uniqueSources","trend","date","setTime","dateStr","dayEvents","frequentEvents","emergencyError","exportAuditLog","format","csvRows","row","clearAuditLog","clearedAt","getConfig","getStatistics","queueSize","totalEventsLogged","SecurityAuditLogger","auditLogger","filename","lineno","colno","originalConsoleError","consoleErrorCount","lastResetTime","MAX_CONSOLE_ERRORS_PER_MINUTE","substring","_APISecurityManager","enforceHTTPS","allowedOrigins","allowedMethods","maxRequestSize","rateLimitConfig","maxRequests","requireAPIKey","enableRequestSigning","corsPreflightMaxAge","updatedFields","request","validateCORS","requestOrigin","allowedOrigin","baseDomain","validateMethod","validateRequestSize","contentLength","clonedRequest","clone","Blob","requestSize","maxSize","clientId","windowStart","recentRequests","getRequestTimes","setRequestTimes","requestCount","setClientBlock","isClientBlocked","blockUntil","getClientBlockTime","clearClientBlock","generateAPIKey","permissions","expirationHours","keyId","keyValue","expiresAt","apiKey","usageCount","rateLimit","maxRequestsPerMinute","maxRequestsPerHour","apiKeys","validateAPIKey","requiredPermission","availablePermissions","checkAPIKeyRateLimit","lastUsed","signRequest","payload","secretKey","signatureData","signature","verifyRequestSignature","signedRequest","maxAgeMs","currentTime","maxAge","nonceKey","requestCache","expectedSignature","cleanupOldNonces","providedSignature","validateRequest","apiKeyId","apiKeyValue","warnings","securityHeaders","contentType","stored","times","securityMonitor","apiSecurity","_AdvancedRateLimiter","totalRequests","uniqueClients","suspiciousClients","blockedRequests","avgResponseTime","systemLoad","initializeDefaultConfigs","startBackgroundTasks","configs","adaptiveScaling","burstAllowance","penaltyMultiplier","configName","requestContext","profile","clientProfiles","initializeClientProfile","blockedClients","ddosMetrics","remainingRequests","resetTime","riskScore","blockReason","updateRequestHistory","analyzeBehaviorPattern","updateRiskScore","effectiveLimit","calculateAdaptiveLimit","getRecentRequests","handleRateLimitViolation","threatLevel","adaptiveLimit","lastActivity","behaviorPattern","requestFrequency","userAgentConsistency","geographicConsistency","sessionDuration","interactionQuality","humanLikelihood","history","requestHistory","filteredHistory","intervals","calculateHumanLikelihood","mean","reduce","sum","variance","coefficientOfVariation","sqrt","ipAddress","isKnownMaliciousIP","adaptiveFactor","recentViolations","blockDuration","investigateRelatedClients","detectDDoSAttack","calculateAverageResponseTime","calculateSystemLoad","attackSeverity","isUnderAttack","requestsPerSecond","suspiciousRatio","manageAutoBlockList","criticalClients","sourceClient","activeClients","topRiskClients","totalClients","advancedRateLimiter","_SessionManager","renewalThresholdMs","maxConcurrentSessions","requireSecureCookie","enableSessionFingerprinting","enableDeviceTracking","loadPersistedSessions","startSessionMaintenance","createSession","userId","roles","deviceFingerprint","generateDeviceFingerprint","enforceSessionLimits","registerDevice","session","createdAt","getCurrentIPAddress","activeSessions","userSessionIds","userSessions","persistSession","validateSession","invalidateSession","currentFingerprint","storedFingerprint","renewSession","newExpiresAt","updatedUserSessions","invalidateAllUserSessions","invalidatedCount","existingSessions","sessionsToRemove","removedSessions","maxSessions","existingDevice","deviceRegistry","device","screen","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","platform","trusted","lastSeen","components","colorDepth","getTimezoneOffset","hardwareConcurrency","maxTouchPoints","canvas","ctx","getContext","textBaseline","font","fillText","toDataURL","randomPart","timestampPart","cleanupExpiredSessions","logSessionStatistics","cleanedCount","getSessionStatistics","totalDuration","deviceTypes","userSessionCounts","deviceType","classifyDevice","averageSessionDuration","topUsersBySessionCount","sessionCount","totalActiveSessions","totalUsers","getSession","getUserSessions","sessionManager","_SecureErrorHandler","exposeStackTrace","maxErrorMessageLength","sensitiveDataPatterns","logIntegrityCheck","errorSanitization","clientErrorReporting","serverErrorReporting","initializeSensitivePatterns","setupGlobalErrorHandlers","sensitivePatterns","additionalContext","sanitizeValue","sanitizedMessage","sanitizeErrorMessage","sanitizedStackTrace","sanitizeStackTrace","determineSeverity","generateUserFriendlyMessage","sanitizedContext","sanitizeContext","sanitizedError","generateErrorCode","calculateErrorHash","errorLog","handleCriticalError","generateErrorReport","lines","hashSensitiveData","sanitizeObject","sanitizedParams","URLSearchParams","searchParams","isSensitiveParameter","search","sensitiveKey","prefix","suffix","ReferenceError","TypeError","errorType","hashData","attemptAutoRecovery","triggerSessionReset","clearCorruptedStorage","keysToPreserve","allKeys","preserve","report","reportedAt","reportedBy","environmentInfo","searchErrors","fromDate","toDate","getErrorStatistics","oneHourAgo","errorsBySeverity","errorsByComponent","errorCounts","recentErrors","topErrors","totalErrors","clearErrorLog","secureErrorHandler","_AdvancedInputValidator","fileValidationConfig","allowedExtensions","scanForMalware","checkMetadata","validateStructure","initializeDefaultRules","addValidationRule","validate","validateSQLInjection","validateXSS","validateCommandInjection","validatePathTraversal","validateNumberRange","validateNumberPrecision","validateObjectStructure","validateObjectSize","validateArrayLength","validateEmailFormat","validateEmailDomain","validateURLProtocol","validateURLDomain","rule","validationRules","ruleName","addBusinessRule","entity","businessRules","validateInput","rules","totalConfidence","validRules","validateType","confidence","field","sanitizeLogValue","averageConfidence","validateJSONPayload","schema","sanitizedPayload","schemaValidation","validateAgainstSchema","depth","calculateObjectDepth","validateObjectRecursively","validateFile","file","extension","getFileExtension","validateMimeExtensionMatch","fileName","mimeType","contentValidation","validateFileContent","malwareCheck","metadataCheck","validateFileMetadata","validateBusinessRules","condition","suspiciousPatterns","g","Number","isFinite","prototype","hasOwnProperty","estimatedSize","isSuspicious","allowedProtocols","allowedDomains","isNaN","required","childDepth","fieldContext","lastIndexOf","expectedExtensions","buffer","arrayBuffer","validateFileHeader","expectedMagic","magic","every","foundPatterns","lastModified","stringValue","advancedInputValidator","_IntegratedSecuritySystem","enableAPIProtection","enableRateLimiting","enableSessionManagement","enableSecureErrorHandling","enableInputValidation","enableAuditLogging","enableRealTimeMonitoring","securityLevel","autoBlock","alertThreshold","customConfig","adjustConfigForSecurityLevel","initializeComponents","setupSecurityPolicies","startRealTimeMonitoring","setupSecurityEventHandlers","version","setupFallbackSecurity","initPromises","headerManager","all","validateGameAction","performLightweightSecurityCheck","performDetailedSecurityCheck","generateHourlySecurityReport","ddosStatus","handleDDoSDetection","handleSecurityViolation","issues","headerValidation","cspStats","securityStats","handleHighThreatLevel","rateLimitStats","errorStats","cspViolations","enableEmergencyProtectionMode","executeAutomaticProtection","threatCount","threshold","temporarilyEnhanceSecurity","disableEmergencyProtectionMode","querySelectorAll","getSecurityStatus","sessionStats","systemHealth","activeThreats","errorRate","componentStatus","rateLimiting","sessionManagement","errorHandling","inputValidation","auditLogging","monitoring","auditReport","threatTypes","compareSeverity","topAttackTypes","owaspCompliance","assessOWASPCompliance","totalThreats","blockedAttacks","vulnerabilitiesFound","countVulnerabilities","systemUptime","startTime","threatAnalysis","suspiciousIPs","vulnerabilityHotspots","identifyVulnerabilityHotspots","averageResponseTime","resourceUsage","cpu","apiCallsBlocked","rateLimitHits","generateSystemRecommendations","compliance","owaspTop10","dataProtection","accessControl","severityOrder","componentIssues","attackTypes","attack","status","originalInnerHTML","Element","defineProperty","shutdown","integratedSecuritySystem","PERFORMANCE_CONFIG","enableDetailedChecks","lightCheckInterval","detailedCheckInterval","memoryWarningThreshold","maxEventListeners","useRequestIdleCallback","ErrorLogger","buildVersion","loadFromStorage","startRealtimeAnalysis","log","entry","generateId","correlationId","generateCorrelationId","resolved","impact","calculateBusinessImpact","logs","analyticsBuffer","notifyRealtimeListeners","maxLogs","logRotationSize","saveToStorage","checkAlertConditions","logWarning","getLogs","filteredLogs","endTime","getWarnings","timeRange","bySeverity","byCategory","vue","javascript","user","system","mostCommonErrors","errorMessages","timeSpan","regex","exported","rows","pruneOldLogs","logsData","storageKey","warningsData","warningStorageKey","recentLogs","recentWarnings","DOMException","realtimeListeners","listener","logToConsole","fiveMinutesAgo","recentCriticalErrors","triggerAlert","timespan","latestError","sameCorrelationErrors","alertEvent","isAnalyzing","performRealtimeAnalysis","analyzeErrorPatterns","analyzeTrends","anomalies","detectAnomalies","analysisEvent","sampleSize","byComponent","byCorrelation","messageCount","timeSlots","slotSize","slot","slotKey","sortedSlots","calculateTrend","trendValue","sumX","sumY","y","x","_","recentMessages","historicalMessages","newMessages","msg","newErrors","addRealtimeListener","markAsResolved","resolvedBy","getRelatedErrors","setUserId","getAdvancedStatistics","baseStats","resolvedErrors","mttr","impactStats","sourceStats","resolutionRate","correlationGroups","getCorrelationGroups","groups","ErrorReporter","environment","trackPageView","startBatchReporting","additionalData","browser","getBrowserInfo","getScreenInfo","getMemoryInfo","sessionInfo","pageViews","queue","maxQueueSize","isReporting","batch","batchSize","sendBatch","reports","response","statusText","ua","pixelRatio","devicePixelRatio","pushState","reportInterval","updateMetadata","ErrorRecovery","registerDefaultStrategies","initializePerformanceBaseline","performanceBaseline","registerStrategy","recover","networkStatus","diagnoseNetworkStatus","isOffline","waitForOnline","clearDNSCache","getRecoveryAttempts","maxRetries","retryDelay","healthCheck","checkNetworkHealth","isCleaningUp","lastCleanupTime","CLEANUP_INTERVAL","initialMemory","getCurrentMemoryUsage","performMemoryCleanup","checkMemoryHealth","componentName","backupComponentState","remountEvent","preserveState","restoreComponentState","rollback","cleanupLocalStorage","restoreGameState","reinitEvent","prerequisites","newGameEvent","attempt","fallbackEvent","insertIndex","strategies","s","incrementRecoveryAttempts","strategyUsed","attemptsCount","addToHistory","resetRecoveryAttempts","handler","cleanupEventListeners","clearCaches","keysToRemove","expiry","gameDataKeys","strategyName","recoveryAttempts","recoveryHistory","maxHistorySize","successful","failed","byStrategy","successRate","fromEntries","currentAttempts","cache","latency","connection","bandwidth","effectiveType","offlineEvent","signal","AbortSignal","scheduleTask","callback","requestIdleCallback","cleanupDOMElements","gc","detectAndFixMemoryLeaks","logElements","memoryLeakEvent","cleanupOrphanedTimers","timerCleanupEvent","currentMemory","backupEvent","restoreEvent","savedState","autoSave","checkPrerequisites","prerequisite","prerequisiteStrategy","tryAdvancedRecover","sortedStrategies","healthCheckPassed","rollbackError","gameStateBackup","_GlobalErrorHandler","enableLogging","enableReporting","enableRecovery","reportToServer","showUserNotification","maxErrorsPerMinute","recoveryStrategies","errorLogger","errorReporter","errorRecovery","setupVueErrorHandler","app","errorHandler","$options","$props","warnHandler","trace","setupGlobalHandlers","onerror","messageStr","line","column","observer","PerformanceObserver","list","getEntries","entryType","responseStatus","entryTypes","enhancedErrorInfo","enhanceErrorInfo","generateFingerprint","isDuplicateError","logStructuredError","recoveryEvent","successEvent","recoveryStrategy","catch","recoveryError","notifyUser","trackErrorPerformance","oneMinuteAgo","errorTimestamps","ts","showErrorNotification","getErrorStats","isHealthy","pathname","screenSize","breadcrumbs","duplicateErrors","errorPerformanceHistory","triggerSystemAlert","addBreadcrumb","getHealthStatus","criticalErrorsRecent","recentErrorCount","criticalErrorCount","GlobalErrorHandler","DebugInfoCollector","setGameStateProvider","provider","gameStateProvider","setComponentProvider","componentProvider","setFeatureProvider","featureProvider","collect","opts","includeMemory","includePerformance","includeGameState","includeExperimental","maxDataSize","debugInfo","collectSystemInfo","collectPerformanceInfo","application","collectApplicationInfo","features","collectFeatureInfo","experimental","collectExperimentalInfo","truncateData","sanitizeData","cookieEnabled","screenResolution","viewportSize","navigationStart","loadComplete","domReady","sanitizeUrl","activeFeatures","webGL","webWorker","geolocation","mediaDevices","perfInfo","paintEntries","fpEntry","fcpEntry","firstPaint","firstContentfulPaint","downlink","rtt","appInfo","detectActiveFeatures","getErrorCount","currentComponent","routePath","lastError","getLastError","testFeature","hasWebGL","flags","getFeatureFlags","abTests","getABTests","featureToggles","getFeatureToggles","urlObj","isSensitiveParam","sensitive","__errorHandling","lastLog","__vite_import_meta_env__","flagName","tests","abTestData","toggles","toggleData","sanitizeUserAgent","part","truncated","debugInfoCollector","errorHandlingSystem","enableUserNotifications","globalHandler","debugCollector","integrateWithVue","addErrorPattern","addErrorListener","onAlert","onRecovery","setupPerformanceMonitoring","setupVueDevToolsIntegration","__VUE_DEVTOOLS_GLOBAL_HOOK__","memoryUsed","memoryLimit","percentage","lastReportTime","REPORT_INTERVAL","LONG_TASK_THRESHOLD","longTasks","longestTask","prev","taskCount","task","collectDebugInfo","healthStatus","ErrorHandlingPlugin","install","globalProperties","$errorHandling","getHealth","provide","serviceWorkerManager","isInstalled","isStandalone","hasNotificationPermission","hasBackgroundSync","isOfflineReady","basePath","initializePWAFeatures","onSuccess","checkForUpdates","setupNetworkListeners","setupRefreshListener","enableNotifications","setupNotifications","setupAccessibilityCache","update","capabilities","isRunningStandalone","ServiceWorkerRegistration","cacheAccessibilitySettings","offlineGameMode","setupOfflineGameMode","standalone","dispatchPWAEvent","urlBase64ToUint8Array","getVAPIDPublicKey","onBackgroundSync","a11ySettings","newValue","savedGames","gameSettings","trackInstalling","updateAvailable","onUpdate","worker","onOnline","onOffline","refreshing","clearCache","cacheNames","caches","cacheName","isUpdateAvailable","getPWACapabilities","badge","vibrate","renotify","requireInteraction","requestBackgroundSync","base64String","base64","repeat","rawData","outputArray","getPWAStats","installPromptAvailable","DEFAULT_OPTIONS","centered","performanceMonitor","setupPerformanceObservers","trackCustomMetrics","paintObserver","fcp","reportMetric","observers","lcpObserver","lastEntry","lcp","clsValue","clsObserver","hadRecentInput","cls","inputObserver","processingStart","inputDelay","processingTime","processingEnd","inp","buffered","navigationObserver","appInitTime","fetchStart","isMonitoring","connectionType","gtag","event_category","event_label","non_interaction","getMetricCategory","FCP","good","needs_improvement","LCP","CLS","INP","FID","markGameStart","mark","markGameLoaded","measure","getEntriesByName","gameLoadTime","markRouteChange","routeName","markName","previousMarks","measureName","routeChangeTime","getMetrics","getPerformanceScore","generateReport","disconnect","lazyLoader","setupIntersectionObserver","setupIdleCallback","IntersectionObserver","isIntersecting","loadElement","unobserve","rootMargin","resourceQueue","processChunk","deadline","timeRemaining","resource","loaded","processResource","didTimeout","loadScript","loadStylesheet","loadImage","loadedResources","reject","onload","rel","img","Image","dataset","srcset","background","backgroundImage","generatePlaceholder","preloadResource","priorityValue","preloadImages","urls","loadComponent","componentLoader","attemptLoad","retries","getLoadedResourcesCount","getQueueLength","queueLength","isProcessing","vLazyLoad","mounted","binding","unmounted","_SEOManager","updatePageSEO","currentConfig","keywords","updateMetaProperty","image","updateCanonicalUrl","alternateUrls","updateAlternateUrls","updateStructuredData","property","gameStructuredData","gameCategory","genre","numberOfPlayers","playMode","operatingSystem","applicationCategory","applicationSubCategory","inLanguage","isAccessibleForFree","isFamilyFriendly","contentRating","offers","price","priceCurrency","availability","screenshot","setStructuredData","websiteStructuredData","potentialAction","structuredDataCache","existingScript","getElementById","generateBreadcrumbs","breadcrumbData","itemListElement","position","getCurrentUrl","getCurrentLanguage","updateLanguage","updatedConfig","generateAlternateUrls","baseUrl","pageName","page_title","page_location","trackEvent","eventName","parameters","calculateSEOScore","h1","generateSEOReport","scoreInfo","structuredData","pageInfo","seoManager","createApp","App","use","pinia","createPinia","reportApiKey","retrieved","validateSecurityConfiguration","debounce","func","wait","throttle","inThrottle","handleVisibilityChange","handleContextMenu","handleStorageChange","storageArea","setupOptimizedSecurityEventListeners","checkState","isLightCheckRunning","isDetailedCheckRunning","lastLightCheck","lastDetailedCheck","scheduleCheck","checkFunc","runCheck","usage","scriptTags","externalScripts","localStorageSize","startOptimizedPeriodicSecurityChecks","fallbackError","initializeSecuritySystem","mount","initializeApp","addRipplesToElements","htmlElement","_hasRipple","handleRipple","ripple","radius","clientX","touches","clientY","backgroundColor","removeRipple","createRippleCore","passive","addRippleEffect","readyState","shouldUpdate","initAutoRipple"],"ignoreList":[],"sources":["../../src/components/animations/TransitionAnimations.vue","../../src/components/accessibility/ScreenReaderManager.ts","../../src/components/accessibility/AccessibilitySettings.vue","../../src/utils/focus-indicator.ts","../../src/components/accessibility/VisualIndicators.vue","../../src/components/error/ErrorBoundary.vue","../../src/utils/error-handling/UserFriendlyMessages.ts","../../src/components/error/ErrorNotification.vue","../../src/utils/security.ts","../../src/components/accessibility/KeyboardManager.ts","../../src/components/layout/AppHeader.vue","../../src/components/layout/NavigationActions.vue","../../src/components/layout/FeatureShowcase.vue","../../src/i18n/index.ts","../../src/i18n/locales/ja.ts","../../src/i18n/locales/en.ts","../../src/i18n/locales/zh.ts","../../src/i18n/locales/ko.ts","../../src/components/i18n/LanguageSwitcher.vue","../../src/utils/pwa-manager.ts","../../src/components/pwa/PWAInstallPrompt.vue","../../src/components/pwa/PWAStatusIndicator.vue","../../src/stores/gameStore.ts","../../src/components/game/Card.vue","../../src/components/game/Hand.vue","../../src/components/game/GameBoard.vue","../../src/App.vue","../../src/utils/security-extensions.ts","../../src/utils/xss-csrf-protection.ts","../../src/utils/csp-manager.ts","../../src/utils/security-audit-logger.ts","../../src/utils/api-security.ts","../../src/utils/advanced-rate-limiting.ts","../../src/utils/session-security.ts","../../src/utils/secure-error-handling.ts","../../src/utils/advanced-input-validation.ts","../../src/utils/integrated-security-system.ts","../../src/utils/security-init-optimized.ts","../../src/utils/error-handling/ErrorLogger.ts","../../src/utils/error-handling/ErrorReporter.ts","../../src/utils/error-handling/ErrorRecovery.ts","../../src/utils/error-handling/ErrorHandler.ts","../../src/utils/error-handling/DebugInfoCollector.ts","../../src/utils/error-handling/index.ts","../../src/pwa/registerServiceWorker.ts","../../src/utils/ripple-effect.ts","../../src/utils/performance-monitor.ts","../../src/utils/lazy-loader.ts","../../src/utils/seo-manager.ts","../../src/main.ts"],"sourcesContent":["<template>\n  <div class=\"transition-animations\">\n    <!--  -->\n    <Transition\n      :name=\"transitionType\"\n      mode=\"out-in\"\n      @before-enter=\"onBeforeEnter\"\n      @enter=\"onEnter\"\n      @leave=\"onLeave\"\n    >\n      <slot />\n    </Transition>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref } from 'vue'\n\ninterface Props {\n  type?: 'slide' | 'fade' | 'zoom' | 'flip' | 'elastic' | 'game-phase' | 'card-stack' | 'score-change'\n  direction?: 'left' | 'right' | 'up' | 'down'\n  duration?: number\n  easing?: string\n  intensity?: 'subtle' | 'normal' | 'dramatic'\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  type: 'fade',\n  direction: 'right',\n  duration: 300,\n  easing: 'cubic-bezier(0.4, 0, 0.2, 1)',\n  intensity: 'normal'\n})\n\nconst transitionType = computed(() => {\n  return `${props.type}-${props.direction}-${props.intensity}`\n})\n\nconst onBeforeEnter = (el: Element) => {\n  const element = el as HTMLElement\n  element.style.transitionDuration = `${props.duration}ms`\n  element.style.transitionTimingFunction = props.easing\n}\n\nconst onEnter = (el: Element, done: () => void) => {\n  // \n  setTimeout(done, props.duration)\n}\n\nconst onLeave = (el: Element, done: () => void) => {\n  // \n  setTimeout(done, props.duration)\n}\n</script>\n\n<style scoped>\n/* =================================\n   \n   ================================= */\n.transition-animations {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n\n/* =================================\n   \n   ================================= */\n.fade-left-enter-active,\n.fade-right-enter-active,\n.fade-up-enter-active,\n.fade-down-enter-active,\n.fade-left-leave-active,\n.fade-right-leave-active,\n.fade-up-leave-active,\n.fade-down-leave-active {\n  transition: all var(--transition-duration, 300ms) var(--transition-easing, cubic-bezier(0.4, 0, 0.2, 1));\n}\n\n.fade-left-enter-from,\n.fade-right-enter-from,\n.fade-up-enter-from,\n.fade-down-enter-from {\n  opacity: 0;\n}\n\n.fade-left-leave-to,\n.fade-right-leave-to,\n.fade-up-leave-to,\n.fade-down-leave-to {\n  opacity: 0;\n}\n\n/* =================================\n   \n   ================================= */\n.slide-left-enter-active,\n.slide-left-leave-active {\n  transition: all var(--transition-duration, 300ms) var(--transition-easing, cubic-bezier(0.4, 0, 0.2, 1));\n}\n\n.slide-left-enter-from {\n  transform: translateX(-100%);\n  opacity: 0;\n}\n\n.slide-left-leave-to {\n  transform: translateX(100%);\n  opacity: 0;\n}\n\n.slide-right-enter-active,\n.slide-right-leave-active {\n  transition: all var(--transition-duration, 300ms) var(--transition-easing, cubic-bezier(0.4, 0, 0.2, 1));\n}\n\n.slide-right-enter-from {\n  transform: translateX(100%);\n  opacity: 0;\n}\n\n.slide-right-leave-to {\n  transform: translateX(-100%);\n  opacity: 0;\n}\n\n.slide-up-enter-active,\n.slide-up-leave-active {\n  transition: all var(--transition-duration, 300ms) var(--transition-easing, cubic-bezier(0.4, 0, 0.2, 1));\n}\n\n.slide-up-enter-from {\n  transform: translateY(100%);\n  opacity: 0;\n}\n\n.slide-up-leave-to {\n  transform: translateY(-100%);\n  opacity: 0;\n}\n\n.slide-down-enter-active,\n.slide-down-leave-active {\n  transition: all var(--transition-duration, 300ms) var(--transition-easing, cubic-bezier(0.4, 0, 0.2, 1));\n}\n\n.slide-down-enter-from {\n  transform: translateY(-100%);\n  opacity: 0;\n}\n\n.slide-down-leave-to {\n  transform: translateY(100%);\n  opacity: 0;\n}\n\n/* =================================\n   \n   ================================= */\n.zoom-left-enter-active,\n.zoom-right-enter-active,\n.zoom-up-enter-active,\n.zoom-down-enter-active,\n.zoom-left-leave-active,\n.zoom-right-leave-active,\n.zoom-up-leave-active,\n.zoom-down-leave-active {\n  transition: all var(--transition-duration, 300ms) var(--transition-easing, cubic-bezier(0.4, 0, 0.2, 1));\n}\n\n.zoom-left-enter-from,\n.zoom-right-enter-from,\n.zoom-up-enter-from,\n.zoom-down-enter-from {\n  transform: scale(0.8);\n  opacity: 0;\n}\n\n.zoom-left-leave-to,\n.zoom-right-leave-to,\n.zoom-up-leave-to,\n.zoom-down-leave-to {\n  transform: scale(1.2);\n  opacity: 0;\n}\n\n/* =================================\n   \n   ================================= */\n.flip-left-enter-active,\n.flip-left-leave-active {\n  transition: all var(--transition-duration, 300ms) var(--transition-easing, cubic-bezier(0.4, 0, 0.2, 1));\n  transform-style: preserve-3d;\n  backface-visibility: hidden;\n}\n\n.flip-left-enter-from {\n  transform: rotateY(-90deg);\n  opacity: 0;\n}\n\n.flip-left-leave-to {\n  transform: rotateY(90deg);\n  opacity: 0;\n}\n\n.flip-right-enter-active,\n.flip-right-leave-active {\n  transition: all var(--transition-duration, 300ms) var(--transition-easing, cubic-bezier(0.4, 0, 0.2, 1));\n  transform-style: preserve-3d;\n  backface-visibility: hidden;\n}\n\n.flip-right-enter-from {\n  transform: rotateY(90deg);\n  opacity: 0;\n}\n\n.flip-right-leave-to {\n  transform: rotateY(-90deg);\n  opacity: 0;\n}\n\n/* =================================\n   \n   ================================= */\n.elastic-left-enter-active,\n.elastic-right-enter-active,\n.elastic-up-enter-active,\n.elastic-down-enter-active {\n  transition: all var(--transition-duration, 600ms) cubic-bezier(0.68, -0.55, 0.265, 1.55);\n}\n\n.elastic-left-leave-active,\n.elastic-right-leave-active,\n.elastic-up-leave-active,\n.elastic-down-leave-active {\n  transition: all var(--transition-duration, 300ms) var(--transition-easing, cubic-bezier(0.4, 0, 0.2, 1));\n}\n\n.elastic-left-enter-from,\n.elastic-right-enter-from,\n.elastic-up-enter-from,\n.elastic-down-enter-from {\n  transform: scale(0.5);\n  opacity: 0;\n}\n\n.elastic-left-leave-to,\n.elastic-right-leave-to,\n.elastic-up-leave-to,\n.elastic-down-leave-to {\n  transform: scale(0.8);\n  opacity: 0;\n}\n\n/* =================================\n   \n   ================================= */\n@media (max-width: 768px) {\n  .slide-left-enter-from,\n  .slide-right-enter-from,\n  .slide-up-enter-from,\n  .slide-down-enter-from {\n    /*  */\n    transform: translateX(0) scale(0.95);\n  }\n}\n\n/* =================================\n   \n   ================================= */\n\n/*  */\n.game-phase-up-normal-enter-active,\n.game-phase-up-normal-leave-active {\n  transition: all 600ms cubic-bezier(0.25, 0.46, 0.45, 0.94);\n}\n\n.game-phase-up-subtle-enter-active,\n.game-phase-up-subtle-leave-active {\n  transition: all 400ms cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.game-phase-up-dramatic-enter-active,\n.game-phase-up-dramatic-leave-active {\n  transition: all 800ms cubic-bezier(0.68, -0.55, 0.265, 1.55);\n}\n\n.game-phase-up-normal-enter-from,\n.game-phase-up-subtle-enter-from,\n.game-phase-up-dramatic-enter-from {\n  opacity: 0;\n  transform: translateY(30px) scale(0.95);\n}\n\n.game-phase-up-normal-leave-to,\n.game-phase-up-subtle-leave-to,\n.game-phase-up-dramatic-leave-to {\n  opacity: 0;\n  transform: translateY(-30px) scale(1.05);\n}\n\n/*  */\n.card-stack-up-normal-enter-active,\n.card-stack-up-normal-leave-active {\n  transition: all 500ms cubic-bezier(0.25, 0.46, 0.45, 0.94);\n}\n\n.card-stack-up-normal-enter-from {\n  opacity: 0;\n  transform: translateY(20px) scale(0.9) rotateX(15deg);\n}\n\n.card-stack-up-normal-leave-to {\n  opacity: 0;\n  transform: translateY(-20px) scale(1.1) rotateX(-15deg);\n}\n\n/*  */\n.score-change-up-normal-enter-active {\n  transition: all 400ms cubic-bezier(0.68, -0.55, 0.265, 1.55);\n}\n\n.score-change-up-normal-leave-active {\n  transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.score-change-up-normal-enter-from {\n  opacity: 0;\n  transform: scale(0.8);\n}\n\n.score-change-up-normal-leave-to {\n  opacity: 0;\n  transform: scale(1.2);\n}\n\n.score-change-up-dramatic-enter-active {\n  animation: score-pop-in 600ms cubic-bezier(0.68, -0.55, 0.265, 1.55);\n}\n\n@keyframes score-pop-in {\n  0% {\n    opacity: 0;\n    transform: scale(0.5) rotate(-5deg);\n  }\n  60% {\n    opacity: 1;\n    transform: scale(1.15) rotate(2deg);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1) rotate(0deg);\n  }\n}\n\n/* =================================\n   \n   ================================= */\n@media (max-width: 768px) {\n  .game-phase-up-normal-enter-from,\n  .game-phase-up-subtle-enter-from,\n  .game-phase-up-dramatic-enter-from,\n  .card-stack-up-normal-enter-from {\n    /*  */\n    transform: translateY(15px) scale(0.98);\n  }\n  \n  .game-phase-up-normal-leave-to,\n  .game-phase-up-subtle-leave-to,\n  .game-phase-up-dramatic-leave-to,\n  .card-stack-up-normal-leave-to {\n    transform: translateY(-15px) scale(1.02);\n  }\n}\n\n/* =================================\n   \n   ================================= */\n@media (prefers-reduced-motion: reduce) {\n  .fade-left-enter-active,\n  .fade-right-enter-active,\n  .fade-up-enter-active,\n  .fade-down-enter-active,\n  .fade-left-leave-active,\n  .fade-right-leave-active,\n  .fade-up-leave-active,\n  .fade-down-leave-active,\n  .slide-left-enter-active,\n  .slide-left-leave-active,\n  .slide-right-enter-active,\n  .slide-right-leave-active,\n  .slide-up-enter-active,\n  .slide-up-leave-active,\n  .slide-down-enter-active,\n  .slide-down-leave-active,\n  .zoom-left-enter-active,\n  .zoom-right-enter-active,\n  .zoom-up-enter-active,\n  .zoom-down-enter-active,\n  .zoom-left-leave-active,\n  .zoom-right-leave-active,\n  .zoom-up-leave-active,\n  .zoom-down-leave-active,\n  .flip-left-enter-active,\n  .flip-left-leave-active,\n  .flip-right-enter-active,\n  .flip-right-leave-active,\n  .elastic-left-enter-active,\n  .elastic-right-enter-active,\n  .elastic-up-enter-active,\n  .elastic-down-enter-active,\n  .elastic-left-leave-active,\n  .elastic-right-leave-active,\n  .elastic-up-leave-active,\n  .elastic-down-leave-active,\n  .game-phase-up-normal-enter-active,\n  .game-phase-up-subtle-enter-active,\n  .game-phase-up-dramatic-enter-active,\n  .game-phase-up-normal-leave-active,\n  .game-phase-up-subtle-leave-active,\n  .game-phase-up-dramatic-leave-active,\n  .card-stack-up-normal-enter-active,\n  .card-stack-up-normal-leave-active,\n  .score-change-up-normal-enter-active,\n  .score-change-up-normal-leave-active,\n  .score-change-up-dramatic-enter-active {\n    transition: opacity 200ms ease !important;\n    transform: none !important;\n    animation: none !important;\n  }\n\n  .slide-left-enter-from,\n  .slide-right-enter-from,\n  .slide-up-enter-from,\n  .slide-down-enter-from,\n  .slide-left-leave-to,\n  .slide-right-leave-to,\n  .slide-up-leave-to,\n  .slide-down-leave-to,\n  .zoom-left-enter-from,\n  .zoom-right-enter-from,\n  .zoom-up-enter-from,\n  .zoom-down-enter-from,\n  .zoom-left-leave-to,\n  .zoom-right-leave-to,\n  .zoom-up-leave-to,\n  .zoom-down-leave-to,\n  .flip-left-enter-from,\n  .flip-right-enter-from,\n  .flip-left-leave-to,\n  .flip-right-leave-to,\n  .elastic-left-enter-from,\n  .elastic-right-enter-from,\n  .elastic-up-enter-from,\n  .elastic-down-enter-from,\n  .elastic-left-leave-to,\n  .elastic-right-leave-to,\n  .elastic-up-leave-to,\n  .elastic-down-leave-to,\n  .game-phase-up-normal-enter-from,\n  .game-phase-up-subtle-enter-from,\n  .game-phase-up-dramatic-enter-from,\n  .game-phase-up-normal-leave-to,\n  .game-phase-up-subtle-leave-to,\n  .game-phase-up-dramatic-leave-to,\n  .card-stack-up-normal-enter-from,\n  .card-stack-up-normal-leave-to,\n  .score-change-up-normal-enter-from,\n  .score-change-up-normal-leave-to {\n    transform: none !important;\n  }\n}\n</style>","/**\n * \n * ARIA Live Regions\n * \n */\n\nexport interface AnnouncementOptions {\n  priority: 'polite' | 'assertive'\n  persist?: boolean\n  delay?: number\n  interrupt?: boolean\n}\n\nexport interface GameStateAnnouncement {\n  type: 'game_start' | 'turn_change' | 'card_draw' | 'challenge_start' | 'challenge_result' | 'game_end'\n  message: string\n  context?: Record<string, any>\n}\n\nexport class ScreenReaderManager {\n  private readonly liveRegions: Map<string, HTMLElement> = new Map()\n  private gameStatusElement: HTMLElement\n  private cardDetailsElement: HTMLElement\n  private announcementQueue: Array<{ message: string; options: AnnouncementOptions }> = []\n  private isProcessingQueue: boolean = false\n\n  constructor() {\n    this.createLiveRegions()\n    this.createGameStatusElements()\n    this.setupAriaDescriptions()\n  }\n\n  /**\n   * \n   */\n  announce(message: string, options: AnnouncementOptions = { priority: 'polite' }): void {\n    if (options.interrupt) {\n      this.clearQueue()\n    }\n\n    this.announcementQueue.push({ message, options })\n    this.processQueue()\n  }\n\n  /**\n   * \n   */\n  announceGameState(announcement: GameStateAnnouncement): void {\n    const { type, message, context } = announcement\n    \n    // \n    this.updateGameStatus(type, message, context)\n    \n    // \n    const priority = this.getPriorityForGameState(type)\n    this.announce(message, { priority, persist: true })\n  }\n\n  /**\n   * \n   */\n  announceCardDetails(card: any): void {\n    const description = this.createCardDescription(card)\n    this.cardDetailsElement.textContent = description\n    this.announce(`: ${description}`, { priority: 'polite' })\n  }\n\n  /**\n   * \n   */\n  announceError(message: string): void {\n    this.announce(`: ${message}`, { priority: 'assertive', interrupt: true })\n  }\n\n  /**\n   * \n   */\n  announceSuccess(message: string): void {\n    this.announce(`: ${message}`, { priority: 'polite' })\n  }\n\n  /**\n   * \n   */\n  announceProgress(current: number, total: number, description: string): void {\n    const percentage = Math.round((current / total) * 100)\n    const message = `${description}: ${current}/${total} (${percentage}%)`\n    this.announce(message, { priority: 'polite' })\n  }\n\n  /**\n   * \n   */\n  announceOptions(options: string[], currentIndex: number): void {\n    const totalOptions = options.length\n    const currentOption = options[currentIndex]\n    const message = ` ${currentIndex + 1}/${totalOptions}: ${currentOption}`\n    this.announce(message, { priority: 'polite' })\n  }\n\n  /**\n   * \n   */\n  announceTimer(remainingTime: number, unit: 'seconds' | 'minutes' = 'seconds'): void {\n    const unitText = unit === 'seconds' ? '' : ''\n    let message: string\n\n    if (remainingTime <= 0) {\n      message = ''\n    } else if (remainingTime <= 10 && unit === 'seconds') {\n      message = `${remainingTime}${unitText}`\n    } else if (remainingTime <= 60 && unit === 'seconds') {\n      message = `${remainingTime}${unitText}`\n    } else {\n      message = `: ${remainingTime}${unitText}`\n    }\n\n    const priority = remainingTime <= 10 ? 'assertive' : 'polite'\n    this.announce(message, { priority })\n  }\n\n  /**\n   * \n   */\n  announceScreenChange(screenName: string, description?: string): void {\n    let message = `: ${screenName}`\n    if (description) {\n      message += `. ${description}`\n    }\n    this.announce(message, { priority: 'assertive', persist: true })\n  }\n\n  /**\n   * \n   */\n  announceKeyboardHelp(): void {\n    const shortcuts = [\n      'Tab',\n      'Shift+Tab',\n      'Enter',\n      'F1'\n    ]\n    \n    const message = `: ${shortcuts.join(', ')}`\n    this.announce(message, { priority: 'polite', persist: true })\n  }\n\n  /**\n   * \n   */\n  announceGameStats(stats: Record<string, number | string>): void {\n    const statMessages = Object.entries(stats).map(([key, value]) => {\n      return `${this.translateStatKey(key)}: ${value}`\n    })\n    \n    const message = `. ${statMessages.join(', ')}`\n    this.announce(message, { priority: 'polite', persist: true })\n  }\n\n  /**\n   * \n   */\n  announceRegionStatus(regionName: string, items: any[]): void {\n    const itemCount = items.length\n    const itemType = this.getItemType(items)\n    \n    let message: string\n    if (itemCount === 0) {\n      message = `${regionName}`\n    } else if (itemCount === 1) {\n      message = `${regionName}${itemType}1`\n    } else {\n      message = `${regionName}${itemType}${itemCount}`\n    }\n    \n    this.announce(message, { priority: 'polite' })\n  }\n\n  /**\n   * &\n   */\n  announceDragDrop(phase: 'start' | 'move' | 'drop' | 'cancel', details: any): void {\n    let message: string\n    \n    switch (phase) {\n      case 'start':\n        message = `${details.itemName}`\n        break\n      case 'move':\n        message = `${details.targetName}`\n        break\n      case 'drop':\n        message = details.success \n          ? `${details.targetName}${details.itemName}`\n          : `: ${details.reason}`\n        break\n      case 'cancel':\n        message = ''\n        break\n    }\n    \n    const priority = phase === 'drop' && !details.success ? 'assertive' : 'polite'\n    this.announce(message, { priority })\n  }\n\n  private createLiveRegions(): void {\n    // Polite live region\n    const politeRegion = document.createElement('div')\n    politeRegion.setAttribute('aria-live', 'polite')\n    politeRegion.setAttribute('aria-relevant', 'additions text')\n    politeRegion.setAttribute('aria-atomic', 'false')\n    politeRegion.className = 'sr-only'\n    politeRegion.id = 'live-region-polite'\n    document.body.appendChild(politeRegion)\n    this.liveRegions.set('polite', politeRegion)\n\n    // Assertive live region\n    const assertiveRegion = document.createElement('div')\n    assertiveRegion.setAttribute('aria-live', 'assertive')\n    assertiveRegion.setAttribute('aria-relevant', 'additions text')\n    assertiveRegion.setAttribute('aria-atomic', 'true')\n    assertiveRegion.className = 'sr-only'\n    assertiveRegion.id = 'live-region-assertive'\n    document.body.appendChild(assertiveRegion)\n    this.liveRegions.set('assertive', assertiveRegion)\n  }\n\n  private createGameStatusElements(): void {\n    // \n    this.gameStatusElement = document.createElement('div')\n    this.gameStatusElement.id = 'game-status'\n    this.gameStatusElement.className = 'sr-only'\n    this.gameStatusElement.setAttribute('aria-label', '')\n    document.body.appendChild(this.gameStatusElement)\n\n    // \n    this.cardDetailsElement = document.createElement('div')\n    this.cardDetailsElement.id = 'card-details'\n    this.cardDetailsElement.className = 'sr-only'\n    this.cardDetailsElement.setAttribute('aria-label', '')\n    document.body.appendChild(this.cardDetailsElement)\n  }\n\n  private setupAriaDescriptions(): void {\n    // Screen Reader OnlyCSS\n    const style = document.createElement('style')\n    style.textContent = `\n      .sr-only {\n        position: absolute;\n        width: 1px;\n        height: 1px;\n        padding: 0;\n        margin: -1px;\n        overflow: hidden;\n        clip: rect(0, 0, 0, 0);\n        white-space: nowrap;\n        border: 0;\n      }\n      \n      .sr-only-focusable:focus {\n        position: static;\n        width: auto;\n        height: auto;\n        padding: inherit;\n        margin: inherit;\n        overflow: visible;\n        clip: auto;\n        white-space: normal;\n      }\n    `\n    document.head.appendChild(style)\n  }\n\n  private async processQueue(): Promise<void> {\n    if (this.isProcessingQueue || this.announcementQueue.length === 0) return\n\n    this.isProcessingQueue = true\n\n    while (this.announcementQueue.length > 0) {\n      const { message, options } = this.announcementQueue.shift()!\n      \n      if (options.delay) {\n        await this.delay(options.delay)\n      }\n\n      await this.performAnnouncement(message, options)\n      \n      // \n      await this.delay(100)\n    }\n\n    this.isProcessingQueue = false\n  }\n\n  private async performAnnouncement(message: string, options: AnnouncementOptions): Promise<void> {\n    const region = this.liveRegions.get(options.priority)\n    if (!region) return\n\n    // \n    if (!options.persist) {\n      region.textContent = ''\n      await this.delay(10) // DOM\n    }\n\n    // \n    if (options.persist) {\n      const messageElement = document.createElement('div')\n      messageElement.textContent = message\n      region.appendChild(messageElement)\n      \n      // \n      setTimeout(() => {\n        if (messageElement.parentNode) {\n          messageElement.parentNode.removeChild(messageElement)\n        }\n      }, 5000)\n    } else {\n      region.textContent = message\n    }\n  }\n\n  private updateGameStatus(type: string, message: string, context?: Record<string, any>): void {\n    const statusInfo = {\n      type,\n      message,\n      timestamp: new Date().toISOString(),\n      ...context\n    }\n\n    this.gameStatusElement.setAttribute('data-game-state', JSON.stringify(statusInfo))\n    this.gameStatusElement.textContent = message\n  }\n\n  private createCardDescription(card: any): string {\n    const parts = [card.name]\n    \n    if (card.type) {\n      parts.push(`: ${this.translateCardType(card.type)}`)\n    }\n    \n    if (card.power !== undefined) {\n      parts.push(`: ${card.power}`)\n    }\n    \n    if (card.cost !== undefined) {\n      parts.push(`: ${card.cost}`)\n    }\n    \n    if (card.description) {\n      parts.push(`: ${card.description}`)\n    }\n\n    return parts.join(', ')\n  }\n\n  private getPriorityForGameState(type: string): 'polite' | 'assertive' {\n    const assertiveStates = ['challenge_result', 'game_end', 'error']\n    return assertiveStates.includes(type) ? 'assertive' : 'polite'\n  }\n\n  private translateStatKey(key: string): string {\n    const translations: Record<string, string> = {\n      'vitality': '',\n      'turn': '',\n      'cardsInHand': '',\n      'challengesCompleted': '',\n      'insuranceCards': ''\n    }\n    return translations[key] || key\n  }\n\n  private translateCardType(type: string): string {\n    const translations: Record<string, string> = {\n      'life': '',\n      'insurance': '',\n      'challenge': '',\n      'dream': ''\n    }\n    return translations[type] || type\n  }\n\n  private getItemType(items: any[]): string {\n    if (items.length === 0) return ''\n    \n    const firstItem = items[0]\n    if (firstItem.type) {\n      return this.translateCardType(firstItem.type)\n    }\n    \n    return ''\n  }\n\n  private clearQueue(): void {\n    this.announcementQueue = []\n    this.liveRegions.forEach(region => {\n      region.textContent = ''\n    })\n  }\n\n  private async delay(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms))\n  }\n\n  /**\n   * \n   */\n  destroy(): void {\n    this.liveRegions.forEach(region => {\n      if (region.parentNode) {\n        region.parentNode.removeChild(region)\n      }\n    })\n    \n    if (this.gameStatusElement?.parentNode) {\n      this.gameStatusElement.parentNode.removeChild(this.gameStatusElement)\n    }\n    \n    if (this.cardDetailsElement?.parentNode) {\n      this.cardDetailsElement.parentNode.removeChild(this.cardDetailsElement)\n    }\n    \n    this.clearQueue()\n  }\n}","<script setup lang=\"ts\">\nimport { computed, onMounted, ref, watch } from 'vue'\nimport { ScreenReaderManager } from './ScreenReaderManager'\n\n// \ninterface AccessibilitySettings {\n  // \n  colorScheme: 'default' | 'protanopia' | 'deuteranopia' | 'tritanopia' | 'achromatopsia'\n  highContrast: boolean\n  fontSize: 'small' | 'medium' | 'large' | 'extra-large'\n  \n  // \n  reduceMotion: boolean\n  animationSpeed: number // 0.0 - 2.0\n  \n  // \n  screenReaderEnabled: boolean\n  audioDescriptions: boolean\n  soundEffectsVolume: number // 0 - 100\n  \n  // \n  stickyKeys: boolean\n  keyRepeatDelay: number // \n  touchTargetSize: 'default' | 'large' | 'extra-large'\n}\n\nconst props = defineProps<{\n  isOpen: boolean\n}>()\n\nconst emit = defineEmits<{\n  close: []\n  settingsChanged: [settings: AccessibilitySettings]\n}>()\n\n// \nconst defaultSettings: AccessibilitySettings = {\n  colorScheme: 'default',\n  highContrast: false,\n  fontSize: 'medium',\n  reduceMotion: false,\n  animationSpeed: 1.0,\n  screenReaderEnabled: false,\n  audioDescriptions: false,\n  soundEffectsVolume: 70,\n  stickyKeys: false,\n  keyRepeatDelay: 500,\n  touchTargetSize: 'default'\n}\n\nconst settings = ref<AccessibilitySettings>({ ...defaultSettings })\nconst screenReaderManager = ref<ScreenReaderManager | null>(null)\n\n// \nconst colorFilters = {\n  default: '',\n  protanopia: `\n    <filter id=\"protanopia\">\n      <feColorMatrix type=\"matrix\" values=\"\n        0.567, 0.433, 0,     0, 0\n        0.558, 0.442, 0,     0, 0\n        0,     0.242, 0.758, 0, 0\n        0,     0,     0,     1, 0\n      \"/>\n    </filter>\n  `,\n  deuteranopia: `\n    <filter id=\"deuteranopia\">\n      <feColorMatrix type=\"matrix\" values=\"\n        0.625, 0.375, 0,   0, 0\n        0.7,   0.3,   0,   0, 0\n        0,     0.3,   0.7, 0, 0\n        0,     0,     0,   1, 0\n      \"/>\n    </filter>\n  `,\n  tritanopia: `\n    <filter id=\"tritanopia\">\n      <feColorMatrix type=\"matrix\" values=\"\n        0.95, 0.05,  0,     0, 0\n        0,    0.433, 0.567, 0, 0\n        0,    0.475, 0.525, 0, 0\n        0,    0,     0,     1, 0\n      \"/>\n    </filter>\n  `,\n  achromatopsia: `\n    <filter id=\"achromatopsia\">\n      <feColorMatrix type=\"matrix\" values=\"\n        0.299, 0.587, 0.114, 0, 0\n        0.299, 0.587, 0.114, 0, 0\n        0.299, 0.587, 0.114, 0, 0\n        0,     0,     0,     1, 0\n      \"/>\n    </filter>\n  `\n}\n\n// \nconst saveSettings = () => {\n  localStorage.setItem('accessibility-settings', JSON.stringify(settings.value))\n  emit('settingsChanged', settings.value)\n  applySettings()\n}\n\nconst loadSettings = () => {\n  const saved = localStorage.getItem('accessibility-settings')\n  if (saved) {\n    try {\n      settings.value = { ...defaultSettings, ...JSON.parse(saved) }\n    } catch (e) {\n      console.error('Failed to load accessibility settings:', e)\n    }\n  }\n}\n\n// \nconst applySettings = () => {\n  const root = document.documentElement\n  \n  // \n  if (settings.value.colorScheme !== 'default') {\n    root.style.filter = `url(#${settings.value.colorScheme})`\n  } else {\n    root.style.filter = ''\n  }\n  \n  // \n  root.classList.toggle('high-contrast', settings.value.highContrast)\n  \n  // \n  const fontSizeMap = {\n    'small': '14px',\n    'medium': '16px',\n    'large': '20px',\n    'extra-large': '24px'\n  }\n  root.style.setProperty('--base-font-size', fontSizeMap[settings.value.fontSize])\n  \n  // \n  root.classList.toggle('reduce-motion', settings.value.reduceMotion)\n  root.style.setProperty('--animation-speed-multiplier', String(settings.value.animationSpeed))\n  \n  // \n  const touchSizeMap = {\n    'default': '44px',\n    'large': '56px',\n    'extra-large': '72px'\n  }\n  root.style.setProperty('--touch-target-size', touchSizeMap[settings.value.touchTargetSize])\n  \n  // \n  if (screenReaderManager.value) {\n    screenReaderManager.value.announce('', { priority: 'polite' })\n  }\n}\n\n// \nconst previewSettings = (setting: keyof AccessibilitySettings, value: any) => {\n  const originalValue = settings.value[setting]\n  settings.value[setting] = value\n  applySettings()\n  \n  // 3\n  setTimeout(() => {\n    if (settings.value[setting] === value) {\n      settings.value[setting] = originalValue\n      applySettings()\n    }\n  }, 3000)\n}\n\n// \nconst resetSettings = () => {\n  settings.value = { ...defaultSettings }\n  saveSettings()\n  \n  if (screenReaderManager.value) {\n    screenReaderManager.value.announce('', { priority: 'assertive' })\n  }\n}\n\n// \nconst setupKeyboardShortcuts = () => {\n  const handleKeyDown = (e: KeyboardEvent) => {\n    if (!props.isOpen) return\n    \n    // Ctrl + Alt + \n    if (e.ctrlKey && e.altKey) {\n      switch (e.key) {\n        case 'c':\n          // \n          const schemes: AccessibilitySettings['colorScheme'][] = \n            ['default', 'protanopia', 'deuteranopia', 'tritanopia', 'achromatopsia']\n          const currentIndex = schemes.indexOf(settings.value.colorScheme)\n          settings.value.colorScheme = schemes[(currentIndex + 1) % schemes.length]\n          saveSettings()\n          break\n          \n        case 'h':\n          // \n          settings.value.highContrast = !settings.value.highContrast\n          saveSettings()\n          break\n          \n        case 'm':\n          // \n          settings.value.reduceMotion = !settings.value.reduceMotion\n          saveSettings()\n          break\n      }\n    }\n  }\n  \n  window.addEventListener('keydown', handleKeyDown)\n  return () => { window.removeEventListener('keydown', handleKeyDown); }\n}\n\nonMounted(() => {\n  loadSettings()\n  applySettings()\n  screenReaderManager.value = new ScreenReaderManager()\n  const cleanup = setupKeyboardShortcuts()\n  \n  // \n  return () => {\n    cleanup()\n    screenReaderManager.value?.destroy()\n  }\n})\n\n// \nwatch(() => settings.value, () => {\n  saveSettings()\n}, { deep: true })\n</script>\n\n<template>\n  <Transition name=\"modal\">\n    <div v-if=\"isOpen\" class=\"accessibility-modal\" @click.self=\"emit('close')\">\n      <div \n        class=\"modal-content\"\n        role=\"dialog\"\n        aria-labelledby=\"accessibility-title\"\n        aria-describedby=\"accessibility-description\"\n      >\n        <!-- SVG -->\n        <svg style=\"position: absolute; width: 0; height: 0;\">\n          <defs v-html=\"Object.values(colorFilters).join('')\"></defs>\n        </svg>\n        \n        <div class=\"modal-header\">\n          <h2 id=\"accessibility-title\"></h2>\n          <button \n            class=\"close-button\"\n            aria-label=\"\"\n            @click=\"emit('close')\"\n          >\n            <span aria-hidden=\"true\"></span>\n          </button>\n        </div>\n        \n        <div id=\"accessibility-description\" class=\"sr-only\">\n          \n          Ctrl+Alt+CCtrl+Alt+HCtrl+Alt+M\n        </div>\n        \n        <div class=\"modal-body\">\n          <!--  -->\n          <section class=\"settings-section\">\n            <h3></h3>\n            \n            <div class=\"setting-item\">\n              <label for=\"color-scheme\"></label>\n              <select \n                id=\"color-scheme\"\n                v-model=\"settings.colorScheme\"\n                @change=\"saveSettings\"\n              >\n                <option value=\"default\"></option>\n                <option value=\"protanopia\">1</option>\n                <option value=\"deuteranopia\">2</option>\n                <option value=\"tritanopia\">3</option>\n                <option value=\"achromatopsia\"></option>\n              </select>\n              <button \n                class=\"preview-button\"\n                aria-label=\"\"\n                @click=\"previewSettings('colorScheme', settings.colorScheme)\"\n              >\n                \n              </button>\n            </div>\n            \n            <div class=\"setting-item\">\n              <label for=\"high-contrast\">\n                <input \n                  id=\"high-contrast\"\n                  v-model=\"settings.highContrast\"\n                  type=\"checkbox\"\n                  @change=\"saveSettings\"\n                >\n                \n              </label>\n              <span class=\"setting-description\">\n                \n              </span>\n            </div>\n            \n            <div class=\"setting-item\">\n              <label for=\"font-size\"></label>\n              <select \n                id=\"font-size\"\n                v-model=\"settings.fontSize\"\n                @change=\"saveSettings\"\n              >\n                <option value=\"small\">14px</option>\n                <option value=\"medium\">16px</option>\n                <option value=\"large\">20px</option>\n                <option value=\"extra-large\">24px</option>\n              </select>\n            </div>\n          </section>\n          \n          <!--  -->\n          <section class=\"settings-section\">\n            <h3></h3>\n            \n            <div class=\"setting-item\">\n              <label for=\"reduce-motion\">\n                <input \n                  id=\"reduce-motion\"\n                  v-model=\"settings.reduceMotion\"\n                  type=\"checkbox\"\n                  @change=\"saveSettings\"\n                >\n                \n              </label>\n              <span class=\"setting-description\">\n                \n              </span>\n            </div>\n            \n            <div v-if=\"!settings.reduceMotion\" class=\"setting-item\">\n              <label for=\"animation-speed\"></label>\n              <input \n                id=\"animation-speed\"\n                v-model.number=\"settings.animationSpeed\"\n                type=\"range\"\n                min=\"0.1\"\n                max=\"2.0\"\n                step=\"0.1\"\n                @change=\"saveSettings\"\n              >\n              <span class=\"range-value\">{{ settings.animationSpeed }}x</span>\n            </div>\n          </section>\n          \n          <!--  -->\n          <section class=\"settings-section\">\n            <h3></h3>\n            \n            <div class=\"setting-item\">\n              <label for=\"screen-reader\">\n                <input \n                  id=\"screen-reader\"\n                  v-model=\"settings.screenReaderEnabled\"\n                  type=\"checkbox\"\n                  @change=\"saveSettings\"\n                >\n                \n              </label>\n            </div>\n            \n            <div class=\"setting-item\">\n              <label for=\"audio-descriptions\">\n                <input \n                  id=\"audio-descriptions\"\n                  v-model=\"settings.audioDescriptions\"\n                  type=\"checkbox\"\n                  @change=\"saveSettings\"\n                >\n                \n              </label>\n            </div>\n            \n            <div class=\"setting-item\">\n              <label for=\"sound-volume\"></label>\n              <input \n                id=\"sound-volume\"\n                v-model.number=\"settings.soundEffectsVolume\"\n                type=\"range\"\n                min=\"0\"\n                max=\"100\"\n                step=\"5\"\n                @change=\"saveSettings\"\n              >\n              <span class=\"range-value\">{{ settings.soundEffectsVolume }}%</span>\n            </div>\n          </section>\n          \n          <!--  -->\n          <section class=\"settings-section\">\n            <h3></h3>\n            \n            <div class=\"setting-item\">\n              <label for=\"sticky-keys\">\n                <input \n                  id=\"sticky-keys\"\n                  v-model=\"settings.stickyKeys\"\n                  type=\"checkbox\"\n                  @change=\"saveSettings\"\n                >\n                \n              </label>\n              <span class=\"setting-description\">\n                \n              </span>\n            </div>\n            \n            <div class=\"setting-item\">\n              <label for=\"touch-target-size\"></label>\n              <select \n                id=\"touch-target-size\"\n                v-model=\"settings.touchTargetSize\"\n                @change=\"saveSettings\"\n              >\n                <option value=\"default\">44px</option>\n                <option value=\"large\">56px</option>\n                <option value=\"extra-large\">72px</option>\n              </select>\n            </div>\n          </section>\n        </div>\n        \n        <div class=\"modal-footer\">\n          <button \n            class=\"reset-button\"\n            aria-label=\"\"\n            @click=\"resetSettings\"\n          >\n            \n          </button>\n          <button \n            class=\"save-button\"\n            aria-label=\"\"\n            @click=\"emit('close')\"\n          >\n            \n          </button>\n        </div>\n      </div>\n    </div>\n  </Transition>\n</template>\n\n<style scoped>\n.accessibility-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: var(--z-modal);\n  padding: var(--space-md);\n}\n\n.modal-content {\n  background: var(--bg-primary);\n  border-radius: 12px;\n  max-width: 600px;\n  width: 100%;\n  max-height: 90vh;\n  overflow-y: auto;\n  box-shadow: var(--shadow-card);\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: var(--space-lg);\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.modal-header h2 {\n  margin: 0;\n  color: var(--primary-light);\n  font-size: var(--text-2xl);\n}\n\n.close-button {\n  background: none;\n  border: none;\n  color: rgba(255, 255, 255, 0.6);\n  font-size: var(--text-2xl);\n  cursor: pointer;\n  padding: var(--space-xs);\n  width: var(--touch-target-min);\n  height: var(--touch-target-min);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 4px;\n  transition: all var(--transition-fast);\n}\n\n.close-button:hover {\n  background: rgba(255, 255, 255, 0.1);\n  color: white;\n}\n\n.close-button:focus {\n  outline: 2px solid var(--primary-light);\n  outline-offset: 2px;\n}\n\n.modal-body {\n  padding: var(--space-lg);\n}\n\n.settings-section {\n  margin-bottom: var(--space-2xl);\n}\n\n.settings-section:last-child {\n  margin-bottom: 0;\n}\n\n.settings-section h3 {\n  color: white;\n  font-size: var(--text-lg);\n  margin-bottom: var(--space-md);\n  padding-bottom: var(--space-xs);\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.setting-item {\n  margin-bottom: var(--space-lg);\n  display: flex;\n  align-items: center;\n  gap: var(--space-md);\n  flex-wrap: wrap;\n}\n\n.setting-item label {\n  color: rgba(255, 255, 255, 0.9);\n  font-size: var(--text-base);\n  display: flex;\n  align-items: center;\n  gap: var(--space-sm);\n  min-width: 200px;\n}\n\n.setting-item select,\n.setting-item input[type=\"range\"] {\n  flex: 1;\n  min-width: 150px;\n  padding: var(--space-sm);\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 4px;\n  color: white;\n  font-size: var(--text-base);\n}\n\n.setting-item select:focus,\n.setting-item input:focus {\n  outline: 2px solid var(--primary-light);\n  outline-offset: 2px;\n}\n\n.setting-item input[type=\"checkbox\"] {\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n}\n\n.setting-description {\n  display: block;\n  width: 100%;\n  font-size: var(--text-sm);\n  color: rgba(255, 255, 255, 0.6);\n  margin-top: var(--space-xs);\n}\n\n.preview-button {\n  padding: var(--space-xs) var(--space-sm);\n  background: rgba(129, 140, 248, 0.2);\n  border: 1px solid rgba(129, 140, 248, 0.4);\n  border-radius: 4px;\n  color: var(--primary-light);\n  font-size: var(--text-sm);\n  cursor: pointer;\n  transition: all var(--transition-fast);\n}\n\n.preview-button:hover {\n  background: rgba(129, 140, 248, 0.3);\n  border-color: rgba(129, 140, 248, 0.6);\n}\n\n.range-value {\n  color: var(--primary-light);\n  font-size: var(--text-sm);\n  min-width: 50px;\n  text-align: right;\n}\n\n.modal-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: var(--space-lg);\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.reset-button,\n.save-button {\n  padding: var(--space-sm) var(--space-lg);\n  border-radius: 8px;\n  font-size: var(--text-base);\n  font-weight: 600;\n  cursor: pointer;\n  transition: all var(--transition-normal);\n  min-height: var(--touch-target-min);\n}\n\n.reset-button {\n  background: rgba(239, 68, 68, 0.2);\n  border: 1px solid rgba(239, 68, 68, 0.4);\n  color: #EF4444;\n}\n\n.reset-button:hover {\n  background: rgba(239, 68, 68, 0.3);\n  border-color: rgba(239, 68, 68, 0.6);\n}\n\n.save-button {\n  background: var(--primary-gradient);\n  border: none;\n  color: white;\n}\n\n.save-button:hover {\n  transform: translateY(-2px);\n  box-shadow: var(--shadow-glow);\n}\n\n/*  */\n.modal-enter-active,\n.modal-leave-active {\n  transition: all var(--transition-normal);\n}\n\n.modal-enter-from,\n.modal-leave-to {\n  opacity: 0;\n}\n\n.modal-enter-from .modal-content,\n.modal-leave-to .modal-content {\n  transform: scale(0.9) translateY(20px);\n}\n\n/*  */\n@media (prefers-contrast: high) {\n  .modal-content {\n    border: 2px solid white;\n  }\n  \n  .setting-item select,\n  .setting-item input[type=\"range\"] {\n    border-width: 2px;\n  }\n  \n  .close-button:focus,\n  .setting-item select:focus,\n  .setting-item input:focus {\n    outline-width: 3px;\n  }\n}\n\n/*  */\n@media (max-width: 640px) {\n  .modal-content {\n    max-height: 100vh;\n    height: 100%;\n    border-radius: 0;\n  }\n  \n  .setting-item {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n  \n  .setting-item label {\n    min-width: auto;\n  }\n  \n  .modal-footer {\n    flex-direction: column;\n    gap: var(--space-md);\n  }\n  \n  .reset-button,\n  .save-button {\n    width: 100%;\n  }\n}\n</style>","/**\n * \n * \n */\n\nexport interface FocusIndicatorOptions {\n  color?: string\n  width?: number\n  style?: 'solid' | 'dashed' | 'dotted'\n  offset?: number\n  borderRadius?: number\n}\n\n/**\n * \n */\nexport class FocusIndicatorManager {\n  private focusedElement: HTMLElement | null = null\n  private readonly indicator: HTMLElement\n  private readonly options: Required<FocusIndicatorOptions>\n\n  constructor(options: FocusIndicatorOptions = {}) {\n    this.options = {\n      color: options.color || '#818CF8',\n      width: options.width || 3,\n      style: options.style || 'solid',\n      offset: options.offset || 4,\n      borderRadius: options.borderRadius || 8\n    }\n\n    this.indicator = this.createIndicator()\n    document.body.appendChild(this.indicator)\n    this.setupEventListeners()\n  }\n\n  private createIndicator(): HTMLElement {\n    const indicator = document.createElement('div')\n    indicator.className = 'focus-indicator'\n    indicator.style.cssText = `\n      position: fixed;\n      pointer-events: none;\n      z-index: 10000;\n      transition: all 200ms cubic-bezier(0.25, 0.46, 0.45, 0.94);\n      opacity: 0;\n      border: ${this.options.width}px ${this.options.style} ${this.options.color};\n      border-radius: ${this.options.borderRadius}px;\n      box-shadow: 0 0 20px rgba(129, 140, 248, 0.4);\n    `\n    return indicator\n  }\n\n  private setupEventListeners(): void {\n    // \n    document.addEventListener('focusin', this.handleFocusIn.bind(this))\n    document.addEventListener('focusout', this.handleFocusOut.bind(this))\n    \n    // \n    window.addEventListener('scroll', this.updatePosition.bind(this), true)\n    window.addEventListener('resize', this.updatePosition.bind(this))\n    \n    // MutationObserver\n    const observer = new MutationObserver(() => {\n      if (this.focusedElement) {\n        this.updatePosition()\n      }\n    })\n    \n    observer.observe(document.body, {\n      attributes: true,\n      childList: true,\n      subtree: true,\n      attributeFilter: ['style', 'class']\n    })\n  }\n\n  private handleFocusIn(event: FocusEvent): void {\n    const target = event.target as HTMLElement\n    \n    // \n    if (this.isFocusableElement(target)) {\n      this.focusedElement = target\n      this.showIndicator(target)\n    }\n  }\n\n  private handleFocusOut(): void {\n    this.focusedElement = null\n    this.hideIndicator()\n  }\n\n  private isFocusableElement(element: HTMLElement): boolean {\n    // \n    const focusableSelectors = [\n      'button', 'input', 'select', 'textarea', 'a[href]',\n      '[tabindex]:not([tabindex=\"-1\"])', '[contenteditable]'\n    ]\n    \n    return focusableSelectors.some(selector => \n      element.matches(selector) || element.closest(selector)\n    )\n  }\n\n  private showIndicator(element: HTMLElement): void {\n    const rect = element.getBoundingClientRect()\n    const offset = this.options.offset\n    \n    this.indicator.style.left = `${rect.left - offset}px`\n    this.indicator.style.top = `${rect.top - offset}px`\n    this.indicator.style.width = `${rect.width + offset * 2}px`\n    this.indicator.style.height = `${rect.height + offset * 2}px`\n    this.indicator.style.opacity = '1'\n    \n    // \n    const computedStyle = window.getComputedStyle(element)\n    const borderRadius = computedStyle.borderRadius\n    if (borderRadius && borderRadius !== '0px') {\n      this.indicator.style.borderRadius = borderRadius\n    }\n  }\n\n  private hideIndicator(): void {\n    this.indicator.style.opacity = '0'\n  }\n\n  private updatePosition(): void {\n    if (this.focusedElement && this.focusedElement === document.activeElement) {\n      this.showIndicator(this.focusedElement)\n    }\n  }\n\n  public setOptions(options: Partial<FocusIndicatorOptions>): void {\n    Object.assign(this.options, options)\n    \n    this.indicator.style.border = \n      `${this.options.width}px ${this.options.style} ${this.options.color}`\n    this.indicator.style.borderRadius = `${this.options.borderRadius}px`\n    \n    if (this.focusedElement) {\n      this.updatePosition()\n    }\n  }\n\n  public destroy(): void {\n    this.indicator.remove()\n    document.removeEventListener('focusin', this.handleFocusIn.bind(this))\n    document.removeEventListener('focusout', this.handleFocusOut.bind(this))\n    window.removeEventListener('scroll', this.updatePosition.bind(this), true)\n    window.removeEventListener('resize', this.updatePosition.bind(this))\n  }\n}","<script setup lang=\"ts\">\nimport { computed, onMounted, onUnmounted, ref } from 'vue'\nimport { FocusIndicatorManager, type FocusIndicatorOptions } from '@/utils/focus-indicator'\n\n// \nconst isDev = import.meta.env.DEV\n\n// Props\ninterface Props {\n  enabled?: boolean\n  color?: string\n  width?: number\n  style?: 'solid' | 'dashed' | 'dotted'\n  offset?: number\n  borderRadius?: number\n  showKeyboardHints?: boolean\n  reducedMotion?: boolean\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  enabled: true,\n  color: '#818CF8',\n  width: 3,\n  style: 'solid',\n  offset: 4,\n  borderRadius: 8,\n  showKeyboardHints: true,\n  reducedMotion: false\n})\n\n// \nconst isEnabled = ref(props.enabled)\nconst currentOptions = ref<FocusIndicatorOptions>({\n  color: props.color,\n  width: props.width,\n  style: props.style,\n  offset: props.offset,\n  borderRadius: props.borderRadius\n})\n\n// Focus Indicator Manager\nlet focusIndicatorManager: FocusIndicatorManager | null = null\n\n// \nconst showHints = ref(false)\nconst hintTimer = ref<number | null>(null)\n\n// \nconst indicatorStyle = computed(() => ({\n  '--focus-color': currentOptions.value.color,\n  '--focus-width': `${currentOptions.value.width}px`,\n  '--focus-offset': `${currentOptions.value.offset}px`,\n  '--focus-radius': `${currentOptions.value.borderRadius}px`\n}))\n\n// \nconst keyboardShortcuts = computed(() => [\n  { key: 'Tab', description: '' },\n  { key: 'Shift + Tab', description: '' },\n  { key: 'Enter', description: '' },\n  { key: 'Space', description: '' },\n  { key: 'Arrow Keys', description: '' },\n  { key: 'Escape', description: '' }\n])\n\n// \nconst initializeFocusIndicator = () => {\n  if (isEnabled.value && !focusIndicatorManager) {\n    focusIndicatorManager = new FocusIndicatorManager(currentOptions.value)\n  }\n}\n\nconst destroyFocusIndicator = () => {\n  if (focusIndicatorManager) {\n    focusIndicatorManager.destroy()\n    focusIndicatorManager = null\n  }\n}\n\nconst updateOptions = () => {\n  if (focusIndicatorManager) {\n    focusIndicatorManager.setOptions(currentOptions.value)\n  }\n}\n\nconst showKeyboardHints = () => {\n  if (!props.showKeyboardHints) return\n  \n  showHints.value = true\n  \n  // 5\n  if (hintTimer.value) {\n    clearTimeout(hintTimer.value)\n  }\n  \n  hintTimer.value = window.setTimeout(() => {\n    showHints.value = false\n  }, 5000)\n}\n\nconst hideKeyboardHints = () => {\n  showHints.value = false\n  if (hintTimer.value) {\n    clearTimeout(hintTimer.value)\n    hintTimer.value = null\n  }\n}\n\n// \nconst handleKeydown = (event: KeyboardEvent) => {\n  if (event.key === 'Tab') {\n    showKeyboardHints()\n  }\n}\n\n// \nconst updateSettings = (newOptions: Partial<FocusIndicatorOptions>) => {\n  Object.assign(currentOptions.value, newOptions)\n  updateOptions()\n}\n\n// /\nconst toggleEnabled = () => {\n  isEnabled.value = !isEnabled.value\n  \n  if (isEnabled.value) {\n    initializeFocusIndicator()\n  } else {\n    destroyFocusIndicator()\n  }\n}\n\n// \nonMounted(() => {\n  initializeFocusIndicator()\n  \n  // \n  document.addEventListener('keydown', handleKeydown)\n  \n  // \n  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)')\n  if (prefersReducedMotion.matches) {\n    currentOptions.value = {\n      ...currentOptions.value,\n      offset: 2 // \n    }\n    updateOptions()\n  }\n})\n\nonUnmounted(() => {\n  destroyFocusIndicator()\n  document.removeEventListener('keydown', handleKeydown)\n  \n  if (hintTimer.value) {\n    clearTimeout(hintTimer.value)\n  }\n})\n\n// \ndefineExpose({\n  updateSettings,\n  toggleEnabled,\n  showKeyboardHints,\n  hideKeyboardHints\n})\n</script>\n\n<template>\n  <div \n    class=\"visual-indicators\"\n    :class=\"{\n      'reduced-motion': reducedMotion,\n      'hints-visible': showHints\n    }\"\n    :style=\"indicatorStyle\"\n  >\n    <!--  -->\n    <Transition name=\"hints-fade\">\n      <div \n        v-if=\"showHints && showKeyboardHints\" \n        class=\"keyboard-hints\"\n        role=\"tooltip\"\n        aria-live=\"polite\"\n      >\n        <div class=\"hints-header\">\n          <h3 class=\"hints-title\"></h3>\n          <button \n            class=\"hints-close\"\n            aria-label=\"\"\n            @click=\"hideKeyboardHints\"\n          >\n            \n          </button>\n        </div>\n        <ul class=\"hints-list\">\n          <li \n            v-for=\"shortcut in keyboardShortcuts\"\n            :key=\"shortcut.key\"\n            class=\"hint-item\"\n          >\n            <kbd class=\"hint-key\">{{ shortcut.key }}</kbd>\n            <span class=\"hint-description\">{{ shortcut.description }}</span>\n          </li>\n        </ul>\n      </div>\n    </Transition>\n\n    <!--  -->\n    <div \n      v-if=\"isDev\" \n      class=\"settings-panel\"\n    >\n      <h4></h4>\n      <label>\n        <input \n          v-model=\"isEnabled\" \n          type=\"checkbox\"\n          @change=\"toggleEnabled\"\n        >\n        \n      </label>\n      \n      <label>\n        :\n        <input \n          :value=\"currentOptions.color\"\n          type=\"color\"\n          @input=\"updateSettings({ color: ($event.target as HTMLInputElement).value })\"\n        >\n      </label>\n      \n      <label>\n        :\n        <input \n          :value=\"currentOptions.width\"\n          type=\"range\"\n          min=\"1\"\n          max=\"10\"\n          @input=\"updateSettings({ width: parseInt(($event.target as HTMLInputElement).value) })\"\n        >\n      </label>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.visual-indicators {\n  /* CSS */\n  --focus-transition: all 200ms cubic-bezier(0.25, 0.46, 0.45, 0.94);\n}\n\n.visual-indicators.reduced-motion {\n  --focus-transition: none;\n}\n\n/*  */\n.keyboard-hints {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  z-index: 10001;\n  \n  background: var(--bg-overlay);\n  border: 1px solid var(--border-primary);\n  border-radius: var(--rounded-lg);\n  padding: var(--space-4);\n  max-width: 300px;\n  \n  backdrop-filter: blur(12px);\n  box-shadow: var(--shadow-xl);\n  \n  color: rgba(255, 255, 255, 0.9);\n  font-size: var(--text-sm);\n}\n\n.hints-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: var(--space-3);\n}\n\n.hints-title {\n  font-size: var(--text-base);\n  font-weight: var(--font-weight-semibold);\n  margin: 0;\n  color: var(--primary-300);\n}\n\n.hints-close {\n  background: none;\n  border: none;\n  color: rgba(255, 255, 255, 0.7);\n  font-size: var(--text-lg);\n  cursor: pointer;\n  padding: var(--space-1);\n  border-radius: var(--rounded);\n}\n\n.hints-close:hover {\n  background: rgba(255, 255, 255, 0.1);\n  color: white;\n}\n\n.hints-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.hint-item {\n  display: flex;\n  align-items: center;\n  gap: var(--space-3);\n  margin-bottom: var(--space-2);\n}\n\n.hint-key {\n  background: var(--bg-tertiary);\n  border: 1px solid var(--border-gray);\n  border-radius: var(--rounded);\n  padding: var(--space-1) var(--space-2);\n  font-family: monospace;\n  font-size: var(--text-xs);\n  min-width: 60px;\n  text-align: center;\n  color: var(--primary-200);\n}\n\n.hint-description {\n  flex: 1;\n  color: rgba(255, 255, 255, 0.8);\n}\n\n/*  */\n.hints-fade-enter-active,\n.hints-fade-leave-active {\n  transition: all var(--duration-300) var(--ease-out);\n}\n\n.hints-fade-enter-from,\n.hints-fade-leave-to {\n  opacity: 0;\n  transform: translateY(-10px) scale(0.95);\n}\n\n/*  */\n.settings-panel {\n  position: fixed;\n  bottom: 20px;\n  left: 20px;\n  z-index: 10001;\n  \n  background: var(--bg-card);\n  border: 1px solid var(--border-primary);\n  border-radius: var(--rounded-lg);\n  padding: var(--space-4);\n  \n  color: rgba(255, 255, 255, 0.9);\n  font-size: var(--text-sm);\n}\n\n.settings-panel h4 {\n  margin: 0 0 var(--space-3) 0;\n  font-size: var(--text-base);\n  color: var(--primary-300);\n}\n\n.settings-panel label {\n  display: block;\n  margin-bottom: var(--space-2);\n}\n\n.settings-panel input {\n  margin-left: var(--space-2);\n}\n\n/*  */\n@media (max-width: 640px) {\n  .keyboard-hints {\n    top: 10px;\n    right: 10px;\n    left: 10px;\n    max-width: none;\n  }\n  \n  .settings-panel {\n    bottom: 10px;\n    left: 10px;\n    right: 10px;\n  }\n}\n\n/*  */\n@media (prefers-reduced-motion: reduce) {\n  .hints-fade-enter-active,\n  .hints-fade-leave-active {\n    transition: opacity var(--duration-200) linear;\n  }\n  \n  .hints-fade-enter-from,\n  .hints-fade-leave-to {\n    transform: none;\n  }\n}\n</style>","<script setup lang=\"ts\">\nimport { computed, onErrorCaptured, ref } from 'vue'\nimport type { ComponentPublicInstance } from 'vue'\n\ninterface Props {\n  fallback?: 'minimal' | 'detailed' | 'custom'\n  onError?: (error: Error, instance: ComponentPublicInstance | null, info: string) => void\n  canRecover?: boolean\n  recoveryMessage?: string\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  fallback: 'detailed',\n  canRecover: true,\n  recoveryMessage: ''\n})\n\n// \nconst isDev = import.meta.env.DEV\n\nconst emit = defineEmits<{\n  error: [error: Error, info: string]\n  recover: []\n}>()\n\nconst hasError = ref(false)\nconst error = ref<Error | null>(null)\nconst errorInfo = ref<string>('')\nconst errorCount = ref(0)\nconst isRecovering = ref(false)\n\n// \nconst errorSeverity = computed(() => {\n  if (!error.value) return 'low'\n  \n  const message = error.value.message.toLowerCase()\n  if (message.includes('cannot read') || message.includes('undefined')) {\n    return 'high'\n  }\n  if (message.includes('network') || message.includes('fetch')) {\n    return 'medium'\n  }\n  return 'low'\n})\n\n// \nconst userFriendlyMessage = computed(() => {\n  if (!error.value) return ''\n  \n  const message = error.value.message\n  \n  // \n  if (message.includes('dynamically imported module') || message.includes('Failed to fetch')) {\n    return ''\n  }\n  if (message.includes('Network') || message.includes('fetch')) {\n    return ''\n  }\n  if (message.includes('Cannot read') || message.includes('Cannot access')) {\n    return ''\n  }\n  if (message.includes('undefined') || message.includes('null')) {\n    return ''\n  }\n  if (message.includes('timeout')) {\n    return ''\n  }\n  if (message.includes('Permission denied') || message.includes('CORS')) {\n    return ''\n  }\n  \n  return ''\n})\n\n// \nonErrorCaptured((err: Error, instance: ComponentPublicInstance | null, info: string) => {\n  console.error('[ErrorBoundary] Caught error:', err)\n  console.error('[ErrorBoundary] Error info:', info)\n  console.error('[ErrorBoundary] Component instance:', instance)\n  \n  hasError.value = true\n  error.value = err\n  errorInfo.value = info\n  errorCount.value++\n  \n  // \n  if (props.onError) {\n    props.onError(err, instance, info)\n  }\n  \n  // \n  emit('error', err, info)\n  \n  // \n  return false\n})\n\n// \nconst tryRecover = async () => {\n  isRecovering.value = true\n  \n  try {\n    // \n    hasError.value = false\n    error.value = null\n    errorInfo.value = ''\n    \n    // \n    emit('recover')\n    \n    // \n    await new Promise(resolve => setTimeout(resolve, 100))\n  } catch (e) {\n    console.error('[ErrorBoundary] Recovery failed:', e)\n    hasError.value = true\n  } finally {\n    isRecovering.value = false\n  }\n}\n\n// \nconst reloadPage = () => {\n  window.location.reload()\n}\n\n// \nconst copyErrorDetails = async () => {\n  if (!error.value) return\n  \n  const details = `\n: ${error.value.message}\n: ${error.value.stack || 'N/A'}\n: ${errorInfo.value}\n: ${new Date().toISOString()}\n: ${navigator.userAgent}\n  `.trim()\n  \n  try {\n    await navigator.clipboard.writeText(details)\n    alert('')\n  } catch (e) {\n    console.error('Failed to copy error details:', e)\n  }\n}\n\n// \nconst sendErrorReport = () => {\n  if (!error.value) return\n  \n  // \n  const event = new CustomEvent('app:send-error-report', {\n    detail: {\n      error: error.value,\n      info: errorInfo.value,\n      component: 'ErrorBoundary'\n    }\n  })\n  window.dispatchEvent(event)\n  \n  alert('')\n}\n</script>\n\n<template>\n  <div v-if=\"hasError\" class=\"error-boundary\" :data-severity=\"errorSeverity\">\n    <!--  -->\n    <div v-if=\"fallback === 'minimal'\" class=\"error-minimal\">\n      <p class=\"error-message\"></p>\n      <button class=\"error-action-btn\" @click=\"reloadPage\">\n        \n      </button>\n    </div>\n    \n    <!--  -->\n    <div v-else-if=\"fallback === 'detailed'\" class=\"error-detailed\">\n      <div class=\"error-icon\" aria-hidden=\"true\">\n        <svg width=\"64\" height=\"64\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n          <circle cx=\"12\" cy=\"12\" r=\"10\" stroke-width=\"2\"/>\n          <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\" stroke-width=\"2\"/>\n          <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\" stroke-width=\"2\"/>\n        </svg>\n      </div>\n      \n      <h2 class=\"error-title\"></h2>\n      <p class=\"error-user-message\">{{ userFriendlyMessage }}</p>\n      \n      <div class=\"error-actions\">\n        <button \n          v-if=\"canRecover && !isRecovering\" \n          class=\"error-action-btn primary\"\n          :disabled=\"errorCount > 3\"\n          @click=\"tryRecover\"\n        >\n          {{ errorCount > 3 ? '' : '' }}\n        </button>\n        \n        <button \n          class=\"error-action-btn secondary\" \n          @click=\"reloadPage\"\n        >\n          \n        </button>\n      </div>\n      \n      <!--  -->\n      <details v-if=\"isDev\" class=\"error-details\">\n        <summary></summary>\n        <div class=\"error-technical\">\n          <p><strong>:</strong> {{ error?.message }}</p>\n          <p><strong>:</strong> {{ errorInfo }}</p>\n          <p><strong>:</strong> {{ errorCount }}</p>\n          <pre v-if=\"error?.stack\" class=\"error-stack\">{{ error.stack }}</pre>\n          \n          <div class=\"error-dev-actions\">\n            <button class=\"error-action-btn small\" @click=\"copyErrorDetails\">\n              \n            </button>\n            <button class=\"error-action-btn small\" @click=\"sendErrorReport\">\n              \n            </button>\n          </div>\n        </div>\n      </details>\n    </div>\n    \n    <!--  -->\n    <div v-else-if=\"fallback === 'custom'\" class=\"error-custom\">\n      <slot name=\"error\" :error=\"error\" :retry=\"tryRecover\" :reload=\"reloadPage\" />\n    </div>\n  </div>\n  \n  <!--  -->\n  <slot v-else />\n</template>\n\n<style scoped>\n.error-boundary {\n  min-height: 200px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: var(--space-xl);\n  background: rgba(239, 68, 68, 0.05);\n  border: 1px solid rgba(239, 68, 68, 0.2);\n  border-radius: 12px;\n  margin: var(--space-md);\n}\n\n.error-boundary[data-severity=\"high\"] {\n  background: rgba(239, 68, 68, 0.1);\n  border-color: rgba(239, 68, 68, 0.4);\n}\n\n.error-boundary[data-severity=\"medium\"] {\n  background: rgba(245, 158, 11, 0.05);\n  border-color: rgba(245, 158, 11, 0.2);\n}\n\n/*  */\n.error-minimal {\n  text-align: center;\n}\n\n.error-message {\n  margin-bottom: var(--space-md);\n  color: rgba(239, 68, 68, 1);\n  font-weight: 500;\n}\n\n/*  */\n.error-detailed {\n  text-align: center;\n  max-width: 600px;\n  width: 100%;\n}\n\n.error-icon {\n  color: rgba(239, 68, 68, 0.8);\n  margin-bottom: var(--space-lg);\n}\n\n.error-title {\n  font-size: var(--text-2xl);\n  font-weight: 700;\n  color: rgba(239, 68, 68, 1);\n  margin-bottom: var(--space-sm);\n}\n\n.error-user-message {\n  font-size: var(--text-lg);\n  color: rgba(255, 255, 255, 0.8);\n  margin-bottom: var(--space-xl);\n}\n\n.error-actions {\n  display: flex;\n  gap: var(--space-md);\n  justify-content: center;\n  flex-wrap: wrap;\n}\n\n.error-action-btn {\n  padding: var(--space-sm) var(--space-lg);\n  border: none;\n  border-radius: 8px;\n  font-weight: 600;\n  font-size: var(--text-base);\n  cursor: pointer;\n  transition: all var(--transition-fast);\n  min-width: 140px;\n  min-height: var(--touch-target-min, 44px); /*  */\n}\n\n.error-action-btn.primary {\n  background: rgba(239, 68, 68, 0.9);\n  color: white;\n}\n\n.error-action-btn.primary:hover:not(:disabled) {\n  background: rgba(220, 38, 38, 1);\n  transform: translateY(-2px);\n}\n\n.error-action-btn.secondary {\n  background: rgba(255, 255, 255, 0.1);\n  color: white;\n  border: 1px solid rgba(239, 68, 68, 0.5);\n}\n\n.error-action-btn.secondary:hover {\n  background: rgba(255, 255, 255, 0.2);\n  border-color: rgba(239, 68, 68, 0.8);\n}\n\n.error-action-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.error-action-btn.small {\n  padding: var(--space-xs) var(--space-sm);\n  font-size: var(--text-sm);\n  min-width: auto;\n}\n\n/*  */\n.error-details {\n  margin-top: var(--space-xl);\n  text-align: left;\n  width: 100%;\n}\n\n.error-details summary {\n  cursor: pointer;\n  padding: var(--space-sm);\n  background: rgba(0, 0, 0, 0.2);\n  border-radius: 6px;\n  font-weight: 500;\n  color: rgba(255, 255, 255, 0.7);\n  transition: background var(--transition-fast);\n}\n\n.error-details summary:hover {\n  background: rgba(0, 0, 0, 0.3);\n}\n\n.error-technical {\n  margin-top: var(--space-md);\n  padding: var(--space-md);\n  background: rgba(0, 0, 0, 0.3);\n  border-radius: 6px;\n  font-size: var(--text-sm);\n}\n\n.error-technical p {\n  margin-bottom: var(--space-sm);\n  color: rgba(255, 255, 255, 0.8);\n}\n\n.error-technical strong {\n  color: rgba(255, 255, 255, 0.9);\n}\n\n.error-stack {\n  margin-top: var(--space-md);\n  padding: var(--space-sm);\n  background: rgba(0, 0, 0, 0.5);\n  border-radius: 4px;\n  overflow-x: auto;\n  font-family: monospace;\n  font-size: var(--text-xs);\n  line-height: 1.6;\n  color: rgba(255, 255, 255, 0.7);\n}\n\n.error-dev-actions {\n  margin-top: var(--space-md);\n  display: flex;\n  gap: var(--space-sm);\n}\n\n/*  */\n.error-custom {\n  width: 100%;\n}\n\n/*  */\n@media (max-width: 640px) {\n  .error-boundary {\n    padding: var(--space-md);\n    margin: var(--space-sm);\n  }\n  \n  .error-actions {\n    flex-direction: column;\n    width: 100%;\n  }\n  \n  .error-action-btn {\n    width: 100%;\n  }\n  \n  .error-icon svg {\n    width: 48px;\n    height: 48px;\n  }\n  \n  .error-title {\n    font-size: var(--text-xl);\n  }\n  \n  .error-user-message {\n    font-size: var(--text-base);\n  }\n}\n\n/*  */\n@keyframes pulse {\n  0% { opacity: 1; }\n  50% { opacity: 0.6; }\n  100% { opacity: 1; }\n}\n\n.error-boundary[data-severity=\"high\"] .error-icon {\n  animation: pulse 2s infinite;\n}\n\n/*  */\n@media (prefers-reduced-motion: reduce) {\n  .error-boundary .error-icon {\n    animation: none;\n  }\n  \n  .error-action-btn {\n    transition: none;\n  }\n}\n\n/*  */\n@media (prefers-contrast: high) {\n  .error-boundary {\n    border-width: 2px;\n  }\n  \n  .error-action-btn {\n    border: 2px solid currentColor;\n  }\n}\n</style>","/**\n * \n * \n */\n\nimport type { ErrorInfo } from './ErrorHandler'\n\nexport interface UserMessage {\n  title: string\n  description: string\n  actionLabel?: string\n  actionType?: 'reload' | 'retry' | 'contact' | 'close' | 'navigate'\n  actionData?: Record<string, any>\n  icon?: string\n  severity: 'info' | 'warning' | 'error' | 'critical'\n  showDetails?: boolean\n  helpUrl?: string\n}\n\nexport interface MessagePattern {\n  id: string\n  pattern: RegExp | string\n  message: UserMessage\n  conditions?: {\n    category?: ErrorInfo['category'][]\n    severity?: ErrorInfo['severity'][]\n    context?: (errorInfo: ErrorInfo) => boolean\n  }\n}\n\nexport class UserFriendlyMessages {\n  private readonly patterns: MessagePattern[] = []\n  private readonly fallbackMessages: Map<ErrorInfo['category'], UserMessage> = new Map()\n\n  constructor() {\n    this.initializeDefaultPatterns()\n    this.initializeFallbackMessages()\n  }\n\n  /**\n   * \n   */\n  private initializeDefaultPatterns(): void {\n    // \n    this.patterns.push({\n      id: 'network-offline',\n      pattern: /network|offline|connection/i,\n      message: {\n        title: '',\n        description: '',\n        actionLabel: '',\n        actionType: 'retry',\n        icon: '',\n        severity: 'error',\n        helpUrl: '/help/network-issues'\n      },\n      conditions: {\n        category: ['network']\n      }\n    })\n\n    this.patterns.push({\n      id: 'network-timeout',\n      pattern: /timeout|slow/i,\n      message: {\n        title: '',\n        description: '',\n        actionLabel: '',\n        actionType: 'retry',\n        icon: '',\n        severity: 'warning'\n      },\n      conditions: {\n        category: ['network', 'async']\n      }\n    })\n\n    // \n    this.patterns.push({\n      id: 'game-save-failed',\n      pattern: /save|storage|quota/i,\n      message: {\n        title: '',\n        description: '',\n        actionLabel: '',\n        actionType: 'navigate',\n        actionData: { url: '/settings/storage' },\n        icon: '',\n        severity: 'error',\n        showDetails: true\n      },\n      conditions: {\n        category: ['game', 'system']\n      }\n    })\n\n    this.patterns.push({\n      id: 'game-state-corrupted',\n      pattern: /corrupted|invalid.*state|cannot.*read.*game/i,\n      message: {\n        title: '',\n        description: '',\n        actionLabel: '',\n        actionType: 'navigate',\n        actionData: { url: '/new-game' },\n        icon: '',\n        severity: 'critical',\n        showDetails: true\n      },\n      conditions: {\n        category: ['game'],\n        severity: ['high', 'critical']\n      }\n    })\n\n    // Vue/UI\n    this.patterns.push({\n      id: 'ui-component-error',\n      pattern: /component|render|mount/i,\n      message: {\n        title: '',\n        description: '',\n        actionLabel: '',\n        actionType: 'reload',\n        icon: '',\n        severity: 'warning'\n      },\n      conditions: {\n        category: ['vue']\n      }\n    })\n\n    // \n    this.patterns.push({\n      id: 'performance-memory',\n      pattern: /memory|heap|stack.*overflow/i,\n      message: {\n        title: '',\n        description: '',\n        actionLabel: '',\n        actionType: 'reload',\n        icon: '',\n        severity: 'error',\n        helpUrl: '/help/performance'\n      },\n      conditions: {\n        category: ['performance', 'system']\n      }\n    })\n\n    // \n    this.patterns.push({\n      id: 'security-cors',\n      pattern: /cors|cross.*origin|blocked/i,\n      message: {\n        title: '',\n        description: '',\n        actionLabel: '',\n        actionType: 'contact',\n        icon: '',\n        severity: 'error',\n        helpUrl: '/help/security-issues'\n      },\n      conditions: {\n        category: ['security']\n      }\n    })\n\n    // JavaScript\n    this.patterns.push({\n      id: 'js-undefined',\n      pattern: /undefined|null.*property|cannot.*read/i,\n      message: {\n        title: '',\n        description: '',\n        actionLabel: '',\n        actionType: 'reload',\n        icon: '',\n        severity: 'error',\n        showDetails: true\n      },\n      conditions: {\n        category: ['javascript'],\n        severity: ['high', 'critical']\n      }\n    })\n\n    // \n    this.patterns.push({\n      id: 'resource-load-failed',\n      pattern: /loading|chunk.*error|failed.*fetch.*resource/i,\n      message: {\n        title: '',\n        description: '',\n        actionLabel: '',\n        actionType: 'reload',\n        icon: '',\n        severity: 'warning'\n      },\n      conditions: {\n        category: ['network', 'system']\n      }\n    })\n  }\n\n  /**\n   * \n   */\n  private initializeFallbackMessages(): void {\n    this.fallbackMessages.set('network', {\n      title: '',\n      description: '',\n      actionLabel: '',\n      actionType: 'retry',\n      icon: '',\n      severity: 'error'\n    })\n\n    this.fallbackMessages.set('vue', {\n      title: 'UI ',\n      description: '',\n      actionLabel: '',\n      actionType: 'reload',\n      icon: '',\n      severity: 'warning'\n    })\n\n    this.fallbackMessages.set('javascript', {\n      title: '',\n      description: '',\n      actionLabel: '',\n      actionType: 'reload',\n      icon: '',\n      severity: 'error'\n    })\n\n    this.fallbackMessages.set('game', {\n      title: '',\n      description: '',\n      actionLabel: '',\n      actionType: 'retry',\n      icon: '',\n      severity: 'error'\n    })\n\n    this.fallbackMessages.set('async', {\n      title: '',\n      description: '',\n      actionLabel: '',\n      actionType: 'retry',\n      icon: '',\n      severity: 'warning'\n    })\n\n    this.fallbackMessages.set('performance', {\n      title: '',\n      description: '',\n      actionLabel: '',\n      actionType: 'reload',\n      icon: '',\n      severity: 'warning'\n    })\n\n    this.fallbackMessages.set('security', {\n      title: '',\n      description: '',\n      actionLabel: '',\n      actionType: 'contact',\n      icon: '',\n      severity: 'error'\n    })\n\n    this.fallbackMessages.set('user', {\n      title: '',\n      description: '',\n      actionLabel: '',\n      actionType: 'retry',\n      icon: '',\n      severity: 'info'\n    })\n\n    this.fallbackMessages.set('system', {\n      title: '',\n      description: '',\n      actionLabel: '',\n      actionType: 'reload',\n      icon: '',\n      severity: 'error'\n    })\n  }\n\n  /**\n   * \n   */\n  generateUserMessage(errorInfo: ErrorInfo): UserMessage {\n    // \n    for (const pattern of this.patterns) {\n      if (this.matchesPattern(errorInfo, pattern)) {\n        return this.enrichMessage(pattern.message, errorInfo)\n      }\n    }\n\n    // \n    const fallback = this.fallbackMessages.get(errorInfo.category)\n    if (fallback) {\n      return this.enrichMessage(fallback, errorInfo)\n    }\n\n    // \n    return this.enrichMessage({\n      title: '',\n      description: '',\n      actionLabel: '',\n      actionType: 'reload',\n      icon: '',\n      severity: 'error'\n    }, errorInfo)\n  }\n\n  /**\n   * \n   */\n  private matchesPattern(errorInfo: ErrorInfo, pattern: MessagePattern): boolean {\n    // \n    const messageMatch = pattern.pattern instanceof RegExp\n      ? pattern.pattern.test(errorInfo.message)\n      : errorInfo.message.toLowerCase().includes(pattern.pattern.toLowerCase())\n\n    if (!messageMatch) {\n      return false\n    }\n\n    // \n    if (pattern.conditions) {\n      const { category, severity, context } = pattern.conditions\n\n      if (category && !category.includes(errorInfo.category)) {\n        return false\n      }\n\n      if (severity && !severity.includes(errorInfo.severity)) {\n        return false\n      }\n\n      if (context && !context(errorInfo)) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  /**\n   * \n   */\n  private enrichMessage(message: UserMessage, errorInfo: ErrorInfo): UserMessage {\n    const timeString = new Date(errorInfo.timestamp).toLocaleTimeString()\n    \n    return {\n      ...message,\n      description: `${message.description}${errorInfo.context?.deviceInfo?.isMobile ? ' ()' : ''}`,\n      actionData: {\n        ...message.actionData,\n        timestamp: errorInfo.timestamp,\n        errorId: errorInfo.fingerprint,\n        component: errorInfo.component\n      }\n    }\n  }\n\n  /**\n   * \n   */\n  addPattern(pattern: MessagePattern): void {\n    // \n    const exists = this.patterns.some(p => p.id === pattern.id)\n    if (exists) {\n      console.warn(`Pattern with id \"${pattern.id}\" already exists`)\n      return\n    }\n\n    this.patterns.unshift(pattern) // \n  }\n\n  /**\n   * \n   */\n  removePattern(id: string): boolean {\n    const index = this.patterns.findIndex(p => p.id === id)\n    if (index !== -1) {\n      this.patterns.splice(index, 1)\n      return true\n    }\n    return false\n  }\n\n  /**\n   * \n   */\n  getPatterns(): MessagePattern[] {\n    return [...this.patterns]\n  }\n\n  /**\n   * \n   */\n  previewMessage(errorMessage: string, category: ErrorInfo['category'], severity: ErrorInfo['severity'] = 'medium'): UserMessage {\n    const mockError: ErrorInfo = {\n      message: errorMessage,\n      category,\n      severity,\n      timestamp: Date.now(),\n      userAgent: navigator.userAgent\n    }\n\n    return this.generateUserMessage(mockError)\n  }\n\n  /**\n   * \n   */\n  getStats() {\n    return {\n      patternsCount: this.patterns.length,\n      categoriesCount: this.fallbackMessages.size,\n      patterns: this.patterns.map(p => ({\n        id: p.id,\n        hasConditions: Boolean(p.conditions)\n      }))\n    }\n  }\n}\n\n// \nexport const userFriendlyMessages = new UserFriendlyMessages()","<script setup lang=\"ts\">\nimport { computed, onMounted, onUnmounted, ref } from 'vue'\nimport type { ErrorInfo } from '@/utils/error-handling/ErrorHandler'\nimport { userFriendlyMessages, type UserMessage } from '@/utils/error-handling/UserFriendlyMessages'\n\ninterface ErrorNotification {\n  id: string\n  userMessage: UserMessage\n  originalError: ErrorInfo\n  timestamp: number\n  autoHide?: boolean\n  hideDelay?: number\n  isExpanded?: boolean\n}\n\nconst notifications = ref<ErrorNotification[]>([])\nconst maxNotifications = 3\nconst defaultHideDelay = 5000\n\n// \nconst addNotification = (notification: Omit<ErrorNotification, 'id' | 'timestamp'>) => {\n  const id = `${Date.now()}-${Math.random()}`\n  const newNotification: ErrorNotification = {\n    ...notification,\n    id,\n    timestamp: Date.now(),\n    autoHide: notification.autoHide ?? notification.userMessage.severity !== 'critical',\n    hideDelay: notification.hideDelay ?? defaultHideDelay,\n    isExpanded: false\n  }\n\n  notifications.value.unshift(newNotification)\n\n  // \n  if (notifications.value.length > maxNotifications) {\n    notifications.value = notifications.value.slice(0, maxNotifications)\n  }\n\n  // \n  if (newNotification.autoHide) {\n    setTimeout(() => {\n      removeNotification(id)\n    }, newNotification.hideDelay)\n  }\n}\n\n// \nconst removeNotification = (id: string) => {\n  const index = notifications.value.findIndex(n => n.id === id)\n  if (index !== -1) {\n    notifications.value.splice(index, 1)\n  }\n}\n\n// \nconst clearAll = () => {\n  notifications.value = []\n}\n\n// \nconst handleError = (event: CustomEvent) => {\n  const errorInfo: ErrorInfo = event.detail\n  \n  // \n  if (notifications.value.some(n => n.originalError.fingerprint === errorInfo.fingerprint)) {\n    return\n  }\n\n  // \n  const userMessage = userFriendlyMessages.generateUserMessage(errorInfo)\n\n  addNotification({\n    userMessage,\n    originalError: errorInfo\n  })\n}\n\n// \nconst getIcon = (userMessage: UserMessage) => {\n  return userMessage.icon || getDefaultIcon(userMessage.severity)\n}\n\nconst getDefaultIcon = (severity: UserMessage['severity']) => {\n  switch (severity) {\n    case 'critical':\n      return ''\n    case 'error':\n      return ''\n    case 'warning':\n      return ''\n    case 'info':\n      return ''\n  }\n}\n\n// \nconst getColorClass = (severity: UserMessage['severity']) => {\n  switch (severity) {\n    case 'critical':\n      return 'notification-critical'\n    case 'error':\n      return 'notification-error'\n    case 'warning':\n      return 'notification-warning'\n    case 'info':\n      return 'notification-info'\n  }\n}\n\n// \nconst executeAction = (notification: ErrorNotification) => {\n  const { actionType, actionData } = notification.userMessage\n  \n  switch (actionType) {\n    case 'reload':\n      window.location.reload()\n      break\n    case 'retry':\n      // \n      const retryEvent = new CustomEvent('app:retry-action', {\n        detail: { errorId: actionData?.errorId, component: actionData?.component }\n      })\n      window.dispatchEvent(retryEvent)\n      removeNotification(notification.id)\n      break\n    case 'navigate':\n      if (actionData?.url) {\n        window.location.href = actionData.url\n      }\n      break\n    case 'contact':\n      // \n      const contactEvent = new CustomEvent('app:open-support', {\n        detail: { errorInfo: notification.originalError }\n      })\n      window.dispatchEvent(contactEvent)\n      break\n    case 'close':\n    default:\n      removeNotification(notification.id)\n      break\n  }\n}\n\n// /\nconst toggleDetails = (id: string) => {\n  const notification = notifications.value.find(n => n.id === id)\n  if (notification) {\n    notification.isExpanded = !notification.isExpanded\n  }\n}\n\n// URL\nconst openHelp = (helpUrl: string) => {\n  window.open(helpUrl, '_blank', 'noopener,noreferrer')\n}\n\n// \nconst visibleNotifications = computed(() => \n  notifications.value.map((notification, index) => ({\n    ...notification,\n    offset: index * (notification.isExpanded ? 120 : 80),\n    opacity: index < 3 ? 1 : 0.5\n  }))\n)\n\nonMounted(() => {\n  window.addEventListener('app:error', handleError as EventListener)\n  \n  // \n  window.addEventListener('app:system-alert', (event: CustomEvent) => {\n    const { message } = event.detail\n    addNotification({\n      userMessage: {\n        title: '',\n        description: message,\n        actionLabel: '',\n        actionType: 'reload',\n        icon: '',\n        severity: 'critical',\n        showDetails: false\n      },\n      originalError: {\n        message,\n        category: 'system',\n        severity: 'critical',\n        timestamp: Date.now(),\n        userAgent: navigator.userAgent\n      },\n      autoHide: false\n    })\n  })\n})\n\nonUnmounted(() => {\n  window.removeEventListener('app:error', handleError as EventListener)\n  window.removeEventListener('app:system-alert', () => {})\n})\n\n// \ndefineExpose({\n  addNotification,\n  removeNotification,\n  clearAll,\n  executeAction,\n  toggleDetails\n})\n</script>\n\n<template>\n  <Teleport to=\"body\">\n    <div class=\"error-notification-container\" role=\"alert\" aria-live=\"polite\">\n      <TransitionGroup name=\"notification\" tag=\"div\">\n        <div\n          v-for=\"(notification, index) in visibleNotifications\"\n          :key=\"notification.id\"\n          :class=\"['error-notification', getColorClass(notification.userMessage.severity), { 'expanded': notification.isExpanded }]\"\n          :style=\"{\n            transform: `translateY(${notification.offset}px)`,\n            opacity: notification.opacity,\n            zIndex: 1000 - index\n          }\"\n          role=\"alertdialog\"\n          :aria-label=\"`${notification.userMessage.severity}: ${notification.userMessage.title}`\"\n        >\n          <div class=\"notification-content\">\n            <span class=\"notification-icon\" aria-hidden=\"true\">\n              {{ getIcon(notification.userMessage) }}\n            </span>\n            \n            <div class=\"notification-body\">\n              <h4 class=\"notification-title\">{{ notification.userMessage.title }}</h4>\n              <p class=\"notification-description\">{{ notification.userMessage.description }}</p>\n              \n              <!--  -->\n              <div v-if=\"notification.userMessage.actionLabel\" class=\"notification-actions\">\n                <button\n                  class=\"notification-action-btn primary\"\n                  @click=\"executeAction(notification)\"\n                >\n                  {{ notification.userMessage.actionLabel }}\n                </button>\n                \n                <!--  -->\n                <button\n                  v-if=\"notification.userMessage.helpUrl\"\n                  class=\"notification-action-btn secondary small\"\n                  @click=\"openHelp(notification.userMessage.helpUrl!)\"\n                >\n                  \n                </button>\n                \n                <!--  -->\n                <button\n                  v-if=\"notification.userMessage.showDetails\"\n                  class=\"notification-action-btn secondary small\"\n                  @click=\"toggleDetails(notification.id)\"\n                >\n                  {{ notification.isExpanded ? '' : '' }}\n                </button>\n              </div>\n              \n              <!--  -->\n              <div v-if=\"notification.isExpanded && notification.userMessage.showDetails\" class=\"notification-details\">\n                <div class=\"detail-section\">\n                  <strong>:</strong>\n                  <code>{{ notification.originalError.message }}</code>\n                </div>\n                \n                <div v-if=\"notification.originalError.component\" class=\"detail-section\">\n                  <strong>:</strong>\n                  <code>{{ notification.originalError.component }}</code>\n                </div>\n                \n                <div class=\"detail-section\">\n                  <strong>:</strong>\n                  <span class=\"detail-tag\">{{ notification.originalError.category }}</span>\n                  <strong>:</strong>\n                  <span class=\"detail-tag\">{{ notification.originalError.severity }}</span>\n                </div>\n                \n                <div v-if=\"notification.originalError.context?.route\" class=\"detail-section\">\n                  <strong>:</strong>\n                  <code>{{ notification.originalError.context.route }}</code>\n                </div>\n                \n                <div class=\"detail-section\">\n                  <strong>:</strong>\n                  {{ new Date(notification.originalError.timestamp).toLocaleString() }}\n                </div>\n              </div>\n            </div>\n            \n            <button\n              class=\"notification-close\"\n              :aria-label=\"`: ${notification.userMessage.title}`\"\n              @click=\"removeNotification(notification.id)\"\n            >\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" stroke-width=\"2\"/>\n                <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" stroke-width=\"2\"/>\n              </svg>\n            </button>\n          </div>\n          \n          <!--  -->\n          <div\n            v-if=\"notification.autoHide\"\n            class=\"notification-progress\"\n            :style=\"{\n              animationDuration: `${notification.hideDelay}ms`\n            }\"\n          />\n        </div>\n      </TransitionGroup>\n    </div>\n  </Teleport>\n</template>\n\n<style scoped>\n.error-notification-container {\n  position: fixed;\n  top: var(--space-md);\n  right: var(--space-md);\n  z-index: var(--z-notification);\n  pointer-events: none;\n}\n\n.error-notification {\n  position: absolute;\n  top: 0;\n  right: 0;\n  min-width: 320px;\n  max-width: 420px;\n  background: rgba(17, 24, 39, 0.95);\n  border-radius: 12px;\n  box-shadow: \n    0 10px 25px rgba(0, 0, 0, 0.3),\n    0 0 0 1px rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(12px);\n  pointer-events: auto;\n  transition: all 0.3s ease;\n  overflow: hidden;\n}\n\n.notification-content {\n  display: flex;\n  align-items: flex-start;\n  gap: var(--space-sm);\n  padding: var(--space-md);\n}\n\n.notification-icon {\n  font-size: var(--text-xl);\n  flex-shrink: 0;\n  margin-top: 2px;\n}\n\n.notification-body {\n  flex: 1;\n  min-width: 0;\n}\n\n.notification-title {\n  color: rgba(255, 255, 255, 0.95);\n  font-size: var(--text-base);\n  font-weight: 600;\n  line-height: 1.4;\n  margin: 0 0 var(--space-xs) 0;\n}\n\n.notification-description {\n  color: rgba(255, 255, 255, 0.8);\n  font-size: var(--text-sm);\n  line-height: 1.5;\n  margin: 0;\n  word-wrap: break-word;\n}\n\n.notification-actions {\n  margin-top: var(--space-sm);\n  display: flex;\n  gap: var(--space-xs);\n}\n\n.notification-action-btn {\n  padding: var(--space-xs) var(--space-sm);\n  background: rgba(255, 255, 255, 0.1);\n  color: white;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 6px;\n  font-size: var(--text-sm);\n  font-weight: 500;\n  cursor: pointer;\n  transition: all var(--transition-fast);\n}\n\n.notification-action-btn.primary {\n  background: rgba(59, 130, 246, 0.8);\n  border-color: rgba(59, 130, 246, 1);\n}\n\n.notification-action-btn.primary:hover {\n  background: rgba(59, 130, 246, 1);\n  transform: translateY(-1px);\n}\n\n.notification-action-btn.secondary {\n  background: rgba(255, 255, 255, 0.05);\n  border-color: rgba(255, 255, 255, 0.3);\n}\n\n.notification-action-btn.secondary:hover {\n  background: rgba(255, 255, 255, 0.15);\n  border-color: rgba(255, 255, 255, 0.5);\n}\n\n.notification-action-btn.small {\n  padding: var(--space-2xs) var(--space-xs);\n  font-size: var(--text-xs);\n}\n\n.notification-action-btn:hover {\n  background: rgba(255, 255, 255, 0.2);\n  border-color: rgba(255, 255, 255, 0.4);\n}\n\n.notification-close {\n  position: absolute;\n  top: var(--space-sm);\n  right: var(--space-sm);\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: transparent;\n  border: none;\n  color: rgba(255, 255, 255, 0.5);\n  cursor: pointer;\n  border-radius: 4px;\n  transition: all var(--transition-fast);\n  padding: 0;\n}\n\n.notification-close:hover {\n  background: rgba(255, 255, 255, 0.1);\n  color: rgba(255, 255, 255, 0.8);\n}\n\n/*  */\n.notification-details {\n  margin-top: var(--space-sm);\n  padding: var(--space-sm);\n  background: rgba(0, 0, 0, 0.3);\n  border-radius: 6px;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.detail-section {\n  margin-bottom: var(--space-xs);\n  font-size: var(--text-xs);\n}\n\n.detail-section:last-child {\n  margin-bottom: 0;\n}\n\n.detail-section strong {\n  color: rgba(255, 255, 255, 0.9);\n  font-weight: 600;\n  margin-right: var(--space-xs);\n}\n\n.detail-section code {\n  background: rgba(0, 0, 0, 0.5);\n  padding: 2px var(--space-xs);\n  border-radius: 3px;\n  font-family: monospace;\n  font-size: var(--text-2xs);\n  color: rgba(255, 255, 255, 0.8);\n}\n\n.detail-tag {\n  display: inline-block;\n  background: rgba(59, 130, 246, 0.2);\n  color: rgba(59, 130, 246, 1);\n  padding: 1px var(--space-xs);\n  border-radius: 3px;\n  font-size: var(--text-2xs);\n  font-weight: 500;\n  margin-right: var(--space-xs);\n}\n\n/*  */\n.error-notification.expanded {\n  min-height: 120px;\n}\n\n/*  */\n.notification-progress {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  height: 3px;\n  background: currentColor;\n  animation: progress linear forwards;\n  transform-origin: left;\n}\n\n@keyframes progress {\n  from {\n    transform: scaleX(1);\n  }\n  to {\n    transform: scaleX(0);\n  }\n}\n\n/*  */\n.notification-critical {\n  border-left: 4px solid rgba(239, 68, 68, 1);\n  animation: pulse-critical 2s infinite;\n}\n\n.notification-critical .notification-icon {\n  color: rgba(239, 68, 68, 1);\n}\n\n.notification-critical .notification-progress {\n  color: rgba(239, 68, 68, 0.6);\n}\n\n.notification-error {\n  border-left: 4px solid rgba(245, 158, 11, 1);\n}\n\n.notification-error .notification-icon {\n  color: rgba(245, 158, 11, 1);\n}\n\n.notification-error .notification-progress {\n  color: rgba(245, 158, 11, 0.6);\n}\n\n.notification-warning {\n  border-left: 4px solid rgba(59, 130, 246, 1);\n}\n\n.notification-warning .notification-icon {\n  color: rgba(59, 130, 246, 1);\n}\n\n.notification-warning .notification-progress {\n  color: rgba(59, 130, 246, 0.6);\n}\n\n.notification-info {\n  border-left: 4px solid rgba(156, 163, 175, 1);\n}\n\n.notification-info .notification-icon {\n  color: rgba(156, 163, 175, 1);\n}\n\n.notification-info .notification-progress {\n  color: rgba(156, 163, 175, 0.6);\n}\n\n@keyframes pulse-critical {\n  0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.3); }\n  70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }\n  100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }\n}\n\n/*  */\n.notification-enter-active,\n.notification-leave-active {\n  transition: all 0.3s ease;\n}\n\n.notification-enter-from {\n  transform: translateX(100%) !important;\n  opacity: 0 !important;\n}\n\n.notification-leave-to {\n  transform: translateX(100%) !important;\n  opacity: 0 !important;\n}\n\n/*  */\n@media (max-width: 640px) {\n  .error-notification-container {\n    top: var(--space-sm);\n    right: var(--space-sm);\n    left: var(--space-sm);\n  }\n  \n  .error-notification {\n    position: relative;\n    transform: none !important;\n    max-width: 100%;\n    margin-bottom: var(--space-sm);\n  }\n  \n  .notification-content {\n    padding: var(--space-sm);\n  }\n  \n  .notification-title {\n    font-size: var(--text-sm);\n  }\n  \n  .notification-description {\n    font-size: var(--text-xs);\n  }\n  \n  .notification-actions {\n    flex-direction: column;\n    gap: var(--space-xs);\n  }\n  \n  .notification-action-btn {\n    width: 100%;\n  }\n}\n\n/*  */\n@media (prefers-reduced-motion: reduce) {\n  .error-notification,\n  .notification-action-btn,\n  .notification-close {\n    transition: none;\n  }\n  \n  .notification-progress {\n    animation: none;\n    display: none;\n  }\n}\n\n/*  */\n@media (prefers-contrast: high) {\n  .error-notification {\n    border: 2px solid currentColor;\n  }\n  \n  .notification-action-btn {\n    border-width: 2px;\n  }\n}\n\n/*  */\n</style>","/**\n * \n * \n * OWASP Top 10 \n */\n\n/**\n * XSS\n * HTML\n */\nexport function sanitizeInput(input: string): string {\n  if (typeof input !== 'string') {\n    throw new Error('')\n  }\n  \n  return input\n    // XSS: HTML\n    .replace(/<[^>]*>/g, '') // HTML\n    .replace(/javascript:/gi, '') // JavaScript\n    .replace(/on\\w+\\s*=/gi, '') // \n    .replace(/[<>\"'&]/g, (match) => {\n      const htmlEntities: Record<string, string> = {\n        '<': '&lt;',\n        '>': '&gt;',\n        '\"': '&quot;',\n        \"'\": '&#x27;',\n        '&': '&amp;'\n      }\n      return htmlEntities[match] || match\n    })\n    // eslint-disable-next-line no-control-regex\n    .replace(/[\\u0002-\\u001F\\u007F-\\u009F]/g, '') // \n    .trim()\n    .slice(0, 1000) // \n}\n\n/**\n * \n */\nexport function validateNumber(\n  value: unknown,\n  min: number,\n  max: number,\n  allowFloat = false\n): number | null {\n  const num = Number(value)\n  \n  if (isNaN(num)) {\n    return null\n  }\n  \n  if (!allowFloat && !Number.isInteger(num)) {\n    return null\n  }\n  \n  if (num < min || num > max) {\n    return null\n  }\n  \n  return num\n}\n\n/**\n * \n */\nexport function validateArrayLength<T>(\n  array: T[],\n  minLength: number,\n  maxLength: number\n): boolean {\n  return array.length >= minLength && array.length <= maxLength\n}\n\n/**\n * \n */\nexport class RateLimiter {\n  private readonly attempts = new Map<string, number[]>()\n  \n  /**\n   * \n   */\n  isAllowed(key: string, maxAttempts: number, windowMs: number): boolean {\n    const now = Date.now()\n    const userAttempts = this.attempts.get(key) || []\n    \n    // \n    const validAttempts = userAttempts.filter(time => now - time < windowMs)\n    \n    if (validAttempts.length >= maxAttempts) {\n      return false\n    }\n    \n    validAttempts.push(now)\n    this.attempts.set(key, validAttempts)\n    return true\n  }\n  \n  /**\n   * \n   */\n  reset(key: string): void {\n    this.attempts.delete(key)\n  }\n  \n  /**\n   * \n   */\n  clear(): void {\n    this.attempts.clear()\n  }\n\n  /**\n   * \n   */\n  getRemainingAttempts(key: string, maxAttempts: number, windowMs: number): number {\n    const now = Date.now()\n    const userAttempts = this.attempts.get(key) || []\n    const validAttempts = userAttempts.filter(time => now - time < windowMs)\n    return Math.max(0, maxAttempts - validAttempts.length)\n  }\n\n  /**\n   * \n   */\n  getNextAttemptTime(key: string, windowMs: number): number {\n    const userAttempts = this.attempts.get(key) || []\n    if (userAttempts.length === 0) return Date.now()\n    const oldestAttempt = Math.min(...userAttempts)\n    return oldestAttempt + windowMs\n  }\n\n  /**\n   * \n   */\n  cleanup(): void {\n    const now = Date.now()\n    for (const [key, attempts] of this.attempts.entries()) {\n      // 24\n      const validAttempts = attempts.filter(time => now - time < 24 * 60 * 60 * 1000)\n      if (validAttempts.length === 0) {\n        this.attempts.delete(key)\n      } else {\n        this.attempts.set(key, validAttempts)\n      }\n    }\n  }\n}\n\n/**\n * \n * CSRFID\n */\nexport function generateSecureRandomString(length: number): string {\n  if (length <= 0 || length > 256) {\n    throw new Error('1256')\n  }\n  \n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\n  const array = new Uint8Array(length)\n  \n  if (typeof window !== 'undefined' && window.crypto && window.crypto.getRandomValues) {\n    window.crypto.getRandomValues(array)\n  } else {\n    // \n    console.warn(' : crypto.getRandomValues ')\n    for (let i = 0; i < length; i++) {\n      array[i] = Math.floor(Math.random() * 256)\n    }\n  }\n  \n  return Array.from(array, byte => chars[byte % chars.length]).join('')\n}\n\n/**\n * CSRF \n */\nexport function generateCSRFToken(): string {\n  return generateSecureRandomString(32)\n}\n\n/**\n * \n */\nexport async function generateSecureHash(data: string): Promise<string> {\n  if (typeof window !== 'undefined' && window.crypto && window.crypto.subtle) {\n    const encoder = new TextEncoder()\n    const dataBuffer = encoder.encode(data)\n    const hashBuffer = await window.crypto.subtle.digest('SHA-256', dataBuffer)\n    const hashArray = Array.from(new Uint8Array(hashBuffer))\n    return hashArray.map(b => b.toString(16).padStart(2, '0')).join('')\n  } \n    // : \n    console.warn(' : crypto.subtle ')\n    let hash = 0\n    for (let i = 0; i < data.length; i++) {\n      const char = data.charCodeAt(i)\n      hash = ((hash << 5) - hash) + char\n      hash = hash & hash // 32bit\n    }\n    return Math.abs(hash).toString(16)\n  \n}\n\n/**\n *  localStorage\n * \n */\nexport function secureLocalStorage() {\n  const ENCRYPTION_KEY_PREFIX = 'game_enc_'\n  const INTEGRITY_SUFFIX = '_integrity'\n  \n  return {\n    async setItem(key: string, value: unknown, encrypt = false): Promise<void> {\n      try {\n        const sanitizedKey = sanitizeInput(key)\n        let serialized = JSON.stringify(value)\n        \n        if (encrypt) {\n          //  Web Crypto API\n          const encryptionKey = await this.getOrCreateEncryptionKey()\n          serialized = await this.simpleEncrypt(serialized, encryptionKey)\n        }\n        \n        // \n        const integrityHash = await generateSecureHash(serialized)\n        \n        localStorage.setItem(sanitizedKey, serialized)\n        localStorage.setItem(sanitizedKey + INTEGRITY_SUFFIX, integrityHash)\n        \n      } catch (error) {\n        console.error(' :', error)\n        throw new Error(`: ${error instanceof Error ? error.message : String(error)}`)\n      }\n    },\n    \n    async getItem<T>(key: string, decrypt = false): Promise<T | null> {\n      try {\n        const sanitizedKey = sanitizeInput(key)\n        const item = localStorage.getItem(sanitizedKey)\n        const integrityHash = localStorage.getItem(sanitizedKey + INTEGRITY_SUFFIX)\n        \n        if (!item) return null\n        \n        // \n        if (integrityHash) {\n          const currentHash = await generateSecureHash(item)\n          if (currentHash !== integrityHash) {\n            console.error(' :', sanitizedKey)\n            this.removeItem(sanitizedKey) // \n            throw new Error('')\n          }\n        }\n        \n        let data = item\n        if (decrypt) {\n          const encryptionKey = await this.getOrCreateEncryptionKey()\n          try {\n            data = await this.simpleDecrypt(data, encryptionKey)\n          } catch {\n            // \n            // security_audit_log\n            if (key === 'security_audit_log') {\n              console.debug(' :', sanitizedKey)\n            } else {\n              console.warn(' :', sanitizedKey)\n            }\n            this.removeItem(sanitizedKey)\n            return null\n          }\n        }\n        \n        return JSON.parse(data)\n      } catch (error) {\n        console.error(' :', error)\n        // JSON\n        if (error instanceof SyntaxError) {\n          const sanitizedKey = sanitizeInput(key)\n          this.removeItem(sanitizedKey)\n        }\n        return null\n      }\n    },\n    \n    removeItem(key: string): void {\n      try {\n        const sanitizedKey = sanitizeInput(key)\n        localStorage.removeItem(sanitizedKey)\n        localStorage.removeItem(sanitizedKey + INTEGRITY_SUFFIX)\n      } catch (error) {\n        console.error(' :', error)\n      }\n    },\n    \n    async getOrCreateEncryptionKey(): Promise<string> {\n      const keyName = `${ENCRYPTION_KEY_PREFIX  }master`\n      let key = localStorage.getItem(keyName)\n      \n      if (!key) {\n        key = generateSecureRandomString(32)\n        localStorage.setItem(keyName, key)\n      }\n      \n      return key\n    },\n    \n    async simpleEncrypt(data: string, key: string): Promise<string> {\n      // : Web Crypto API\n      const result = []\n      for (let i = 0; i < data.length; i++) {\n        const keyChar = key.charCodeAt(i % key.length)\n        const dataChar = data.charCodeAt(i)\n        result.push(String.fromCharCode(dataChar ^ keyChar))\n      }\n      return btoa(result.join(''))\n    },\n    \n    async simpleDecrypt(encryptedData: string, key: string): Promise<string> {\n      try {\n        // \n        if (!encryptedData || encryptedData.trim() === '') {\n          throw new Error('')\n        }\n        \n        const data = atob(encryptedData)\n        const result = []\n        for (let i = 0; i < data.length; i++) {\n          const keyChar = key.charCodeAt(i % key.length)\n          const dataChar = data.charCodeAt(i)\n          result.push(String.fromCharCode(dataChar ^ keyChar))\n        }\n        return result.join('')\n      } catch (error) {\n        const message = error instanceof Error ? error.message : ''\n        throw new Error(`: ${message}`)\n      }\n    }\n  }\n}\n\n/**\n * \n */\nexport function getSecurityIncidents(): any[] {\n  try {\n    return JSON.parse(localStorage.getItem('security_incidents') || '[]')\n  } catch {\n    return []\n  }\n}\n\n/**\n * \n */\nexport function clearSecurityIncidents(): void {\n  localStorage.removeItem('security_incidents')\n}\n\n/**\n * \n */\nexport async function validateAllStoredData(): Promise<{ valid: number; invalid: number; details: string[] }> {\n  const storage = secureLocalStorage()\n  const results = { valid: 0, invalid: 0, details: [] as string[] }\n  \n  // localStorage\n  for (let i = 0; i < localStorage.length; i++) {\n    const key = localStorage.key(i)\n    if (!key || key.includes('_integrity') || key.includes('_version') || key.includes('_timestamp')) {\n      continue // \n    }\n    \n    try {\n      await storage.getItem(key)\n      results.valid++\n    } catch (error) {\n      results.invalid++\n      results.details.push(`${key}: ${error instanceof Error ? error.message : String(error)}`)\n    }\n  }\n  \n  return results\n}","/**\n * \n * WCAG 2.1 AA\n */\n\nimport { sanitizeInput } from '@/utils/security'\n\nexport interface FocusableElement {\n  element: HTMLElement\n  priority: number\n  group?: string\n  onFocus?: () => void\n  onBlur?: () => void\n  onActivate?: () => void\n}\n\nexport interface KeyboardShortcut {\n  key: string\n  modifiers?: ('ctrl' | 'alt' | 'shift' | 'meta')[]\n  description: string\n  action: () => void\n  global?: boolean\n}\n\nexport class KeyboardManager {\n  private focusableElements: FocusableElement[] = []\n  private currentFocusIndex: number = -1\n  private readonly shortcuts: Map<string, KeyboardShortcut> = new Map()\n  private isActive: boolean = true\n  private focusVisibleEnabled: boolean = true\n\n  constructor() {\n    this.setupEventListeners()\n    this.setupFocusVisible()\n  }\n\n  /**\n   * \n   */\n  registerFocusableElement(element: HTMLElement, options: Partial<FocusableElement> = {}): void {\n    const focusableElement: FocusableElement = {\n      element,\n      priority: options.priority || 0,\n      group: options.group,\n      onFocus: options.onFocus,\n      onBlur: options.onBlur,\n      onActivate: options.onActivate\n    }\n\n    // \n    const existingIndex = this.focusableElements.findIndex(el => el.element === element)\n    if (existingIndex >= 0) {\n      this.focusableElements[existingIndex] = focusableElement\n    } else {\n      this.focusableElements.push(focusableElement)\n    }\n\n    // \n    this.focusableElements.sort((a, b) => b.priority - a.priority)\n\n    // ARIA\n    this.setupElementAccessibility(element)\n  }\n\n  /**\n   * \n   */\n  unregisterFocusableElement(element: HTMLElement): void {\n    const index = this.focusableElements.findIndex(el => el.element === element)\n    if (index >= 0) {\n      this.focusableElements.splice(index, 1)\n      \n      // \n      if (this.currentFocusIndex >= index) {\n        this.currentFocusIndex = Math.max(0, this.currentFocusIndex - 1)\n      }\n    }\n  }\n\n  /**\n   * \n   */\n  registerShortcut(shortcut: KeyboardShortcut): void {\n    const key = this.createShortcutKey(shortcut.key, shortcut.modifiers || [])\n    this.shortcuts.set(key, shortcut)\n  }\n\n  /**\n   * \n   */\n  unregisterShortcut(key: string, modifiers: ('ctrl' | 'alt' | 'shift' | 'meta')[] = []): void {\n    const shortcutKey = this.createShortcutKey(key, modifiers)\n    this.shortcuts.delete(shortcutKey)\n  }\n\n  /**\n   * \n   */\n  focusNext(): void {\n    if (this.focusableElements.length === 0) return\n\n    this.currentFocusIndex = (this.currentFocusIndex + 1) % this.focusableElements.length\n    this.setFocus(this.currentFocusIndex)\n  }\n\n  /**\n   * \n   */\n  focusPrevious(): void {\n    if (this.focusableElements.length === 0) return\n\n    this.currentFocusIndex = this.currentFocusIndex <= 0 \n      ? this.focusableElements.length - 1 \n      : this.currentFocusIndex - 1\n    this.setFocus(this.currentFocusIndex)\n  }\n\n  /**\n   * \n   */\n  focusGroup(groupName: string): void {\n    const groupElements = this.focusableElements.filter(el => el.group === groupName)\n    if (groupElements.length > 0) {\n      const index = this.focusableElements.indexOf(groupElements[0])\n      if (index >= 0) {\n        this.currentFocusIndex = index\n        this.setFocus(index)\n      }\n    }\n  }\n\n  /**\n   * \n   */\n  focusElement(element: HTMLElement): void {\n    const index = this.focusableElements.findIndex(el => el.element === element)\n    if (index >= 0) {\n      this.currentFocusIndex = index\n      this.setFocus(index)\n    }\n  }\n\n  /**\n   * \n   */\n  getCurrentFocusedElement(): HTMLElement | null {\n    if (this.currentFocusIndex >= 0 && this.currentFocusIndex < this.focusableElements.length) {\n      return this.focusableElements[this.currentFocusIndex].element\n    }\n    return null\n  }\n\n  /**\n   * \n   */\n  startFocusTrap(container: HTMLElement): void {\n    const focusableInContainer = this.focusableElements.filter(el => \n      container.contains(el.element)\n    )\n    \n    if (focusableInContainer.length > 0) {\n      // \n      this.focusableElements.forEach(el => {\n        if (!container.contains(el.element)) {\n          el.element.setAttribute('tabindex', '-1')\n          el.element.setAttribute('aria-hidden', 'true')\n        }\n      })\n      \n      // \n      this.focusElement(focusableInContainer[0].element)\n    }\n  }\n\n  /**\n   * \n   */\n  endFocusTrap(): void {\n    // \n    this.focusableElements.forEach(el => {\n      el.element.removeAttribute('tabindex')\n      el.element.removeAttribute('aria-hidden')\n    })\n  }\n\n  /**\n   * /\n   */\n  toggleHelp(): void {\n    const helpPanel = this.createHelpPanel()\n    document.body.appendChild(helpPanel)\n    \n    // ESC\n    const closeHelp = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        helpPanel.remove()\n        document.removeEventListener('keydown', closeHelp)\n      }\n    }\n    document.addEventListener('keydown', closeHelp)\n    \n    // \n    const closeButton = helpPanel.querySelector('button')\n    if (closeButton) {\n      closeButton.focus()\n    }\n  }\n\n  /**\n   * \n   */\n  createSkipLinks(): HTMLElement {\n    const skipLinks = document.createElement('div')\n    skipLinks.className = 'skip-links'\n    skipLinks.setAttribute('aria-label', '')\n    \n    const skipToMain = this.createSkipLink('', '#main-content')\n    const skipToNav = this.createSkipLink('', '#navigation')\n    const skipToFooter = this.createSkipLink('', '#footer')\n    \n    skipLinks.appendChild(skipToMain)\n    skipLinks.appendChild(skipToNav)\n    skipLinks.appendChild(skipToFooter)\n    \n    return skipLinks\n  }\n\n  /**\n   * \n   */\n  setActive(active: boolean): void {\n    this.isActive = active\n    \n    if (!active) {\n      // \n      const currentElement = this.getCurrentFocusedElement()\n      if (currentElement) {\n        currentElement.blur()\n      }\n    }\n  }\n\n  /**\n   * /\n   */\n  setFocusVisible(enabled: boolean): void {\n    this.focusVisibleEnabled = enabled\n    document.documentElement.classList.toggle('keyboard-navigation', enabled)\n  }\n\n  private setupEventListeners(): void {\n    document.addEventListener('keydown', this.handleKeyDown.bind(this))\n    document.addEventListener('focusin', this.handleFocusIn.bind(this))\n    document.addEventListener('focusout', this.handleFocusOut.bind(this))\n    \n    // \n    document.addEventListener('mousedown', () => {\n      document.documentElement.classList.remove('keyboard-navigation')\n    })\n  }\n\n  private handleKeyDown(event: KeyboardEvent): void {\n    if (!this.isActive) return\n\n    // \n    const shortcutKey = this.createShortcutKey(event.key, this.getActiveModifiers(event))\n    const shortcut = this.shortcuts.get(shortcutKey)\n    \n    if (shortcut) {\n      event.preventDefault()\n      shortcut.action()\n      return\n    }\n\n    // \n    switch (event.key) {\n      case 'Tab':\n        event.preventDefault()\n        if (event.shiftKey) {\n          this.focusPrevious()\n        } else {\n          this.focusNext()\n        }\n        break\n\n      case 'ArrowDown':\n      case 'ArrowRight':\n        event.preventDefault()\n        this.focusNext()\n        break\n\n      case 'ArrowUp':\n      case 'ArrowLeft':\n        event.preventDefault()\n        this.focusPrevious()\n        break\n\n      case 'Home':\n        event.preventDefault()\n        this.currentFocusIndex = 0\n        this.setFocus(0)\n        break\n\n      case 'End':\n        event.preventDefault()\n        this.currentFocusIndex = this.focusableElements.length - 1\n        this.setFocus(this.currentFocusIndex)\n        break\n\n      case 'Enter':\n      case ' ':\n        const currentElement = this.getCurrentFocusedElement()\n        if (currentElement) {\n          event.preventDefault()\n          const focusableEl = this.focusableElements[this.currentFocusIndex]\n          if (focusableEl.onActivate) {\n            focusableEl.onActivate()\n          } else {\n            currentElement.click()\n          }\n        }\n        break\n\n      case 'F1':\n        event.preventDefault()\n        this.toggleHelp()\n        break\n    }\n  }\n\n  private handleFocusIn(event: FocusEvent): void {\n    if (!this.focusVisibleEnabled) return\n\n    const target = event.target as HTMLElement\n    const index = this.focusableElements.findIndex(el => el.element === target)\n    \n    if (index >= 0) {\n      this.currentFocusIndex = index\n      const focusableEl = this.focusableElements[index]\n      \n      // \n      if (focusableEl.onFocus) {\n        focusableEl.onFocus()\n      }\n      \n      // \n      document.documentElement.classList.add('keyboard-navigation')\n    }\n  }\n\n  private handleFocusOut(event: FocusEvent): void {\n    const target = event.target as HTMLElement\n    const index = this.focusableElements.findIndex(el => el.element === target)\n    \n    if (index >= 0) {\n      const focusableEl = this.focusableElements[index]\n      \n      // \n      if (focusableEl.onBlur) {\n        focusableEl.onBlur()\n      }\n    }\n  }\n\n  private setFocus(index: number): void {\n    if (index < 0 || index >= this.focusableElements.length) return\n\n    const focusableEl = this.focusableElements[index]\n    const element = focusableEl.element\n\n    // \n    if (element.offsetParent === null) {\n      // \n      this.focusNext()\n      return\n    }\n\n    element.focus()\n    \n    // \n    element.scrollIntoView({\n      behavior: 'smooth',\n      block: 'center',\n      inline: 'center'\n    })\n  }\n\n  private setupElementAccessibility(element: HTMLElement): void {\n    // \n    if (!element.hasAttribute('tabindex')) {\n      element.setAttribute('tabindex', '0')\n    }\n\n    // \n    if (!element.hasAttribute('role')) {\n      const tagName = element.tagName.toLowerCase()\n      if (tagName === 'div' || tagName === 'span') {\n        element.setAttribute('role', 'button')\n      }\n    }\n\n    // ARIA-LABEL\n    if (!element.hasAttribute('aria-label') && !element.hasAttribute('aria-labelledby')) {\n      const textContent = element.textContent?.trim()\n      if (textContent) {\n        element.setAttribute('aria-label', textContent)\n      }\n    }\n  }\n\n  private createShortcutKey(key: string, modifiers: string[]): string {\n    const sortedModifiers = modifiers.sort()\n    return `${sortedModifiers.join('+')}+${key.toLowerCase()}`\n  }\n\n  private getActiveModifiers(event: KeyboardEvent): string[] {\n    const modifiers: string[] = []\n    if (event.ctrlKey) modifiers.push('ctrl')\n    if (event.altKey) modifiers.push('alt')\n    if (event.shiftKey) modifiers.push('shift')\n    if (event.metaKey) modifiers.push('meta')\n    return modifiers\n  }\n\n  private createSkipLink(text: string, href: string): HTMLElement {\n    const link = document.createElement('a')\n    link.href = href\n    link.textContent = text\n    link.className = 'skip-link'\n    \n    link.addEventListener('click', (e) => {\n      e.preventDefault()\n      const target = document.querySelector(href)\n      if (target) {\n        (target as HTMLElement).focus()\n      }\n    })\n    \n    return link\n  }\n\n  private createHelpPanel(): HTMLElement {\n    const panel = document.createElement('div')\n    panel.className = 'keyboard-help-panel'\n    panel.setAttribute('role', 'dialog')\n    panel.setAttribute('aria-labelledby', 'help-title')\n    panel.setAttribute('aria-modal', 'true')\n    \n    const shortcuts = Array.from(this.shortcuts.values())\n    \n    // : innerHTML  DOM \n    const helpContent = document.createElement('div')\n    helpContent.className = 'help-content'\n    \n    const title = document.createElement('h2')\n    title.id = 'help-title'\n    title.textContent = ''\n    \n    const shortcutsList = document.createElement('div')\n    shortcutsList.className = 'shortcuts-list'\n    \n    // \n    const basicGroup = document.createElement('div')\n    basicGroup.className = 'shortcut-group'\n    \n    const basicTitle = document.createElement('h3')\n    basicTitle.textContent = ''\n    \n    const basicDl = document.createElement('dl')\n    const basicShortcuts = [\n      { key: 'Tab / Shift+Tab', desc: '/' },\n      { key: '', desc: '' },\n      { key: 'Enter / Space', desc: '/' },\n      { key: 'Home / End', desc: '/' }\n    ]\n    \n    basicShortcuts.forEach(({ key, desc }) => {\n      const dt = document.createElement('dt')\n      dt.textContent = key\n      const dd = document.createElement('dd')\n      dd.textContent = desc\n      basicDl.appendChild(dt)\n      basicDl.appendChild(dd)\n    })\n    \n    basicGroup.appendChild(basicTitle)\n    basicGroup.appendChild(basicDl)\n    shortcutsList.appendChild(basicGroup)\n    \n    // \n    if (shortcuts.length > 0) {\n      const gameGroup = document.createElement('div')\n      gameGroup.className = 'shortcut-group'\n      \n      const gameTitle = document.createElement('h3')\n      gameTitle.textContent = ''\n      \n      const gameDl = document.createElement('dl')\n      shortcuts.forEach(shortcut => {\n        const dt = document.createElement('dt')\n        dt.textContent = sanitizeInput(this.formatShortcut(shortcut))\n        const dd = document.createElement('dd')\n        dd.textContent = sanitizeInput(shortcut.description)\n        gameDl.appendChild(dt)\n        gameDl.appendChild(dd)\n      })\n      \n      gameGroup.appendChild(gameTitle)\n      gameGroup.appendChild(gameDl)\n      shortcutsList.appendChild(gameGroup)\n    }\n    \n    const closeButton = document.createElement('button')\n    closeButton.type = 'button'\n    closeButton.textContent = ' (Esc)'\n    closeButton.onclick = () => { panel.remove(); }\n    \n    helpContent.appendChild(title)\n    helpContent.appendChild(shortcutsList)\n    helpContent.appendChild(closeButton)\n    \n    panel.appendChild(helpContent)\n    \n    return panel\n  }\n\n  private formatShortcut(shortcut: KeyboardShortcut): string {\n    const modifiers = shortcut.modifiers || []\n    const parts = [...modifiers.map(m => m.charAt(0).toUpperCase() + m.slice(1)), shortcut.key]\n    return parts.join(' + ')\n  }\n\n  private setupFocusVisible(): void {\n    // CSS\n    const style = document.createElement('style')\n    style.textContent = `\n      .keyboard-navigation *:focus {\n        outline: 2px solid #818CF8;\n        outline-offset: 2px;\n        border-radius: 4px;\n      }\n      \n      .skip-links {\n        position: absolute;\n        top: -40px;\n        left: 6px;\n        z-index: 1000;\n      }\n      \n      .skip-link {\n        position: absolute;\n        left: -10000px;\n        top: auto;\n        width: 1px;\n        height: 1px;\n        overflow: hidden;\n        background: #000;\n        color: #fff;\n        padding: 8px 16px;\n        text-decoration: none;\n        border-radius: 4px;\n      }\n      \n      .skip-link:focus {\n        position: static;\n        width: auto;\n        height: auto;\n        left: auto;\n        top: auto;\n      }\n      \n      .keyboard-help-panel {\n        position: fixed;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        background: rgba(0, 0, 0, 0.95);\n        color: white;\n        padding: 2rem;\n        border-radius: 12px;\n        max-width: 500px;\n        max-height: 80vh;\n        overflow-y: auto;\n        z-index: 10000;\n      }\n      \n      .help-content h2 {\n        margin-top: 0;\n        color: #818CF8;\n      }\n      \n      .shortcuts-list dt {\n        font-weight: bold;\n        color: #FFD43B;\n        margin-top: 0.5rem;\n      }\n      \n      .shortcuts-list dd {\n        margin-left: 1rem;\n        margin-bottom: 0.5rem;\n      }\n      \n      .help-content button {\n        margin-top: 1rem;\n        padding: 0.5rem 1rem;\n        background: #818CF8;\n        color: white;\n        border: none;\n        border-radius: 4px;\n        cursor: pointer;\n      }\n    `\n    document.head.appendChild(style)\n  }\n\n  /**\n   * \n   */\n  destroy(): void {\n    this.focusableElements = []\n    this.shortcuts.clear()\n    document.removeEventListener('keydown', this.handleKeyDown.bind(this))\n    document.removeEventListener('focusin', this.handleFocusIn.bind(this))\n    document.removeEventListener('focusout', this.handleFocusOut.bind(this))\n  }\n}","<template>\n  <header class=\"app-header\">\n    <div class=\"hero-section\">\n      <div class=\"hero-background\">\n        <div class=\"hero-orb hero-orb-1\"></div>\n        <div class=\"hero-orb hero-orb-2\"></div>\n        <div class=\"hero-orb hero-orb-3\"></div>\n      </div>\n      <div class=\"hero-content\">\n        <div class=\"brand-logo pulse\">\n          <div class=\"logo-glow\"></div>\n          <span class=\"logo-icon\"></span>\n        </div>\n        <h1 class=\"hero-title bounce-in\" style=\"animation-delay: 0.2s;\">\n          \n        </h1>\n        <p class=\"hero-subtitle bounce-in\" style=\"animation-delay: 0.4s;\">\n          Life Fulfillment - \n        </p>\n        <div class=\"hero-accent bounce-in\" style=\"animation-delay: 0.6s;\">\n          <span class=\"accent-icon\"></span>\n          <span class=\"accent-text\"></span>\n          <span class=\"accent-icon\"></span>\n        </div>\n        <div class=\"hero-stats bounce-in\" style=\"animation-delay: 0.8s;\">\n          <div class=\"stat-item\">\n            <span class=\"stat-value\">100+</span>\n            <span class=\"stat-label\"></span>\n          </div>\n          <div class=\"stat-divider\"></div>\n          <div class=\"stat-item\">\n            <span class=\"stat-value\">7</span>\n            <span class=\"stat-label\"></span>\n          </div>\n          <div class=\"stat-divider\"></div>\n          <div class=\"stat-item\">\n            <span class=\"stat-value\"></span>\n            <span class=\"stat-label\"></span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </header>\n</template>\n\n<script setup lang=\"ts\">\n// \n// \n</script>\n\n<style scoped>\n/* ===========================================\n   \n   ========================================= */\n\n.app-header {\n  text-align: center;\n  padding: var(--space-2xl) 0;\n  position: relative;\n  overflow: hidden;\n}\n\n.hero-section {\n  width: 100%;\n  max-width: 900px;\n  margin: 0 auto;\n  position: relative;\n}\n\n/*  */\n.hero-background {\n  position: absolute;\n  inset: -50%;\n  pointer-events: none;\n  opacity: 0.15;\n}\n\n.hero-orb {\n  position: absolute;\n  border-radius: 50%;\n  filter: blur(60px);\n  animation: float 20s infinite ease-in-out;\n}\n\n.hero-orb-1 {\n  width: 400px;\n  height: 400px;\n  background: var(--brand-gradient-primary);\n  top: -20%;\n  left: -10%;\n  animation-delay: 0s;\n}\n\n.hero-orb-2 {\n  width: 300px;\n  height: 300px;\n  background: var(--brand-gradient-soft);\n  bottom: -20%;\n  right: -10%;\n  animation-delay: 7s;\n}\n\n.hero-orb-3 {\n  width: 250px;\n  height: 250px;\n  background: var(--vitality-high);\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  animation-delay: 14s;\n}\n\n@keyframes float {\n  0%, 100% {\n    transform: translate(0, 0) scale(1);\n  }\n  33% {\n    transform: translate(30px, -30px) scale(1.1);\n  }\n  66% {\n    transform: translate(-20px, 20px) scale(0.9);\n  }\n}\n\n.hero-content {\n  position: relative;\n  z-index: 1;\n}\n\n.brand-logo {\n  display: inline-block;\n  margin-bottom: var(--space-lg);\n  position: relative;\n}\n\n.logo-icon {\n  font-size: 4rem;\n  line-height: 1;\n  display: block;\n  filter: drop-shadow(0 4px 20px rgba(129, 140, 248, 0.4));\n  position: relative;\n  z-index: 2;\n}\n\n.logo-glow {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 100px;\n  height: 100px;\n  background: radial-gradient(circle, rgba(129, 140, 248, 0.4) 0%, transparent 70%);\n  filter: blur(20px);\n  animation: glow-pulse 3s ease-in-out infinite;\n}\n\n@keyframes glow-pulse {\n  0%, 100% {\n    transform: translate(-50%, -50%) scale(1);\n    opacity: 0.4;\n  }\n  50% {\n    transform: translate(-50%, -50%) scale(1.3);\n    opacity: 0.6;\n  }\n}\n\n.hero-title {\n  font-size: clamp(2.5rem, 6vw, 4.5rem);\n  font-weight: 800;\n  margin-bottom: var(--space-md);\n  \n  background: var(--brand-gradient-hero);\n  background-clip: text;\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-size: 200% 200%;\n  animation: gradient-shift 8s ease-in-out infinite;\n  \n  filter: drop-shadow(0 4px 20px rgba(102, 126, 234, 0.3));\n  line-height: 1.1;\n  letter-spacing: -0.02em;\n}\n\n@keyframes gradient-shift {\n  0%, 100% {\n    background-position: 0% 50%;\n  }\n  50% {\n    background-position: 100% 50%;\n  }\n}\n\n.hero-subtitle {\n  font-size: clamp(1rem, 3vw, 1.375rem);\n  color: rgba(209, 213, 219, 0.9);\n  margin-bottom: var(--space-xl);\n  max-width: 600px;\n  margin-left: auto;\n  margin-right: auto;\n  line-height: 1.6;\n  font-weight: var(--font-weight-medium);\n  letter-spacing: 0.01em;\n}\n\n.hero-accent {\n  font-size: clamp(0.9rem, 2.5vw, 1.15rem);\n  color: rgba(129, 140, 248, 0.9);\n  font-weight: 600;\n  display: inline-flex;\n  align-items: center;\n  gap: var(--space-sm);\n  padding: var(--space-sm) var(--space-lg);\n  background: rgba(129, 140, 248, 0.1);\n  border: 1px solid rgba(129, 140, 248, 0.2);\n  border-radius: 9999px;\n  backdrop-filter: blur(10px);\n  margin-bottom: var(--space-xl);\n}\n\n.accent-icon {\n  font-size: 1.2em;\n  filter: brightness(1.2);\n}\n\n.accent-text {\n  letter-spacing: 0.02em;\n}\n\n/*  */\n.hero-stats {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: var(--space-xl);\n  margin-top: var(--space-2xl);\n}\n\n.stat-item {\n  text-align: center;\n}\n\n.stat-value {\n  display: block;\n  font-size: clamp(1.75rem, 4vw, 2.5rem);\n  font-weight: var(--font-weight-bold);\n  background: var(--brand-gradient-soft);\n  background-clip: text;\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  margin-bottom: var(--space-xs);\n}\n\n.stat-label {\n  display: block;\n  font-size: clamp(0.75rem, 2vw, 0.875rem);\n  color: rgba(156, 163, 175, 0.8);\n  font-weight: var(--font-weight-medium);\n  letter-spacing: 0.05em;\n  text-transform: uppercase;\n}\n\n.stat-divider {\n  width: 1px;\n  height: 40px;\n  background: linear-gradient(to bottom, transparent, rgba(129, 140, 248, 0.3), transparent);\n}\n\n/*  */\n@keyframes pulse {\n  0%, 100% { transform: scale(1); }\n  50% { transform: scale(1.05); }\n}\n\n@keyframes bounce-in {\n  0% {\n    opacity: 0;\n    transform: translateY(30px);\n  }\n  60% {\n    opacity: 1;\n    transform: translateY(-10px);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.pulse {\n  animation: pulse 2s ease-in-out infinite;\n}\n\n.bounce-in {\n  animation: bounce-in 0.8s ease-out forwards;\n  opacity: 0;\n}\n\n/*  */\n@media (prefers-reduced-motion: reduce) {\n  .pulse,\n  .bounce-in {\n    animation: none;\n    opacity: 1;\n    transform: none;\n  }\n}\n\n/*  */\n@media (max-width: 640px) {\n  .app-header {\n    padding: var(--space-xl) 0;\n  }\n  \n  .logo-icon {\n    font-size: 3rem;\n  }\n  \n  .logo-glow {\n    width: 80px;\n    height: 80px;\n  }\n  \n  .hero-stats {\n    gap: var(--space-lg);\n    margin-top: var(--space-xl);\n  }\n  \n  .stat-divider {\n    height: 30px;\n  }\n  \n  .hero-orb {\n    filter: blur(40px);\n  }\n  \n  .hero-orb-1 {\n    width: 250px;\n    height: 250px;\n  }\n  \n  .hero-orb-2 {\n    width: 200px;\n    height: 200px;\n  }\n  \n  .hero-orb-3 {\n    width: 150px;\n    height: 150px;\n  }\n}\n\n@media (max-width: 375px) {\n  .hero-title {\n    font-size: 2rem;\n    line-height: 1.2;\n  }\n  \n  .hero-subtitle {\n    font-size: var(--text-base);\n    line-height: 1.5;\n  }\n}\n</style>","<template>\n  <section id=\"navigation\" class=\"action-section\" role=\"navigation\" aria-label=\"\">\n    <div class=\"button-group\">\n      <button\n        ref=\"gameButtonRef\"\n        class=\"btn btn-primary ripple-container glow-on-hover bounce-in\"\n        aria-label=\" (Alt+G)\"\n        :aria-keyshortcuts=\"'Alt+G'\"\n        aria-describedby=\"game-description\"\n        @click=\"$emit('start-game')\"\n      >\n        <span class=\"btn-bg-effect\"></span>\n        <span class=\"btn-icon\" aria-hidden=\"true\"></span>\n        <span class=\"btn-text\"></span>\n        <span class=\"btn-arrow\" aria-hidden=\"true\"></span>\n      </button>\n      \n      <button\n        ref=\"tutorialButtonRef\"\n        class=\"btn btn-secondary ripple-container\"\n        aria-label=\" (Alt+T)\"\n        :aria-keyshortcuts=\"'Alt+T'\"\n        aria-describedby=\"tutorial-description\"\n        @click=\"$emit('start-tutorial')\"\n      >\n        <span class=\"btn-bg-effect\"></span>\n        <span class=\"btn-icon\" aria-hidden=\"true\"></span>\n        <span class=\"btn-text\"></span>\n      </button>\n      \n      <button\n        class=\"btn btn-secondary ripple-container\"\n        aria-label=\" (Alt+S)\"\n        :aria-keyshortcuts=\"'Alt+S'\"\n        aria-describedby=\"statistics-description\"\n        @click=\"$emit('open-statistics')\"\n      >\n        <span class=\"btn-bg-effect\"></span>\n        <span class=\"btn-icon\" aria-hidden=\"true\"></span>\n        <span class=\"btn-text\"></span>\n      </button>\n    </div>\n    \n    <!--  -->\n    <div class=\"sr-only\">\n      <div id=\"game-description\"></div>\n      <div id=\"tutorial-description\"></div>\n      <div id=\"statistics-description\"></div>\n    </div>\n  </section>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue'\n\n// \ndefineEmits<{\n  'start-game': []\n  'start-tutorial': []\n  'open-statistics': []\n}>()\n\n// \nconst gameButtonRef = ref<HTMLButtonElement>()\nconst tutorialButtonRef = ref<HTMLButtonElement>()\n\n// \ndefineExpose({\n  gameButtonRef,\n  tutorialButtonRef\n})\n</script>\n\n<style scoped>\n/* ===========================================\n   \n   ========================================= */\n\n.action-section {\n  display: flex;\n  justify-content: center;\n  margin-bottom: var(--space-2xl);\n}\n\n.button-group {\n  display: flex;\n  gap: var(--space-lg);\n  flex-wrap: wrap;\n  justify-content: center;\n}\n\n/*  */\n.btn {\n  display: flex;\n  align-items: center;\n  gap: var(--space-sm);\n  \n  min-width: 200px;\n  min-height: var(--touch-target-comfortable);\n  padding: var(--space-md) var(--space-xl);\n  \n  border: none;\n  border-radius: 16px;\n  \n  font-family: Inter, system-ui, sans-serif;\n  font-size: var(--text-lg);\n  font-weight: 600;\n  text-decoration: none;\n  \n  transition: all var(--transition-normal);\n  cursor: pointer;\n  \n  box-shadow: var(--shadow-card);\n  backdrop-filter: blur(8px);\n  position: relative;\n  overflow: hidden;\n  isolation: isolate;\n}\n\n/*  */\n.btn-bg-effect {\n  position: absolute;\n  inset: 0;\n  background: radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(255, 255, 255, 0.1) 0%, transparent 70%);\n  opacity: 0;\n  transition: opacity var(--transition-normal);\n  z-index: -1;\n}\n\n.btn:hover .btn-bg-effect {\n  opacity: 1;\n}\n\n/*  */\n.btn-primary {\n  background: var(--brand-gradient-primary);\n  color: white;\n  position: relative;\n}\n\n.btn-primary::before {\n  content: '';\n  position: absolute;\n  inset: -2px;\n  background: var(--brand-gradient-hero);\n  border-radius: inherit;\n  opacity: 0;\n  z-index: -1;\n  transition: opacity var(--transition-normal);\n  filter: blur(10px);\n}\n\n.btn-primary:hover {\n  transform: translateY(-4px) scale(1.02);\n  box-shadow: \n    0 10px 20px rgba(0, 0, 0, 0.2),\n    0 15px 40px rgba(129, 140, 248, 0.4),\n    inset 0 1px 0 rgba(255, 255, 255, 0.2);\n}\n\n.btn-primary:hover::before {\n  opacity: 0.5;\n}\n\n.btn-primary .btn-arrow {\n  margin-left: auto;\n  font-size: 1.2em;\n  transition: transform var(--transition-normal);\n}\n\n.btn-primary:hover .btn-arrow {\n  transform: translateX(4px);\n}\n\n/*  */\n.btn-secondary {\n  background: rgba(255, 255, 255, 0.05);\n  color: rgba(255, 255, 255, 0.9);\n  border: 1.5px solid rgba(129, 140, 248, 0.3);\n  position: relative;\n}\n\n.btn-secondary::after {\n  content: '';\n  position: absolute;\n  inset: 0;\n  background: linear-gradient(135deg, transparent 0%, rgba(129, 140, 248, 0.1) 100%);\n  opacity: 0;\n  transition: opacity var(--transition-normal);\n  border-radius: inherit;\n}\n\n.btn-secondary:hover {\n  background: rgba(129, 140, 248, 0.15);\n  border-color: rgba(129, 140, 248, 0.6);\n  transform: translateY(-2px) scale(1.01);\n  box-shadow: \n    0 8px 16px rgba(0, 0, 0, 0.1),\n    0 8px 25px rgba(129, 140, 248, 0.2),\n    inset 0 1px 0 rgba(255, 255, 255, 0.1);\n}\n\n.btn-secondary:hover::after {\n  opacity: 1;\n}\n\n/*  */\n.btn:active {\n  transform: translateY(0);\n}\n\n/*  */\n.btn-icon {\n  font-size: var(--text-xl);\n  line-height: 1;\n  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));\n  transition: transform var(--transition-normal);\n}\n\n.btn:hover .btn-icon {\n  transform: scale(1.1) rotate(-5deg);\n}\n\n.btn-text {\n  font-weight: 600;\n  letter-spacing: 0.02em;\n}\n\n/*  */\n.ripple-container {\n  position: relative;\n  overflow: hidden;\n}\n\n.ripple-container::after {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.3);\n  transform: translate(-50%, -50%);\n  transition: width 0.6s, height 0.6s;\n}\n\n.ripple-container:active::after {\n  width: 300px;\n  height: 300px;\n}\n\n/*  */\n.glow-on-hover {\n  position: relative;\n}\n\n.glow-on-hover::after {\n  content: '';\n  position: absolute;\n  inset: 0;\n  border-radius: inherit;\n  padding: 2px;\n  background: linear-gradient(135deg, var(--primary-400), var(--secondary-400));\n  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);\n  -webkit-mask-composite: xor;\n  mask-composite: exclude;\n  opacity: 0;\n  transition: opacity var(--transition-normal);\n}\n\n.glow-on-hover:hover::after {\n  opacity: 1;\n}\n\n/*  */\n.bounce-in {\n  animation: bounce-in 0.8s ease-out forwards;\n  opacity: 0;\n}\n\n@keyframes bounce-in {\n  0% {\n    opacity: 0;\n    transform: translateY(30px) scale(0.9);\n  }\n  60% {\n    opacity: 1;\n    transform: translateY(-5px) scale(1.02);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n}\n\n/*  */\n@keyframes pulse-subtle {\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.05);\n  }\n}\n\n.btn-primary:hover .btn-icon {\n  animation: pulse-subtle 2s infinite;\n}\n\n/*  */\n.btn:focus {\n  outline: 2px solid rgba(129, 140, 248, 0.8);\n  outline-offset: 2px;\n}\n\n/*  */\n@media (max-width: 640px) {\n  .button-group {\n    flex-direction: column;\n    align-items: center;\n    width: 100%;\n    gap: var(--space-md);\n  }\n  \n  .btn {\n    width: 100%;\n    max-width: 280px;\n    justify-content: center;\n  }\n}\n\n@media (max-width: 375px) {\n  .btn {\n    min-width: 160px;\n    padding: var(--space-sm) var(--space-lg);\n    font-size: var(--text-base);\n  }\n}\n\n/*  */\n@media (prefers-contrast: high) {\n  .btn-primary,\n  .btn-secondary {\n    border: 2px solid white;\n  }\n}\n\n/*  */\n@media (prefers-reduced-motion: reduce) {\n  .btn,\n  .bounce-in {\n    transition: none;\n    animation: none;\n    opacity: 1;\n    transform: none;\n  }\n  \n  .btn:hover {\n    transform: none;\n  }\n  \n  .ripple-container::after {\n    display: none;\n  }\n}\n\n/*  */\n.sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border: 0;\n}\n</style>","<template>\n  <section class=\"info-section\">\n    <div class=\"info-grid\">\n      <!--  -->\n      <div class=\"interactive-card glow-on-hover card-latest\">\n        <div class=\"card-badge\">NEW</div>\n        <div class=\"card-header\">\n          <div class=\"card-icon-wrapper\">\n            <span class=\"card-icon\"></span>\n          </div>\n          <h2 class=\"card-title\">\n             v0.3.0\n          </h2>\n        </div>\n        <div class=\"text-left space-y-3\">\n          <div>\n            <h3 class=\"font-semibold text-lg mb-2\">Production Release - </h3>\n            <ul class=\"space-y-1 text-sm\">\n              <li class=\"flex items-start gap-2\">\n                <span class=\"text-success mt-1\"></span>\n                <span><strong>100%</strong>: </span>\n              </li>\n              <li class=\"flex items-start gap-2\">\n                <span class=\"text-success mt-1\"></span>\n                <span><strong></strong>: WCAG 2.1 AA 100%</span>\n              </li>\n              <li class=\"flex items-start gap-2\">\n                <span class=\"text-success mt-1\"></span>\n                <span><strong></strong>: </span>\n              </li>\n              <li class=\"flex items-start gap-2\">\n                <span class=\"text-success mt-1\"></span>\n                <span><strong></strong>: 55.8%</span>\n              </li>\n              <li class=\"flex items-start gap-2\">\n                <span class=\"text-success mt-1\"></span>\n                <span><strong></strong>: </span>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      <!--  -->\n      <div class=\"interactive-card glow-on-hover card-roadmap\">\n        <div class=\"card-badge badge-secondary\">ROADMAP</div>\n        <div class=\"card-header\">\n          <div class=\"card-icon-wrapper icon-wrapper-secondary\">\n            <span class=\"card-icon\"></span>\n          </div>\n          <h2 class=\"card-title\">\n            \n          </h2>\n        </div>\n        <div class=\"text-left space-y-3\">\n          <div>\n            <h3 class=\"font-semibold mb-2\">1-2</h3>\n            <ul class=\"space-y-1 text-sm\">\n              <li class=\"flex items-center gap-2\">\n                <span class=\"text-success\"></span>\n                \n              </li>\n              <li class=\"flex items-center gap-2\">\n                <span class=\"text-success\"></span>\n                \n              </li>\n              <li class=\"flex items-center gap-2\">\n                <span class=\"text-success\"></span>\n                \n              </li>\n              <li class=\"flex items-center gap-2\">\n                <span class=\"text-gray-400\"></span>\n                \n              </li>\n            </ul>\n          </div>\n          <div>\n            <h3 class=\"font-semibold mb-2\">1</h3>\n            <ul class=\"space-y-1 text-sm\">\n              <li class=\"flex items-center gap-2\">\n                <span class=\"text-gray-400\"></span>\n                \n              </li>\n              <li class=\"flex items-center gap-2\">\n                <span class=\"text-gray-400\"></span>\n                \n              </li>\n            </ul>\n          </div>\n        </div>\n        <div class=\"mt-4 text-sm text-gray-600 dark:text-gray-400\">\n          <a href=\"https://github.com/shishihs/insurance_self_game/blob/master/CHANGELOG.md\" \n             target=\"_blank\" \n             class=\"hover:text-primary transition-colors\">\n             \n          </a>\n        </div>\n      </div>\n    </div>\n\n    <!--  -->\n    <div class=\"text-center mt-8 text-sm text-gray-600 dark:text-gray-400\">\n      <p>\n        <a href=\"https://github.com/shishihs/insurance_self_game\" \n           target=\"_blank\" \n           class=\"hover:text-primary transition-colors\">\n          GitHub\n        </a>\n        <span class=\"mx-2\"></span>\n        <a href=\"https://github.com/shishihs/insurance_self_game/issues\" \n           target=\"_blank\" \n           class=\"hover:text-primary transition-colors\">\n          \n        </a>\n      </p>\n    </div>\n  </section>\n</template>\n\n<script setup lang=\"ts\">\n//  - \n</script>\n\n<style scoped>\n/* ===========================================\n   \n   ========================================= */\n\n.info-section {\n  margin-bottom: var(--space-2xl);\n}\n\n.info-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n  gap: var(--space-xl);\n}\n\n/*  */\n.interactive-card {\n  background: rgba(255, 255, 255, 0.03);\n  border: 1px solid rgba(129, 140, 248, 0.15);\n  border-radius: 20px;\n  padding: var(--space-xl);\n  \n  backdrop-filter: blur(20px);\n  box-shadow: \n    0 4px 6px -1px rgba(0, 0, 0, 0.1),\n    0 2px 4px -1px rgba(0, 0, 0, 0.06),\n    inset 0 1px 0 rgba(255, 255, 255, 0.05);\n  \n  transition: all var(--transition-normal);\n  position: relative;\n  overflow: hidden;\n}\n\n.interactive-card::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 200px;\n  background: radial-gradient(ellipse at top, rgba(129, 140, 248, 0.1) 0%, transparent 70%);\n  pointer-events: none;\n}\n\n.interactive-card:hover {\n  border-color: rgba(129, 140, 248, 0.3);\n  transform: translateY(-6px) scale(1.02);\n  box-shadow: \n    0 20px 25px -5px rgba(0, 0, 0, 0.1),\n    0 10px 10px -5px rgba(0, 0, 0, 0.04),\n    0 0 40px rgba(129, 140, 248, 0.2),\n    inset 0 1px 0 rgba(255, 255, 255, 0.1);\n  background: rgba(255, 255, 255, 0.05);\n}\n\n/*  */\n.card-badge {\n  position: absolute;\n  top: var(--space-md);\n  right: var(--space-md);\n  padding: var(--space-xs) var(--space-sm);\n  background: var(--brand-gradient-primary);\n  color: white;\n  font-size: var(--text-xs);\n  font-weight: var(--font-weight-bold);\n  letter-spacing: 0.05em;\n  border-radius: 999px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  z-index: 1;\n}\n\n.badge-secondary {\n  background: var(--brand-gradient-soft);\n}\n\n/*  */\n.card-header {\n  display: flex;\n  align-items: center;\n  gap: var(--space-md);\n  margin-bottom: var(--space-lg);\n  position: relative;\n  z-index: 1;\n}\n\n.card-icon-wrapper {\n  width: 56px;\n  height: 56px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--brand-gradient-primary);\n  border-radius: 16px;\n  box-shadow: \n    0 4px 6px -1px rgba(0, 0, 0, 0.1),\n    0 2px 4px -1px rgba(0, 0, 0, 0.06),\n    inset 0 1px 0 rgba(255, 255, 255, 0.2);\n  position: relative;\n  overflow: hidden;\n}\n\n.card-icon-wrapper::after {\n  content: '';\n  position: absolute;\n  inset: 0;\n  background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.2) 0%, transparent 60%);\n}\n\n.icon-wrapper-secondary {\n  background: var(--brand-gradient-soft);\n}\n\n.card-icon {\n  font-size: 1.75rem;\n  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));\n  position: relative;\n  z-index: 1;\n}\n\n.card-title {\n  font-size: var(--text-2xl);\n  font-weight: var(--font-weight-bold);\n  background: var(--brand-gradient-hero);\n  background-clip: text;\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  margin: 0;\n}\n\n/*  */\n.glow-on-hover {\n  position: relative;\n}\n\n.glow-on-hover::after {\n  content: '';\n  position: absolute;\n  inset: -1px;\n  background: linear-gradient(135deg, var(--primary-400), var(--secondary-400), var(--primary-400));\n  border-radius: inherit;\n  opacity: 0;\n  z-index: -1;\n  transition: opacity var(--transition-normal);\n  filter: blur(15px);\n}\n\n.glow-on-hover:hover::after {\n  opacity: 0.3;\n}\n\n/*  */\n.text-primary {\n  color: rgba(129, 140, 248, 1);\n}\n\n.text-success {\n  color: rgb(34, 197, 94);\n  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));\n}\n\n.text-gray-400 {\n  color: rgb(156, 163, 175);\n}\n\n/*  */\n.interactive-card ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.interactive-card li {\n  transition: transform var(--transition-fast);\n}\n\n.interactive-card li:hover {\n  transform: translateX(4px);\n}\n\n/*  */\n.interactive-card a {\n  position: relative;\n  display: inline-block;\n}\n\n.interactive-card a::after {\n  content: '';\n  position: absolute;\n  width: 100%;\n  height: 2px;\n  bottom: -2px;\n  left: 0;\n  background: var(--brand-gradient-primary);\n  transform: scaleX(0);\n  transform-origin: right;\n  transition: transform var(--transition-normal);\n}\n\n.interactive-card a:hover::after {\n  transform: scaleX(1);\n  transform-origin: left;\n}\n\n/*  */\na {\n  color: rgba(129, 140, 248, 1);\n  text-decoration: none;\n  font-weight: 500;\n  transition: color var(--transition-fast);\n}\n\na:hover {\n  color: rgba(99, 102, 241, 1);\n  text-decoration: underline;\n}\n\n/*  */\n@media (max-width: 1024px) {\n  .info-grid {\n    grid-template-columns: 1fr;\n    max-width: 600px;\n    margin: 0 auto;\n  }\n}\n\n@media (max-width: 640px) {\n  .info-grid {\n    gap: var(--space-lg);\n  }\n  \n  .interactive-card {\n    padding: var(--space-lg);\n  }\n}\n\n@media (max-width: 375px) {\n  .interactive-card {\n    padding: var(--space-md);\n  }\n}\n\n/*  */\n@media (prefers-contrast: high) {\n  .interactive-card {\n    border-color: rgba(129, 140, 248, 0.6);\n    background: rgba(255, 255, 255, 0.1);\n  }\n}\n\n/*  */\n@media (prefers-reduced-motion: reduce) {\n  .interactive-card {\n    transition: none;\n  }\n  \n  .interactive-card:hover {\n    transform: none;\n  }\n}\n\n/*  */\n@media (min-width: 1536px) {\n  .info-grid {\n    grid-template-columns: repeat(2, 1fr);\n    gap: var(--space-2xl);\n  }\n}\n</style>","/**\n * Vue I18n \n * \n */\n\nimport { createI18n } from 'vue-i18n'\nimport type { I18nOptions } from 'vue-i18n'\n\n// \nimport ja from './locales/ja'\nimport en from './locales/en'\nimport zh from './locales/zh'\nimport ko from './locales/ko'\n\n// \nexport const SUPPORTED_LOCALES = ['ja', 'en', 'zh', 'ko'] as const\nexport type SupportedLocale = typeof SUPPORTED_LOCALES[number]\n\n// \nexport const LOCALE_NAMES: Record<SupportedLocale, string> = {\n  ja: '',\n  en: 'English',\n  zh: '',\n  ko: ''\n}\n\n// RTL\nexport const RTL_LOCALES: SupportedLocale[] = []\n\n// \nexport function detectBrowserLocale(): SupportedLocale {\n  const browserLang = navigator.language.split('-')[0] as SupportedLocale\n  return SUPPORTED_LOCALES.includes(browserLang) ? browserLang : 'ja'\n}\n\n// \nexport function getSavedLocale(): SupportedLocale | null {\n  try {\n    const saved = localStorage.getItem('insurance-game-locale') as SupportedLocale\n    return SUPPORTED_LOCALES.includes(saved) ? saved : null\n  } catch {\n    return null\n  }\n}\n\n// \nexport function saveLocale(locale: SupportedLocale): void {\n  try {\n    localStorage.setItem('insurance-game-locale', locale)\n  } catch (error) {\n    console.warn('Failed to save locale to localStorage:', error)\n  }\n}\n\n// \nexport function getInitialLocale(): SupportedLocale {\n  return getSavedLocale() || detectBrowserLocale()\n}\n\n// i18n\nconst i18nOptions: I18nOptions = {\n  legacy: false, // Composition API mode\n  locale: getInitialLocale(),\n  fallbackLocale: 'ja',\n  messages: {\n    ja,\n    en,\n    zh,\n    ko\n  },\n  // \n  numberFormats: {\n    ja: {\n      currency: {\n        style: 'currency',\n        currency: 'JPY',\n        currencyDisplay: 'symbol'\n      },\n      decimal: {\n        style: 'decimal',\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 2\n      }\n    },\n    en: {\n      currency: {\n        style: 'currency',\n        currency: 'USD',\n        currencyDisplay: 'symbol'\n      },\n      decimal: {\n        style: 'decimal',\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 2\n      }\n    },\n    zh: {\n      currency: {\n        style: 'currency',\n        currency: 'CNY',\n        currencyDisplay: 'symbol'\n      },\n      decimal: {\n        style: 'decimal',\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 2\n      }\n    },\n    ko: {\n      currency: {\n        style: 'currency',\n        currency: 'KRW',\n        currencyDisplay: 'symbol'\n      },\n      decimal: {\n        style: 'decimal',\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 0\n      }\n    }\n  },\n  // \n  datetimeFormats: {\n    ja: {\n      short: {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric'\n      },\n      long: {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        weekday: 'long'\n      }\n    },\n    en: {\n      short: {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric'\n      },\n      long: {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        weekday: 'long'\n      }\n    },\n    zh: {\n      short: {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric'\n      },\n      long: {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        weekday: 'long'\n      }\n    },\n    ko: {\n      short: {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric'\n      },\n      long: {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        weekday: 'long'\n      }\n    }\n  }\n}\n\n// i18n\nexport const i18n = createI18n(i18nOptions)\n\n// \nexport function setLocale(locale: SupportedLocale): void {\n  if (!SUPPORTED_LOCALES.includes(locale)) {\n    console.warn(`Unsupported locale: ${locale}`)\n    return\n  }\n  \n  i18n.global.locale.value = locale\n  saveLocale(locale)\n  \n  // HTML lang\n  document.documentElement.lang = locale\n  \n  // RTL\n  document.documentElement.dir = RTL_LOCALES.includes(locale) ? 'rtl' : 'ltr'\n}\n\n// \nexport function getCurrentLocale(): SupportedLocale {\n  return i18n.global.locale.value as SupportedLocale\n}\n\n// \nexport type MessageSchema = typeof ja\n\nexport default i18n","/**\n * \n * \n */\n\nexport default {\n  // UI\n  ui: {\n    // \n    navigation: {\n      home: '',\n      back: '',\n      game: '',\n      tutorial: '',\n      statistics: '',\n      settings: '',\n      accessibility: '',\n      feedback: ''\n    },\n\n    // \n    buttons: {\n      start: '',\n      startGame: '',\n      startTutorial: '',\n      close: '',\n      cancel: '',\n      ok: 'OK',\n      yes: '',\n      no: '',\n      continue: '',\n      skip: '',\n      next: '',\n      previous: '',\n      finish: '',\n      reset: '',\n      save: '',\n      load: ''\n    },\n\n    // \n    common: {\n      loading: '...',\n      error: '',\n      success: '',\n      warning: '',\n      info: '',\n      confirm: '',\n      welcome: '',\n      congratulations: '',\n      gameOver: '',\n      newGame: '',\n      retry: ''\n    }\n  },\n\n  // \n  game: {\n    // \n    title: '',\n    subtitle: '',\n    description: '',\n\n    // \n    stages: {\n      youth: '',\n      adult: '',\n      middleAge: '',\n      elderly: ''\n    },\n\n    // \n    elements: {\n      vitality: '',\n      turn: '',\n      phase: '',\n      stage: '',\n      round: '',\n      score: '',\n      level: ''\n    },\n\n    // \n    cards: {\n      riskCard: '',\n      insuranceCard: '',\n      eventCard: '',\n      actionCard: '',\n      powerCard: ''\n    },\n\n    // \n    actions: {\n      draw: '',\n      play: '',\n      discard: '',\n      buyInsurance: '',\n      cancelInsurance: '',\n      takeRisk: '',\n      avoidRisk: ''\n    },\n\n    // \n    insurance: {\n      types: {\n        life: '',\n        health: '',\n        auto: '',\n        home: '',\n        travel: '',\n        income: '',\n        disability: '',\n        longTermCare: ''\n      },\n\n      terms: {\n        premium: '',\n        coverage: '',\n        deductible: '',\n        beneficiary: '',\n        policy: '',\n        claim: '',\n        renewal: '',\n        cancellation: ''\n      }\n    },\n\n    // \n    risks: {\n      categories: {\n        health: '',\n        financial: '',\n        accident: '',\n        natural: '',\n        career: '',\n        family: ''\n      },\n\n      levels: {\n        low: '',\n        medium: '',\n        high: '',\n        extreme: ''\n      }\n    }\n  },\n\n  // \n  tutorial: {\n    title: '',\n    welcome: '',\n    steps: {\n      introduction: {\n        title: '',\n        content: ''\n      },\n      basicRules: {\n        title: '',\n        content: ''\n      },\n      cardTypes: {\n        title: '',\n        content: ''\n      },\n      insuranceSystem: {\n        title: '',\n        content: ''\n      },\n      strategy: {\n        title: '',\n        content: ''\n      }\n    }\n  },\n\n  // \n  statistics: {\n    title: '',\n    sections: {\n      overview: '',\n      performance: '',\n      trends: '',\n      detailed: ''\n    },\n\n    metrics: {\n      gamesPlayed: '',\n      winRate: '',\n      averageScore: '',\n      bestScore: '',\n      totalPlayTime: '',\n      averageGameTime: '',\n      survivalRate: '',\n      insuranceEfficiency: ''\n    },\n\n    charts: {\n      vitalityTrend: '',\n      stageAnalysis: '',\n      cardUsage: '',\n      decisionAnalysis: '',\n      riskManagement: '',\n      insuranceCoverage: ''\n    }\n  },\n\n  // \n  accessibility: {\n    title: '',\n    sections: {\n      visual: '',\n      audio: '',\n      interaction: '',\n      display: ''\n    },\n\n    options: {\n      highContrast: '',\n      largeText: '',\n      reduceMotion: '',\n      screenReader: '',\n      keyboardNavigation: '',\n      audioCues: '',\n      subtitles: '',\n      slowAnimations: '',\n      changeLanguage: ''\n    },\n\n    keyboardShortcuts: {\n      title: '',\n      homeScreen: ' (Alt+H)',\n      startGame: ' (Alt+G)',\n      startTutorial: ' (Alt+T)',\n      openStatistics: ' (Alt+S)',\n      openAccessibility: ' (Alt+A)',\n      help: ' (F1)'\n    }\n  },\n\n  // \n  feedback: {\n    title: '',\n    types: {\n      bug: '',\n      suggestion: '',\n      general: '',\n      rating: ''\n    },\n\n    form: {\n      subject: '',\n      message: '',\n      email: '',\n      category: '',\n      priority: '',\n      submit: '',\n      thankYou: ''\n    }\n  },\n\n  // \n  errors: {\n    general: '',\n    network: '',\n    gameState: '',\n    save: '',\n    load: '',\n    invalidAction: '',\n    cardNotFound: '',\n    insufficientFunds: '',\n    insuranceNotActive: ''\n  },\n\n  // \n  success: {\n    gameSaved: '',\n    gameLoaded: '',\n    insurancePurchased: '',\n    riskAvoided: '',\n    levelCompleted: '',\n    achievementUnlocked: ''\n  },\n\n  // \n  region: {\n    currency: '',\n    currencySymbol: '',\n    dateFormat: 'YYYYMMDD',\n    numberFormat: '1,234',\n\n    // \n    insuranceSystem: {\n      nationalHealth: '',\n      employeeHealth: '',\n      nationalPension: '',\n      employeePension: '',\n      longTermCare: '',\n      workersComp: '',\n      unemployment: ''\n    },\n\n    // \n    risks: {\n      earthquake: '',\n      typhoon: '',\n      flood: '',\n      aging: '',\n      recession: '',\n      deflation: ''\n    }\n  },\n\n  // \n  ageGroups: {\n    young: {\n      title: '',\n      message: ''\n    },\n    middle: {\n      title: '',\n      message: ''\n    },\n    senior: {\n      title: '',\n      message: ''\n    }\n  }\n} as const","/**\n * English Translation File\n * English messages and settings for the insurance game\n */\n\nexport default {\n  // Basic UI elements\n  ui: {\n    // Navigation\n    navigation: {\n      home: 'Home',\n      back: 'Home',\n      game: 'Game',\n      tutorial: 'Tutorial',\n      statistics: 'Statistics',\n      settings: 'Settings',\n      accessibility: 'Accessibility Settings',\n      feedback: 'Feedback'\n    },\n    \n    // Buttons\n    buttons: {\n      start: 'Start',\n      startGame: 'Start Game',\n      startTutorial: 'Start Tutorial',\n      close: 'Close',\n      cancel: 'Cancel',\n      ok: 'OK',\n      yes: 'Yes',\n      no: 'No',\n      continue: 'Continue',\n      skip: 'Skip',\n      next: 'Next',\n      previous: 'Previous',\n      finish: 'Finish',\n      reset: 'Reset',\n      save: 'Save',\n      load: 'Load'\n    },\n    \n    // Common messages\n    common: {\n      loading: 'Loading...',\n      error: 'An error occurred',\n      success: 'Success',\n      warning: 'Warning',\n      info: 'Information',\n      confirm: 'Confirm',\n      welcome: 'Welcome',\n      congratulations: 'Congratulations!',\n      gameOver: 'Game Over',\n      newGame: 'New Game',\n      retry: 'Try Again'\n    }\n  },\n  \n  // Game related\n  game: {\n    // Game state\n    title: 'Life Enrichment Game',\n    subtitle: 'Strategic Life Simulation',\n    description: 'A game where you navigate through different life stages, balancing risks and insurance to achieve a fulfilling life.',\n    \n    // Life stages\n    stages: {\n      youth: 'Youth',\n      adult: 'Adulthood',\n      middleAge: 'Middle Age',\n      elderly: 'Elderly'\n    },\n    \n    // Game elements\n    elements: {\n      vitality: 'Vitality',\n      turn: 'Turn',\n      phase: 'Phase',\n      stage: 'Stage',\n      round: 'Round',\n      score: 'Score',\n      level: 'Level'\n    },\n    \n    // Cards\n    cards: {\n      riskCard: 'Risk Card',\n      insuranceCard: 'Insurance Card',\n      eventCard: 'Event Card',\n      actionCard: 'Action Card',\n      powerCard: 'Power Card'\n    },\n    \n    // Actions\n    actions: {\n      draw: 'Draw Card',\n      play: 'Play Card',\n      discard: 'Discard Card',\n      buyInsurance: 'Buy Insurance',\n      cancelInsurance: 'Cancel Insurance',\n      takeRisk: 'Take Risk',\n      avoidRisk: 'Avoid Risk'\n    },\n    \n    // Insurance types\n    insurance: {\n      types: {\n        life: 'Life Insurance',\n        health: 'Health Insurance',\n        auto: 'Auto Insurance',\n        home: 'Home Insurance',\n        travel: 'Travel Insurance',\n        income: 'Income Protection',\n        disability: 'Disability Insurance',\n        longTermCare: 'Long-term Care Insurance'\n      },\n      \n      terms: {\n        premium: 'Premium',\n        coverage: 'Coverage',\n        deductible: 'Deductible',\n        beneficiary: 'Beneficiary',\n        policy: 'Policy',\n        claim: 'Claim',\n        renewal: 'Renewal',\n        cancellation: 'Cancellation'\n      }\n    },\n    \n    // Risks\n    risks: {\n      categories: {\n        health: 'Health Risk',\n        financial: 'Financial Risk',\n        accident: 'Accident Risk',\n        natural: 'Natural Disaster Risk',\n        career: 'Career Risk',\n        family: 'Family Risk'\n      },\n      \n      levels: {\n        low: 'Low Risk',\n        medium: 'Medium Risk',\n        high: 'High Risk',\n        extreme: 'Extreme Risk'\n      }\n    }\n  },\n  \n  // Tutorial\n  tutorial: {\n    title: 'Game Tutorial',\n    welcome: 'Welcome to the Life Enrichment Game!',\n    steps: {\n      introduction: {\n        title: 'Introduction',\n        content: 'In this game, you\\'ll navigate through different life stages while balancing risks and insurance.'\n      },\n      basicRules: {\n        title: 'Basic Rules',\n        content: 'Each turn, draw cards and decide whether to face risks or protect yourself with insurance.'\n      },\n      cardTypes: {\n        title: 'Card Types',\n        content: 'There are risk cards, insurance cards, and event cards. Learn their characteristics.'\n      },\n      insuranceSystem: {\n        title: 'Insurance System',\n        content: 'Purchase insurance in advance to prepare for risks. Consider premiums and coverage amounts.'\n      },\n      strategy: {\n        title: 'Strategy Tips',\n        content: 'Maintain your vitality while developing an effective insurance strategy for success.'\n      }\n    }\n  },\n  \n  // Statistics & Analytics\n  statistics: {\n    title: 'Statistics Dashboard',\n    sections: {\n      overview: 'Overview',\n      performance: 'Performance',\n      trends: 'Trends',\n      detailed: 'Detailed Analysis'\n    },\n    \n    metrics: {\n      gamesPlayed: 'Games Played',\n      winRate: 'Win Rate',\n      averageScore: 'Average Score',\n      bestScore: 'Best Score',\n      totalPlayTime: 'Total Play Time',\n      averageGameTime: 'Average Game Time',\n      survivalRate: 'Survival Rate',\n      insuranceEfficiency: 'Insurance Efficiency'\n    },\n    \n    charts: {\n      vitalityTrend: 'Vitality Trend',\n      stageAnalysis: 'Stage Analysis',\n      cardUsage: 'Card Usage',\n      decisionAnalysis: 'Decision Analysis',\n      riskManagement: 'Risk Management',\n      insuranceCoverage: 'Insurance Coverage'\n    }\n  },\n  \n  // Accessibility\n  accessibility: {\n    title: 'Accessibility Settings',\n    sections: {\n      visual: 'Visual Settings',\n      audio: 'Audio Settings',\n      interaction: 'Interaction Settings',\n      display: 'Display Settings'\n    },\n    \n    options: {\n      highContrast: 'High Contrast',\n      largeText: 'Large Text',\n      reduceMotion: 'Reduce Motion',\n      screenReader: 'Screen Reader Support',\n      keyboardNavigation: 'Keyboard Navigation',\n      audioCues: 'Audio Cues',\n      subtitles: 'Subtitles',\n      slowAnimations: 'Slow Animations'\n    },\n    \n    keyboardShortcuts: {\n      title: 'Keyboard Shortcuts',\n      homeScreen: 'Return to Home Screen (Alt+H)',\n      startGame: 'Start Game (Alt+G)',\n      startTutorial: 'Start Tutorial (Alt+T)',\n      openStatistics: 'Open Statistics (Alt+S)',\n      openAccessibility: 'Accessibility Settings (Alt+A)',\n      help: 'Show Help (F1)'\n    }\n  },\n  \n  // Feedback\n  feedback: {\n    title: 'Feedback',\n    types: {\n      bug: 'Bug Report',\n      suggestion: 'Suggestion',\n      general: 'General Opinion',\n      rating: 'Rating'\n    },\n    \n    form: {\n      subject: 'Subject',\n      message: 'Message',\n      email: 'Email (Optional)',\n      category: 'Category',\n      priority: 'Priority',\n      submit: 'Submit',\n      thankYou: 'Thank you for your feedback!'\n    }\n  },\n  \n  // Error messages\n  errors: {\n    general: 'An error occurred.',\n    network: 'A network error occurred.',\n    gameState: 'Failed to load game state.',\n    save: 'Failed to save game.',\n    load: 'Failed to load game.',\n    invalidAction: 'Invalid action.',\n    cardNotFound: 'Card not found.',\n    insufficientFunds: 'Insufficient funds.',\n    insuranceNotActive: 'Insurance is not active.'\n  },\n  \n  // Success messages\n  success: {\n    gameSaved: 'Game saved.',\n    gameLoaded: 'Game loaded.',\n    insurancePurchased: 'Insurance purchased.',\n    riskAvoided: 'Risk avoided.',\n    levelCompleted: 'Level completed!',\n    achievementUnlocked: 'Achievement unlocked!'\n  },\n  \n  // Region-specific settings (US/International)\n  region: {\n    currency: 'USD',\n    currencySymbol: '$',\n    dateFormat: 'MM/DD/YYYY',\n    numberFormat: '1,234',\n    \n    // US insurance system related terms\n    insuranceSystem: {\n      nationalHealth: 'Medicare',\n      employeeHealth: 'Employer Health Insurance',\n      nationalPension: 'Social Security',\n      employeePension: '401(k)',\n      longTermCare: 'Long-term Care Insurance',\n      workersComp: 'Workers\\' Compensation',\n      unemployment: 'Unemployment Insurance'\n    },\n    \n    // US-specific risks\n    risks: {\n      earthquake: 'Earthquake',\n      hurricane: 'Hurricane',\n      flood: 'Flood',\n      recession: 'Recession',\n      inflation: 'Inflation',\n      jobLoss: 'Job Loss'\n    }\n  },\n  \n  // Age group specific messages\n  ageGroups: {\n    young: {\n      title: 'Insurance Advice for Young Adults',\n      message: 'Building a foundation for your future is important.'\n    },\n    middle: {\n      title: 'Insurance Advice for Working Adults',\n      message: 'Consider protection for your family.'\n    },\n    senior: {\n      title: 'Insurance Advice for Seniors',\n      message: 'Healthcare and long-term care preparation is essential.'\n    }\n  }\n} as const","/**\n * \n * \n */\n\nexport default {\n  // UI\n  ui: {\n    // \n    navigation: {\n      home: '',\n      back: '',\n      game: '',\n      tutorial: '',\n      statistics: '',\n      settings: '',\n      accessibility: '',\n      feedback: ''\n    },\n    \n    // \n    buttons: {\n      start: '',\n      startGame: '',\n      startTutorial: '',\n      close: '',\n      cancel: '',\n      ok: '',\n      yes: '',\n      no: '',\n      continue: '',\n      skip: '',\n      next: '',\n      previous: '',\n      finish: '',\n      reset: '',\n      save: '',\n      load: ''\n    },\n    \n    // \n    common: {\n      loading: '...',\n      error: '',\n      success: '',\n      warning: '',\n      info: '',\n      confirm: '',\n      welcome: '',\n      congratulations: '',\n      gameOver: '',\n      newGame: '',\n      retry: ''\n    }\n  },\n  \n  // \n  game: {\n    // \n    title: '',\n    subtitle: '',\n    description: '',\n    \n    // \n    stages: {\n      youth: '',\n      adult: '',\n      middleAge: '',\n      elderly: ''\n    },\n    \n    // \n    elements: {\n      vitality: '',\n      turn: '',\n      phase: '',\n      stage: '',\n      round: '',\n      score: '',\n      level: ''\n    },\n    \n    // \n    cards: {\n      riskCard: '',\n      insuranceCard: '',\n      eventCard: '',\n      actionCard: '',\n      powerCard: ''\n    },\n    \n    // \n    actions: {\n      draw: '',\n      play: '',\n      discard: '',\n      buyInsurance: '',\n      cancelInsurance: '',\n      takeRisk: '',\n      avoidRisk: ''\n    },\n    \n    // \n    insurance: {\n      types: {\n        life: '',\n        health: '',\n        auto: '',\n        home: '',\n        travel: '',\n        income: '',\n        disability: '',\n        longTermCare: ''\n      },\n      \n      terms: {\n        premium: '',\n        coverage: '',\n        deductible: '',\n        beneficiary: '',\n        policy: '',\n        claim: '',\n        renewal: '',\n        cancellation: ''\n      }\n    },\n    \n    // \n    risks: {\n      categories: {\n        health: '',\n        financial: '',\n        accident: '',\n        natural: '',\n        career: '',\n        family: ''\n      },\n      \n      levels: {\n        low: '',\n        medium: '',\n        high: '',\n        extreme: ''\n      }\n    }\n  },\n  \n  // \n  tutorial: {\n    title: '',\n    welcome: '',\n    steps: {\n      introduction: {\n        title: '',\n        content: ''\n      },\n      basicRules: {\n        title: '',\n        content: ''\n      },\n      cardTypes: {\n        title: '',\n        content: ''\n      },\n      insuranceSystem: {\n        title: '',\n        content: ''\n      },\n      strategy: {\n        title: '',\n        content: ''\n      }\n    }\n  },\n  \n  // \n  statistics: {\n    title: '',\n    sections: {\n      overview: '',\n      performance: '',\n      trends: '',\n      detailed: ''\n    },\n    \n    metrics: {\n      gamesPlayed: '',\n      winRate: '',\n      averageScore: '',\n      bestScore: '',\n      totalPlayTime: '',\n      averageGameTime: '',\n      survivalRate: '',\n      insuranceEfficiency: ''\n    },\n    \n    charts: {\n      vitalityTrend: '',\n      stageAnalysis: '',\n      cardUsage: '',\n      decisionAnalysis: '',\n      riskManagement: '',\n      insuranceCoverage: ''\n    }\n  },\n  \n  // \n  accessibility: {\n    title: '',\n    sections: {\n      visual: '',\n      audio: '',\n      interaction: '',\n      display: ''\n    },\n    \n    options: {\n      highContrast: '',\n      largeText: '',\n      reduceMotion: '',\n      screenReader: '',\n      keyboardNavigation: '',\n      audioCues: '',\n      subtitles: '',\n      slowAnimations: ''\n    },\n    \n    keyboardShortcuts: {\n      title: '',\n      homeScreen: ' (Alt+H)',\n      startGame: ' (Alt+G)',\n      startTutorial: ' (Alt+T)',\n      openStatistics: ' (Alt+S)',\n      openAccessibility: ' (Alt+A)',\n      help: ' (F1)'\n    }\n  },\n  \n  // \n  feedback: {\n    title: '',\n    types: {\n      bug: '',\n      suggestion: '',\n      general: '',\n      rating: ''\n    },\n    \n    form: {\n      subject: '',\n      message: '',\n      email: '',\n      category: '',\n      priority: '',\n      submit: '',\n      thankYou: ''\n    }\n  },\n  \n  // \n  errors: {\n    general: '',\n    network: '',\n    gameState: '',\n    save: '',\n    load: '',\n    invalidAction: '',\n    cardNotFound: '',\n    insufficientFunds: '',\n    insuranceNotActive: ''\n  },\n  \n  // \n  success: {\n    gameSaved: '',\n    gameLoaded: '',\n    insurancePurchased: '',\n    riskAvoided: '',\n    levelCompleted: '',\n    achievementUnlocked: ''\n  },\n  \n  // \n  region: {\n    currency: '',\n    currencySymbol: '',\n    dateFormat: 'YYYYMMDD',\n    numberFormat: '1,234',\n    \n    // \n    insuranceSystem: {\n      nationalHealth: '',\n      employeeHealth: '',\n      nationalPension: '',\n      employeePension: '',\n      longTermCare: '',\n      workersComp: '',\n      unemployment: ''\n    },\n    \n    // \n    risks: {\n      earthquake: '',\n      flood: '',\n      typhoon: '',\n      smog: '',\n      economicSlowdown: '',\n      agingPopulation: ''\n    }\n  },\n  \n  // \n  ageGroups: {\n    young: {\n      title: '',\n      message: ''\n    },\n    middle: {\n      title: '',\n      message: ''\n    },\n    senior: {\n      title: '',\n      message: ''\n    }\n  }\n} as const","/**\n *   \n *     \n */\n\nexport default {\n  //  UI \n  ui: {\n    // \n    navigation: {\n      home: '',\n      back: '',\n      game: '',\n      tutorial: '',\n      statistics: '',\n      settings: '',\n      accessibility: ' ',\n      feedback: ''\n    },\n    \n    // \n    buttons: {\n      start: '',\n      startGame: ' ',\n      startTutorial: ' ',\n      close: '',\n      cancel: '',\n      ok: '',\n      yes: '',\n      no: '',\n      continue: '',\n      skip: '',\n      next: '',\n      previous: '',\n      finish: '',\n      reset: '',\n      save: '',\n      load: ''\n    },\n    \n    //  \n    common: {\n      loading: ' ...',\n      error: ' ',\n      success: '',\n      warning: '',\n      info: '',\n      confirm: '',\n      welcome: '',\n      congratulations: '!',\n      gameOver: ' ',\n      newGame: ' ',\n      retry: ' '\n    }\n  },\n  \n  //  \n  game: {\n    //  \n    title: '  ',\n    subtitle: '  ',\n    description: '           .',\n    \n    //  \n    stages: {\n      youth: '',\n      adult: '',\n      middleAge: '',\n      elderly: ''\n    },\n    \n    //  \n    elements: {\n      vitality: '',\n      turn: '',\n      phase: '',\n      stage: '',\n      round: '',\n      score: '',\n      level: ''\n    },\n    \n    // \n    cards: {\n      riskCard: ' ',\n      insuranceCard: ' ',\n      eventCard: ' ',\n      actionCard: ' ',\n      powerCard: ' '\n    },\n    \n    // \n    actions: {\n      draw: ' ',\n      play: ' ',\n      discard: ' ',\n      buyInsurance: ' ',\n      cancelInsurance: ' ',\n      takeRisk: ' ',\n      avoidRisk: ' '\n    },\n    \n    //  \n    insurance: {\n      types: {\n        life: '',\n        health: '',\n        auto: '',\n        home: '',\n        travel: '',\n        income: '',\n        disability: '',\n        longTermCare: ''\n      },\n      \n      terms: {\n        premium: '',\n        coverage: '',\n        deductible: '',\n        beneficiary: '',\n        policy: '',\n        claim: ' ',\n        renewal: '',\n        cancellation: ''\n      }\n    },\n    \n    // \n    risks: {\n      categories: {\n        health: ' ',\n        financial: ' ',\n        accident: ' ',\n        natural: ' ',\n        career: ' ',\n        family: ' '\n      },\n      \n      levels: {\n        low: ' ',\n        medium: ' ',\n        high: ' ',\n        extreme: '  '\n      }\n    }\n  },\n  \n  // \n  tutorial: {\n    title: ' ',\n    welcome: '      !',\n    steps: {\n      introduction: {\n        title: '',\n        content: '         .'\n      },\n      basicRules: {\n        title: ' ',\n        content: '   ,     .'\n      },\n      cardTypes: {\n        title: ' ',\n        content: ' ,  ,   .   .'\n      },\n      insuranceSystem: {\n        title: ' ',\n        content: '      .    .'\n      },\n      strategy: {\n        title: ' ',\n        content: '        .'\n      }\n    }\n  },\n  \n  //  \n  statistics: {\n    title: ' ',\n    sections: {\n      overview: '',\n      performance: '',\n      trends: '',\n      detailed: ' '\n    },\n    \n    metrics: {\n      gamesPlayed: ' ',\n      winRate: '',\n      averageScore: ' ',\n      bestScore: ' ',\n      totalPlayTime: '  ',\n      averageGameTime: '  ',\n      survivalRate: '',\n      insuranceEfficiency: ' '\n    },\n    \n    charts: {\n      vitalityTrend: ' ',\n      stageAnalysis: ' ',\n      cardUsage: '  ',\n      decisionAnalysis: ' ',\n      riskManagement: ' ',\n      insuranceCoverage: ' '\n    }\n  },\n  \n  // \n  accessibility: {\n    title: ' ',\n    sections: {\n      visual: ' ',\n      audio: ' ',\n      interaction: ' ',\n      display: ' '\n    },\n    \n    options: {\n      highContrast: '',\n      largeText: ' ',\n      reduceMotion: ' ',\n      screenReader: '  ',\n      keyboardNavigation: ' ',\n      audioCues: ' ',\n      subtitles: '',\n      slowAnimations: ' '\n    },\n    \n    keyboardShortcuts: {\n      title: ' ',\n      homeScreen: '   (Alt+H)',\n      startGame: '  (Alt+G)',\n      startTutorial: '  (Alt+T)',\n      openStatistics: '  (Alt+S)',\n      openAccessibility: '  (Alt+A)',\n      help: '  (F1)'\n    }\n  },\n  \n  // \n  feedback: {\n    title: '',\n    types: {\n      bug: ' ',\n      suggestion: ' ',\n      general: ' ',\n      rating: ''\n    },\n    \n    form: {\n      subject: '',\n      message: '',\n      email: ' ()',\n      category: '',\n      priority: '',\n      submit: '',\n      thankYou: '  !'\n    }\n  },\n  \n  //  \n  errors: {\n    general: ' .',\n    network: '  .',\n    gameState: '   .',\n    save: '  .',\n    load: '  .',\n    invalidAction: '  .',\n    cardNotFound: '   .',\n    insufficientFunds: ' .',\n    insuranceNotActive: '  .'\n  },\n  \n  //  \n  success: {\n    gameSaved: ' .',\n    gameLoaded: ' .',\n    insurancePurchased: ' .',\n    riskAvoided: ' .',\n    levelCompleted: ' !',\n    achievementUnlocked: ' !'\n  },\n  \n  //   ()\n  region: {\n    currency: '',\n    currencySymbol: '',\n    dateFormat: 'YYYY MM DD',\n    numberFormat: '1,234',\n    \n    //    \n    insuranceSystem: {\n      nationalHealth: '',\n      employeeHealth: '',\n      nationalPension: '',\n      employeePension: '',\n      longTermCare: '',\n      workersComp: '',\n      unemployment: ''\n    },\n    \n    //   \n    risks: {\n      earthquake: '',\n      typhoon: '',\n      flood: '',\n      fineDust: '',\n      economicRecession: '',\n      agingSociety: ' '\n    }\n  },\n  \n  //  \n  ageGroups: {\n    young: {\n      title: '    ',\n      message: '    .'\n    },\n    middle: {\n      title: '    ',\n      message: '    .'\n    },\n    senior: {\n      title: '    ',\n      message: '      .'\n    }\n  }\n} as const","<!--\n  \n  \n-->\n\n<script setup lang=\"ts\">\nimport { computed, ref } from 'vue'\nimport { useI18n } from 'vue-i18n'\nimport { \n  getCurrentLocale,\n  LOCALE_NAMES,\n  setLocale,\n  SUPPORTED_LOCALES,\n  type SupportedLocale\n} from '@/i18n'\n\nconst { t } = useI18n()\n\n// \ninterface Props {\n  // \n  mode?: 'dropdown' | 'buttons' | 'flags'\n  // \n  compact?: boolean\n  // \n  ariaLabel?: string\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  mode: 'dropdown',\n  compact: false,\n  ariaLabel: ''\n})\n\n// \nconst isOpen = ref(false)\nconst currentLocale = ref<SupportedLocale>(getCurrentLocale())\n\n// \nconst currentLocaleName = computed(() => LOCALE_NAMES[currentLocale.value])\n\nconst localeOptions = computed(() => \n  SUPPORTED_LOCALES.map(locale => ({\n    value: locale,\n    label: LOCALE_NAMES[locale],\n    flag: getFlagEmoji(locale),\n    isActive: locale === currentLocale.value\n  }))\n)\n\n// \nfunction getFlagEmoji(locale: SupportedLocale): string {\n  const flags: Record<SupportedLocale, string> = {\n    ja: '',\n    en: '', \n    zh: '',\n    ko: ''\n  }\n  return flags[locale]\n}\n\n// \nfunction changeLanguage(locale: SupportedLocale) {\n  currentLocale.value = locale\n  setLocale(locale)\n  isOpen.value = false\n  \n  // : \n  const message = `Language changed to ${LOCALE_NAMES[locale]}`\n  announceToScreenReader(message)\n}\n\n// \nfunction announceToScreenReader(message: string) {\n  const announcement = document.createElement('div')\n  announcement.setAttribute('aria-live', 'polite')\n  announcement.setAttribute('aria-atomic', 'true')\n  announcement.className = 'sr-only'\n  announcement.textContent = message\n  \n  document.body.appendChild(announcement)\n  setTimeout(() => document.body.removeChild(announcement), 1000)\n}\n\n// \nfunction toggleDropdown() {\n  isOpen.value = !isOpen.value\n}\n\n// \nfunction handleClickOutside(event: Event) {\n  const target = event.target as HTMLElement\n  if (!target.closest('.language-switcher')) {\n    isOpen.value = false\n  }\n}\n\n// \nfunction handleKeydown(event: KeyboardEvent, locale?: SupportedLocale) {\n  switch (event.key) {\n    case 'Enter':\n    case ' ':\n      event.preventDefault()\n      if (locale) {\n        changeLanguage(locale)\n      } else {\n        toggleDropdown()\n      }\n      break\n    case 'Escape':\n      if (isOpen.value) {\n        isOpen.value = false\n        // \n        const trigger = document.querySelector('.language-trigger') as HTMLElement\n        trigger?.focus()\n      }\n      break\n    case 'ArrowDown':\n      if (props.mode === 'dropdown' && isOpen.value) {\n        event.preventDefault()\n        const nextOption = document.querySelector('.language-option:not([aria-selected=\"true\"]) + .language-option') as HTMLElement\n        nextOption?.focus()\n      }\n      break\n    case 'ArrowUp':\n      if (props.mode === 'dropdown' && isOpen.value) {\n        event.preventDefault()\n        const prevOption = document.querySelector('.language-option[aria-selected=\"true\"]')?.previousElementSibling as HTMLElement\n        prevOption?.focus()\n      }\n      break\n  }\n}\n\n// \nimport { onMounted, onUnmounted } from 'vue'\n\nonMounted(() => {\n  document.addEventListener('click', handleClickOutside)\n})\n\nonUnmounted(() => {\n  document.removeEventListener('click', handleClickOutside)\n})\n</script>\n\n<template>\n  <div \n    class=\"language-switcher\"\n    :class=\"[`language-switcher--${mode}`, { 'language-switcher--compact': compact }]\"\n  >\n    <!--  -->\n    <div v-if=\"mode === 'dropdown'\" class=\"language-dropdown\">\n      <button\n        class=\"language-trigger\"\n        :aria-label=\"ariaLabel || t('accessibility.options.changeLanguage', 'Change Language')\"\n        :aria-expanded=\"isOpen\"\n        aria-haspopup=\"listbox\"\n        @click=\"toggleDropdown\"\n        @keydown=\"handleKeydown\"\n      >\n        <span class=\"current-flag\" aria-hidden=\"true\">{{ getFlagEmoji(currentLocale) }}</span>\n        <span v-if=\"!compact\" class=\"current-label\">{{ currentLocaleName }}</span>\n        <span class=\"dropdown-icon\" aria-hidden=\"true\" :class=\"{ 'dropdown-icon--open': isOpen }\">\n          \n        </span>\n      </button>\n      \n      <Transition name=\"dropdown\">\n        <ul\n          v-if=\"isOpen\"\n          class=\"language-options\"\n          role=\"listbox\"\n          :aria-label=\"t('ui.navigation.selectLanguage', 'Select Language')\"\n        >\n          <li\n            v-for=\"option in localeOptions\"\n            :key=\"option.value\"\n            class=\"language-option\"\n            role=\"option\" \n            :aria-selected=\"option.isActive\"\n            :tabindex=\"option.isActive ? 0 : -1\"\n            @click=\"changeLanguage(option.value)\"\n            @keydown=\"handleKeydown($event, option.value)\"\n          >\n            <span class=\"option-flag\" aria-hidden=\"true\">{{ option.flag }}</span>\n            <span class=\"option-label\">{{ option.label }}</span>\n            <span v-if=\"option.isActive\" class=\"option-check\" aria-hidden=\"true\"></span>\n          </li>\n        </ul>\n      </Transition>\n    </div>\n    \n    <!--  -->\n    <div v-else-if=\"mode === 'buttons'\" class=\"language-buttons\">\n      <button\n        v-for=\"option in localeOptions\"\n        :key=\"option.value\"\n        class=\"language-button\"\n        :class=\"{ 'language-button--active': option.isActive }\"\n        :aria-label=\"`${t('ui.navigation.switchTo', 'Switch to')} ${option.label}`\"\n        :aria-pressed=\"option.isActive\"\n        @click=\"changeLanguage(option.value)\"\n      >\n        <span class=\"button-flag\" aria-hidden=\"true\">{{ option.flag }}</span>\n        <span v-if=\"!compact\" class=\"button-label\">{{ option.label }}</span>\n      </button>\n    </div>\n    \n    <!--  -->\n    <div v-else-if=\"mode === 'flags'\" class=\"language-flags\">\n      <button\n        v-for=\"option in localeOptions\"\n        :key=\"option.value\"\n        class=\"language-flag\"\n        :class=\"{ 'language-flag--active': option.isActive }\"\n        :aria-label=\"`${t('ui.navigation.switchTo', 'Switch to')} ${option.label}`\"\n        :title=\"option.label\"\n        @click=\"changeLanguage(option.value)\"\n      >\n        {{ option.flag }}\n      </button>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n/* =================================\n   \n   ================================= */\n\n.language-switcher {\n  position: relative;\n  font-family: Inter, system-ui, sans-serif;\n}\n\n/* =================================\n   \n   ================================= */\n\n.language-dropdown {\n  position: relative;\n}\n\n.language-trigger {\n  display: flex;\n  align-items: center;\n  gap: var(--space-xs);\n  \n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 8px;\n  padding: var(--space-sm) var(--space-md);\n  \n  color: rgba(255, 255, 255, 0.9);\n  font-size: var(--text-sm);\n  font-weight: 500;\n  \n  cursor: pointer;\n  transition: all var(--transition-fast);\n  \n  min-width: 120px;\n  justify-content: space-between;\n}\n\n.language-trigger:hover {\n  background: rgba(255, 255, 255, 0.15);\n  border-color: rgba(255, 255, 255, 0.3);\n}\n\n.language-trigger:focus {\n  outline: 2px solid var(--primary-light);\n  outline-offset: 2px;\n}\n\n.current-flag {\n  font-size: 1.2em;\n}\n\n.current-label {\n  flex: 1;\n  text-align: left;\n}\n\n.dropdown-icon {\n  font-size: 0.8em;\n  transition: transform var(--transition-fast);\n}\n\n.dropdown-icon--open {\n  transform: rotate(180deg);\n}\n\n.language-options {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  z-index: var(--z-dropdown);\n  \n  background: rgba(30, 30, 30, 0.95);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 8px;\n  margin-top: var(--space-xs);\n  \n  backdrop-filter: blur(12px);\n  box-shadow: var(--shadow-card);\n  \n  list-style: none;\n  padding: var(--space-xs) 0;\n  margin: 0;\n  \n  max-height: 200px;\n  overflow-y: auto;\n}\n\n.language-option {\n  display: flex;\n  align-items: center;\n  gap: var(--space-sm);\n  \n  padding: var(--space-sm) var(--space-md);\n  cursor: pointer;\n  transition: background-color var(--transition-fast);\n  \n  color: rgba(255, 255, 255, 0.9);\n  font-size: var(--text-sm);\n}\n\n.language-option:hover,\n.language-option:focus {\n  background: rgba(255, 255, 255, 0.1);\n  outline: none;\n}\n\n.language-option[aria-selected=\"true\"] {\n  background: rgba(129, 140, 248, 0.2);\n  color: rgba(129, 140, 248, 1);\n}\n\n.option-flag {\n  font-size: 1.1em;\n}\n\n.option-label {\n  flex: 1;\n}\n\n.option-check {\n  color: var(--primary-light);\n  font-weight: bold;\n}\n\n/* =================================\n   \n   ================================= */\n\n.language-buttons {\n  display: flex;\n  gap: var(--space-xs);\n  flex-wrap: wrap;\n}\n\n.language-button {\n  display: flex;\n  align-items: center;\n  gap: var(--space-xs);\n  \n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 6px;\n  padding: var(--space-xs) var(--space-sm);\n  \n  color: rgba(255, 255, 255, 0.7);\n  font-size: var(--text-sm);\n  font-weight: 500;\n  \n  cursor: pointer;\n  transition: all var(--transition-fast);\n}\n\n.language-button:hover {\n  background: rgba(255, 255, 255, 0.1);\n  color: rgba(255, 255, 255, 0.9);\n}\n\n.language-button:focus {\n  outline: 2px solid var(--primary-light);\n  outline-offset: 1px;\n}\n\n.language-button--active {\n  background: rgba(129, 140, 248, 0.2);\n  border-color: rgba(129, 140, 248, 0.4);\n  color: rgba(129, 140, 248, 1);\n}\n\n.button-flag {\n  font-size: 1.1em;\n}\n\n/* =================================\n   \n   ================================= */\n\n.language-flags {\n  display: flex;\n  gap: var(--space-xs);\n}\n\n.language-flag {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  \n  width: var(--touch-target-min);\n  height: var(--touch-target-min);\n  \n  background: transparent;\n  border: 2px solid transparent;\n  border-radius: 8px;\n  \n  font-size: 1.5em;\n  cursor: pointer;\n  transition: all var(--transition-fast);\n}\n\n.language-flag:hover {\n  background: rgba(255, 255, 255, 0.1);\n  transform: scale(1.1);\n}\n\n.language-flag:focus {\n  outline: 2px solid var(--primary-light);\n  outline-offset: 2px;\n}\n\n.language-flag--active {\n  border-color: var(--primary-light);\n  background: rgba(129, 140, 248, 0.1);\n}\n\n/* =================================\n   \n   ================================= */\n\n.language-switcher--compact .language-trigger {\n  min-width: auto;\n  padding: var(--space-xs) var(--space-sm);\n}\n\n.language-switcher--compact .language-button {\n  padding: var(--space-xs);\n}\n\n/* =================================\n   \n   ================================= */\n\n.dropdown-enter-active,\n.dropdown-leave-active {\n  transition: all var(--transition-normal);\n  transform-origin: top;\n}\n\n.dropdown-enter-from,\n.dropdown-leave-to {\n  opacity: 0;\n  transform: scaleY(0.8) translateY(-8px);\n}\n\n.dropdown-enter-to,\n.dropdown-leave-from {\n  opacity: 1;\n  transform: scaleY(1) translateY(0);\n}\n\n/* =================================\n   \n   ================================= */\n\n@media (max-width: 640px) {\n  .language-trigger {\n    min-width: auto;\n    padding: var(--space-xs) var(--space-sm);\n  }\n  \n  .language-options {\n    left: -50%;\n    right: -50%;\n    min-width: 200px;\n  }\n  \n  .language-buttons {\n    justify-content: center;\n  }\n}\n\n/* =================================\n   \n   ================================= */\n\n@media (prefers-reduced-motion: reduce) {\n  .dropdown-icon,\n  .language-button,\n  .language-flag,\n  .dropdown-enter-active,\n  .dropdown-leave-active {\n    transition: none;\n  }\n  \n  .language-flag:hover {\n    transform: none;\n  }\n}\n\n/*  */\n@media (prefers-contrast: high) {\n  .language-trigger,\n  .language-button,\n  .language-options {\n    border-width: 2px;\n    border-color: white;\n  }\n  \n  .language-button--active,\n  .language-flag--active {\n    border-color: yellow;\n    background: rgba(255, 255, 0, 0.2);\n  }\n}\n\n/* RTL */\n[dir=\"rtl\"] .current-label {\n  text-align: right;\n}\n\n[dir=\"rtl\"] .language-options {\n  left: auto;\n  right: 0;\n}\n\n/*  */\n.sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border: 0;\n}\n</style>","/**\n * PWA Manager - Web\n * \n * :\n * - Service Worker \n * - Push\n * - \n * - \n * - \n * - \n */\n\nexport interface PWAConfig {\n  enablePushNotifications: boolean\n  enableBackgroundSync: boolean\n  enableOfflineMode: boolean\n  vapidKey?: string\n  notificationSettings?: NotificationSettings\n}\n\nexport interface NotificationSettings {\n  gameReminders: boolean\n  performanceAlerts: boolean\n  updateNotifications: boolean\n  reminderInterval: number // minutes\n}\n\nexport interface InstallPromptEvent extends Event {\n  prompt(): Promise<void>\n  userChoice: Promise<{ outcome: 'accepted' | 'dismissed' }>\n}\n\nexport class PWAManager {\n  private static instance: PWAManager\n  private serviceWorker: ServiceWorker | null = null\n  private pushSubscription: PushSubscription | null = null\n  private installPrompt: InstallPromptEvent | null = null\n  private isOnline: boolean = navigator.onLine\n  private config: PWAConfig\n  private notificationPermission: NotificationPermission = 'default'\n\n  private constructor(config: PWAConfig) {\n    this.config = config\n    this.init()\n  }\n\n  static getInstance(config?: PWAConfig): PWAManager {\n    if (!PWAManager.instance) {\n      const defaultConfig: PWAConfig = {\n        enablePushNotifications: true,\n        enableBackgroundSync: true,\n        enableOfflineMode: true,\n        notificationSettings: {\n          gameReminders: true,\n          performanceAlerts: false,\n          updateNotifications: true,\n          reminderInterval: 30\n        }\n      }\n      PWAManager.instance = new PWAManager(config || defaultConfig)\n    }\n    return PWAManager.instance\n  }\n\n  /**\n   * PWA\n   */\n  private async init(): Promise<void> {\n    try {\n      // Service Worker \n      await this.registerServiceWorker()\n      \n      // /\n      this.setupOnlineOfflineHandling()\n      \n      // \n      this.setupInstallPrompt()\n      \n      // Push\n      if (this.config.enablePushNotifications) {\n        await this.initializePushNotifications()\n      }\n      \n      // \n      if (this.config.enableBackgroundSync) {\n        this.setupBackgroundSync()\n      }\n      \n      console.log(' PWA Manager initialized successfully')\n    } catch (error) {\n      console.error(' PWA Manager initialization failed:', error)\n    }\n  }\n\n  /**\n   * Service Worker \n   */\n  private async registerServiceWorker(): Promise<void> {\n    if (!('serviceWorker' in navigator)) {\n      throw new Error('Service Worker not supported')\n    }\n\n    try {\n      const registration = await navigator.serviceWorker.register(`${import.meta.env.BASE_URL}service-worker.js`, {\n        scope: import.meta.env.BASE_URL,\n        updateViaCache: 'none'\n      })\n\n      console.log(' Service Worker registered:', registration.scope)\n\n      // \n      registration.addEventListener('updatefound', () => {\n        const newWorker = registration.installing\n        if (newWorker) {\n          newWorker.addEventListener('statechange', () => {\n            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\n              this.notifyServiceWorkerUpdate()\n            }\n          })\n        }\n      })\n\n      // Service Worker\n      this.serviceWorker = registration.active\n      \n      // Service Worker\n      navigator.serviceWorker.addEventListener('message', this.handleServiceWorkerMessage.bind(this))\n      \n    } catch (error) {\n      console.error(' Service Worker registration failed:', error)\n      throw error\n    }\n  }\n\n  /**\n   * Service Worker \n   */\n  private handleServiceWorkerMessage(event: MessageEvent): void {\n    const { data } = event\n    \n    switch (data.type) {\n      case 'SYNC_GAME_DATA':\n        this.handleGameDataSync()\n        break\n      case 'CACHE_UPDATED':\n        console.log(' Cache updated:', data.cacheName)\n        break\n      case 'PERFORMANCE_DATA':\n        this.handlePerformanceData(data.metrics)\n        break\n      default:\n        console.log(' Unknown message from SW:', data)\n    }\n  }\n\n  /**\n   * Push\n   */\n  private async initializePushNotifications(): Promise<void> {\n    if (!('Notification' in window) || !('PushManager' in window)) {\n      console.warn(' Push notifications not supported')\n      return\n    }\n\n    try {\n      // \n      this.notificationPermission = await this.requestNotificationPermission()\n      \n      if (this.notificationPermission === 'granted') {\n        await this.subscribeToPushNotifications()\n        this.setupNotificationScheduler()\n      }\n    } catch (error) {\n      console.error(' Push notification initialization failed:', error)\n    }\n  }\n\n  /**\n   * \n   */\n  private async requestNotificationPermission(): Promise<NotificationPermission> {\n    if (Notification.permission === 'default') {\n      return await Notification.requestPermission()\n    }\n    return Notification.permission\n  }\n\n  /**\n   * Push\n   */\n  private async subscribeToPushNotifications(): Promise<void> {\n    const registration = await navigator.serviceWorker.ready\n    \n    try {\n      this.pushSubscription = await registration.pushManager.subscribe({\n        userVisibleOnly: true,\n        applicationServerKey: this.config.vapidKey || this.generateVAPIDKey()\n      })\n      \n      console.log(' Push subscription created:', this.pushSubscription.endpoint)\n      \n      // \n      await this.sendSubscriptionToServer(this.pushSubscription)\n    } catch (error) {\n      console.error(' Push subscription failed:', error)\n    }\n  }\n\n  /**\n   * VAPID \n   */\n  private generateVAPIDKey(): string {\n    // VAPID\n    return 'BEl62iUYgUivxIkv69yViUAHu2OtQgV0RmI1R1K2o7wnpCGhAWo6QjBdKYBgQwJP4eSCyWOmfLgdaVrLmRMb6Uk'\n  }\n\n  /**\n   * \n   */\n  private async sendSubscriptionToServer(subscription: PushSubscription): Promise<void> {\n    // \n    console.log(' Sending subscription to server:', subscription.toJSON())\n    \n    // \n    localStorage.setItem('pwa_push_subscription', JSON.stringify(subscription.toJSON()))\n  }\n\n  /**\n   * \n   */\n  private setupNotificationScheduler(): void {\n    if (!this.config.notificationSettings?.gameReminders) return\n\n    const interval = this.config.notificationSettings.reminderInterval * 60 * 1000\n    \n    setInterval(() => {\n      this.scheduleGameReminder()\n    }, interval)\n  }\n\n  /**\n   * \n   */\n  private async scheduleGameReminder(): Promise<void> {\n    // \n    if (document.hidden && this.isOnline) {\n      await this.sendNotification({\n        title: '',\n        body: '',\n        icon: `${import.meta.env.BASE_URL}favicon.ico`,\n        tag: 'game-reminder',\n        data: {\n          action: 'resume-game',\n          timestamp: Date.now()\n        }\n      })\n    }\n  }\n\n  /**\n   * \n   */\n  async sendNotification(options: NotificationOptions & { title: string }): Promise<void> {\n    if (this.notificationPermission !== 'granted') {\n      console.warn(' Notification permission not granted')\n      return\n    }\n\n    try {\n      const registration = await navigator.serviceWorker.ready\n      await registration.showNotification(options.title, options)\n      console.log(' Notification sent:', options.title)\n    } catch (error) {\n      console.error(' Failed to send notification:', error)\n    }\n  }\n\n  /**\n   * /\n   */\n  private setupOnlineOfflineHandling(): void {\n    window.addEventListener('online', () => {\n      this.isOnline = true\n      this.handleOnlineStatus(true)\n    })\n\n    window.addEventListener('offline', () => {\n      this.isOnline = false\n      this.handleOnlineStatus(false)\n    })\n  }\n\n  /**\n   * \n   */\n  private handleOnlineStatus(isOnline: boolean): void {\n    console.log(` Network status: ${isOnline ? 'Online' : 'Offline'}`)\n    \n    if (isOnline) {\n      // \n      this.syncPendingData()\n      this.preloadCriticalAssets()\n    } else {\n      // \n      this.showOfflineMessage()\n    }\n    \n    // UI\n    this.notifyNetworkStatus(isOnline)\n  }\n\n  /**\n   * \n   */\n  private async syncPendingData(): Promise<void> {\n    if (!this.serviceWorker) return\n\n    try {\n      // Service Worker\n      const registration = await navigator.serviceWorker.ready\n      await registration.sync.register('sync-game-data')\n      console.log(' Background sync requested')\n    } catch (error) {\n      console.error(' Background sync failed:', error)\n    }\n  }\n\n  /**\n   * \n   */\n  private setupBackgroundSync(): void {\n    // \n    setInterval(() => {\n      if (this.isOnline) {\n        this.syncPendingData()\n      }\n    }, 60000) // 1\n  }\n\n  /**\n   * \n   */\n  private handleGameDataSync(): void {\n    console.log(' Syncing game data...')\n    \n    // \n    const gameData = this.getLocalGameData()\n    \n    if (gameData) {\n      // API\n      this.sendGameDataToServer(gameData)\n    }\n  }\n\n  /**\n   * \n   */\n  private getLocalGameData(): any {\n    try {\n      const data = localStorage.getItem('game_progress')\n      return data ? JSON.parse(data) : null\n    } catch (error) {\n      console.error(' Failed to get local game data:', error)\n      return null\n    }\n  }\n\n  /**\n   * \n   */\n  private sendGameDataToServer(data: any): void {\n    // API\n    console.log(' Game data would be sent to server:', data)\n  }\n\n  /**\n   * \n   */\n  private setupInstallPrompt(): void {\n    window.addEventListener('beforeinstallprompt', (event) => {\n      event.preventDefault()\n      this.installPrompt = event as InstallPromptEvent\n      this.showInstallBanner()\n    })\n\n    window.addEventListener('appinstalled', () => {\n      console.log(' PWA installed successfully')\n      this.hideInstallBanner()\n      this.trackInstallEvent()\n    })\n  }\n\n  /**\n   * \n   */\n  private showInstallBanner(): void {\n    // UI\n    const event = new CustomEvent('pwa-install-available')\n    window.dispatchEvent(event)\n  }\n\n  /**\n   * \n   */\n  private hideInstallBanner(): void {\n    const event = new CustomEvent('pwa-installed')\n    window.dispatchEvent(event)\n  }\n\n  /**\n   * \n   */\n  async promptInstall(): Promise<boolean> {\n    if (!this.installPrompt) {\n      console.warn(' Install prompt not available')\n      return false\n    }\n\n    try {\n      await this.installPrompt.prompt()\n      const choice = await this.installPrompt.userChoice\n      \n      console.log(` Install prompt result: ${choice.outcome}`)\n      \n      if (choice.outcome === 'accepted') {\n        this.trackInstallEvent()\n        return true\n      }\n      \n      return false\n    } catch (error) {\n      console.error(' Install prompt failed:', error)\n      return false\n    }\n  }\n\n  /**\n   * \n   */\n  private trackInstallEvent(): void {\n    // \n    console.log(' PWA install event tracked')\n  }\n\n  /**\n   * \n   */\n  private async preloadCriticalAssets(): Promise<void> {\n    if (!this.serviceWorker) return\n\n    const criticalAssets = [\n      `${import.meta.env.BASE_URL}manifest.json`,\n      `${import.meta.env.BASE_URL}favicon.ico`,\n      `${import.meta.env.BASE_URL}favicon.svg`\n    ]\n\n    try {\n      // Service Worker\n      navigator.serviceWorker.controller?.postMessage({\n        type: 'PRELOAD_RESOURCES',\n        resources: criticalAssets\n      })\n      \n      console.log(' Critical assets preload requested')\n    } catch (error) {\n      console.error(' Asset preload failed:', error)\n    }\n  }\n\n  /**\n   * \n   */\n  private showOfflineMessage(): void {\n    const event = new CustomEvent('pwa-offline-mode')\n    window.dispatchEvent(event)\n  }\n\n  /**\n   * \n   */\n  private notifyNetworkStatus(isOnline: boolean): void {\n    const event = new CustomEvent('pwa-network-status', {\n      detail: { isOnline }\n    })\n    window.dispatchEvent(event)\n  }\n\n  /**\n   * Service Worker\n   */\n  private notifyServiceWorkerUpdate(): void {\n    const event = new CustomEvent('pwa-update-available')\n    window.dispatchEvent(event)\n  }\n\n  /**\n   * \n   */\n  private handlePerformanceData(metrics: any): void {\n    console.log(' Performance data received:', metrics)\n    \n    // \n    if (metrics.responseTime > 3000) {\n      this.sendPerformanceAlert('')\n    }\n  }\n\n  /**\n   * \n   */\n  private async sendPerformanceAlert(message: string): Promise<void> {\n    if (!this.config.notificationSettings?.performanceAlerts) return\n\n    await this.sendNotification({\n      title: '',\n      body: message,\n      icon: '/favicon.ico',\n      tag: 'performance-alert',\n      data: {\n        action: 'check-performance',\n        timestamp: Date.now()\n      }\n    })\n  }\n\n  /**\n   * PWA\n   */\n  getStatus(): {\n    isOnline: boolean\n    hasServiceWorker: boolean\n    hasPushSubscription: boolean\n    notificationPermission: NotificationPermission\n    canInstall: boolean\n  } {\n    return {\n      isOnline: this.isOnline,\n      hasServiceWorker: Boolean(this.serviceWorker),\n      hasPushSubscription: Boolean(this.pushSubscription),\n      notificationPermission: this.notificationPermission,\n      canInstall: Boolean(this.installPrompt)\n    }\n  }\n\n  /**\n   * \n   */\n  async manageCaches(): Promise<void> {\n    if (!this.serviceWorker) return\n\n    navigator.serviceWorker.controller?.postMessage({\n      type: 'CLEAR_CACHE_TYPE',\n      cacheType: 'dynamic'\n    })\n  }\n\n  /**\n   * PWA\n   */\n  updateConfig(newConfig: Partial<PWAConfig>): void {\n    this.config = { ...this.config, ...newConfig }\n    \n    // Service Worker\n    navigator.serviceWorker.controller?.postMessage({\n      type: 'UPDATE_CONFIG',\n      config: this.config\n    })\n  }\n\n  /**\n   * PWA\n   */\n  async disable(): Promise<void> {\n    try {\n      // Service Worker\n      const registrations = await navigator.serviceWorker.getRegistrations()\n      for (const registration of registrations) {\n        await registration.unregister()\n      }\n      \n      // Push\n      if (this.pushSubscription) {\n        await this.pushSubscription.unsubscribe()\n      }\n      \n      console.log(' PWA disabled successfully')\n    } catch (error) {\n      console.error(' PWA disable failed:', error)\n    }\n  }\n}\n\n// \nexport const pwaManager = PWAManager.getInstance()","<template>\n  <Teleport to=\"body\">\n    <Transition\n      name=\"install-prompt\"\n      enter-active-class=\"duration-300 ease-out\"\n      enter-from-class=\"transform scale-95 opacity-0\"\n      enter-to-class=\"transform scale-100 opacity-100\"\n      leave-active-class=\"duration-200 ease-in\"\n      leave-from-class=\"transform scale-100 opacity-100\"\n      leave-to-class=\"transform scale-95 opacity-0\"\n    >\n      <div\n        v-if=\"showPrompt\"\n        class=\"fixed inset-x-0 bottom-0 z-50 p-4 sm:p-6\"\n        role=\"dialog\"\n        aria-labelledby=\"install-prompt-title\"\n        aria-describedby=\"install-prompt-description\"\n      >\n        <div class=\"mx-auto max-w-md\">\n          <div class=\"flex items-center justify-between rounded-lg bg-white p-4 shadow-lg ring-1 ring-black/5 dark:bg-gray-800 dark:ring-white/10\">\n            <div class=\"flex items-center space-x-3\">\n              <div class=\"flex-shrink-0\">\n                <div class=\"flex h-10 w-10 items-center justify-center rounded-lg bg-blue-600\">\n                  <svg class=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3\" />\n                  </svg>\n                </div>\n              </div>\n              <div class=\"min-w-0 flex-1\">\n                <h3 id=\"install-prompt-title\" class=\"text-sm font-medium text-gray-900 dark:text-white\">\n                  \n                </h3>\n                <p id=\"install-prompt-description\" class=\"text-sm text-gray-500 dark:text-gray-400\">\n                  \n                </p>\n              </div>\n            </div>\n            <div class=\"flex items-center space-x-2\">\n              <button\n                type=\"button\"\n                class=\"inline-flex items-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 disabled:opacity-50 disabled:cursor-not-allowed\"\n                :disabled=\"isInstalling\"\n                @click=\"handleInstall\"\n              >\n                <span v-if=\"!isInstalling\"></span>\n                <span v-else class=\"flex items-center\">\n                  <svg class=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                    <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n                    <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                  </svg>\n                  ...\n                </span>\n              </button>\n              <button\n                type=\"button\"\n                class=\"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-gray-300 hover:bg-gray-50 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 dark:bg-gray-700 dark:text-white dark:ring-gray-600 dark:hover:bg-gray-600\"\n                @click=\"handleDismiss\"\n              >\n                \n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Transition>\n  </Teleport>\n</template>\n\n<script setup lang=\"ts\">\nimport { onMounted, onUnmounted, ref } from 'vue'\nimport { pwaManager } from '@/utils/pwa-manager'\n\n// \nconst showPrompt = ref(false)\nconst isInstalling = ref(false)\n\n// \nconst handleInstallAvailable = () => {\n  showPrompt.value = true\n}\n\nconst handleInstalled = () => {\n  showPrompt.value = false\n  isInstalling.value = false\n  \n  // \n  const event = new CustomEvent('pwa-install-success')\n  window.dispatchEvent(event)\n}\n\nconst handleInstall = async () => {\n  isInstalling.value = true\n  \n  try {\n    const success = await pwaManager.promptInstall()\n    \n    if (success) {\n      showPrompt.value = false\n      \n      // \n      setTimeout(() => {\n        const event = new CustomEvent('show-toast', {\n          detail: {\n            title: '',\n            message: '',\n            type: 'success'\n          }\n        })\n        window.dispatchEvent(event)\n      }, 500)\n    }\n  } catch (error) {\n    console.error('Install failed:', error)\n    \n    // \n    const event = new CustomEvent('show-toast', {\n      detail: {\n        title: '',\n        message: '',\n        type: 'error'\n      }\n    })\n    window.dispatchEvent(event)\n  } finally {\n    isInstalling.value = false\n  }\n}\n\nconst handleDismiss = () => {\n  showPrompt.value = false\n  \n  // 24\n  localStorage.setItem('pwa-install-dismissed', Date.now().toString())\n  \n  // \n  const event = new CustomEvent('pwa-install-dismissed')\n  window.dispatchEvent(event)\n}\n\n// \nonMounted(() => {\n  // \n  const dismissed = localStorage.getItem('pwa-install-dismissed')\n  const dayInMs = 24 * 60 * 60 * 1000\n  \n  if (dismissed && Date.now() - parseInt(dismissed) < dayInMs) {\n    return // 24\n  }\n  \n  // PWA\n  window.addEventListener('pwa-install-available', handleInstallAvailable)\n  window.addEventListener('pwa-installed', handleInstalled)\n  \n  // \n  const pwaStatus = pwaManager.getStatus()\n  if (pwaStatus.canInstall) {\n    // \n    setTimeout(() => {\n      showPrompt.value = true\n    }, 3000)\n  }\n})\n\nonUnmounted(() => {\n  window.removeEventListener('pwa-install-available', handleInstallAvailable)\n  window.removeEventListener('pwa-installed', handleInstalled)\n})\n</script>\n\n<style scoped>\n/*  */\n.install-prompt-enter-active,\n.install-prompt-leave-active {\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.install-prompt-enter-from {\n  opacity: 0;\n  transform: translateY(100%) scale(0.95);\n}\n\n.install-prompt-leave-to {\n  opacity: 0;\n  transform: translateY(100%) scale(0.95);\n}\n\n/*  */\n@media (prefers-color-scheme: dark) {\n  .ring-black\\/5 {\n    --tw-ring-color: rgb(255 255 255 / 0.1);\n  }\n}\n</style>","<template>\n  <div class=\"fixed top-4 right-4 z-40\">\n    <!--  -->\n    <Transition\n      name=\"status-indicator\"\n      enter-active-class=\"duration-300 ease-out\"\n      enter-from-class=\"transform translate-y-2 opacity-0\"\n      enter-to-class=\"transform translate-y-0 opacity-100\"\n      leave-active-class=\"duration-200 ease-in\"\n      leave-from-class=\"transform translate-y-0 opacity-100\"\n      leave-to-class=\"transform translate-y-2 opacity-0\"\n    >\n      <div\n        v-if=\"showOfflineIndicator\"\n        class=\"mb-2 flex items-center rounded-lg bg-amber-50 px-3 py-2 shadow-lg ring-1 ring-amber-200 dark:bg-amber-900/20 dark:ring-amber-800\"\n        role=\"alert\"\n        aria-live=\"polite\"\n      >\n        <svg class=\"h-5 w-5 text-amber-600 dark:text-amber-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z\" />\n        </svg>\n        <span class=\"ml-2 text-sm font-medium text-amber-700 dark:text-amber-300\">\n          \n        </span>\n      </div>\n    </Transition>\n\n    <!--  -->\n    <Transition\n      name=\"status-indicator\"\n      enter-active-class=\"duration-300 ease-out\"\n      enter-from-class=\"transform translate-y-2 opacity-0\"\n      enter-to-class=\"transform translate-y-0 opacity-100\"\n      leave-active-class=\"duration-200 ease-in\"\n      leave-from-class=\"transform translate-y-0 opacity-100\"\n      leave-to-class=\"transform translate-y-2 opacity-0\"\n    >\n      <div\n        v-if=\"showUpdateIndicator\"\n        class=\"mb-2 flex items-center rounded-lg bg-blue-50 px-3 py-2 shadow-lg ring-1 ring-blue-200 dark:bg-blue-900/20 dark:ring-blue-800\"\n        role=\"alert\"\n        aria-live=\"polite\"\n      >\n        <div class=\"flex items-center\">\n          <svg class=\"h-5 w-5 text-blue-600 dark:text-blue-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99\" />\n          </svg>\n          <span class=\"ml-2 text-sm font-medium text-blue-700 dark:text-blue-300\">\n            \n          </span>\n        </div>\n        <button\n          type=\"button\"\n          class=\"ml-3 inline-flex items-center rounded-md bg-blue-600 px-2 py-1 text-xs font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600\"\n          @click=\"handleUpdate\"\n        >\n          \n        </button>\n        <button\n          type=\"button\"\n          class=\"ml-1 flex-shrink-0 rounded-md p-1 text-blue-400 hover:bg-blue-100 hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 focus:ring-offset-blue-50 dark:hover:bg-blue-800 dark:focus:ring-offset-blue-900\"\n          @click=\"dismissUpdate\"\n        >\n          <span class=\"sr-only\"></span>\n          <svg class=\"h-3 w-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" />\n          </svg>\n        </button>\n      </div>\n    </Transition>\n\n    <!-- PWA -->\n    <div\n      v-if=\"showPWAStatus\"\n      class=\"flex items-center space-x-2 rounded-lg bg-white px-3 py-2 shadow-sm ring-1 ring-gray-200 dark:bg-gray-800 dark:ring-gray-700\"\n      :title=\"pwaStatusTitle\"\n    >\n      <!-- Service Worker -->\n      <div class=\"flex items-center space-x-1\">\n        <div\n          class=\"h-2 w-2 rounded-full\"\n          :class=\"{\n            'bg-green-500': pwaStatus.hasServiceWorker,\n            'bg-gray-300': !pwaStatus.hasServiceWorker\n          }\"\n        />\n        <span class=\"text-xs text-gray-500 dark:text-gray-400\">SW</span>\n      </div>\n\n      <!--  -->\n      <div class=\"flex items-center space-x-1\">\n        <div\n          class=\"h-2 w-2 rounded-full\"\n          :class=\"{\n            'bg-green-500': pwaStatus.isOnline,\n            'bg-red-500': !pwaStatus.isOnline\n          }\"\n        />\n        <span class=\"text-xs text-gray-500 dark:text-gray-400\">NET</span>\n      </div>\n\n      <!-- Push -->\n      <div class=\"flex items-center space-x-1\">\n        <div\n          class=\"h-2 w-2 rounded-full\"\n          :class=\"{\n            'bg-green-500': pwaStatus.hasPushSubscription,\n            'bg-yellow-500': pwaStatus.notificationPermission === 'default',\n            'bg-red-500': pwaStatus.notificationPermission === 'denied',\n            'bg-gray-300': pwaStatus.notificationPermission === 'denied'\n          }\"\n        />\n        <span class=\"text-xs text-gray-500 dark:text-gray-400\">PUSH</span>\n      </div>\n\n      <!--  -->\n      <div \n        v-if=\"pwaStatus.canInstall\" \n        class=\"flex items-center space-x-1\"\n      >\n        <div class=\"h-2 w-2 rounded-full bg-blue-500\" />\n        <span class=\"text-xs text-gray-500 dark:text-gray-400\">INSTALL</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, onMounted, onUnmounted, ref } from 'vue'\nimport { pwaManager } from '@/utils/pwa-manager'\n\n// \nconst showOfflineIndicator = ref(false)\nconst showUpdateIndicator = ref(false)\nconst showPWAStatus = ref(false)\nconst pwaStatus = ref(pwaManager.getStatus())\n\n// \nconst pwaStatusTitle = computed(() => {\n  const statuses = []\n  \n  if (pwaStatus.value.hasServiceWorker) {\n    statuses.push('Service Worker: ')\n  } else {\n    statuses.push('Service Worker: ')\n  }\n  \n  if (pwaStatus.value.isOnline) {\n    statuses.push(': ')\n  } else {\n    statuses.push(': ')\n  }\n  \n  switch (pwaStatus.value.notificationPermission) {\n    case 'granted':\n      statuses.push(': ')\n      break\n    case 'denied':\n      statuses.push(': ')\n      break\n    case 'default':\n      statuses.push(': ')\n      break\n  }\n  \n  if (pwaStatus.value.canInstall) {\n    statuses.push(': ')\n  }\n  \n  return statuses.join('\\n')\n})\n\n// \nconst handleNetworkStatus = (event: CustomEvent) => {\n  const { isOnline } = event.detail\n  showOfflineIndicator.value = !isOnline\n  pwaStatus.value = pwaManager.getStatus()\n}\n\nconst handleOfflineMode = () => {\n  showOfflineIndicator.value = true\n  pwaStatus.value = pwaManager.getStatus()\n}\n\nconst handleUpdateAvailable = () => {\n  showUpdateIndicator.value = true\n}\n\nconst handleUpdate = async () => {\n  try {\n    // Service Worker\n    const registration = await navigator.serviceWorker.ready\n    \n    if (registration.waiting) {\n      registration.waiting.postMessage({ type: 'SKIP_WAITING' })\n      window.location.reload()\n    }\n  } catch (error) {\n    console.error('Update failed:', error)\n    \n    // \n    const event = new CustomEvent('show-toast', {\n      detail: {\n        title: '',\n        message: '',\n        type: 'error'\n      }\n    })\n    window.dispatchEvent(event)\n  }\n}\n\nconst dismissUpdate = () => {\n  showUpdateIndicator.value = false\n}\n\nconst togglePWAStatus = () => {\n  showPWAStatus.value = !showPWAStatus.value\n}\n\n// PWA\nconst updatePWAStatus = () => {\n  pwaStatus.value = pwaManager.getStatus()\n}\n\n// \nconst handleKeydown = (event: KeyboardEvent) => {\n  // Alt + P  PWA/\n  if (event.altKey && event.key === 'p') {\n    event.preventDefault()\n    togglePWAStatus()\n  }\n}\n\n// \nonMounted(() => {\n  // \n  window.addEventListener('pwa-network-status', handleNetworkStatus as EventListener)\n  window.addEventListener('pwa-offline-mode', handleOfflineMode)\n  window.addEventListener('pwa-update-available', handleUpdateAvailable)\n  window.addEventListener('keydown', handleKeydown)\n  \n  // PWA\n  updatePWAStatus()\n  \n  // \n  const statusUpdateInterval = setInterval(updatePWAStatus, 5000)\n  \n  //  PWA\n  if (import.meta.env.DEV) {\n    showPWAStatus.value = true\n  }\n  \n  // \n  onUnmounted(() => {\n    clearInterval(statusUpdateInterval)\n  })\n})\n\nonUnmounted(() => {\n  window.removeEventListener('pwa-network-status', handleNetworkStatus as EventListener)\n  window.removeEventListener('pwa-offline-mode', handleOfflineMode)\n  window.removeEventListener('pwa-update-available', handleUpdateAvailable)\n  window.removeEventListener('keydown', handleKeydown)\n})\n</script>\n\n<style scoped>\n/*  */\n.status-indicator-enter-active,\n.status-indicator-leave-active {\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.status-indicator-enter-from {\n  opacity: 0;\n  transform: translateY(-8px);\n}\n\n.status-indicator-leave-to {\n  opacity: 0;\n  transform: translateY(-8px);\n}\n\n/*  */\n.rounded-lg:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 10px 25px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);\n}\n\n/*  */\n@media (prefers-color-scheme: dark) {\n  .ring-gray-200 {\n    --tw-ring-color: rgb(75 85 99);\n  }\n  \n  .ring-amber-200 {\n    --tw-ring-color: rgb(217 119 6);\n  }\n  \n  .ring-blue-200 {\n    --tw-ring-color: rgb(59 130 246);\n  }\n}\n</style>","import { defineStore } from 'pinia'\nimport { ref, computed, shallowRef } from 'vue'\nimport { Game } from '@/domain/entities/Game'\nimport type { Card } from '@/domain/entities/Card'\nimport type { GameConfig } from '@/domain/types/game.types'\n\nexport const useGameStore = defineStore('game', () => {\n    // State - using shallowRef to avoid deep reactivity on Game instance\n    const game = shallowRef<Game | null>(null)\n    const isInitialized = ref(false)\n    const lastUpdate = ref(Date.now()) // Force reactivity when game state changes internally\n\n    // Getters\n    const vitality = computed(() => {\n        if (!game.value) return 0\n        // Dependency on lastUpdate forces re-evaluation\n        lastUpdate.value\n        return game.value.vitality\n    })\n\n    const maxVitality = computed(() => {\n        if (!game.value) return 100\n        lastUpdate.value\n        return game.value.maxVitality\n    })\n\n    const hand = computed(() => {\n        if (!game.value) return []\n        lastUpdate.value\n        return game.value.hand\n    })\n\n    const currentStage = computed(() => {\n        if (!game.value) return 'youth'\n        lastUpdate.value\n        return game.value.stage\n    })\n\n    const currentTurn = computed(() => {\n        if (!game.value) return 0\n        lastUpdate.value\n        return game.value.turn\n    })\n\n    const currentPhase = computed(() => {\n        if (!game.value) return 'setup'\n        lastUpdate.value\n        return game.value.phase\n    })\n\n    const currentChallenge = computed(() => {\n        if (!game.value) return null\n        lastUpdate.value\n        return game.value.currentChallenge\n    })\n\n    const insuranceTypeChoices = computed(() => {\n        if (!game.value) return []\n        lastUpdate.value\n        return game.value.insuranceTypeChoices\n    })\n\n    const cardChoices = computed(() => {\n        if (!game.value) return []\n        lastUpdate.value\n        return game.value.cardChoices\n    })\n\n    const lastMessage = ref<string>('')\n\n    // Actions\n    function initializeGame(config?: GameConfig) {\n        game.value = new Game(config)\n        isInitialized.value = true\n        triggerUpdate()\n    }\n\n    function startGame() {\n        if (!game.value) return\n        game.value.start()\n        triggerUpdate()\n    }\n\n    async function drawCards(count: number) {\n        if (!game.value) return\n        await game.value.drawCards(count)\n        triggerUpdate()\n    }\n\n    function startChallenge(card: Card) {\n        if (!game.value) return\n        game.value.startChallenge(card)\n        triggerUpdate()\n    }\n\n    function drawChallenge() {\n        if (!game.value) return\n        if (game.value.currentChallenge) return\n\n        const challengeCard = game.value.challengeDeck.drawCard()\n        if (challengeCard) {\n            game.value.startChallenge(challengeCard)\n            triggerUpdate()\n        }\n    }\n\n    function resolveChallenge() {\n        if (!game.value) return\n        const result = game.value.resolveChallenge()\n        lastMessage.value = result.message\n        triggerUpdate()\n        return result\n    }\n\n    function selectInsurance(insuranceType: any) {\n        if (!game.value) return\n        // Assuming Game entity has a method to handle insurance selection\n        // If not, we might need to implement it or use a service\n        // Checking Game.ts, it seems we might need to call a service or a method on Game\n        // Let's assume for now we just log it or need to implement it in Game.ts if missing\n        // Actually Game.ts likely has a method or we need to use GameInsuranceService\n        console.log('Selected insurance:', insuranceType)\n        // For now, let's just move to next phase to unblock\n        game.value.phase = 'end'\n        triggerUpdate()\n    }\n\n    function endTurn() {\n        if (!game.value) return\n        const result = game.value.nextTurn()\n        if (result.insuranceExpirations) {\n            lastMessage.value = result.insuranceExpirations.message\n        } else {\n            lastMessage.value = `Turn ${game.value.turn} started`\n        }\n        triggerUpdate()\n    }\n\n    function toggleCardSelection(card: Card) {\n        if (!game.value) return\n        game.value.toggleCardSelection(card)\n        triggerUpdate()\n    }\n\n    // Helper to force UI updates since Game entity mutations might not be deep-watched\n    function triggerUpdate() {\n        lastUpdate.value = Date.now()\n    }\n\n    return {\n        game,\n        isInitialized,\n        vitality,\n        maxVitality,\n        hand,\n        currentStage,\n        currentTurn,\n        currentPhase,\n        currentChallenge,\n        insuranceTypeChoices,\n        lastMessage,\n        initializeGame,\n        startGame,\n        drawCards,\n        startChallenge,\n        drawChallenge,\n        resolveChallenge,\n        selectInsurance,\n        endTurn,\n        toggleCardSelection,\n        triggerUpdate\n    }\n})\n","<script setup lang=\"ts\">\nimport { computed } from 'vue'\nimport type { Card } from '@/domain/entities/Card'\n\nconst props = defineProps<{\n  card: Card\n  isSelected?: boolean\n  isPlayable?: boolean\n}>()\n\nconst emit = defineEmits<{\n  (e: 'click', card: Card): void\n}>()\n\nconst cardClasses = computed(() => {\n  return {\n    'border-yellow-400 ring-2 ring-yellow-400': props.isSelected,\n    'cursor-pointer hover:-translate-y-2': props.isPlayable,\n    'opacity-50 cursor-not-allowed': !props.isPlayable,\n    'bg-blue-100 border-blue-300': props.card.type === 'life',\n    'bg-red-100 border-red-300': props.card.type === 'challenge',\n    'bg-green-100 border-green-300': props.card.type === 'insurance',\n    'bg-purple-100 border-purple-300': props.card.type === 'skill',\n    'bg-yellow-100 border-yellow-300': props.card.type === 'dream',\n  }\n})\n\nconst typeLabel = computed(() => {\n  switch (props.card.type) {\n    case 'life': return ''\n    case 'challenge': return ''\n    case 'insurance': return ''\n    case 'skill': return ''\n    case 'dream': return ''\n    default: return props.card.type\n  }\n})\n</script>\n\n<template>\n  <div \n    class=\"w-48 h-72 rounded-xl border-2 shadow-lg flex flex-col p-4 transition-all duration-200 relative bg-white\"\n    :class=\"cardClasses\"\n    @click=\"emit('click', card)\"\n  >\n    <!-- Header -->\n    <div class=\"flex justify-between items-start mb-2\">\n      <span class=\"text-xs font-bold uppercase tracking-wider opacity-70\">{{ typeLabel }}</span>\n      <div v-if=\"card.cost > 0\" class=\"bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shadow-sm\">\n        {{ card.cost }}\n      </div>\n    </div>\n\n    <!-- Image Placeholder -->\n    <div class=\"w-full h-24 bg-gray-200 rounded-md mb-3 flex items-center justify-center overflow-hidden\">\n      <span class=\"text-4xl opacity-20\">\n        <span v-if=\"card.type === 'life'\"></span>\n        <span v-else-if=\"card.type === 'challenge'\"></span>\n        <span v-else-if=\"card.type === 'insurance'\"></span>\n        <span v-else></span>\n      </span>\n    </div>\n\n    <!-- Content -->\n    <h3 class=\"font-bold text-lg leading-tight mb-1 text-gray-800\">{{ card.name }}</h3>\n    <p class=\"text-xs text-gray-600 flex-grow overflow-y-auto\">{{ card.description }}</p>\n\n    <!-- Footer -->\n    <div class=\"mt-2 pt-2 border-t border-gray-200 flex justify-between items-center\">\n      <div v-if=\"card.power > 0\" class=\"flex items-center text-red-600 font-bold\">\n        <span class=\"mr-1\"></span>\n        <span>{{ card.power }}</span>\n      </div>\n      <div v-if=\"card.coverage\" class=\"flex items-center text-green-600 font-bold ml-auto\">\n        <span class=\"mr-1\"></span>\n        <span>{{ card.coverage }}</span>\n      </div>\n    </div>\n  </div>\n</template>\n","<script setup lang=\"ts\">\nimport { computed } from 'vue'\nimport { useGameStore } from '@/stores/gameStore'\nimport CardComponent from './Card.vue'\nimport type { Card } from '@/domain/entities/Card'\n\nconst store = useGameStore()\n\nconst hand = computed(() => store.hand)\n\nfunction onCardClick(card: Card) {\n  store.toggleCardSelection(card)\n}\n\nfunction isSelected(card: Card) {\n  return store.game?.selectedCards.includes(card)\n}\n</script>\n\n<template>\n  <div class=\"fixed bottom-0 left-0 right-0 h-64 flex items-end justify-center pb-4 px-4 pointer-events-none\">\n    <div class=\"flex -space-x-12 hover:space-x-2 transition-all duration-300 pointer-events-auto\">\n      <div \n        v-for=\"(card, index) in hand\" \n        :key=\"card.id\"\n        class=\"transform transition-transform hover:-translate-y-8 hover:z-10 origin-bottom\"\n        :style=\"{ zIndex: index }\"\n      >\n        <CardComponent \n          :card=\"card\" \n          :is-selected=\"isSelected(card)\"\n          :is-playable=\"true\"\n          @click=\"onCardClick\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n","<script setup lang=\"ts\">\nimport { onMounted } from 'vue'\nimport { useGameStore } from '@/stores/gameStore'\nimport Hand from './Hand.vue'\nimport CardComponent from './Card.vue'\n\nconst store = useGameStore()\n\nonMounted(() => {\n  if (!store.game) {\n    store.initializeGame()\n    store.startGame()\n  }\n})\n\nfunction onDraw() {\n  store.drawCards(1)\n}\n\nfunction onEndTurn() {\n  store.endTurn()\n}\n\nfunction onChallenge() {\n  store.drawChallenge()\n}\n</script>\n\n<template>\n  <div class=\"w-full h-screen bg-slate-900 text-white overflow-hidden relative font-sans\">\n    <!-- Header / Stats -->\n    <div class=\"absolute top-0 left-0 right-0 p-4 flex justify-between items-center bg-slate-800/80 backdrop-blur-md z-20 shadow-md\">\n      <div class=\"flex items-center space-x-6\">\n        <div class=\"flex flex-col\">\n          <span class=\"text-xs text-slate-400 uppercase\">Stage</span>\n          <span class=\"font-bold text-xl text-purple-400\">{{ store.currentStage }}</span>\n        </div>\n        <div class=\"flex flex-col\">\n          <span class=\"text-xs text-slate-400 uppercase\">Vitality</span>\n          <div class=\"flex items-end\">\n            <span class=\"font-bold text-2xl text-green-400\">{{ store.vitality }}</span>\n            <span class=\"text-sm text-slate-500 mb-1 ml-1\">/ {{ store.maxVitality }}</span>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"flex items-center space-x-4\">\n        <div class=\"flex flex-col items-end\">\n          <span class=\"text-xs text-slate-400 uppercase\">Turn</span>\n          <span class=\"font-bold text-xl\">{{ store.currentTurn }}</span>\n        </div>\n        <div class=\"flex flex-col items-end\">\n          <span class=\"text-xs text-slate-400 uppercase\">Phase</span>\n          <span class=\"font-bold text-lg text-blue-300\">{{ store.currentPhase }}</span>\n        </div>\n      </div>\n    </div>\n\n    <!-- Main Game Area -->\n    <div class=\"absolute inset-0 flex flex-col items-center justify-center pt-20 pb-64 z-10\">\n      \n      <!-- Challenge Area -->\n      <div class=\"mb-8 flex flex-col items-center\">\n        <h2 class=\"text-slate-400 uppercase tracking-widest text-sm mb-4\">Current Challenge</h2>\n        <div v-if=\"store.currentChallenge\" class=\"transform scale-110\">\n          <CardComponent :card=\"store.currentChallenge\" />\n        </div>\n        <div v-else class=\"w-48 h-72 border-2 border-dashed border-slate-600 rounded-xl flex items-center justify-center bg-slate-800/50\">\n          <span class=\"text-slate-500\">No Active Challenge</span>\n        </div>\n      </div>\n\n      <!-- Message Area -->\n      <div v-if=\"store.lastMessage\" class=\"absolute top-20 bg-black/50 text-white px-6 py-2 rounded-full backdrop-blur-sm animate-fade-in-down\">\n        {{ store.lastMessage }}\n      </div>\n\n      <!-- Actions -->\n      <div class=\"flex space-x-4 mt-4\">\n        <button \n          v-if=\"store.currentPhase === 'draw'\"\n          @click=\"onDraw\"\n          class=\"px-6 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-lg font-bold shadow-lg transition-colors flex items-center\"\n        >\n          Draw Card\n        </button>\n        \n        <button \n          v-if=\"store.currentPhase === 'draw' && !store.currentChallenge\"\n          @click=\"onChallenge\"\n          class=\"px-6 py-3 bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg font-bold shadow-lg transition-colors\"\n        >\n          Start Challenge\n        </button>\n\n        <button \n          v-if=\"store.currentPhase === 'challenge'\"\n          @click=\"store.resolveChallenge()\"\n          class=\"px-6 py-3 bg-red-600 hover:bg-red-500 text-white rounded-lg font-bold shadow-lg transition-colors\"\n        >\n          Resolve Challenge\n        </button>\n\n        <button \n          v-if=\"store.currentPhase === 'resolution' || store.currentPhase === 'end'\"\n          @click=\"onEndTurn\"\n          class=\"px-6 py-3 bg-green-600 hover:bg-green-500 text-white rounded-lg font-bold shadow-lg transition-colors\"\n        >\n          End Turn\n        </button>\n      </div>\n\n      <!-- Insurance Selection Overlay -->\n      <div v-if=\"store.insuranceTypeChoices && store.insuranceTypeChoices.length > 0\" class=\"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-8\">\n        <div class=\"bg-white rounded-xl p-8 max-w-4xl w-full\">\n          <h2 class=\"text-2xl font-bold text-gray-800 mb-4\">Choose Insurance</h2>\n          <div class=\"grid grid-cols-3 gap-4\">\n            <div \n              v-for=\"choice in store.insuranceTypeChoices\" \n              :key=\"choice.insuranceType\"\n              class=\"border-2 border-gray-200 rounded-lg p-4 hover:border-blue-500 cursor-pointer transition-colors\"\n              @click=\"store.selectInsurance(choice.insuranceType)\"\n            >\n              <h3 class=\"font-bold text-lg text-gray-800\">{{ choice.name }}</h3>\n              <p class=\"text-sm text-gray-600\">{{ choice.description }}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Player Hand -->\n    <Hand />\n    \n    <!-- Background Elements -->\n    <div class=\"absolute inset-0 z-0 opacity-10 pointer-events-none\">\n      <div class=\"absolute top-1/4 left-1/4 w-96 h-96 bg-purple-500 rounded-full blur-3xl\"></div>\n      <div class=\"absolute bottom-1/4 right-1/4 w-96 h-96 bg-blue-500 rounded-full blur-3xl\"></div>\n    </div>\n  </div>\n</template>\n","<script setup lang=\"ts\">\nimport { defineAsyncComponent, onMounted, onUnmounted, ref, h, defineComponent } from 'vue'\nimport { useI18n } from 'vue-i18n'\n// import GameCanvas from './components/game/GameCanvas.vue' // \nimport transitionAnimations from './components/animations/TransitionAnimations.vue'\nimport accessibilitySettings from './components/accessibility/AccessibilitySettings.vue'\nimport visualIndicators from './components/accessibility/VisualIndicators.vue'\nimport errorBoundary from './components/error/ErrorBoundary.vue'\nimport errorNotification from './components/error/ErrorNotification.vue'\n// import mobileErrorHandler from './components/error/MobileErrorHandler.vue' // \n// import StatisticsDashboard from './components/statistics/StatisticsDashboard.vue' // \nimport { KeyboardManager } from './components/accessibility/KeyboardManager'\nimport { ScreenReaderManager } from './components/accessibility/ScreenReaderManager'\n// import FeedbackButton from './components/feedback/FeedbackButton.vue' // \n\n// \nimport appHeader from './components/layout/AppHeader.vue'\nimport navigationActions from './components/layout/NavigationActions.vue'\nimport featureShowcase from './components/layout/FeatureShowcase.vue'\n\n// \nimport languageSwitcher from './components/i18n/LanguageSwitcher.vue'\n\n// PWA\nimport pwaInstallPrompt from './components/pwa/PWAInstallPrompt.vue'\nimport pwaStatusIndicator from './components/pwa/PWAStatusIndicator.vue'\n\n// \nconst { t } = useI18n()\nconst showGame = ref(false)\nconst showAccessibilitySettings = ref(false)\nconst showStatistics = ref(false)\nconst isMobile = ref(false)\n// \nconst StatisticsDashboard = defineAsyncComponent({\n  loader: async () => import('./components/statistics/StatisticsDashboard.vue'),\n  errorComponent: {\n    render: () => h('div') // \n  },\n  delay: 200,\n  timeout: 10000\n})\n\nconst MobileErrorHandler = defineAsyncComponent({\n  loader: async () => import('./components/error/MobileErrorHandler.vue'),\n  errorComponent: {\n    render: () => h('div')\n  },\n  delay: 200,\n  timeout: 10000\n})\n\nconst FeedbackButton = defineAsyncComponent({\n  loader: async () => {\n    try {\n      return await import('./components/feedback/FeedbackButton.vue')\n    } catch (error) {\n      console.warn('FeedbackButton could not be loaded:', error)\n      // \n      return defineComponent({\n        name: 'FeedbackButtonFallback',\n        render: () => h('div', { class: 'feedback-button-fallback', style: { display: 'none' } })\n      }) as any\n    }\n  },\n  errorComponent: {\n    name: 'FeedbackButtonError',\n    render: () => h('div', { class: 'feedback-button-error', style: { display: 'none' } })\n  },\n  delay: 200,\n  timeout: 10000\n})\n\nimport GameCanvas from './components/game/GameBoard.vue'\n\n// \nconst navigationRef = ref<InstanceType<typeof navigationActions>>()\n\nlet keyboardManager: KeyboardManager | null = null\nlet screenReaderManager: ScreenReaderManager | null = null\n\n// \nconst gameState = ref({\n  stage: 'youth',\n  turn: 1,\n  vitality: 100,\n  phase: 'setup'\n})\n\nconst startGame = (): void => {\n  showGame.value = true\n  screenReaderManager?.announceScreenChange('', '')\n}\n\nconst startTutorial = (): void => {\n  showGame.value = true\n  screenReaderManager?.announceScreenChange('', '')\n  // GameCanvas\n  // tickeGameCanvas\n  setTimeout(() => {\n    const event = new CustomEvent('startTutorial')\n    window.dispatchEvent(event)\n  }, 100)\n}\n\nconst backToHome = (): void => {\n  showGame.value = false\n  screenReaderManager?.announceScreenChange('', '')\n}\n\nconst openStatistics = (): void => {\n  showStatistics.value = true\n  screenReaderManager?.announceScreenChange('', '')\n}\n\nconst closeStatistics = (): void => {\n  showStatistics.value = false\n  screenReaderManager?.announceScreenChange('', '')\n}\n\nconst handleAccessibilitySettingsChanged = (settings: Record<string, boolean | string | number>): void => {\n  // \n  console.log(':', settings)\n  \n  // \n  if (settings.screenReaderEnabled) {\n    screenReaderManager?.announce('', { priority: 'assertive' })\n  }\n}\n\nconst handleFeedbackSubmitted = (feedbackId: string, type: string): void => {\n  console.log(`: ${type} (${feedbackId})`)\n  \n  // \n  // trackFeedbackEvent(type, feedbackId)\n}\n\n// \nconst getErrorType = (error: Error): 'network' | 'dynamic-import' | 'runtime' | 'permission' | 'unknown' => {\n  const message = error.message.toLowerCase()\n  \n  if (message.includes('dynamically imported module') || message.includes('failed to fetch')) {\n    return 'dynamic-import'\n  }\n  if (message.includes('network') || message.includes('fetch')) {\n    return 'network'\n  }\n  if (message.includes('permission') || message.includes('cors')) {\n    return 'permission'\n  }\n  if (message.includes('cannot read') || message.includes('undefined')) {\n    return 'runtime'\n  }\n  \n  return 'unknown'\n}\n\n// \nconst handleHomeError = (error: Error, info: string) => {\n  console.error('Home screen error:', error, info)\n}\n\n// \nconst reportError = (error: Error) => {\n  console.log('Error report:', error)\n  // API\n}\n\nonMounted(() => {\n  // \n  isMobile.value = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent)\n  \n  // \n  keyboardManager = new KeyboardManager()\n  screenReaderManager = new ScreenReaderManager()\n  \n  // \n  keyboardManager.registerShortcut({\n    key: 'h',\n    modifiers: ['alt'],\n    description: '',\n    action: () => {\n      if (showGame.value) {\n        backToHome()\n      }\n    }\n  })\n  \n  keyboardManager.registerShortcut({\n    key: 'g',\n    modifiers: ['alt'],\n    description: '',\n    action: () => {\n      if (!showGame.value) {\n        startGame()\n      }\n    }\n  })\n  \n  keyboardManager.registerShortcut({\n    key: 't',\n    modifiers: ['alt'],\n    description: '',\n    action: () => {\n      if (!showGame.value) {\n        startTutorial()\n      }\n    }\n  })\n  \n  keyboardManager.registerShortcut({\n    key: 'a',\n    modifiers: ['alt'],\n    description: '',\n    action: () => {\n      showAccessibilitySettings.value = true\n      screenReaderManager?.announce('', { priority: 'assertive' })\n    }\n  })\n  \n  keyboardManager.registerShortcut({\n    key: 's',\n    modifiers: ['alt'],\n    description: '',\n    action: () => {\n      if (!showGame.value && !showStatistics.value) {\n        openStatistics()\n      }\n    }\n  })\n  \n  // \n  setTimeout(() => {\n    const gameButton = navigationRef.value?.gameButtonRef\n    const tutorialButton = navigationRef.value?.tutorialButtonRef\n    const backButton = document.querySelector('.back-to-home-btn') as HTMLElement\n    \n    if (gameButton !== null && gameButton !== undefined) {\n      keyboardManager?.registerFocusableElement(gameButton, {\n        priority: 100,\n        group: 'main-actions',\n        onFocus: () => screenReaderManager?.announce('')\n      })\n    }\n    \n    if (tutorialButton !== null && tutorialButton !== undefined) {\n      keyboardManager?.registerFocusableElement(tutorialButton, {\n        priority: 90,\n        group: 'main-actions',\n        onFocus: () => screenReaderManager?.announce('')\n      })\n    }\n    \n    if (backButton !== null && backButton !== undefined) {\n      keyboardManager?.registerFocusableElement(backButton, {\n        priority: 100,\n        group: 'game-actions',\n        onFocus: () => screenReaderManager?.announce('')\n      })\n    }\n  }, 100)\n  \n  // \n  screenReaderManager.announceScreenChange('', ' Alt+GAlt+TAlt+SAlt+AF1')\n})\n\nonUnmounted(() => {\n  keyboardManager?.destroy()\n  screenReaderManager?.destroy()\n})\n</script>\n\n<template>\n  <div class=\"app-container\" role=\"application\" aria-label=\"\">\n    <!--  -->\n    <div class=\"skip-links\">\n      <a href=\"#main-content\" class=\"skip-link\"></a>\n      <a href=\"#navigation\" class=\"skip-link\"></a>\n    </div>\n\n    <!--  -->\n    <errorNotification />\n\n    <!--  -->\n    <transitionAnimations type=\"slide\" direction=\"left\" :duration=\"400\" intensity=\"normal\">\n      <div v-if=\"showGame\" id=\"main-content\" class=\"game-view\" role=\"main\" aria-label=\"\">\n        <errorBoundary fallback=\"detailed\" :can-recover=\"true\">\n          <GameCanvas @back-to-home=\"backToHome\" />\n        </errorBoundary>\n        <button\n          ref=\"backToHomeButtonRef\"\n          class=\"back-to-home-btn\"\n          aria-label=\" (Alt+H)\"\n          :aria-keyshortcuts=\"'Alt+H'\"\n          @click=\"backToHome\"\n        >\n          <span class=\"btn-icon\" aria-hidden=\"true\"></span>\n          <span class=\"btn-text\"></span>\n        </button>\n      </div>\n\n      <!--  -->\n      <div v-else id=\"main-content\" class=\"home-view\" role=\"main\" aria-label=\"\">\n        <errorBoundary \n          fallback=\"custom\"\n          :can-recover=\"true\"\n          @error=\"handleHomeError\"\n        >\n          <div class=\"home-container\">\n            <appHeader />\n\n            <navigationActions \n              ref=\"navigationRef\"\n              @start-game=\"startGame\"\n              @start-tutorial=\"startTutorial\"\n              @open-statistics=\"openStatistics\"\n            />\n\n            <section class=\"info-section\">\n              <featureShowcase />\n            </section>\n          </div>\n          \n          <!--  -->\n          <template #error=\"{ error, retry, reload }\">\n            <MobileErrorHandler\n              v-if=\"isMobile\"\n              :error=\"error\"\n              :error-type=\"getErrorType(error)\"\n              @retry=\"retry\"\n              @go-home=\"reload\"\n              @report-error=\"reportError\"\n            />\n            <div v-else class=\"desktop-error\">\n              <h2></h2>\n              <p>{{ error.message }}</p>\n              <div class=\"desktop-error-actions\">\n                <button class=\"error-btn\" @click=\"retry\"></button>\n                <button class=\"error-btn secondary\" @click=\"reload\"></button>\n              </div>\n            </div>\n          </template>\n        </errorBoundary>\n      </div>\n    </transitionAnimations>\n\n    <!--  -->\n    <footer id=\"footer\" class=\"sr-only\" role=\"contentinfo\">\n      <p> - Web</p>\n    </footer>\n    \n    <!--  -->\n    <accessibilitySettings \n      :is-open=\"showAccessibilitySettings\"\n      @close=\"showAccessibilitySettings = false\"\n      @settings-changed=\"handleAccessibilitySettingsChanged\"\n    />\n    \n    <!--  -->\n    <visualIndicators :enabled=\"true\" />\n    \n    <!--  -->\n    <div class=\"language-switcher-container\">\n      <languageSwitcher \n        mode=\"dropdown\" \n        :compact=\"true\"\n        :aria-label=\"t('accessibility.options.changeLanguage', 'Change Language')\"\n      />\n    </div>\n\n    <!--  -->\n    <button\n      class=\"accessibility-button\"\n      :aria-label=\"t('accessibility.keyboardShortcuts.openAccessibility', ' (Alt+A)')\"\n      :aria-keyshortcuts=\"'Alt+A'\"\n      :title=\"t('accessibility.title', '')\"\n      @click=\"showAccessibilitySettings = true\"\n    >\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\">\n        <path d=\"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9H15L13.5 7.5C13 7 12.5 6.5 11.9 6.5H12.1C11.5 6.5 11 7 10.5 7.5L7.91 10.09C7.66 10.34 7.66 10.76 7.91 11.01L10.5 13.6C11 14.1 11.5 14.6 12.1 14.6H11.9C12.5 14.6 13 14.1 13.5 13.6L15 12.1H21C21.6 12.1 22 11.7 22 11.1V10C22 9.4 21.6 9 21 9ZM8.5 12.5L12 16L15.5 12.5L12 22L8.5 12.5Z\" fill=\"currentColor\"/>\n      </svg>\n    </button>\n\n    <!--  -->\n    <Teleport to=\"body\">\n      <div v-if=\"showStatistics\" class=\"modal-overlay\" @click=\"closeStatistics\">\n        <div class=\"modal-content\" @click.stop>\n          <StatisticsDashboard \n            :auto-refresh=\"true\"\n            @close=\"closeStatistics\"\n          />\n        </div>\n      </div>\n    </Teleport>\n\n    <!--  -->\n    <Suspense>\n      <FeedbackButton\n        :game-state=\"gameState\"\n        :show-stats=\"true\"\n        :auto-survey=\"true\"\n        @feedback-submitted=\"handleFeedbackSubmitted\"\n      />\n      <template #fallback>\n        <div style=\"display: none;\"></div>\n      </template>\n    </Suspense>\n\n    <!-- PWA -->\n    <pwaInstallPrompt />\n    <pwaStatusIndicator />\n  </div>\n</template>\n\n<style scoped>\n/*  */\n.desktop-error {\n  text-align: center;\n  padding: var(--space-xl);\n}\n\n.desktop-error h2 {\n  color: #ef4444;\n  margin-bottom: var(--space-md);\n}\n\n.desktop-error p {\n  color: rgba(255, 255, 255, 0.8);\n  margin-bottom: var(--space-lg);\n}\n\n.desktop-error-actions {\n  display: flex;\n  gap: var(--space-md);\n  justify-content: center;\n}\n\n.error-btn {\n  padding: var(--space-sm) var(--space-lg);\n  border: none;\n  border-radius: 8px;\n  font-weight: 600;\n  background: #667eea;\n  color: white;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.error-btn:hover {\n  background: #5a67d8;\n  transform: translateY(-1px);\n}\n\n.error-btn.secondary {\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n.error-btn.secondary:hover {\n  background: rgba(255, 255, 255, 0.2);\n}\n/* =================================\n   \n   ================================= */\n\n.app-container {\n  min-height: 100vh;\n  background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);\n  color: rgba(255, 255, 255, 0.87);\n  display: flex;\n  flex-direction: column;\n}\n\n/* =================================\n   \n   ================================= */\n\n.game-view {\n  width: 100vw;\n  height: 100vh;\n  position: relative;\n  overflow: hidden;\n}\n\n.back-to-home-btn {\n  position: absolute;\n  top: var(--space-md);\n  left: var(--space-md);\n  z-index: var(--z-fixed);\n  \n  display: flex;\n  align-items: center;\n  gap: var(--space-xs);\n  \n  background: rgba(239, 68, 68, 0.9);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  padding: var(--space-sm) var(--space-md);\n  \n  font-family: Inter, system-ui, sans-serif;\n  font-size: var(--text-sm);\n  font-weight: 600;\n  \n  backdrop-filter: blur(8px);\n  box-shadow: var(--shadow-card);\n  \n  transition: all var(--transition-fast);\n  cursor: pointer;\n}\n\n.back-to-home-btn:hover {\n  background: rgba(220, 38, 38, 0.95);\n  transform: translateY(-2px);\n  box-shadow: 0 8px 25px rgba(239, 68, 68, 0.3);\n}\n\n.back-to-home-btn:active {\n  transform: translateY(0);\n}\n\n.btn-icon {\n  font-size: var(--text-lg);\n  line-height: 1;\n}\n\n.btn-text {\n  font-weight: 600;\n}\n\n/*  */\n@media (max-width: 640px) {\n  .btn-text {\n    display: none;\n  }\n  \n  .back-to-home-btn {\n    width: var(--touch-target-comfortable);\n    height: var(--touch-target-comfortable);\n    padding: var(--space-xs);\n    justify-content: center;\n    border-radius: 50%;\n  }\n  \n  .game-view {\n    /*  */\n    height: 100vh;\n    height: 100dvh; /* Dynamic viewport height for mobile */\n    overflow: hidden;\n  }\n}\n\n/*  */\n@media (max-width: 768px) and (orientation: portrait) {\n  .game-view {\n    height: 100vh;\n    height: 100dvh;\n  }\n  \n  .back-to-home-btn {\n    top: max(var(--space-md), env(safe-area-inset-top, 0px));\n    left: max(var(--space-md), env(safe-area-inset-left, 0px));\n  }\n}\n\n/*  */\n@media (max-height: 600px) and (orientation: landscape) {\n  .back-to-home-btn {\n    top: var(--space-sm);\n    left: var(--space-sm);\n    width: var(--touch-target-min);\n    height: var(--touch-target-min);\n  }\n  \n  .game-view {\n    height: 100vh;\n    height: 100dvh;\n  }\n}\n\n/* =================================\n   \n   ================================= */\n\n.home-view {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: var(--space-md);\n  min-height: 100vh;\n}\n\n.home-container {\n  width: 100%;\n  max-width: 1200px;\n  margin: 0 auto;\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-3xl);\n}\n\n/*  AppHeader.vue  */\n\n/*  NavigationActions.vue  */\n\n/*  FeatureShowcase.vue  */\n\n/* =================================\n   \n   ================================= */\n\n.external-link {\n  margin-top: var(--space-lg);\n  padding-top: var(--space-md);\n  border-top: 1px solid rgba(129, 140, 248, 0.2);\n}\n\n.link-primary {\n  color: rgba(129, 140, 248, 1);\n  text-decoration: none;\n  font-weight: 500;\n  transition: color var(--transition-fast);\n}\n\n.link-primary:hover {\n  color: rgba(99, 102, 241, 1);\n  text-decoration: underline;\n}\n\n/* =================================\n   \n   ================================= */\n\n.footer-section {\n  text-align: center;\n  padding-top: var(--space-xl);\n  border-top: 1px solid rgba(129, 140, 248, 0.1);\n}\n\n.footer-nav {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: var(--space-sm);\n  flex-wrap: wrap;\n}\n\n.footer-link {\n  color: rgba(156, 163, 175, 1);\n  text-decoration: none;\n  font-size: var(--text-sm);\n  transition: color var(--transition-fast);\n}\n\n.footer-link:hover {\n  color: rgba(129, 140, 248, 1);\n}\n\n.footer-separator {\n  color: rgba(156, 163, 175, 0.6);\n  font-size: var(--text-sm);\n}\n\n/* =================================\n   \n   ================================= */\n\n/*  */\n.back-to-home-btn:focus,\n.primary-action-btn:focus,\n.secondary-action-btn:focus,\n.footer-link:focus,\n.link-primary:focus {\n  outline: 2px solid rgba(129, 140, 248, 0.8);\n  outline-offset: 2px;\n}\n\n/*  */\n@media (prefers-reduced-motion: reduce) {\n  .hero-title,\n  .info-card,\n  .back-to-home-btn,\n  .primary-action-btn,\n  .secondary-action-btn {\n    transition: none;\n  }\n  \n  .info-card:hover,\n  .primary-action-btn:hover,\n  .secondary-action-btn:hover {\n    transform: none;\n  }\n}\n\n/*  */\n@media (prefers-contrast: high) {\n  .info-card {\n    border-color: rgba(129, 140, 248, 0.6);\n    background: rgba(255, 255, 255, 0.1);\n  }\n  \n  .primary-action-btn,\n  .secondary-action-btn {\n    border: 2px solid white;\n  }\n}\n\n/* =================================\n   \n   ================================= */\n\n/*  */\n@media (max-width: 1024px) {\n  .home-container {\n    max-width: 768px;\n    gap: var(--space-2xl);\n  }\n  \n  .hero-section {\n    padding: var(--space-lg) 0;\n  }\n  \n  .info-grid {\n    grid-template-columns: 1fr;\n    max-width: 600px;\n    margin: 0 auto;\n  }\n}\n\n/*  */\n@media (max-width: 640px) {\n  .home-view {\n    padding: var(--space-sm);\n  }\n  \n  .home-container {\n    gap: var(--space-xl);\n  }\n  \n  .info-card {\n    padding: var(--space-lg);\n  }\n  \n  .card-title {\n    font-size: var(--text-xl);\n  }\n  \n  .feature-title,\n  .roadmap-title {\n    font-size: var(--text-base);\n  }\n}\n\n/*  */\n@media (max-width: 375px) {\n  .home-view {\n    padding: var(--space-xs);\n  }\n  \n  .info-card {\n    padding: var(--space-md);\n  }\n  \n  .hero-title {\n    font-size: 2rem;\n    line-height: 1.2;\n  }\n  \n  .hero-subtitle {\n    font-size: var(--text-base);\n    line-height: 1.5;\n  }\n  \n  .primary-action-btn,\n  .secondary-action-btn {\n    min-width: 160px;\n    padding: var(--space-sm) var(--space-lg);\n    font-size: var(--text-base);\n  }\n}\n\n/*  */\n@media (min-width: 1536px) {\n  .home-container {\n    max-width: 1400px;\n  }\n  \n  .info-grid {\n    grid-template-columns: repeat(2, 1fr);\n    gap: var(--space-2xl);\n  }\n}\n\n/* =================================\n   \n   ================================= */\n\n/*  */\n.sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border: 0;\n}\n\n/*  */\n.skip-links {\n  position: absolute;\n  top: -40px;\n  left: 6px;\n  z-index: var(--z-tooltip);\n}\n\n.skip-link {\n  position: absolute;\n  left: -10000px;\n  top: auto;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  background: var(--primary-dark);\n  color: white;\n  padding: var(--space-sm) var(--space-md);\n  text-decoration: none;\n  border-radius: 4px;\n  font-weight: 600;\n  border: 2px solid var(--primary-light);\n}\n\n.skip-link:focus {\n  position: static;\n  width: auto;\n  height: auto;\n  left: auto;\n  top: auto;\n  overflow: visible;\n}\n\n/*  */\n.keyboard-navigation *:focus {\n  outline: 3px solid var(--primary-light) !important;\n  outline-offset: 2px !important;\n  border-radius: 4px;\n}\n\n/*  */\n@media (prefers-contrast: high) {\n  .skip-link {\n    background: #000;\n    border: 3px solid #fff;\n  }\n  \n  .skip-link:focus {\n    background: #fff;\n    color: #000;\n    border-color: #000;\n  }\n  \n  .keyboard-navigation *:focus {\n    outline-color: #000 !important;\n    outline-width: 4px !important;\n  }\n}\n\n/*  */\n@media (prefers-reduced-motion: no-preference) {\n  .keyboard-navigation *:focus {\n    transition: outline-color var(--transition-fast);\n  }\n}\n\n/* =================================\n   \n   ================================= */\n\n.language-switcher-container {\n  position: fixed;\n  top: var(--space-lg);\n  right: var(--space-lg);\n  z-index: var(--z-fixed);\n}\n\n@media (max-width: 640px) {\n  .language-switcher-container {\n    top: var(--space-md);\n    right: var(--space-md);\n  }\n}\n\n/* =================================\n   \n   ================================= */\n\n.accessibility-button {\n  position: fixed;\n  bottom: var(--space-lg);\n  right: var(--space-lg);\n  z-index: var(--z-fixed);\n  \n  width: var(--touch-target-comfortable);\n  height: var(--touch-target-comfortable);\n  \n  display: flex;\n  align-items: center;\n  justify-content: center;\n  \n  background: rgba(129, 140, 248, 0.9);\n  color: white;\n  border: none;\n  border-radius: 50%;\n  \n  box-shadow: var(--shadow-card);\n  backdrop-filter: blur(8px);\n  \n  cursor: pointer;\n  transition: all var(--transition-normal);\n}\n\n.accessibility-button:hover {\n  background: rgba(99, 102, 241, 0.95);\n  transform: translateY(-4px) scale(1.1);\n  box-shadow: 0 12px 40px rgba(129, 140, 248, 0.4);\n}\n\n.accessibility-button:active {\n  transform: translateY(-2px) scale(1.05);\n}\n\n.accessibility-button:focus {\n  outline: 3px solid white;\n  outline-offset: 3px;\n}\n\n.accessibility-button svg {\n  width: 24px;\n  height: 24px;\n}\n\n/*  */\n@media (max-width: 640px) {\n  .accessibility-button {\n    bottom: var(--space-md);\n    right: var(--space-md);\n    width: var(--touch-target-min);\n    height: var(--touch-target-min);\n  }\n}\n\n/*  */\n.high-contrast {\n  /*  */\n  --bg-primary: #000000;\n  --bg-secondary: #0a0a0a;\n  --bg-card: rgba(255, 255, 255, 0.15);\n}\n\n.high-contrast .primary-action-btn,\n.high-contrast .secondary-action-btn {\n  border: 3px solid white;\n}\n\n.high-contrast .info-card {\n  border-width: 2px;\n  border-color: white;\n  background: rgba(0, 0, 0, 0.9);\n}\n\n.high-contrast .card-title {\n  color: #FFD43B;\n}\n\n.high-contrast .hero-title {\n  background: none;\n  -webkit-text-fill-color: white;\n  text-shadow: 2px 2px 4px black;\n}\n\n/*  */\n.reduce-motion * {\n  animation-duration: 0.01ms !important;\n  animation-iteration-count: 1 !important;\n  transition-duration: 0.01ms !important;\n}\n\n/* CSS */\n.app-container {\n  font-size: var(--base-font-size, 16px);\n}\n\n/*  */\nbutton,\na,\ninput,\nselect,\ntextarea,\n[role=\"button\"],\n[tabindex]:not([tabindex=\"-1\"]) {\n  min-width: var(--touch-target-size, 44px);\n  min-height: var(--touch-target-size, 44px);\n}\n\n/*  */\n@property --animation-speed-multiplier {\n  syntax: '<number>';\n  initial-value: 1;\n  inherits: true;\n}\n\n.game-card,\n.drop-zone,\n.info-card,\n.primary-action-btn,\n.secondary-action-btn {\n  transition-duration: calc(var(--transition-normal) / var(--animation-speed-multiplier, 1));\n}\n\n/* =================================\n   \n   ================================= */\n\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: var(--space-md);\n  backdrop-filter: blur(4px);\n}\n\n.modal-content {\n  width: 100%;\n  height: 100%;\n  max-width: 1400px;\n  max-height: 900px;\n  background: var(--bg-primary);\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  border: 1px solid rgba(129, 140, 248, 0.2);\n}\n\n@media (max-width: 640px) {\n  .modal-overlay {\n    padding: var(--space-xs);\n  }\n  \n  .modal-content {\n    border-radius: 12px;\n  }\n}\n</style>","/**\n * \n * \n */\n\nimport { generateSecureRandomString, RateLimiter } from './security'\n\n/**\n * \n * \n */\nexport class SecurityMonitor {\n  private static instance: SecurityMonitor\n  private suspiciousActivities: SuspiciousActivity[] = []\n  private readonly rateLimiters = new Map<string, RateLimiter>()\n  private readonly securityMetrics = {\n    totalThreatsBlocked: 0,\n    totalInputValidations: 0,\n    totalRateLimitViolations: 0,\n    sessionStartTime: Date.now()\n  }\n  \n  static getInstance(): SecurityMonitor {\n    if (!SecurityMonitor.instance) {\n      SecurityMonitor.instance = new SecurityMonitor()\n    }\n    return SecurityMonitor.instance\n  }\n  \n  /**\n   * \n   */\n  getSecurityMetrics() {\n    return {\n      ...this.securityMetrics,\n      uptime: Date.now() - this.securityMetrics.sessionStartTime,\n      currentThreats: this.suspiciousActivities.filter(a => \n        Date.now() - a.timestamp.getTime() < 60000 // 1\n      ).length\n    }\n  }\n  \n  /**\n   * \n   */\n  cleanupRateLimiters(): void {\n    for (const limiter of this.rateLimiters.values()) {\n      limiter.cleanup()\n    }\n  }\n  \n  /**\n   *  - \n   */\n  logSuspiciousActivity(activity: Omit<SuspiciousActivity, 'timestamp' | 'id'>): void {\n    const suspiciousActivity: SuspiciousActivity = {\n      ...activity,\n      id: generateSecureRandomString(16),\n      timestamp: new Date()\n    }\n    \n    this.suspiciousActivities.push(suspiciousActivity)\n    this.securityMetrics.totalThreatsBlocked++\n    \n    // 1000\n    if (this.suspiciousActivities.length > 1000) {\n      this.suspiciousActivities = this.suspiciousActivities.slice(-1000)\n    }\n    \n    // \n    const recentActivities = this.getRecentActivitiesByType(activity.type, 60000) // 1\n    if (recentActivities.length >= 5) {\n      // \n      suspiciousActivity.severity = 'high'\n      suspiciousActivity.description += ' ()'\n    }\n    \n    // \n    if (suspiciousActivity.severity === 'high' || suspiciousActivity.severity === 'critical') {\n      console.warn(`  [${suspiciousActivity.severity.toUpperCase()}]: ${suspiciousActivity.description}`)\n      \n      if (suspiciousActivity.severity === 'critical') {\n        // \n        this.handleCriticalThreat(suspiciousActivity)\n      }\n    }\n    \n    // \n    this.persistActivityToStorage(suspiciousActivity)\n  }\n  \n  /**\n   * \n   */\n  private getRecentActivitiesByType(type: string, timeWindowMs: number): SuspiciousActivity[] {\n    const cutoff = Date.now() - timeWindowMs\n    return this.suspiciousActivities.filter(activity => \n      activity.type === type && activity.timestamp.getTime() > cutoff\n    )\n  }\n  \n  /**\n   * \n   */\n  private persistActivityToStorage(activity: SuspiciousActivity): void {\n    try {\n      setTimeout(() => {\n        const existingLogs = JSON.parse(localStorage.getItem('security_incidents') || '[]')\n        existingLogs.push({\n          ...activity,\n          timestamp: activity.timestamp.toISOString()\n        })\n        // 500\n        const trimmedLogs = existingLogs.slice(-500)\n        localStorage.setItem('security_incidents', JSON.stringify(trimmedLogs))\n      }, 0)\n    } catch (error) {\n      console.error(':', error)\n    }\n  }\n  \n  /**\n   *  - \n   */\n  checkRateLimit(key: string, maxAttempts: number, windowMs: number, blockDurationMs = 60000): boolean {\n    if (!this.rateLimiters.has(key)) {\n      this.rateLimiters.set(key, new RateLimiter())\n    }\n    \n    const limiter = this.rateLimiters.get(key)!\n    const allowed = limiter.isAllowed(key, maxAttempts, windowMs, blockDurationMs)\n    \n    if (!allowed) {\n      this.securityMetrics.totalRateLimitViolations++\n      \n      const remainingAttempts = limiter.getRemainingAttempts(key, maxAttempts, windowMs)\n      const nextAttemptTime = limiter.getNextAttemptTime(key, windowMs)\n      \n      this.logSuspiciousActivity({\n        type: 'rate_limit_exceeded',\n        description: `: ${key}`,\n        severity: remainingAttempts === 0 ? 'high' : 'medium',\n        source: key,\n        metadata: {\n          maxAttempts,\n          windowMs,\n          blockDurationMs,\n          remainingAttempts,\n          nextAttemptTime\n        }\n      })\n    }\n    \n    return allowed\n  }\n  \n  /**\n   * \n   */\n  getSuspiciousActivities(limit = 100): SuspiciousActivity[] {\n    return this.suspiciousActivities\n      .slice(-limit)\n      .sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime())\n  }\n  \n  /**\n   *  - \n   */\n  generateSecurityReport(): SecurityReport {\n    const activities = this.getSuspiciousActivities()\n    const typeCount: Record<string, number> = {}\n    const severityCount: Record<string, number> = {}\n    const hourlyCount: Record<string, number> = {}\n    \n    activities.forEach(activity => {\n      typeCount[activity.type] = (typeCount[activity.type] || 0) + 1\n      severityCount[activity.severity] = (severityCount[activity.severity] || 0) + 1\n      \n      // 1\n      const hour = new Date(activity.timestamp).getHours()\n      hourlyCount[hour] = (hourlyCount[hour] || 0) + 1\n    })\n    \n    const metrics = this.getSecurityMetrics()\n    \n    return {\n      totalActivities: activities.length,\n      typeBreakdown: typeCount,\n      severityBreakdown: severityCount,\n      hourlyBreakdown: hourlyCount,\n      recentActivities: activities.slice(0, 10),\n      generateTime: new Date(),\n      metrics,\n      recommendations: this.generateSecurityRecommendations(typeCount, severityCount)\n    }\n  }\n  \n  /**\n   * \n   */\n  private generateSecurityRecommendations(\n    typeCount: Record<string, number>,\n    severityCount: Record<string, number>\n  ): string[] {\n    const recommendations: string[] = []\n    \n    // \n    if (typeCount['rate_limit_exceeded'] > 10) {\n      recommendations.push('')\n    }\n    \n    if (typeCount['invalid_input'] > 5) {\n      recommendations.push('')\n    }\n    \n    if (typeCount['csp_violation'] > 0) {\n      recommendations.push('Content Security Policy')\n    }\n    \n    if (severityCount['critical'] > 0) {\n      recommendations.push('')\n    }\n    \n    if (recommendations.length === 0) {\n      recommendations.push('')\n    }\n    \n    return recommendations\n  }\n  \n  /**\n   * \n   */\n  private handleCriticalThreat(activity: SuspiciousActivity): void {\n    // \n    try {\n      localStorage.clear()\n      sessionStorage.clear()\n    } catch (error) {\n      console.error(':', error)\n    }\n    \n    // \n    console.error(' CRITICAL SECURITY THREAT DETECTED ')\n    console.error('Activity:', activity)\n    console.error('All storage has been cleared as a security measure.')\n    \n    // \n    if (typeof window !== 'undefined') {\n      setTimeout(() => {\n        window.location.reload()\n      }, 1000)\n    }\n  }\n}\n\n/**\n *  - \n */\nexport function validateInputDepth(input: any, maxDepth = 10): boolean {\n  function getDepth(obj: any, currentDepth = 0): number {\n    if (currentDepth > maxDepth) return currentDepth\n    if (obj === null || typeof obj !== 'object') return currentDepth\n    \n    // \n    if (visitedObjects.has(obj)) {\n      SecurityMonitor.getInstance().logSuspiciousActivity({\n        type: 'circular_reference',\n        description: '',\n        severity: 'medium',\n        source: 'input_validation',\n        metadata: { currentDepth }\n      })\n      return maxDepth + 1 // \n    }\n    \n    visitedObjects.add(obj)\n    \n    try {\n      if (Array.isArray(obj)) {\n        // \n        if (obj.length > 10000) {\n          SecurityMonitor.getInstance().logSuspiciousActivity({\n            type: 'oversized_array',\n            description: `: ${obj.length}`,\n            severity: 'high',\n            source: 'input_validation',\n            metadata: { arrayLength: obj.length, currentDepth }\n          })\n          return maxDepth + 1\n        }\n        \n        return Math.max(currentDepth, ...obj.map(item => getDepth(item, currentDepth + 1)))\n      }\n      \n      // \n      const keys = Object.keys(obj)\n      if (keys.length > 1000) {\n        SecurityMonitor.getInstance().logSuspiciousActivity({\n          type: 'oversized_object',\n          description: `: ${keys.length}`,\n          severity: 'high',\n          source: 'input_validation',\n          metadata: { propertyCount: keys.length, currentDepth }\n        })\n        return maxDepth + 1\n      }\n      \n      return Math.max(currentDepth, ...Object.values(obj).map(value => getDepth(value, currentDepth + 1)))\n    } finally {\n      visitedObjects.delete(obj)\n    }\n  }\n  \n  const visitedObjects = new Set()\n  return getDepth(input) <= maxDepth\n}\n\n/**\n * \n */\nexport function validateUserInput(\n  input: unknown,\n  options: {\n    maxLength?: number\n    allowedTypes?: string[]\n    sanitize?: boolean\n    maxDepth?: number\n    checkPatterns?: RegExp[]\n  } = {}\n): { isValid: boolean; sanitizedInput?: string; errors: string[] } {\n  const {\n    maxLength = 1000,\n    allowedTypes = ['string', 'number', 'boolean'],\n    sanitize = true,\n    maxDepth = 10,\n    checkPatterns = []\n  } = options\n  \n  const errors: string[] = []\n  let sanitizedInput: string | undefined\n  \n  // \n  const inputType = typeof input\n  if (!allowedTypes.includes(inputType)) {\n    errors.push(`: ${inputType}`)\n    return { isValid: false, errors }\n  }\n  \n  // null/undefined\n  if (input === null || input === undefined) {\n    if (!allowedTypes.includes('null')) {\n      errors.push('nullundefined')\n      return { isValid: false, errors }\n    }\n  }\n  \n  // \n  if (inputType === 'string') {\n    const stringInput = input as string\n    \n    // \n    if (stringInput.length > maxLength) {\n      errors.push(`: ${stringInput.length}/${maxLength}`)\n    }\n    \n    // \n    for (const pattern of checkPatterns) {\n      if (!pattern.test(stringInput)) {\n        errors.push(`: ${pattern.source}`)\n      }\n    }\n    \n    // \n    if (sanitize) {\n      try {\n        sanitizedInput = sanitizeAdvancedInput(stringInput)\n      } catch (error) {\n        errors.push(`: ${error instanceof Error ? error.message : String(error)}`)\n      }\n    }\n  }\n  \n  // \n  if (input && typeof input === 'object') {\n    if (!validateInputDepth(input, maxDepth)) {\n      errors.push(`: ${maxDepth}`)\n    }\n  }\n  \n  const isValid = errors.length === 0\n  return { isValid, sanitizedInput, errors }\n}\n\n/**\n * \n */\nfunction sanitizeAdvancedInput(input: string): string {\n  return input\n    // \n    .replace(/\\/\\*[\\s\\S]*?\\*\\//g, '')\n    .replace(/\\/\\/.*$/gm, '')\n    // SQL\n    .replace(/['\"`;]/g, '')\n    .replace(/\\b(SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|EXEC|UNION|SCRIPT)\\b/gi, '')\n    // LDAP\n    .replace(/[()&|!=<>]/g, '')\n    // NoSQL\n    .replace(/[{}$]/g, '')\n    // XPath\n    .replace(/[/[\\]@]/g, '')\n    // \n    .replace(/[;&|`$\\\\]/g, '')\n    // \n    // eslint-disable-next-line no-control-regex\n    .replace(/[\\u0002-\\u001F\\u007F-\\u009F\\uFEFF]/g, '')\n    .trim()\n}\n\n/**\n * CSP (Content Security Policy) \n */\nexport function setupCSPMonitoring(): void {\n  if (typeof window !== 'undefined') {\n    document.addEventListener('securitypolicyviolation', (event: any) => {\n      SecurityMonitor.getInstance().logSuspiciousActivity({\n        type: 'csp_violation',\n        description: `CSP: ${event.violatedDirective}`,\n        severity: 'high',\n        source: event.sourceFile || 'unknown',\n        metadata: {\n          violatedDirective: event.violatedDirective,\n          blockedURI: event.blockedURI,\n          lineNumber: event.lineNumber,\n          columnNumber: event.columnNumber\n        }\n      })\n    })\n  }\n}\n\n/**\n * DOM\n */\nexport function setupDOMMonitoring(): void {\n  if (typeof window !== 'undefined' && window.MutationObserver) {\n    const observer = new MutationObserver((mutations) => {\n      mutations.forEach((mutation) => {\n        // \n        if (mutation.type === 'childList') {\n          mutation.addedNodes.forEach((node) => {\n            if (node.nodeType === Node.ELEMENT_NODE) {\n              const element = node as Element\n              \n              if (element.tagName === 'SCRIPT') {\n                const src = element.getAttribute('src')\n                if (src && !src.startsWith(window.location.origin)) {\n                  SecurityMonitor.getInstance().logSuspiciousActivity({\n                    type: 'external_script_injection',\n                    description: `: ${src}`,\n                    severity: 'critical',\n                    source: 'dom_monitor',\n                    metadata: { scriptSrc: src }\n                  })\n                }\n              }\n            }\n          })\n        }\n      })\n    })\n    \n    observer.observe(document.body, {\n      childList: true,\n      subtree: true\n    })\n  }\n}\n\n/**\n * \n */\nexport function setupNetworkMonitoring(): void {\n  if (typeof window !== 'undefined') {\n    // fetch \n    const originalFetch = window.fetch\n    window.fetch = async function(...args) {\n      const url = args[0]\n      const options = args[1] || {}\n      \n      // \n      if (typeof url === 'string' && url.startsWith('http') && !url.startsWith(window.location.origin)) {\n        SecurityMonitor.getInstance().logSuspiciousActivity({\n          type: 'external_network_request',\n          description: `: ${url}`,\n          severity: 'medium',\n          source: 'network_monitor',\n          metadata: { url, method: options.method || 'GET' }\n        })\n      }\n      \n      return originalFetch.apply(this, args)\n    }\n    \n    // XMLHttpRequest \n    const originalXHR = window.XMLHttpRequest\n    window.XMLHttpRequest = function() {\n      const xhr = new originalXHR()\n      const originalOpen = xhr.open\n      \n      xhr.open = function(method: string, url: string | URL, ...args: any[]) {\n        if (typeof url === 'string' && url.startsWith('http') && !url.startsWith(window.location.origin)) {\n          SecurityMonitor.getInstance().logSuspiciousActivity({\n            type: 'external_xhr_request',\n            description: `XHR: ${url}`,\n            severity: 'medium',\n            source: 'network_monitor',\n            metadata: { url, method }\n          })\n        }\n        \n        originalOpen.apply(this, [method, url, ...args]);\n      }\n      \n      return xhr\n    }\n  }\n}\n\n/**\n *  - \n */\nexport function setupDevToolsDetection(): void {\n  if (typeof window !== 'undefined') {\n    let devtools = false\n    let lastCheck = Date.now()\n    \n    // \n    const detectionMethods = {\n      // \n      sizeDetection(): boolean {\n        const threshold = 160\n        return (window.outerHeight - window.innerHeight > threshold || \n                window.outerWidth - window.innerWidth > threshold)\n      },\n      \n      // console.log\n      consoleDetection(): boolean {\n        const start = performance.now()\n        console.log('%c', 'color: transparent')\n        const end = performance.now()\n        return (end - start) > 100 // DevToolsconsole.log\n      },\n      \n      // debugger\n      debuggerDetection(): boolean {\n        const start = performance.now()\n        try {\n          // debugger\n          Function('debugger')() // DevTools\n        } catch {\n          // DevTools\n        }\n        const end = performance.now()\n        return (end - start) > 100\n      },\n      \n      // \n      contextMenuDetection(): boolean {\n        return document.addEventListener ? false : true // \n      }\n    }\n    \n    setInterval(() => {\n      // \n      if (typeof import.meta !== 'undefined' && import.meta.env && import.meta.env.DEV) {\n        return\n      }\n      \n      const now = Date.now()\n      \n      // \n      const detectionResults = {\n        size: detectionMethods.sizeDetection(),\n        console: (now - lastCheck) > 5000 ? detectionMethods.consoleDetection() : false,\n        debugger: (now - lastCheck) > 10000 ? detectionMethods.debuggerDetection() : false,\n        contextMenu: false // \n      }\n      \n      const isDetected = Object.values(detectionResults).some(Boolean)\n      \n      if (isDetected && !devtools) {\n        devtools = true\n        SecurityMonitor.getInstance().logSuspiciousActivity({\n          type: 'devtools_opened',\n          description: '',\n          severity: 'low',\n          source: 'devtools_detector',\n          metadata: {\n            detectionMethods: detectionResults,\n            outerHeight: window.outerHeight,\n            innerHeight: window.innerHeight,\n            outerWidth: window.outerWidth,\n            innerWidth: window.innerWidth,\n            userAgent: navigator.userAgent,\n            timestamp: now\n          }\n        })\n        \n        // \n        handleDevToolsDetection()\n      } else if (!isDetected && devtools) {\n        devtools = false\n      }\n      \n      if ((now - lastCheck) > 5000) {\n        lastCheck = now\n      }\n    }, 1000) // \n  }\n}\n\n/**\n * \n */\nfunction handleDevToolsDetection(): void {\n  // \n  if (typeof import.meta !== 'undefined' && import.meta.env && import.meta.env.DEV) {\n    return\n  }\n  \n  // \n  console.warn(\n    '%c ',\n    'color: red; font-size: 24px; font-weight: bold;'\n  )\n  console.warn(\n    '%c\\n',\n    'color: orange; font-size: 14px;'\n  )\n  \n  // \n  const monitor = SecurityMonitor.getInstance()\n  const userAgent = navigator.userAgent\n  \n  // \n  if (!monitor.checkRateLimit(`devtools_user_${userAgent}`, 10, 60000)) {\n    console.warn(' ')\n  }\n}\n\n/**\n *  - \n */\nexport function initializeSecurity(): void {\n  try {\n    // \n    setupCSPMonitoring()\n    setupDOMMonitoring()\n    setupNetworkMonitoring()\n    setupDevToolsDetection()\n    \n    // \n    setupInputValidationMonitoring()\n    setupPerformanceMonitoring()\n    setupMemoryLeakDetection()\n    \n    // \n    performInitialSecurityCheck()\n    \n    // \n    scheduleSecurityMaintenance()\n    \n    console.log('  ()')\n  } catch (error) {\n    console.error(' :', error)\n    SecurityMonitor.getInstance().logSuspiciousActivity({\n      type: 'security_init_failure',\n      description: `: ${error instanceof Error ? error.message : String(error)}`,\n      severity: 'critical',\n      source: 'security_initialization',\n      metadata: { error }\n    })\n  }\n}\n\n/**\n * \n */\nfunction setupInputValidationMonitoring(): void {\n  // \n  document.addEventListener('input', (event) => {\n    const target = event.target as HTMLInputElement\n    if (target && target.value) {\n      const validation = validateUserInput(target.value, {\n        maxLength: 1000,\n        sanitize: true,\n        checkPatterns: [/^[^<>\"'&{}$]*$/] // \n      })\n      \n      if (!validation.isValid) {\n        SecurityMonitor.getInstance().logSuspiciousActivity({\n          type: 'invalid_input',\n          description: `: ${validation.errors.join(', ')}`,\n          severity: 'medium',\n          source: 'input_validation_monitor',\n          metadata: {\n            inputValue: target.value.slice(0, 100), // 100\n            errors: validation.errors,\n            elementType: target.type,\n            elementName: target.name\n          }\n        })\n      }\n    }\n  })\n}\n\n/**\n * \n */\nfunction setupPerformanceMonitoring(): void {\n  if (typeof window !== 'undefined' && window.performance) {\n    // \n    const checkMemoryUsage = () => {\n      if ('memory' in performance) {\n        const memory = (performance as any).memory\n        const usedMB = Math.round(memory.usedJSHeapSize / 1024 / 1024)\n        const limitMB = Math.round(memory.jsHeapSizeLimit / 1024 / 1024)\n        const usagePercent = (usedMB / limitMB) * 100\n        \n        if (usagePercent > 80) {\n          SecurityMonitor.getInstance().logSuspiciousActivity({\n            type: 'high_memory_usage',\n            description: `: ${usagePercent.toFixed(1)}%`,\n            severity: 'medium',\n            source: 'performance_monitor',\n            metadata: {\n              usedMB,\n              limitMB,\n              usagePercent\n            }\n          })\n        }\n      }\n    }\n    \n    // 30\n    setInterval(checkMemoryUsage, 30000)\n  }\n}\n\n/**\n * \n */\nfunction setupMemoryLeakDetection(): void {\n  const objectCounts = new Map<string, number>()\n  \n  const checkObjectCounts = () => {\n    // \n    const globalKeys = Object.keys(window).length\n    const previousCount = objectCounts.get('global') || 0\n    \n    if (globalKeys > previousCount + 100) {\n      SecurityMonitor.getInstance().logSuspiciousActivity({\n        type: 'potential_memory_leak',\n        description: `: ${globalKeys}`,\n        severity: 'medium',\n        source: 'memory_leak_detector',\n        metadata: {\n          currentCount: globalKeys,\n          previousCount,\n          increase: globalKeys - previousCount\n        }\n      })\n    }\n    \n    objectCounts.set('global', globalKeys)\n  }\n  \n  // 60\n  setInterval(checkObjectCounts, 60000)\n}\n\n/**\n * \n */\nfunction performInitialSecurityCheck(): void {\n  // \n  const securityFeatures = {\n    crypto: Boolean(window.crypto),\n    subtle: Boolean(window.crypto && window.crypto.subtle),\n    csp: Boolean(document.querySelector('meta[http-equiv=\"Content-Security-Policy\"]')),\n    https: window.location.protocol === 'https:',\n    referrerPolicy: Boolean(document.querySelector('meta[name=\"referrer\"]'))\n  }\n  \n  const missingFeatures = Object.entries(securityFeatures)\n    .filter(([, supported]) => !supported)\n    .map(([feature]) => feature)\n  \n  if (missingFeatures.length > 0) {\n    SecurityMonitor.getInstance().logSuspiciousActivity({\n      type: 'missing_security_features',\n      description: `: ${missingFeatures.join(', ')}`,\n      severity: 'medium',\n      source: 'initial_security_check',\n      metadata: {\n        missingFeatures,\n        allFeatures: securityFeatures\n      }\n    })\n  }\n}\n\n/**\n * \n */\nfunction scheduleSecurityMaintenance(): void {\n  // 5\n  setInterval(() => {\n    SecurityMonitor.getInstance().cleanupRateLimiters()\n  }, 5 * 60 * 1000)\n  \n  // 1\n  setInterval(() => {\n    const report = SecurityMonitor.getInstance().generateSecurityReport()\n    if (report.totalActivities > 0) {\n      console.log(' :', report)\n    }\n  }, 60 * 60 * 1000)\n  \n  // 24\n  setInterval(() => {\n    const incidents = JSON.parse(localStorage.getItem('security_incidents') || '[]')\n    const oneDayAgo = Date.now() - (24 * 60 * 60 * 1000)\n    const recentIncidents = incidents.filter((incident: any) => \n      new Date(incident.timestamp).getTime() > oneDayAgo\n    )\n    localStorage.setItem('security_incidents', JSON.stringify(recentIncidents))\n  }, 24 * 60 * 60 * 1000)\n}\n\n/**\n * \n */\nexport async function validateSecurityHeaders(): Promise<SecurityHeaderReport> {\n  const report: SecurityHeaderReport = {\n    timestamp: new Date(),\n    headers: {},\n    recommendations: []\n  }\n  \n  try {\n    // \n    // MetaCSP\n    \n    // CSP\n    const cspMeta = document.querySelector('meta[http-equiv=\"Content-Security-Policy\"]')\n    if (cspMeta) {\n      report.headers['content-security-policy'] = cspMeta.getAttribute('content') || ''\n    } else {\n      report.recommendations.push('Content-Security-Policy (CSP) ')\n    }\n    \n    // \n    const referrerPolicy = document.querySelector('meta[name=\"referrer\"]')\n    if (!referrerPolicy) {\n      report.recommendations.push('Referrer-Policy ')\n    }\n    \n    // HTTPS \n    if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost') {\n      report.recommendations.push('HTTPS ')\n    }\n    \n  } catch (error) {\n    console.error(':', error)\n  }\n  \n  return report\n}\n\n// \nexport interface SuspiciousActivity {\n  id: string\n  type: string\n  description: string\n  severity: 'low' | 'medium' | 'high' | 'critical'\n  timestamp: Date\n  source: string\n  metadata?: Record<string, any>\n}\n\nexport interface SecurityReport {\n  totalActivities: number\n  typeBreakdown: Record<string, number>\n  severityBreakdown: Record<string, number>\n  hourlyBreakdown: Record<string, number>\n  recentActivities: SuspiciousActivity[]\n  generateTime: Date\n  metrics: any\n  recommendations: string[]\n}\n\nexport interface SecurityHeaderReport {\n  timestamp: Date\n  headers: Record<string, string>\n  recommendations: string[]\n}","/**\n * XSSCSRF\n * Content Security Policynonce\n */\n\nimport { sanitizeInput } from './security'\nimport { SecurityMonitor } from './security-extensions'\n\n/**\n * CSRF\n */\nfunction generateCSRFToken(): string {\n  // \n  const array = new Uint8Array(32)\n  if (typeof window !== 'undefined' && window.crypto && window.crypto.getRandomValues) {\n    window.crypto.getRandomValues(array)\n  } else {\n    // Math.random\n    for (let i = 0; i < array.length; i++) {\n      array[i] = Math.floor(Math.random() * 256)\n    }\n  }\n  return Array.from(array, byte => byte.toString(16).padStart(2, '0')).join('')\n}\n\n/**\n * CSRF\n */\nfunction validateCSRFToken(token: string, expectedToken: string): boolean {\n  if (!token || !expectedToken || token.length !== expectedToken.length) {\n    return false\n  }\n  \n  // \n  let result = 0\n  for (let i = 0; i < token.length; i++) {\n    result |= token.charCodeAt(i) ^ expectedToken.charCodeAt(i)\n  }\n  return result === 0\n}\n\n/**\n * XSS\n */\nexport class XSSProtection {\n  private static instance: XSSProtection\n  private trustedDomains: string[] = []\n  private allowedTags: string[] = ['b', 'i', 'em', 'strong', 'br', 'p']\n  private readonly allowedAttributes: string[] = ['class', 'data-*']\n\n  static getInstance(): XSSProtection {\n    if (!XSSProtection.instance) {\n      XSSProtection.instance = new XSSProtection()\n    }\n    return XSSProtection.instance\n  }\n\n  /**\n   * \n   */\n  setTrustedDomains(domains: string[]): void {\n    this.trustedDomains = domains.map(domain => domain.toLowerCase())\n  }\n\n  /**\n   * HTML\n   */\n  setAllowedTags(tags: string[]): void {\n    this.allowedTags = tags.map(tag => tag.toLowerCase())\n  }\n\n  /**\n   * HTML\n   */\n  sanitizeHTML(html: string): string {\n    if (typeof html !== 'string') {\n      return ''\n    }\n\n    // HTML\n    let sanitized = html\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&#x27;')\n      .replace(/\\//g, '&#x2F;')\n\n    // \n    for (const tag of this.allowedTags) {\n      const openTagRegex = new RegExp(`&lt;(${tag})&gt;`, 'gi')\n      const closeTagRegex = new RegExp(`&lt;\\\\/(${tag})&gt;`, 'gi')\n      \n      sanitized = sanitized\n        .replace(openTagRegex, `<$1>`)\n        .replace(closeTagRegex, `</$1>`)\n    }\n\n    return sanitized.slice(0, 10000) // \n  }\n\n  /**\n   * JavaScript\n   */\n  escapeJavaScript(str: string): string {\n    if (typeof str !== 'string') {\n      return ''\n    }\n\n    return str\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/'/g, \"\\\\'\")\n      .replace(/\"/g, '\\\\\"')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/\\t/g, '\\\\t')\n      // eslint-disable-next-line no-control-regex\n      .replace(/[\\u0009]/g, '\\\\t') // tab escape\n      .replace(/\\f/g, '\\\\f')\n      .replace(/\\v/g, '\\\\v')\n      // eslint-disable-next-line no-control-regex\n      .replace(/[\\u0001]/g, '\\\\x01') // control char escape\n      // eslint-disable-next-line no-control-regex\n      .replace(/[\\u0002-\\u001F\\u007F-\\u009F]/g, (match) => {\n        return `\\\\u${  (`0000${  match.charCodeAt(0).toString(16)}`).slice(-4)}`\n      })\n  }\n\n  /**\n   * URL\n   */\n  sanitizeURL(url: string): string {\n    if (typeof url !== 'string') {\n      return ''\n    }\n\n    try {\n      const parsedURL = new URL(url)\n      \n      // \n      const allowedProtocols = ['http:', 'https:', 'mailto:', 'tel:']\n      if (!allowedProtocols.includes(parsedURL.protocol)) {\n        SecurityMonitor.getInstance().logSuspiciousActivity({\n          type: 'blocked_dangerous_protocol',\n          description: `: ${parsedURL.protocol}`,\n          severity: 'high',\n          source: 'xss_protection',\n          metadata: { originalUrl: url, protocol: parsedURL.protocol }\n        })\n        return ''\n      }\n\n      // \n      if (this.trustedDomains.length > 0) {\n        const isHostTrusted = this.trustedDomains.some(domain => \n          parsedURL.hostname.endsWith(domain)\n        )\n        \n        if (!isHostTrusted && parsedURL.protocol !== 'mailto:' && parsedURL.protocol !== 'tel:') {\n          SecurityMonitor.getInstance().logSuspiciousActivity({\n            type: 'untrusted_domain',\n            description: `: ${parsedURL.hostname}`,\n            severity: 'medium',\n            source: 'xss_protection',\n            metadata: { originalUrl: url, hostname: parsedURL.hostname }\n          })\n          return ''\n        }\n      }\n\n      return parsedURL.toString()\n    } catch (error) {\n      SecurityMonitor.getInstance().logSuspiciousActivity({\n        type: 'invalid_url',\n        description: `URL: ${url}`,\n        severity: 'medium',\n        source: 'xss_protection',\n        metadata: { originalUrl: url, error: error instanceof Error ? error.message : String(error) }\n      })\n      return ''\n    }\n  }\n\n  /**\n   * DOM\n   */\n  validateDOMOperation(element: Element, operation: string, value?: string): boolean {\n    if (!element || !operation) {\n      return false\n    }\n\n    // innerHTML\n    if (operation === 'innerHTML' && value) {\n      const sanitizedValue = this.sanitizeHTML(value)\n      if (sanitizedValue !== value) {\n        SecurityMonitor.getInstance().logSuspiciousActivity({\n          type: 'blocked_unsafe_dom',\n          description: 'unsafe innerHTML',\n          severity: 'high',\n          source: 'xss_protection',\n          metadata: { \n            operation,\n            originalValue: value.slice(0, 200),\n            sanitizedValue: sanitizedValue.slice(0, 200)\n          }\n        })\n        return false\n      }\n    }\n\n    // \n    if (operation === 'setAttribute' && value) {\n      const [attrName] = (value).split('=', 1)\n      const dangerousAttributes = ['onload', 'onerror', 'onclick', 'onmouseover', 'style']\n      \n      if (dangerousAttributes.includes(attrName.toLowerCase())) {\n        SecurityMonitor.getInstance().logSuspiciousActivity({\n          type: 'blocked_dangerous_attribute',\n          description: `: ${attrName}`,\n          severity: 'high',\n          source: 'xss_protection',\n          metadata: { operation, attributeName: attrName }\n        })\n        return false\n      }\n    }\n\n    return true\n  }\n}\n\n/**\n * CSRF\n */\nexport class CSRFProtection {\n  private static instance: CSRFProtection\n  private readonly tokenStore = new Map<string, { token: string; expires: number }>()\n  private validOrigins: string[] = []\n\n  static getInstance(): CSRFProtection {\n    if (!CSRFProtection.instance) {\n      CSRFProtection.instance = new CSRFProtection()\n    }\n    return CSRFProtection.instance\n  }\n\n  /**\n   * \n   */\n  setValidOrigins(origins: string[]): void {\n    this.validOrigins = origins.map(origin => origin.toLowerCase())\n  }\n\n  /**\n   * CSRF\n   */\n  generateTokenForAction(action: string, expiryMinutes = 30): string {\n    const token = generateCSRFToken()\n    const expires = Date.now() + (expiryMinutes * 60 * 1000)\n    \n    this.tokenStore.set(action, { token, expires })\n    \n    // \n    this.cleanupExpiredTokens()\n    \n    return token\n  }\n\n  /**\n   * CSRF\n   */\n  validateTokenForAction(action: string, providedToken: string): boolean {\n    const tokenData = this.tokenStore.get(action)\n    \n    if (!tokenData) {\n      SecurityMonitor.getInstance().logSuspiciousActivity({\n        type: 'csrf_token_missing',\n        description: `CSRF token not found for action: ${action}`,\n        severity: 'high',\n        source: 'csrf_protection',\n        metadata: { action }\n      })\n      return false\n    }\n\n    if (Date.now() > tokenData.expires) {\n      this.tokenStore.delete(action)\n      SecurityMonitor.getInstance().logSuspiciousActivity({\n        type: 'csrf_token_expired',\n        description: `CSRF token expired for action: ${action}`,\n        severity: 'medium',\n        source: 'csrf_protection',\n        metadata: { action }\n      })\n      return false\n    }\n\n    const isValid = validateCSRFToken(providedToken, tokenData.token)\n    \n    if (!isValid) {\n      SecurityMonitor.getInstance().logSuspiciousActivity({\n        type: 'csrf_token_invalid',\n        description: `Invalid CSRF token for action: ${action}`,\n        severity: 'high',\n        source: 'csrf_protection',\n        metadata: { action }\n      })\n    }\n\n    // \n    if (isValid) {\n      this.tokenStore.delete(action)\n    }\n\n    return isValid\n  }\n\n  /**\n   * \n   */\n  validateOrigin(origin: string): boolean {\n    if (!origin) {\n      return false\n    }\n\n    const normalizedOrigin = origin.toLowerCase()\n    \n    if (this.validOrigins.length === 0) {\n      // \n      return normalizedOrigin === window.location.origin.toLowerCase()\n    }\n\n    const isValid = this.validOrigins.includes(normalizedOrigin)\n    \n    if (!isValid) {\n      SecurityMonitor.getInstance().logSuspiciousActivity({\n        type: 'csrf_invalid_origin',\n        description: `Invalid origin: ${origin}`,\n        severity: 'high',\n        source: 'csrf_protection',\n        metadata: { \n          providedOrigin: origin,\n          validOrigins: this.validOrigins \n        }\n      })\n    }\n\n    return isValid\n  }\n\n  /**\n   * Referer\n   */\n  validateReferer(referer: string): boolean {\n    if (!referer) {\n      return false // Referer\n    }\n\n    try {\n      const refererURL = new URL(referer)\n      const currentOrigin = window.location.origin.toLowerCase()\n      \n      return refererURL.origin.toLowerCase() === currentOrigin\n    } catch {\n      SecurityMonitor.getInstance().logSuspiciousActivity({\n        type: 'csrf_invalid_referer',\n        description: `Invalid referer: ${referer}`,\n        severity: 'medium',\n        source: 'csrf_protection',\n        metadata: { referer }\n      })\n      return false\n    }\n  }\n\n  /**\n   * \n   */\n  private cleanupExpiredTokens(): void {\n    const now = Date.now()\n    \n    for (const [action, tokenData] of this.tokenStore.entries()) {\n      if (now > tokenData.expires) {\n        this.tokenStore.delete(action)\n      }\n    }\n  }\n\n  /**\n   * \n   */\n  clearAllTokens(): void {\n    this.tokenStore.clear()\n  }\n}\n\n/**\n * Content Security PolicyCSP\n */\nexport class CSPManager {\n  private static instance: CSPManager\n  private readonly nonces = new Set<string>()\n  private readonly cspDirectives = new Map<string, string[]>()\n\n  static getInstance(): CSPManager {\n    if (!CSPManager.instance) {\n      CSPManager.instance = new CSPManager()\n    }\n    return CSPManager.instance\n  }\n\n  /**\n   * nonce\n   */\n  generateScriptNonce(): string {\n    const nonce = generateCSRFToken() // 32\n    this.nonces.add(nonce)\n    \n    // 1\n    setTimeout(() => {\n      this.nonces.delete(nonce)\n    }, 60 * 60 * 1000)\n    \n    return nonce\n  }\n\n  /**\n   * nonce\n   */\n  validateNonce(nonce: string): boolean {\n    return this.nonces.has(nonce)\n  }\n\n  /**\n   * CSP\n   */\n  setDirective(directive: string, values: string[]): void {\n    this.cspDirectives.set(directive, [...values])\n  }\n\n  /**\n   * CSP\n   */\n  addToDirective(directive: string, value: string): void {\n    const existing = this.cspDirectives.get(directive) || []\n    if (!existing.includes(value)) {\n      existing.push(value)\n      this.cspDirectives.set(directive, existing)\n    }\n  }\n\n  /**\n   * CSP\n   */\n  generateCSPHeader(): string {\n    const directives: string[] = []\n    \n    for (const [directive, values] of this.cspDirectives.entries()) {\n      directives.push(`${directive} ${values.join(' ')}`)\n    }\n    \n    return directives.join('; ')\n  }\n\n  /**\n   * CSP\n   */\n  applyCSPToDocument(): void {\n    // CSP\n    const existingMeta = document.querySelector('meta[http-equiv=\"Content-Security-Policy\"]')\n    if (existingMeta) {\n      existingMeta.remove()\n    }\n\n    // CSP\n    const meta = document.createElement('meta')\n    meta.httpEquiv = 'Content-Security-Policy'\n    meta.content = this.generateCSPHeader()\n    document.head.appendChild(meta)\n    \n    console.log(' CSP updated:', meta.content)\n  }\n\n  /**\n   * \n   */\n  executeScriptSafely(code: string, nonce?: string): boolean {\n    const scriptNonce = nonce || this.generateScriptNonce()\n    \n    if (!this.validateNonce(scriptNonce)) {\n      SecurityMonitor.getInstance().logSuspiciousActivity({\n        type: 'invalid_script_nonce',\n        description: 'Invalid nonce for script execution',\n        severity: 'high',\n        source: 'csp_manager',\n        metadata: { nonce: scriptNonce }\n      })\n      return false\n    }\n\n    try {\n      const script = document.createElement('script')\n      script.nonce = scriptNonce\n      script.textContent = code\n      document.head.appendChild(script)\n      document.head.removeChild(script)\n      return true\n    } catch (error) {\n      SecurityMonitor.getInstance().logSuspiciousActivity({\n        type: 'script_execution_failed',\n        description: 'Safe script execution failed',\n        severity: 'medium',\n        source: 'csp_manager',\n        metadata: { \n          error: error instanceof Error ? error.message : String(error),\n          nonce: scriptNonce\n        }\n      })\n      return false\n    }\n  }\n}\n\n/**\n * \n */\nexport class SecurityInterceptor {\n  private static instance: SecurityInterceptor\n  private readonly xssProtection = XSSProtection.getInstance()\n  private readonly csrfProtection = CSRFProtection.getInstance()\n  private readonly cspManager = CSPManager.getInstance()\n\n  static getInstance(): SecurityInterceptor {\n    if (!SecurityInterceptor.instance) {\n      SecurityInterceptor.instance = new SecurityInterceptor()\n    }\n    return SecurityInterceptor.instance\n  }\n\n  /**\n   * \n   */\n  validateFormSubmission(form: HTMLFormElement, csrfToken?: string): boolean {\n    const formData = new FormData(form)\n    let isValid = true\n\n    // CSRF \n    if (csrfToken) {\n      const action = form.getAttribute('data-action') || 'form_submit'\n      if (!this.csrfProtection.validateTokenForAction(action, csrfToken)) {\n        isValid = false\n      }\n    }\n\n    // \n    const origin = document.referrer || window.location.origin\n    if (!this.csrfProtection.validateOrigin(origin)) {\n      isValid = false\n    }\n\n    // \n    for (const [key, value] of formData.entries()) {\n      if (typeof value === 'string') {\n        try {\n          const sanitized = sanitizeInput(value)\n          if (sanitized !== value) {\n            SecurityMonitor.getInstance().logSuspiciousActivity({\n              type: 'form_input_sanitized',\n              description: `Form input was sanitized: ${key}`,\n              severity: 'low',\n              source: 'security_interceptor',\n              metadata: { \n                fieldName: key,\n                original: value.slice(0, 100),\n                sanitized: sanitized.slice(0, 100)\n              }\n            })\n          }\n        } catch (error) {\n          isValid = false\n          SecurityMonitor.getInstance().logSuspiciousActivity({\n            type: 'form_input_validation_failed',\n            description: `Form input validation failed: ${key}`,\n            severity: 'high',\n            source: 'security_interceptor',\n            metadata: { \n              fieldName: key,\n              error: error instanceof Error ? error.message : String(error)\n            }\n          })\n        }\n      }\n    }\n\n    return isValid\n  }\n\n  /**\n   * AJAX \n   */\n  validateAjaxRequest(url: string, method: string, headers: Record<string, string>, data?: any): boolean {\n    let isValid = true\n\n    // URL \n    const sanitizedURL = this.xssProtection.sanitizeURL(url)\n    if (!sanitizedURL) {\n      isValid = false\n    }\n\n    // CSRF POST, PUT, DELETE \n    const methodsRequiringCSRF = ['POST', 'PUT', 'DELETE', 'PATCH']\n    if (methodsRequiringCSRF.includes(method.toUpperCase())) {\n      const csrfToken = headers['X-CSRF-Token']\n      if (!csrfToken) {\n        SecurityMonitor.getInstance().logSuspiciousActivity({\n          type: 'missing_csrf_token',\n          description: `CSRF token missing for ${method} request`,\n          severity: 'high',\n          source: 'security_interceptor',\n          metadata: { url, method }\n        })\n        isValid = false\n      }\n    }\n\n    // \n    if (data && typeof data === 'object') {\n      try {\n        const jsonString = JSON.stringify(data)\n        if (jsonString.length > 100000) { // 100KB\n          SecurityMonitor.getInstance().logSuspiciousActivity({\n            type: 'oversized_request_payload',\n            description: `Request payload too large: ${jsonString.length} bytes`,\n            severity: 'medium',\n            source: 'security_interceptor',\n            metadata: { url, method, payloadSize: jsonString.length }\n          })\n          isValid = false\n        }\n      } catch {\n        isValid = false\n      }\n    }\n\n    return isValid\n  }\n\n  /**\n   * \n   */\n  initialize(): void {\n    // \n    this.xssProtection.setTrustedDomains([\n      window.location.hostname,\n      'cdn.jsdelivr.net',\n      'unpkg.com'\n    ])\n\n    // \n    this.csrfProtection.setValidOrigins([window.location.origin])\n\n    // CSP\n    this.cspManager.setDirective('default-src', [\"'self'\"])\n    this.cspManager.setDirective('script-src', [\"'self'\", \"'unsafe-inline'\"])\n    this.cspManager.setDirective('style-src', [\"'self'\", \"'unsafe-inline'\"])\n    this.cspManager.setDirective('img-src', [\"'self'\", 'data:', 'blob:'])\n    this.cspManager.setDirective('connect-src', [\"'self'\"])\n    this.cspManager.setDirective('font-src', [\"'self'\", 'data:'])\n    this.cspManager.setDirective('object-src', [\"'none'\"])\n    this.cspManager.setDirective('frame-src', [\"'none'\"])\n\n    console.log(' Security Interceptor initialized')\n  }\n}\n\n// \nif (typeof window !== 'undefined') {\n  document.addEventListener('DOMContentLoaded', () => {\n    SecurityInterceptor.getInstance().initialize()\n  })\n}\n\n// Classes are already exported above using 'export class' syntax","/**\n * Content Security Policy \n * nonceCSP\n */\n\nimport { generateSecureRandomString } from './security'\nimport { SecurityMonitor } from './security-extensions'\n\nexport interface CSPDirectives {\n  'default-src'?: string[]\n  'script-src'?: string[]\n  'style-src'?: string[]\n  'img-src'?: string[]\n  'connect-src'?: string[]\n  'font-src'?: string[]\n  'object-src'?: string[]\n  'media-src'?: string[]\n  'frame-src'?: string[]\n  'worker-src'?: string[]\n  'manifest-src'?: string[]\n  'base-uri'?: string[]\n  'form-action'?: string[]\n  'frame-ancestors'?: string[]\n  'report-uri'?: string[]\n  'report-to'?: string[]\n}\n\n/**\n * CSP\n */\nexport class CSPManager {\n  private static instance: CSPManager\n  private currentNonce: string = ''\n  private nonceExpiry: number = 0\n  private directives: CSPDirectives = {}\n  private violations: any[] = []\n  private reportEndpoint: string = ''\n\n  static getInstance(): CSPManager {\n    if (!CSPManager.instance) {\n      CSPManager.instance = new CSPManager()\n    }\n    return CSPManager.instance\n  }\n\n  /**\n   * CSP\n   */\n  initialize(): void {\n    this.setupDefaultDirectives()\n    this.setupViolationReporting()\n    this.updateCSPMetaTag()\n    this.scheduleNonceRotation()\n\n    console.log(' CSP Manager initialized with dynamic nonce support')\n  }\n\n  /**\n   * CSP\n   */\n  private setupDefaultDirectives(): void {\n    const scriptSources = [\"'self'\", `'nonce-${this.generateNewNonce()}'`];\n\n    // In development: allow localhost for dynamic imports (Vite), but exclude 'strict-dynamic'\n    // In production: use 'strict-dynamic' for enhanced security\n    if (process.env['NODE_ENV'] === 'development') {\n      scriptSources.push('http://localhost:*');\n    } else {\n      scriptSources.push(\"'strict-dynamic'\");\n    }\n\n    this.directives = {\n      'default-src': [\"'self'\"],\n      'script-src': scriptSources,\n      'style-src': [\"'self'\", \"'unsafe-inline'\"],\n      'img-src': [\"'self'\", 'data:', 'blob:', 'https:'],\n      'font-src': [\"'self'\", 'data:', 'https:'],\n      'connect-src': [\"'self'\", 'https:'],\n      'media-src': [\"'self'\"],\n      'object-src': [\"'none'\"],\n      'frame-src': [\"'none'\"],\n      'worker-src': [\"'self'\", 'blob:'],\n      'manifest-src': [\"'self'\"],\n      'base-uri': [\"'self'\"],\n      'form-action': [\"'self'\"],\n      'frame-ancestors': [\"'none'\"],\n      'report-uri': ['/api/csp-violation-report']\n    }\n  }\n\n  /**\n   * nonce\n   */\n  generateNewNonce(): string {\n    this.currentNonce = generateSecureRandomString(32)\n    this.nonceExpiry = Date.now() + (15 * 60 * 1000) // 15\n\n    SecurityMonitor.getInstance().logSuspiciousActivity({\n      type: 'nonce_generated',\n      description: 'New CSP nonce generated',\n      severity: 'low',\n      source: 'csp_manager',\n      metadata: {\n        nonceLength: this.currentNonce.length,\n        expiryTime: new Date(this.nonceExpiry).toISOString()\n      }\n    })\n\n    return this.currentNonce\n  }\n\n  /**\n   * nonce\n   */\n  getCurrentNonce(): string {\n    if (Date.now() > this.nonceExpiry) {\n      // nonce\n      this.generateNewNonce()\n      this.updateCSPMetaTag()\n    }\n\n    return this.currentNonce\n  }\n\n  /**\n   * nonce\n   */\n  validateNonce(providedNonce: string): boolean {\n    const now = Date.now()\n\n    if (now > this.nonceExpiry) {\n      SecurityMonitor.getInstance().logSuspiciousActivity({\n        type: 'expired_nonce_used',\n        description: 'Attempt to use expired nonce',\n        severity: 'medium',\n        source: 'csp_manager',\n        metadata: {\n          providedNonce: `${providedNonce.slice(0, 8)}...`,\n          expired: true,\n          expiryTime: new Date(this.nonceExpiry).toISOString()\n        }\n      })\n      return false\n    }\n\n    const isValid = providedNonce === this.currentNonce\n\n    if (!isValid) {\n      SecurityMonitor.getInstance().logSuspiciousActivity({\n        type: 'invalid_nonce_used',\n        description: 'Invalid nonce provided',\n        severity: 'high',\n        source: 'csp_manager',\n        metadata: {\n          providedNonce: `${providedNonce.slice(0, 8)}...`,\n          expectedNonce: `${this.currentNonce.slice(0, 8)}...`\n        }\n      })\n    }\n\n    return isValid\n  }\n\n  /**\n   * CSP\n   */\n  setDirective(directive: keyof CSPDirectives, values: string[]): void {\n    this.directives[directive] = [...values]\n    this.updateCSPMetaTag()\n  }\n\n  /**\n   * CSP\n   */\n  addToDirective(directive: keyof CSPDirectives, value: string): void {\n    if (!this.directives[directive]) {\n      this.directives[directive] = []\n    }\n\n    if (!this.directives[directive].includes(value)) {\n      this.directives[directive].push(value)\n      this.updateCSPMetaTag()\n    }\n  }\n\n  /**\n   * CSP\n   */\n  removeFromDirective(directive: keyof CSPDirectives, value: string): void {\n    if (this.directives[directive]) {\n      this.directives[directive] = this.directives[directive].filter(v => v !== value)\n      this.updateCSPMetaTag()\n    }\n  }\n\n  /**\n   * CSP\n   */\n  generateCSPHeader(forMetaTag = false): string {\n    const policies: string[] = []\n\n    // \n    const metaTagInvalidDirectives = [\n      'frame-ancestors',  // HTTP header\n      'report-uri',\n      'report-to',\n      'sandbox'\n    ]\n\n    for (const [directive, values] of Object.entries(this.directives)) {\n      // \n      if (forMetaTag && metaTagInvalidDirectives.includes(directive)) {\n        continue\n      }\n\n      if (values && values.length > 0) {\n        let policyValues = values.join(' ')\n\n        // noncenonce\n        policyValues = policyValues.replace(/\\$\\{nonce\\}/g, this.getCurrentNonce())\n\n        policies.push(`${directive} ${policyValues}`)\n      }\n    }\n\n    return policies.join('; ')\n  }\n\n  /**\n   * CSP\n   */\n  updateCSPMetaTag(): void {\n    if (typeof document === 'undefined') return\n\n    // CSP\n    const existingCSP = document.querySelector('meta[http-equiv=\"Content-Security-Policy\"]')\n    if (existingCSP) {\n      existingCSP.remove()\n    }\n\n    // CSP\n    const cspMeta = document.createElement('meta')\n    cspMeta.httpEquiv = 'Content-Security-Policy'\n    cspMeta.content = this.generateCSPHeader(true) // CSP\n    document.head.appendChild(cspMeta)\n\n    // HTML\n    const htmlContent = document.documentElement.outerHTML\n    if (htmlContent.includes('PLACEHOLDER_NONCE')) {\n      document.documentElement.outerHTML = htmlContent.replace(\n        /PLACEHOLDER_NONCE/g,\n        this.getCurrentNonce()\n      )\n    }\n\n    SecurityMonitor.getInstance().logSuspiciousActivity({\n      type: 'csp_updated',\n      description: 'CSP policy updated',\n      severity: 'low',\n      source: 'csp_manager',\n      metadata: {\n        policy: `${cspMeta.content.slice(0, 200)}...`,\n        nonce: `${this.currentNonce.slice(0, 8)}...`\n      }\n    })\n  }\n\n  /**\n   * CSP\n   */\n  private setupViolationReporting(): void {\n    if (typeof document === 'undefined') return\n\n    document.addEventListener('securitypolicyviolation', (event: any) => {\n      const violation = {\n        blockedURI: event.blockedURI,\n        columnNumber: event.columnNumber,\n        documentURI: event.documentURI,\n        effectiveDirective: event.effectiveDirective,\n        lineNumber: event.lineNumber,\n        originalPolicy: event.originalPolicy,\n        referrer: event.referrer,\n        sample: event.sample,\n        sourceFile: event.sourceFile,\n        statusCode: event.statusCode,\n        violatedDirective: event.violatedDirective,\n        timestamp: new Date().toISOString()\n      }\n\n      this.violations.push(violation)\n\n      // 100\n      if (this.violations.length > 100) {\n        this.violations = this.violations.slice(-100)\n      }\n\n      SecurityMonitor.getInstance().logSuspiciousActivity({\n        type: 'csp_violation',\n        description: `CSP violation: ${event.violatedDirective}`,\n        severity: this.assessViolationSeverity(event),\n        source: 'csp_violation_handler',\n        metadata: violation\n      })\n\n      // \n      if (this.reportEndpoint) {\n        this.sendViolationReport(violation)\n      }\n    })\n  }\n\n  /**\n   * CSP\n   */\n  private assessViolationSeverity(event: any): 'low' | 'medium' | 'high' | 'critical' {\n    // \n    if (event.violatedDirective.startsWith('script-src')) {\n      return event.blockedURI.includes('javascript:') ||\n        event.blockedURI.includes('data:') ? 'critical' : 'high'\n    }\n\n    // \n    if (event.sample && (\n      event.sample.includes('eval(') ||\n      event.sample.includes('Function(') ||\n      event.sample.includes('setTimeout(') ||\n      event.sample.includes('setInterval(')\n    )) {\n      return 'high'\n    }\n\n    // \n    if (event.effectiveDirective.includes('-src') &&\n      !event.blockedURI.startsWith(window.location.origin)) {\n      return 'medium'\n    }\n\n    return 'low'\n  }\n\n  /**\n   * \n   */\n  private async sendViolationReport(violation: any): Promise<void> {\n    try {\n      await fetch(this.reportEndpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          'csp-report': violation\n        })\n      })\n    } catch (error) {\n      console.warn('CSP violation report failed:', error)\n    }\n  }\n\n  /**\n   * nonce\n   */\n  private scheduleNonceRotation(): void {\n    // 10nonce\n    setInterval(() => {\n      this.generateNewNonce()\n      this.updateCSPMetaTag()\n    }, 10 * 60 * 1000)\n  }\n\n  /**\n   * \n   */\n  executeScriptWithNonce(code: string): boolean {\n    if (typeof document === 'undefined') return false\n\n    try {\n      const script = document.createElement('script')\n      script.nonce = this.getCurrentNonce()\n      script.textContent = code\n\n      document.head.appendChild(script)\n      document.head.removeChild(script)\n\n      return true\n    } catch (error) {\n      SecurityMonitor.getInstance().logSuspiciousActivity({\n        type: 'safe_script_execution_failed',\n        description: 'Failed to execute script with nonce',\n        severity: 'medium',\n        source: 'csp_manager',\n        metadata: {\n          error: error instanceof Error ? error.message : String(error),\n          codeLength: code.length\n        }\n      })\n      return false\n    }\n  }\n\n  /**\n   * \n   */\n  addStyleWithNonce(css: string): boolean {\n    if (typeof document === 'undefined') return false\n\n    try {\n      const style = document.createElement('style')\n      style.nonce = this.getCurrentNonce()\n      style.textContent = css\n\n      document.head.appendChild(style)\n\n      return true\n    } catch (error) {\n      SecurityMonitor.getInstance().logSuspiciousActivity({\n        type: 'safe_style_addition_failed',\n        description: 'Failed to add style with nonce',\n        severity: 'medium',\n        source: 'csp_manager',\n        metadata: {\n          error: error instanceof Error ? error.message : String(error),\n          cssLength: css.length\n        }\n      })\n      return false\n    }\n  }\n\n  /**\n   * CSP\n   */\n  getViolationHistory(limit = 50): any[] {\n    return this.violations.slice(-limit)\n  }\n\n  /**\n   * CSP\n   */\n  getViolationStats(): { total: number; byDirective: Record<string, number>; bySource: Record<string, number> } {\n    const stats = {\n      total: this.violations.length,\n      byDirective: {} as Record<string, number>,\n      bySource: {} as Record<string, number>\n    }\n\n    this.violations.forEach(violation => {\n      const directive = violation.effectiveDirective || 'unknown'\n      const source = violation.sourceFile || 'inline'\n\n      stats.byDirective[directive] = (stats.byDirective[directive] || 0) + 1\n      stats.bySource[source] = (stats.bySource[source] || 0) + 1\n    })\n\n    return stats\n  }\n\n  /**\n   * \n   */\n  setReportEndpoint(endpoint: string): void {\n    this.reportEndpoint = endpoint\n    this.addToDirective('report-uri', endpoint)\n  }\n\n  /**\n   * CSP\n   */\n  debugCSP(): void {\n    console.group(' CSP Debug Information')\n    console.log('Current Nonce:', this.currentNonce)\n    console.log('Nonce Expiry:', new Date(this.nonceExpiry))\n    console.log('Current Policy:', this.generateCSPHeader())\n    console.log('Violation Count:', this.violations.length)\n    console.log('Recent Violations:', this.violations.slice(-5))\n    console.groupEnd()\n  }\n}\n\n/**\n * \n */\nexport class SecurityHeaderManager {\n  private static instance: SecurityHeaderManager\n\n  static getInstance(): SecurityHeaderManager {\n    if (!SecurityHeaderManager.instance) {\n      SecurityHeaderManager.instance = new SecurityHeaderManager()\n    }\n    return SecurityHeaderManager.instance\n  }\n\n  /**\n   * \n   */\n  initializeSecurityHeaders(): void {\n    this.setContentTypeOptions()\n    // X-Frame-Optionsmeta\n    // this.setFrameOptions()\n    this.setXSSProtection()\n    this.setReferrerPolicy()\n    this.setPermissionsPolicy()\n    this.setStrictTransportSecurity()\n    this.setCrossOriginPolicies()\n\n    console.log(' Security headers initialized (X-Frame-Options skipped for meta tag compatibility)')\n  }\n\n  /**\n   * X-Content-Type-Options \n   */\n  private setContentTypeOptions(): void {\n    this.updateMetaTag('X-Content-Type-Options', 'nosniff')\n  }\n\n  /**\n   * X-Frame-Options \n   */\n  private setFrameOptions(): void {\n    this.updateMetaTag('X-Frame-Options', 'DENY')\n  }\n\n  /**\n   * X-XSS-Protection \n   */\n  private setXSSProtection(): void {\n    this.updateMetaTag('X-XSS-Protection', '1; mode=block')\n  }\n\n  /**\n   * Referrer Policy \n   */\n  private setReferrerPolicy(): void {\n    const meta = document.querySelector('meta[name=\"referrer\"]') as HTMLMetaElement\n    if (!meta) {\n      const newMeta = document.createElement('meta')\n      newMeta.name = 'referrer'\n      newMeta.content = 'strict-origin-when-cross-origin'\n      document.head.appendChild(newMeta)\n    }\n  }\n\n  /**\n   * Permissions Policy \n   */\n  private setPermissionsPolicy(): void {\n    const policy = [\n      'geolocation=()',\n      'microphone=()',\n      'camera=()',\n      'fullscreen=(self)',\n      'payment=()',\n      'usb=()',\n      'serial=()',\n      'hid=()',\n      'midi=()',\n      'clipboard-read=()',\n      'clipboard-write=(self)',\n      'accelerometer=()',\n      'gyroscope=()',\n      'magnetometer=()',\n      'ambient-light-sensor=()',\n      'encrypted-media=()',\n      'picture-in-picture=()',\n      'display-capture=()'\n    ].join(', ')\n\n    this.updateMetaTag('Permissions-Policy', policy)\n  }\n\n  /**\n   * Strict-Transport-Security \n   */\n  private setStrictTransportSecurity(): void {\n    // HTTPS\n    if (window.location.protocol === 'https:') {\n      this.updateMetaTag('Strict-Transport-Security', 'max-age=31536000; includeSubDomains; preload')\n    }\n  }\n\n  /**\n   * Cross-Origin policies\n   */\n  private setCrossOriginPolicies(): void {\n    this.updateMetaTag('Cross-Origin-Embedder-Policy', 'require-corp')\n    this.updateMetaTag('Cross-Origin-Opener-Policy', 'same-origin')\n    this.updateMetaTag('Cross-Origin-Resource-Policy', 'same-origin')\n  }\n\n  /**\n   * \n   */\n  private updateMetaTag(httpEquiv: string, content: string): void {\n    if (typeof document === 'undefined') return\n\n    let meta = document.querySelector(`meta[http-equiv=\"${httpEquiv}\"]`) as HTMLMetaElement\n\n    if (!meta) {\n      meta = document.createElement('meta')\n      meta.httpEquiv = httpEquiv\n      document.head.appendChild(meta)\n    }\n\n    meta.content = content\n  }\n\n  /**\n   * \n   */\n  validateSecurityHeaders(): { valid: string[]; missing: string[]; recommendations: string[] } {\n    const requiredHeaders = [\n      'Content-Security-Policy',\n      'X-Content-Type-Options',\n      'X-Frame-Options',\n      'X-XSS-Protection',\n      'Strict-Transport-Security',\n      'Cross-Origin-Embedder-Policy',\n      'Cross-Origin-Opener-Policy'\n    ]\n\n    const valid: string[] = []\n    const missing: string[] = []\n    const recommendations: string[] = []\n\n    requiredHeaders.forEach(header => {\n      const meta = document.querySelector(`meta[http-equiv=\"${header}\"]`)\n      if (meta) {\n        valid.push(header)\n      } else {\n        missing.push(header)\n      }\n    })\n\n    // HTTPS\n    if (window.location.protocol !== 'https:') {\n      recommendations.push('HTTPS')\n    }\n\n    // Referrer Policy\n    const referrerMeta = document.querySelector('meta[name=\"referrer\"]')\n    if (!referrerMeta) {\n      recommendations.push('Referrer Policy')\n    }\n\n    return { valid, missing, recommendations }\n  }\n}\n\n// main.ts\n// \n// const cspManager = CSPManager.getInstance()\n// const headerManager = SecurityHeaderManager.getInstance()\n// cspManager.initialize()\n// headerManager.initializeSecurityHeaders()","/**\n * \n * \n */\n\nimport { generateSecureHash, secureLocalStorage } from './security'\nimport { SecurityMonitor } from './security-extensions'\n\nexport interface SecurityAuditEvent {\n  id: string\n  timestamp: Date\n  eventType: string\n  severity: 'low' | 'medium' | 'high' | 'critical'\n  source: string\n  message: string\n  metadata: Record<string, any>\n  userAgent: string\n  ipAddress?: string\n  sessionId?: string\n  userId?: string\n  stackTrace?: string\n  hash: string // \n}\n\nexport interface SecurityAuditFilter {\n  startDate?: Date\n  endDate?: Date\n  eventTypes?: string[]\n  severities?: string[]\n  sources?: string[]\n  searchTerm?: string\n}\n\nexport interface SecurityAuditReport {\n  generatedAt: Date\n  period: { start: Date; end: Date }\n  summary: {\n    totalEvents: number\n    criticalEvents: number\n    highSeverityEvents: number\n    mediumSeverityEvents: number\n    lowSeverityEvents: number\n    uniqueEventTypes: number\n    uniqueSources: number\n  }\n  topEventTypes: Array<{ type: string; count: number }>\n  topSources: Array<{ source: string; count: number }>\n  severityTrend: Array<{ date: string; critical: number; high: number; medium: number; low: number }>\n  recommendations: string[]\n  events: SecurityAuditEvent[]\n}\n\n/**\n * \n */\nexport class SecurityAuditLogger {\n  private static instance: SecurityAuditLogger\n  private readonly storage = secureLocalStorage()\n  private eventQueue: SecurityAuditEvent[] = []\n  private isProcessingQueue = false\n  private readonly maxEventsInMemory = 1000\n  private readonly maxEventsInStorage = 5000\n  private readonly sessionId: string\n  private logErrorCount = 0\n  private lastLogErrorReset = Date.now()\n  private readonly MAX_LOG_ERRORS_PER_MINUTE = 50\n  private config = {\n    enableStackTrace: true,\n    enableGeoLocation: false,\n    enablePerformanceMetrics: true,\n    autoFlushInterval: 30000, // 30\n    compressionThreshold: 200 // 200\n  }\n\n  private constructor() {\n    this.sessionId = this.generateSessionId()\n    this.startAutoFlush()\n    this.setupUnloadHandler()\n  }\n\n  static getInstance(): SecurityAuditLogger {\n    if (!SecurityAuditLogger.instance) {\n      SecurityAuditLogger.instance = new SecurityAuditLogger()\n    }\n    return SecurityAuditLogger.instance\n  }\n\n  /**\n   * ID\n   */\n  private generateSessionId(): string {\n    const timestamp = Date.now().toString(36)\n    const random = Math.random().toString(36).substr(2, 9)\n    return `session_${timestamp}_${random}`\n  }\n\n  /**\n   * \n   */\n  async logSecurityEvent(\n    eventType: string,\n    severity: 'low' | 'medium' | 'high' | 'critical',\n    source: string,\n    message: string,\n    metadata: Record<string, any> = {}\n  ): Promise<void> {\n    try {\n      const event: SecurityAuditEvent = {\n        id: await this.generateEventId(),\n        timestamp: new Date(),\n        eventType,\n        severity,\n        source,\n        message,\n        metadata: {\n          ...metadata,\n          url: window.location.href,\n          referrer: document.referrer,\n          viewport: {\n            width: window.innerWidth,\n            height: window.innerHeight\n          },\n          ...(this.config.enablePerformanceMetrics && this.getPerformanceMetrics())\n        },\n        userAgent: navigator.userAgent,\n        sessionId: this.sessionId,\n        stackTrace: this.config.enableStackTrace ? this.captureStackTrace() : undefined,\n        hash: '' // \n      }\n\n      // \n      event.hash = await this.calculateEventHash(event)\n\n      // \n      this.eventQueue.push(event)\n\n      // \n      if (this.eventQueue.length > this.maxEventsInMemory) {\n        this.eventQueue = this.eventQueue.slice(-this.maxEventsInMemory)\n      }\n\n      // \n      if (severity === 'critical' || severity === 'high') {\n        await this.flushQueue()\n      }\n\n      // SecurityMonitor\n      SecurityMonitor.getInstance().logSuspiciousActivity({\n        type: eventType,\n        description: message,\n        severity,\n        source,\n        metadata\n      })\n\n    } catch (error) {\n      // \n      const now = Date.now()\n      if (now - this.lastLogErrorReset > 60000) {\n        this.logErrorCount = 0\n        this.lastLogErrorReset = now\n      }\n      \n      // \n      if (this.logErrorCount >= this.MAX_LOG_ERRORS_PER_MINUTE) {\n        return // \n      }\n      \n      this.logErrorCount++\n      \n      // console.error\n      const originalError = (console as any).originalError || console.error\n      \n      // \n      if (this.logErrorCount <= 5) { // 5\n        originalError.call(console, ':', error)\n      }\n      // : \n      if (severity === 'critical' && this.logErrorCount <= 10) {\n        console.warn(` Security Event: ${eventType} [${severity.toUpperCase()}] ${message}`)\n      }\n    }\n  }\n\n  /**\n   * ID\n   */\n  private async generateEventId(): Promise<string> {\n    const timestamp = Date.now().toString()\n    const random = Math.random().toString()\n    const hash = await generateSecureHash(timestamp + random)\n    return hash.slice(0, 16)\n  }\n\n  /**\n   * \n   */\n  private async calculateEventHash(event: Omit<SecurityAuditEvent, 'hash'>): Promise<string> {\n    const eventString = JSON.stringify({\n      id: event.id,\n      timestamp: event.timestamp.toISOString(),\n      eventType: event.eventType,\n      severity: event.severity,\n      source: event.source,\n      message: event.message,\n      sessionId: event.sessionId\n    })\n    return await generateSecureHash(eventString)\n  }\n\n  /**\n   * \n   */\n  private captureStackTrace(): string {\n    try {\n      throw new Error()\n    } catch (error) {\n      if (error instanceof Error && error.stack) {\n        return error.stack.split('\\n').slice(3, 8).join('\\n') // \n      }\n      return ''\n    }\n  }\n\n  /**\n   * \n   */\n  private getPerformanceMetrics(): Record<string, any> {\n    if (!performance) return {}\n\n    const navigation = performance.getEntriesByType('navigation')[0] as PerformanceNavigationTiming\n    const memory = (performance as any).memory\n\n    return {\n      loadTime: navigation ? navigation.loadEventEnd - navigation.loadEventStart : 0,\n      domContentLoaded: navigation ? navigation.domContentLoadedEventEnd - navigation.domContentLoadedEventStart : 0,\n      memoryUsage: memory ? {\n        used: Math.round(memory.usedJSHeapSize / 1024 / 1024), // MB\n        total: Math.round(memory.totalJSHeapSize / 1024 / 1024), // MB\n        limit: Math.round(memory.jsHeapSizeLimit / 1024 / 1024) // MB\n      } : null,\n      timing: performance.now()\n    }\n  }\n\n  /**\n   * \n   */\n  private async flushQueue(): Promise<void> {\n    if (this.isProcessingQueue || this.eventQueue.length === 0) {\n      return\n    }\n\n    this.isProcessingQueue = true\n\n    try {\n      // \n      const existingEvents = await this.storage.getItem<SecurityAuditEvent[]>('security_audit_log', true) || []\n      \n      // \n      const allEvents = [...existingEvents, ...this.eventQueue]\n      \n      // \n      const trimmedEvents = allEvents.slice(-this.maxEventsInStorage)\n      \n      // \n      const shouldCompress = trimmedEvents.length >= this.config.compressionThreshold\n      \n      // \n      await this.storage.setItem('security_audit_log', trimmedEvents, shouldCompress)\n      \n      // \n      await this.updateAuditMetadata(trimmedEvents)\n      \n      // \n      this.eventQueue = []\n      \n      console.log(` ${trimmedEvents.length}`)\n      \n    } catch (error) {\n      console.error(':', error)\n      \n      // : \n      // \n      if (this.eventQueue.length > this.maxEventsInMemory) {\n        this.eventQueue = this.eventQueue.slice(-Math.floor(this.maxEventsInMemory / 2))\n      }\n    } finally {\n      this.isProcessingQueue = false\n    }\n  }\n\n  /**\n   * \n   */\n  private async updateAuditMetadata(events: SecurityAuditEvent[]): Promise<void> {\n    const metadata = {\n      lastUpdated: new Date().toISOString(),\n      totalEvents: events.length,\n      oldestEvent: events.length > 0 ? events[0].timestamp.toISOString() : null,\n      newestEvent: events.length > 0 ? events[events.length - 1].timestamp.toISOString() : null,\n      sessionId: this.sessionId,\n      eventTypes: [...new Set(events.map(e => e.eventType))],\n      sources: [...new Set(events.map(e => e.source))],\n      severityCounts: {\n        critical: events.filter(e => e.severity === 'critical').length,\n        high: events.filter(e => e.severity === 'high').length,\n        medium: events.filter(e => e.severity === 'medium').length,\n        low: events.filter(e => e.severity === 'low').length\n      }\n    }\n\n    await this.storage.setItem('security_audit_metadata', metadata, true)\n  }\n\n  /**\n   * \n   */\n  async searchEvents(filter: SecurityAuditFilter = {}): Promise<SecurityAuditEvent[]> {\n    try {\n      const allEvents = await this.storage.getItem<SecurityAuditEvent[]>('security_audit_log', true) || []\n      \n      let filteredEvents = allEvents\n\n      // \n      if (filter.startDate) {\n        filteredEvents = filteredEvents.filter(event => \n          new Date(event.timestamp) >= filter.startDate!\n        )\n      }\n      \n      if (filter.endDate) {\n        filteredEvents = filteredEvents.filter(event => \n          new Date(event.timestamp) <= filter.endDate!\n        )\n      }\n\n      // \n      if (filter.eventTypes && filter.eventTypes.length > 0) {\n        filteredEvents = filteredEvents.filter(event => \n          filter.eventTypes!.includes(event.eventType)\n        )\n      }\n\n      // \n      if (filter.severities && filter.severities.length > 0) {\n        filteredEvents = filteredEvents.filter(event => \n          filter.severities!.includes(event.severity)\n        )\n      }\n\n      // \n      if (filter.sources && filter.sources.length > 0) {\n        filteredEvents = filteredEvents.filter(event => \n          filter.sources!.includes(event.source)\n        )\n      }\n\n      // \n      if (filter.searchTerm) {\n        const searchTerm = filter.searchTerm.toLowerCase()\n        filteredEvents = filteredEvents.filter(event => \n          event.message.toLowerCase().includes(searchTerm) ||\n          event.eventType.toLowerCase().includes(searchTerm) ||\n          event.source.toLowerCase().includes(searchTerm)\n        )\n      }\n\n      return filteredEvents.sort((a, b) => \n        new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime()\n      )\n\n    } catch (error) {\n      console.error(':', error)\n      return []\n    }\n  }\n\n  /**\n   * \n   */\n  async generateAuditReport(startDate?: Date, endDate?: Date): Promise<SecurityAuditReport> {\n    const now = new Date()\n    const start = startDate || new Date(now.getTime() - (7 * 24 * 60 * 60 * 1000)) // : 7\n    const end = endDate || now\n\n    const events = await this.searchEvents({ startDate: start, endDate: end })\n\n    // \n    const severityCounts = {\n      critical: events.filter(e => e.severity === 'critical').length,\n      high: events.filter(e => e.severity === 'high').length,\n      medium: events.filter(e => e.severity === 'medium').length,\n      low: events.filter(e => e.severity === 'low').length\n    }\n\n    const eventTypeCount = new Map<string, number>()\n    const sourceCount = new Map<string, number>()\n\n    events.forEach(event => {\n      eventTypeCount.set(event.eventType, (eventTypeCount.get(event.eventType) || 0) + 1)\n      sourceCount.set(event.source, (sourceCount.get(event.source) || 0) + 1)\n    })\n\n    const topEventTypes = Array.from(eventTypeCount.entries())\n      .map(([type, count]) => ({ type, count }))\n      .sort((a, b) => b.count - a.count)\n      .slice(0, 10)\n\n    const topSources = Array.from(sourceCount.entries())\n      .map(([source, count]) => ({ source, count }))\n      .sort((a, b) => b.count - a.count)\n      .slice(0, 10)\n\n    // \n    const severityTrend = this.calculateSeverityTrend(events, start, end)\n\n    // \n    const recommendations = this.generateRecommendations(events, severityCounts)\n\n    return {\n      generatedAt: now,\n      period: { start, end },\n      summary: {\n        totalEvents: events.length,\n        criticalEvents: severityCounts.critical,\n        highSeverityEvents: severityCounts.high,\n        mediumSeverityEvents: severityCounts.medium,\n        lowSeverityEvents: severityCounts.low,\n        uniqueEventTypes: eventTypeCount.size,\n        uniqueSources: sourceCount.size\n      },\n      topEventTypes,\n      topSources,\n      severityTrend,\n      recommendations,\n      events: events.slice(0, 100) // 100\n    }\n  }\n\n  /**\n   * \n   */\n  private calculateSeverityTrend(\n    events: SecurityAuditEvent[], \n    startDate: Date, \n    endDate: Date\n  ): Array<{ date: string; critical: number; high: number; medium: number; low: number }> {\n    const trend: Array<{ date: string; critical: number; high: number; medium: number; low: number }> = []\n    const msPerDay = 24 * 60 * 60 * 1000\n    \n    for (let date = new Date(startDate); date <= endDate; date.setTime(date.getTime() + msPerDay)) {\n      const dateStr = date.toISOString().split('T')[0]\n      const dayEvents = events.filter(event => \n        event.timestamp.toISOString().split('T')[0] === dateStr\n      )\n      \n      trend.push({\n        date: dateStr,\n        critical: dayEvents.filter(e => e.severity === 'critical').length,\n        high: dayEvents.filter(e => e.severity === 'high').length,\n        medium: dayEvents.filter(e => e.severity === 'medium').length,\n        low: dayEvents.filter(e => e.severity === 'low').length\n      })\n    }\n    \n    return trend\n  }\n\n  /**\n   * \n   */\n  private generateRecommendations(\n    events: SecurityAuditEvent[], \n    severityCounts: Record<string, number>\n  ): string[] {\n    const recommendations: string[] = []\n\n    // \n    if (severityCounts.critical > 0) {\n      recommendations.push(' ')\n    }\n\n    // \n    const eventTypeCount = new Map<string, number>()\n    events.forEach(event => {\n      eventTypeCount.set(event.eventType, (eventTypeCount.get(event.eventType) || 0) + 1)\n    })\n\n    const frequentEvents = Array.from(eventTypeCount.entries())\n      .filter(([, count]) => count > 10)\n      .sort((a, b) => b[1] - a[1])\n\n    if (frequentEvents.length > 0) {\n      recommendations.push(` : ${frequentEvents[0][0]} (${frequentEvents[0][1]})`)\n    }\n\n    // \n    const rateLimitEvents = events.filter(e => e.eventType.includes('rate_limit'))\n    if (rateLimitEvents.length > 20) {\n      recommendations.push(' ')\n    }\n\n    // XSS\n    const xssEvents = events.filter(e => e.eventType.includes('xss') || e.eventType.includes('script_injection'))\n    if (xssEvents.length > 0) {\n      recommendations.push(' XSSCSP')\n    }\n\n    // \n    const devToolsEvents = events.filter(e => e.eventType === 'devtools_opened')\n    if (devToolsEvents.length > 50) {\n      recommendations.push(' ')\n    }\n\n    // \n    if (recommendations.length === 0) {\n      recommendations.push(' ')\n    }\n\n    return recommendations\n  }\n\n  /**\n   * \n   */\n  private startAutoFlush(): void {\n    setInterval(() => {\n      if (this.eventQueue.length > 0) {\n        this.flushQueue()\n      }\n    }, this.config.autoFlushInterval)\n  }\n\n  /**\n   * \n   */\n  private setupUnloadHandler(): void {\n    window.addEventListener('beforeunload', () => {\n      // \n      if (this.eventQueue.length > 0) {\n        try {\n          // GitHub Pages\n          // beforeunloadawait\n          const existingEvents = JSON.parse(localStorage.getItem('security_audit_log') || '[]')\n          const allEvents = [...existingEvents, ...this.eventQueue]\n          const trimmedEvents = allEvents.slice(-this.maxEventsInStorage)\n          \n          localStorage.setItem('security_audit_log', JSON.stringify(trimmedEvents))\n          console.log(' ')\n        } catch (error) {\n          console.warn(':', error)\n          // : \n          try {\n            const data = this.eventQueue.map(e => ({\n              id: e.id,\n              timestamp: e.timestamp,\n              eventType: e.eventType,\n              severity: e.severity,\n              message: e.message\n            }))\n            localStorage.setItem('security_audit_emergency', JSON.stringify(data))\n          } catch (emergencyError) {\n            console.error(':', emergencyError)\n          }\n        }\n      }\n    })\n  }\n\n  /**\n   * \n   */\n  async exportAuditLog(format: 'json' | 'csv' = 'json'): Promise<string> {\n    const events = await this.storage.getItem<SecurityAuditEvent[]>('security_audit_log', true) || []\n    \n    if (format === 'json') {\n      return JSON.stringify(events, null, 2)\n    } \n      // CSV\n      const headers = ['ID', 'Timestamp', 'Event Type', 'Severity', 'Source', 'Message', 'User Agent', 'Session ID']\n      const csvRows = [headers.join(',')]\n      \n      events.forEach(event => {\n        const row = [\n          event.id,\n          event.timestamp.toISOString(),\n          event.eventType,\n          event.severity,\n          event.source,\n          `\"${event.message.replace(/\"/g, '\"\"')}\"`, // CSV\n          `\"${event.userAgent.replace(/\"/g, '\"\"')}\"`,\n          event.sessionId || ''\n        ]\n        csvRows.push(row.join(','))\n      })\n      \n      return csvRows.join('\\n')\n    \n  }\n\n  /**\n   * \n   */\n  async clearAuditLog(): Promise<void> {\n    try {\n      await this.storage.removeItem('security_audit_log')\n      await this.storage.removeItem('security_audit_metadata')\n      this.eventQueue = []\n      \n      // \n      await this.logSecurityEvent(\n        'audit_log_cleared',\n        'medium',\n        'security_audit_logger',\n        '',\n        { clearedAt: new Date().toISOString(), sessionId: this.sessionId }\n      )\n      \n      console.log(' ')\n      \n    } catch (error) {\n      console.error(':', error)\n      throw error\n    }\n  }\n\n  /**\n   * \n   */\n  updateConfig(newConfig: Partial<typeof this.config>): void {\n    this.config = { ...this.config, ...newConfig }\n    \n    console.log(' :', newConfig)\n  }\n\n  /**\n   * \n   */\n  getConfig(): typeof this.config {\n    return { ...this.config }\n  }\n\n  /**\n   * \n   */\n  async getStatistics(): Promise<{\n    queueSize: number\n    totalEventsLogged: number\n    oldestEvent: string | null\n    newestEvent: string | null\n    sessionId: string\n  }> {\n    const metadata = await this.storage.getItem<any>('security_audit_metadata', true)\n    \n    return {\n      queueSize: this.eventQueue.length,\n      totalEventsLogged: metadata?.totalEvents || 0,\n      oldestEvent: metadata?.oldestEvent || null,\n      newestEvent: metadata?.newestEvent || null,\n      sessionId: this.sessionId\n    }\n  }\n}\n\n// \nif (typeof window !== 'undefined') {\n  const auditLogger = SecurityAuditLogger.getInstance()\n\n  // \n  window.addEventListener('error', (event) => {\n    auditLogger.logSecurityEvent(\n      'javascript_error',\n      'medium',\n      'global_error_handler',\n      `JavaScript: ${event.message}`,\n      {\n        filename: event.filename,\n        lineno: event.lineno,\n        colno: event.colno,\n        error: event.error?.toString()\n      }\n    )\n  })\n\n  // Promise rejection \n  window.addEventListener('unhandledrejection', (event) => {\n    auditLogger.logSecurityEvent(\n      'unhandled_promise_rejection',\n      'medium',\n      'global_promise_handler',\n      `Promise rejection: ${event.reason}`,\n      {\n        reason: event.reason?.toString(),\n        stack: event.reason?.stack\n      }\n    )\n  })\n\n  // Console override for security monitoring with rate limiting\n  if (typeof console !== 'undefined' && console.error) {\n    const originalConsoleError = console.error\n    // Store original console.error for internal use\n    ;(console as any).originalError = originalConsoleError\n  \n  let consoleErrorCount = 0\n  let lastResetTime = Date.now()\n  const MAX_CONSOLE_ERRORS_PER_MINUTE = 30 // \n  \n    console.error = function(...args) {\n      // \n      if (typeof import.meta !== 'undefined' && import.meta.env && import.meta.env.DEV) {\n        originalConsoleError.apply(this, args); return;\n      }\n      \n      // Reset counter every minute\n      const now = Date.now()\n      if (now - lastResetTime > 60000) {\n        consoleErrorCount = 0\n        lastResetTime = now\n      }\n      \n      // Skip logging if rate limit exceeded to prevent infinite loop\n      const message = args.join(' ')\n      // \n      if (message.includes('Error rate limit exceeded') || \n          message.includes('') ||\n          message.includes('') ||\n          consoleErrorCount >= MAX_CONSOLE_ERRORS_PER_MINUTE) {\n        originalConsoleError.apply(console, args); return;\n      }\n      \n      consoleErrorCount++\n      \n      // Log the error with low severity\n      // \n      setTimeout(() => {\n        auditLogger.logSecurityEvent(\n          'console_error',\n          'low',\n          'console_override',\n          `Console Error: ${message.substring(0, 200)}`, // \n          { args: args.slice(0, 3), count: consoleErrorCount } // \n        )\n      }, 0)\n      \n      originalConsoleError.apply(console, args);\n    }\n  }\n}","/**\n * API \n * HTTPSAPICORS\n */\n\nimport { generateSecureHash, generateSecureRandomString } from './security'\nimport { SecurityMonitor } from './security-extensions'\nimport { SecurityAuditLogger } from './security-audit-logger'\n\nexport interface APISecurityConfig {\n  enforceHTTPS: boolean\n  allowedOrigins: string[]\n  allowedMethods: string[]\n  maxRequestSize: number\n  rateLimitConfig: {\n    windowMs: number\n    maxRequests: number\n    blockDurationMs: number\n  }\n  requireAPIKey: boolean\n  enableRequestSigning: boolean\n  corsPreflightMaxAge: number\n}\n\nexport interface APIKeyConfig {\n  keyId: string\n  keyValue: string\n  permissions: string[]\n  expiresAt: Date\n  lastUsed?: Date\n  usageCount: number\n  rateLimit: {\n    maxRequestsPerMinute: number\n    maxRequestsPerHour: number\n  }\n}\n\nexport interface SignedRequest {\n  method: string\n  url: string\n  timestamp: number\n  nonce: string\n  signature: string\n  payload?: string\n}\n\n/**\n * API \n */\nexport class APISecurityManager {\n  private static instance: APISecurityManager\n  private config: APISecurityConfig\n  private readonly apiKeys = new Map<string, APIKeyConfig>()\n  private readonly requestCache = new Map<string, number>()\n  private readonly auditLogger = SecurityAuditLogger.getInstance()\n  private readonly securityMonitor = SecurityMonitor.getInstance()\n\n  private constructor() {\n    this.config = {\n      enforceHTTPS: true,\n      allowedOrigins: [\n        window.location.origin,\n        'https://shishihs.github.io'\n      ],\n      allowedMethods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],\n      maxRequestSize: 10 * 1024 * 1024, // 10MB\n      rateLimitConfig: {\n        windowMs: 60 * 1000, // 1\n        maxRequests: 100,\n        blockDurationMs: 5 * 60 * 1000 // 5\n      },\n      requireAPIKey: false, // \n      enableRequestSigning: false,\n      corsPreflightMaxAge: 86400 // 24\n    }\n  }\n\n  static getInstance(): APISecurityManager {\n    if (!APISecurityManager.instance) {\n      APISecurityManager.instance = new APISecurityManager()\n    }\n    return APISecurityManager.instance\n  }\n\n  /**\n   * \n   */\n  updateConfig(newConfig: Partial<APISecurityConfig>): void {\n    this.config = { ...this.config, ...newConfig }\n    this.auditLogger.logSecurityEvent(\n      'api_security_config_updated',\n      'low',\n      'api_security_manager',\n      'API ',\n      { updatedFields: Object.keys(newConfig) }\n    )\n  }\n\n  /**\n   * HTTPS \n   */\n  enforceHTTPS(request: Request): boolean {\n    if (!this.config.enforceHTTPS) return true\n\n    const url = new URL(request.url)\n    const isSecure = url.protocol === 'https:' || \n                    url.hostname === 'localhost' || \n                    url.hostname === '127.0.0.1'\n\n    if (!isSecure) {\n      this.auditLogger.logSecurityEvent(\n        'insecure_api_request_blocked',\n        'high',\n        'api_security_manager',\n        `HTTPS : ${request.url}`,\n        { \n          url: request.url,\n          method: request.method,\n          protocol: url.protocol \n        }\n      )\n      return false\n    }\n\n    return true\n  }\n\n  /**\n   * CORS \n   */\n  validateCORS(request: Request, origin?: string): boolean {\n    const requestOrigin = origin || request.headers.get('Origin')\n    \n    if (!requestOrigin) {\n      // Same-origin \n      return true\n    }\n\n    const isAllowed = this.config.allowedOrigins.some(allowedOrigin => {\n      if (allowedOrigin === '*') return true\n      if (allowedOrigin === requestOrigin) return true\n      // \n      if (allowedOrigin.startsWith('*.')) {\n        const baseDomain = allowedOrigin.slice(2)\n        return requestOrigin.endsWith(baseDomain)\n      }\n      return false\n    })\n\n    if (!isAllowed) {\n      this.auditLogger.logSecurityEvent(\n        'cors_violation',\n        'high',\n        'api_security_manager',\n        `CORS : `,\n        { \n          origin: requestOrigin,\n          allowedOrigins: this.config.allowedOrigins,\n          url: request.url,\n          method: request.method\n        }\n      )\n    }\n\n    return isAllowed\n  }\n\n  /**\n   * \n   */\n  validateMethod(request: Request): boolean {\n    const isAllowed = this.config.allowedMethods.includes(request.method.toUpperCase())\n\n    if (!isAllowed) {\n      this.auditLogger.logSecurityEvent(\n        'invalid_http_method',\n        'medium',\n        'api_security_manager',\n        `HTTP: ${request.method}`,\n        { \n          method: request.method,\n          allowedMethods: this.config.allowedMethods,\n          url: request.url\n        }\n      )\n    }\n\n    return isAllowed\n  }\n\n  /**\n   * \n   */\n  async validateRequestSize(request: Request): Promise<boolean> {\n    const contentLength = request.headers.get('Content-Length')\n    let size = 0\n\n    if (contentLength) {\n      size = parseInt(contentLength, 10)\n    } else if (request.body) {\n      // Content-Length  body \n      try {\n        const clonedRequest = request.clone()\n        const body = await clonedRequest.text()\n        size = new Blob([body]).size\n      } catch (error) {\n        this.auditLogger.logSecurityEvent(\n          'request_size_validation_error',\n          'medium',\n          'api_security_manager',\n          '',\n          { error: error instanceof Error ? error.message : String(error) }\n        )\n        return false\n      }\n    }\n\n    const isValid = size <= this.config.maxRequestSize\n\n    if (!isValid) {\n      this.auditLogger.logSecurityEvent(\n        'oversized_request_blocked',\n        'high',\n        'api_security_manager',\n        `: ${size} bytes`,\n        { \n          requestSize: size,\n          maxSize: this.config.maxRequestSize,\n          url: request.url,\n          method: request.method\n        }\n      )\n    }\n\n    return isValid\n  }\n\n  /**\n   * \n   */\n  checkRateLimit(clientId: string): boolean {\n    const now = Date.now()\n    const key = `rate_limit_${clientId}`\n    const windowStart = now - this.config.rateLimitConfig.windowMs\n    \n    // \n    const requestTimes = this.getRequestTimes(clientId)\n    const recentRequests = requestTimes.filter(time => time > windowStart)\n    \n    const isAllowed = recentRequests.length < this.config.rateLimitConfig.maxRequests\n\n    if (isAllowed) {\n      // \n      recentRequests.push(now)\n      this.setRequestTimes(clientId, recentRequests)\n    } else {\n      // \n      this.auditLogger.logSecurityEvent(\n        'api_rate_limit_exceeded',\n        'high',\n        'api_security_manager',\n        `API :  ${clientId}`,\n        {\n          clientId,\n          requestCount: recentRequests.length,\n          maxRequests: this.config.rateLimitConfig.maxRequests,\n          windowMs: this.config.rateLimitConfig.windowMs\n        }\n      )\n\n      // \n      this.setClientBlock(clientId, now + this.config.rateLimitConfig.blockDurationMs)\n    }\n\n    return isAllowed\n  }\n\n  /**\n   * \n   */\n  isClientBlocked(clientId: string): boolean {\n    const blockUntil = this.getClientBlockTime(clientId)\n    const now = Date.now()\n    \n    if (blockUntil && now < blockUntil) {\n      return true\n    }\n\n    // \n    if (blockUntil && now >= blockUntil) {\n      this.clearClientBlock(clientId)\n    }\n\n    return false\n  }\n\n  /**\n   * API\n   */\n  generateAPIKey(permissions: string[] = [], expirationHours = 24 * 30): APIKeyConfig {\n    const keyId = generateSecureRandomString(16)\n    const keyValue = generateSecureRandomString(64)\n    const expiresAt = new Date(Date.now() + expirationHours * 60 * 60 * 1000)\n\n    const apiKey: APIKeyConfig = {\n      keyId,\n      keyValue,\n      permissions,\n      expiresAt,\n      usageCount: 0,\n      rateLimit: {\n        maxRequestsPerMinute: 60,\n        maxRequestsPerHour: 1000\n      }\n    }\n\n    this.apiKeys.set(keyId, apiKey)\n\n    this.auditLogger.logSecurityEvent(\n      'api_key_generated',\n      'low',\n      'api_security_manager',\n      `API: ${keyId}`,\n      { \n        keyId,\n        permissions,\n        expiresAt: expiresAt.toISOString()\n      }\n    )\n\n    return apiKey\n  }\n\n  /**\n   * API\n   */\n  validateAPIKey(keyId: string, keyValue: string, requiredPermission?: string): boolean {\n    const apiKey = this.apiKeys.get(keyId)\n\n    if (!apiKey) {\n      this.auditLogger.logSecurityEvent(\n        'invalid_api_key',\n        'high',\n        'api_security_manager',\n        `APIID: ${keyId}`,\n        { keyId }\n      )\n      return false\n    }\n\n    // \n    if (new Date() > apiKey.expiresAt) {\n      this.auditLogger.logSecurityEvent(\n        'expired_api_key',\n        'medium',\n        'api_security_manager',\n        `API: ${keyId}`,\n        { keyId, expiresAt: apiKey.expiresAt.toISOString() }\n      )\n      return false\n    }\n\n    // \n    if (apiKey.keyValue !== keyValue) {\n      this.auditLogger.logSecurityEvent(\n        'api_key_mismatch',\n        'high',\n        'api_security_manager',\n        `API: ${keyId}`,\n        { keyId }\n      )\n      return false\n    }\n\n    // \n    if (requiredPermission && !apiKey.permissions.includes(requiredPermission)) {\n      this.auditLogger.logSecurityEvent(\n        'insufficient_api_permissions',\n        'medium',\n        'api_security_manager',\n        `API: ${keyId}, : ${requiredPermission}`,\n        { \n          keyId,\n          requiredPermission,\n          availablePermissions: apiKey.permissions\n        }\n      )\n      return false\n    }\n\n    // \n    if (!this.checkAPIKeyRateLimit(keyId)) {\n      return false\n    }\n\n    // \n    apiKey.usageCount++\n    apiKey.lastUsed = new Date()\n\n    return true\n  }\n\n  /**\n   * \n   */\n  async signRequest(\n    method: string, \n    url: string, \n    payload: string = '', \n    secretKey: string\n  ): Promise<SignedRequest> {\n    const timestamp = Date.now()\n    const nonce = generateSecureRandomString(16)\n    \n    const signatureData = `${method}\\n${url}\\n${timestamp}\\n${nonce}\\n${payload}`\n    const signature = await generateSecureHash(signatureData + secretKey)\n\n    return {\n      method,\n      url,\n      timestamp,\n      nonce,\n      signature,\n      payload: payload || undefined\n    }\n  }\n\n  /**\n   * \n   */\n  async verifyRequestSignature(\n    signedRequest: SignedRequest, \n    secretKey: string,\n    maxAgeMs = 5 * 60 * 1000 // 5\n  ): Promise<boolean> {\n    const now = Date.now()\n    \n    // \n    if (now - signedRequest.timestamp > maxAgeMs) {\n      this.auditLogger.logSecurityEvent(\n        'expired_request_signature',\n        'medium',\n        'api_security_manager',\n        '',\n        { \n          timestamp: signedRequest.timestamp,\n          currentTime: now,\n          maxAge: maxAgeMs\n        }\n      )\n      return false\n    }\n\n    // nonce \n    const nonceKey = `nonce_${signedRequest.nonce}`\n    if (this.requestCache.has(nonceKey)) {\n      this.auditLogger.logSecurityEvent(\n        'duplicate_nonce',\n        'high',\n        'api_security_manager',\n        'nonce ',\n        { nonce: signedRequest.nonce }\n      )\n      return false\n    }\n\n    // \n    const signatureData = `${signedRequest.method}\\n${signedRequest.url}\\n${signedRequest.timestamp}\\n${signedRequest.nonce}\\n${signedRequest.payload || ''}`\n    const expectedSignature = await generateSecureHash(signatureData + secretKey)\n\n    const isValid = expectedSignature === signedRequest.signature\n\n    if (isValid) {\n      // nonce \n      this.requestCache.set(nonceKey, signedRequest.timestamp)\n      \n      // nonce \n      this.cleanupOldNonces(maxAgeMs)\n    } else {\n      this.auditLogger.logSecurityEvent(\n        'invalid_request_signature',\n        'high',\n        'api_security_manager',\n        '',\n        { \n          expectedSignature: `${expectedSignature.slice(0, 16)  }...`,\n          providedSignature: `${signedRequest.signature.slice(0, 16)  }...`\n        }\n      )\n    }\n\n    return isValid\n  }\n\n  /**\n   * \n   */\n  async validateRequest(\n    request: Request, \n    clientId?: string, \n    apiKeyId?: string, \n    apiKeyValue?: string\n  ): Promise<{\n    isValid: boolean\n    errors: string[]\n    warnings: string[]\n  }> {\n    const errors: string[] = []\n    const warnings: string[] = []\n\n    try {\n      // HTTPS \n      if (!this.enforceHTTPS(request)) {\n        errors.push('HTTPS required')\n      }\n\n      // CORS \n      if (!this.validateCORS(request)) {\n        errors.push('CORS violation')\n      }\n\n      // HTTP\n      if (!this.validateMethod(request)) {\n        errors.push('Invalid HTTP method')\n      }\n\n      // \n      if (!(await this.validateRequestSize(request))) {\n        errors.push('Request too large')\n      }\n\n      // \n      if (clientId && this.isClientBlocked(clientId)) {\n        errors.push('Client is temporarily blocked')\n      } else if (clientId && !this.checkRateLimit(clientId)) {\n        errors.push('Rate limit exceeded')\n      }\n\n      // API\n      if (this.config.requireAPIKey) {\n        if (!apiKeyId || !apiKeyValue) {\n          errors.push('API key required')\n        } else if (!this.validateAPIKey(apiKeyId, apiKeyValue)) {\n          errors.push('Invalid API key')\n        }\n      }\n\n      // \n      const securityHeaders = this.validateSecurityHeaders(request)\n      if (securityHeaders.warnings.length > 0) {\n        warnings.push(...securityHeaders.warnings)\n      }\n\n    } catch (error) {\n      this.auditLogger.logSecurityEvent(\n        'request_validation_error',\n        'high',\n        'api_security_manager',\n        '',\n        { \n          error: error instanceof Error ? error.message : String(error),\n          url: request.url,\n          method: request.method\n        }\n      )\n      errors.push('Internal validation error')\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n      warnings\n    }\n  }\n\n  /**\n   * \n   */\n  private validateSecurityHeaders(request: Request): { warnings: string[] } {\n    const warnings: string[] = []\n    \n    // Content-Type \n    const contentType = request.headers.get('Content-Type')\n    if (request.method !== 'GET' && request.method !== 'HEAD' && !contentType) {\n      warnings.push('Missing Content-Type header')\n    }\n\n    // User-Agent \n    const userAgent = request.headers.get('User-Agent')\n    if (!userAgent) {\n      warnings.push('Missing User-Agent header')\n    }\n\n    return { warnings }\n  }\n\n  // \n  private getRequestTimes(clientId: string): number[] {\n    const stored = localStorage.getItem(`rate_limit_${clientId}`)\n    return stored ? JSON.parse(stored) : []\n  }\n\n  private setRequestTimes(clientId: string, times: number[]): void {\n    localStorage.setItem(`rate_limit_${clientId}`, JSON.stringify(times))\n  }\n\n  private getClientBlockTime(clientId: string): number | null {\n    const stored = localStorage.getItem(`block_${clientId}`)\n    return stored ? parseInt(stored, 10) : null\n  }\n\n  private setClientBlock(clientId: string, blockUntil: number): void {\n    localStorage.setItem(`block_${clientId}`, blockUntil.toString())\n  }\n\n  private clearClientBlock(clientId: string): void {\n    localStorage.removeItem(`block_${clientId}`)\n  }\n\n  private checkAPIKeyRateLimit(keyId: string): boolean {\n    // API\n    return this.securityMonitor.checkRateLimit(\n      `api_key_${keyId}`,\n      60, // 160\n      60 * 1000\n    )\n  }\n\n  private cleanupOldNonces(maxAgeMs: number): void {\n    const cutoff = Date.now() - maxAgeMs\n    for (const [key, timestamp] of this.requestCache.entries()) {\n      if (timestamp < cutoff) {\n        this.requestCache.delete(key)\n      }\n    }\n  }\n}\n\n/**\n * Fetch API \n */\nexport class SecureFetch {\n  private readonly apiSecurity = APISecurityManager.getInstance()\n  private readonly auditLogger = SecurityAuditLogger.getInstance()\n\n  /**\n   * HTTP\n   */\n  async request(\n    url: string | URL,\n    options: RequestInit & {\n      clientId?: string\n      apiKey?: { id: string; value: string }\n      enableSigning?: boolean\n      secretKey?: string\n    } = {}\n  ): Promise<Response> {\n    const {\n      clientId = 'default',\n      apiKey,\n      enableSigning = false,\n      secretKey,\n      ...fetchOptions\n    } = options\n\n    try {\n      // \n      const request = new Request(url, fetchOptions)\n\n      // \n      const validation = await this.apiSecurity.validateRequest(\n        request,\n        clientId,\n        apiKey?.id,\n        apiKey?.value\n      )\n\n      if (!validation.isValid) {\n        const error = new Error(`Request validation failed: ${validation.errors.join(', ')}`)\n        this.auditLogger.logSecurityEvent(\n          'secure_fetch_validation_failed',\n          'high',\n          'secure_fetch',\n          'Fetch',\n          {\n            url: url.toString(),\n            errors: validation.errors,\n            warnings: validation.warnings\n          }\n        )\n        throw error\n      }\n\n      // \n      if (enableSigning && secretKey) {\n        const payload = fetchOptions.body ? String(fetchOptions.body) : ''\n        const signedData = await this.apiSecurity.signRequest(\n          fetchOptions.method || 'GET',\n          url.toString(),\n          payload,\n          secretKey\n        )\n\n        // \n        const headers = new Headers(fetchOptions.headers)\n        headers.set('X-Signature', signedData.signature)\n        headers.set('X-Timestamp', signedData.timestamp.toString())\n        headers.set('X-Nonce', signedData.nonce)\n        \n        fetchOptions.headers = headers\n      }\n\n      // API\n      if (apiKey) {\n        const headers = new Headers(fetchOptions.headers)\n        headers.set('X-API-Key-ID', apiKey.id)\n        headers.set('X-API-Key', apiKey.value)\n        fetchOptions.headers = headers\n      }\n\n      // \n      const response = await fetch(url, fetchOptions)\n\n      // \n      await this.validateResponse(response, url.toString())\n\n      return response\n\n    } catch (error) {\n      this.auditLogger.logSecurityEvent(\n        'secure_fetch_error',\n        'medium',\n        'secure_fetch',\n        'Fetch',\n        {\n          url: url.toString(),\n          error: error instanceof Error ? error.message : String(error),\n          clientId\n        }\n      )\n      throw error\n    }\n  }\n\n  /**\n   * \n   */\n  private async validateResponse(response: Response, url: string): Promise<void> {\n    // \n    const securityHeaders = [\n      'Content-Security-Policy',\n      'X-Content-Type-Options',\n      'X-Frame-Options',\n      'Strict-Transport-Security'\n    ]\n\n    const missingHeaders = securityHeaders.filter(header => \n      !response.headers.has(header)\n    )\n\n    if (missingHeaders.length > 0) {\n      this.auditLogger.logSecurityEvent(\n        'missing_security_headers',\n        'low',\n        'secure_fetch',\n        '',\n        {\n          url,\n          missingHeaders,\n          status: response.status\n        }\n      )\n    }\n\n    // Content-Type \n    const contentType = response.headers.get('Content-Type')\n    if (!contentType) {\n      this.auditLogger.logSecurityEvent(\n        'missing_content_type',\n        'low',\n        'secure_fetch',\n        'Content-Type',\n        { url, status: response.status }\n      )\n    }\n  }\n}\n\n// \nexport const apiSecurity = APISecurityManager.getInstance()\nexport const secureFetch = new SecureFetch()\n\n// CSRFsecurity.ts\nexport function validateCSRFToken(provided: string, expected: string): boolean {\n  if (!provided || !expected) return false\n  \n  // \n  if (provided.length !== expected.length) return false\n  \n  let result = 0\n  for (let i = 0; i < provided.length; i++) {\n    result |= provided.charCodeAt(i) ^ expected.charCodeAt(i)\n  }\n  \n  return result === 0\n}","/**\n * DDoS\n * \n */\n\nimport { SecurityMonitor } from './security-extensions'\nimport { SecurityAuditLogger } from './security-audit-logger'\n\nexport interface RateLimitConfig {\n  windowMs: number\n  maxRequests: number\n  blockDurationMs: number\n  adaptiveScaling: boolean\n  burstAllowance: number\n  penaltyMultiplier: number\n}\n\nexport interface ClientRiskProfile {\n  riskScore: number\n  threatLevel: 'none' | 'low' | 'medium' | 'high' | 'critical'\n  violations: ViolationRecord[]\n  adaptiveLimit: number\n  lastActivity: Date\n  behaviorPattern: BehaviorPattern\n}\n\nexport interface ViolationRecord {\n  timestamp: Date\n  type: 'rate_limit' | 'suspicious_pattern' | 'known_attack' | 'bot_detection'\n  severity: 'low' | 'medium' | 'high' | 'critical'\n  details: Record<string, any>\n}\n\nexport interface BehaviorPattern {\n  requestFrequency: number[]\n  userAgentConsistency: number\n  geographicConsistency: number\n  sessionDuration: number\n  interactionQuality: number\n  humanLikelihood: number\n}\n\nexport interface DDoSMetrics {\n  totalRequests: number\n  uniqueClients: number\n  suspiciousClients: number\n  blockedRequests: number\n  avgResponseTime: number\n  systemLoad: number\n}\n\n/**\n * \n */\nexport class AdvancedRateLimiter {\n  private static instance: AdvancedRateLimiter\n  private readonly configs = new Map<string, RateLimitConfig>()\n  private readonly clientProfiles = new Map<string, ClientRiskProfile>()\n  private readonly requestHistory = new Map<string, number[]>()\n  private readonly blockedClients = new Map<string, number>()\n  private readonly auditLogger = SecurityAuditLogger.getInstance()\n  private readonly securityMonitor = SecurityMonitor.getInstance()\n  \n  // DDoS\n  private ddosMetrics: DDoSMetrics = {\n    totalRequests: 0,\n    uniqueClients: 0,\n    suspiciousClients: 0,\n    blockedRequests: 0,\n    avgResponseTime: 0,\n    systemLoad: 0\n  }\n\n  private constructor() {\n    this.initializeDefaultConfigs()\n    this.startBackgroundTasks()\n  }\n\n  static getInstance(): AdvancedRateLimiter {\n    if (!AdvancedRateLimiter.instance) {\n      AdvancedRateLimiter.instance = new AdvancedRateLimiter()\n    }\n    return AdvancedRateLimiter.instance\n  }\n\n  /**\n   * \n   */\n  private initializeDefaultConfigs(): void {\n    // \n    this.configs.set('default', {\n      windowMs: 60 * 1000, // 1\n      maxRequests: 60,\n      blockDurationMs: 5 * 60 * 1000, // 5\n      adaptiveScaling: true,\n      burstAllowance: 10,\n      penaltyMultiplier: 2\n    })\n\n    // API\n    this.configs.set('api', {\n      windowMs: 60 * 1000,\n      maxRequests: 30,\n      blockDurationMs: 10 * 60 * 1000, // 10\n      adaptiveScaling: true,\n      burstAllowance: 5,\n      penaltyMultiplier: 3\n    })\n\n    // \n    this.configs.set('auth', {\n      windowMs: 60 * 1000,\n      maxRequests: 5,\n      blockDurationMs: 30 * 60 * 1000, // 30\n      adaptiveScaling: false,\n      burstAllowance: 2,\n      penaltyMultiplier: 5\n    })\n  }\n\n  /**\n   * \n   */\n  checkRateLimit(\n    clientId: string, \n    configName: string = 'default',\n    requestContext?: Record<string, any>\n  ): {\n    allowed: boolean\n    remainingRequests: number\n    resetTime: Date\n    riskScore: number\n    blockReason?: string\n  } {\n    const now = Date.now()\n    const config = this.configs.get(configName) || this.configs.get('default')!\n    \n    // \n    let profile = this.clientProfiles.get(clientId)\n    if (!profile) {\n      profile = this.initializeClientProfile(clientId)\n      this.clientProfiles.set(clientId, profile)\n    }\n\n    // \n    const blockUntil = this.blockedClients.get(clientId)\n    if (blockUntil && now < blockUntil) {\n      this.ddosMetrics.blockedRequests++\n      return {\n        allowed: false,\n        remainingRequests: 0,\n        resetTime: new Date(blockUntil),\n        riskScore: profile.riskScore,\n        blockReason: 'Temporarily blocked due to rate limit violation'\n      }\n    }\n\n    // \n    this.updateRequestHistory(clientId, now, requestContext)\n    \n    // \n    this.analyzeBehaviorPattern(clientId, requestContext)\n    \n    // \n    this.updateRiskScore(clientId, requestContext)\n    \n    // \n    const effectiveLimit = this.calculateAdaptiveLimit(clientId, config)\n    \n    // \n    const windowStart = now - config.windowMs\n    const recentRequests = this.getRecentRequests(clientId, windowStart)\n    const requestCount = recentRequests.length\n    \n    // \n    const burstAdjustedLimit = effectiveLimit + config.burstAllowance\n    const allowed = requestCount < burstAdjustedLimit\n\n    this.ddosMetrics.totalRequests++\n    \n    if (!allowed) {\n      // \n      this.handleRateLimitViolation(clientId, configName, requestCount, effectiveLimit)\n      this.ddosMetrics.blockedRequests++\n      \n      return {\n        allowed: false,\n        remainingRequests: 0,\n        resetTime: new Date(now + config.blockDurationMs),\n        riskScore: profile.riskScore,\n        blockReason: 'Rate limit exceeded'\n      }\n    }\n\n    // \n    const remainingRequests = Math.max(0, effectiveLimit - requestCount)\n    const resetTime = new Date(now + config.windowMs)\n\n    return {\n      allowed: true,\n      remainingRequests,\n      resetTime,\n      riskScore: profile.riskScore\n    }\n  }\n\n  /**\n   * \n   */\n  private initializeClientProfile(clientId: string): ClientRiskProfile {\n    return {\n      riskScore: 0,\n      threatLevel: 'none',\n      violations: [],\n      adaptiveLimit: 60, // \n      lastActivity: new Date(),\n      behaviorPattern: {\n        requestFrequency: [],\n        userAgentConsistency: 1.0,\n        geographicConsistency: 1.0,\n        sessionDuration: 0,\n        interactionQuality: 0.5,\n        humanLikelihood: 0.5\n      }\n    }\n  }\n\n  /**\n   * \n   */\n  private updateRequestHistory(\n    clientId: string, \n    timestamp: number, \n    context?: Record<string, any>\n  ): void {\n    const history = this.requestHistory.get(clientId) || []\n    history.push(timestamp)\n    \n    // 24\n    const cutoff = timestamp - (24 * 60 * 60 * 1000)\n    const filteredHistory = history.filter(time => time > cutoff)\n    \n    this.requestHistory.set(clientId, filteredHistory)\n\n    // \n    const profile = this.clientProfiles.get(clientId)\n    if (profile) {\n      profile.lastActivity = new Date(timestamp)\n    }\n  }\n\n  /**\n   * \n   */\n  private analyzeBehaviorPattern(clientId: string, context?: Record<string, any>): void {\n    const profile = this.clientProfiles.get(clientId)\n    if (!profile) return\n\n    const history = this.requestHistory.get(clientId) || []\n    if (history.length < 2) return\n\n    // \n    const intervals = []\n    for (let i = 1; i < history.length; i++) {\n      intervals.push(history[i] - history[i - 1])\n    }\n\n    profile.behaviorPattern.requestFrequency = intervals.slice(-20) // 20\n\n    // \n    profile.behaviorPattern.humanLikelihood = this.calculateHumanLikelihood(intervals)\n\n    // User-Agent \n    if (context?.userAgent) {\n      // \n      profile.behaviorPattern.userAgentConsistency = 1.0\n    }\n\n    // \n    if (history.length > 0) {\n      profile.behaviorPattern.sessionDuration = Date.now() - history[0]\n    }\n  }\n\n  /**\n   * \n   */\n  private calculateHumanLikelihood(intervals: number[]): number {\n    if (intervals.length < 5) return 0.5\n\n    // \n    const mean = intervals.reduce((sum, interval) => sum + interval, 0) / intervals.length\n    const variance = intervals.reduce((sum, interval) => sum + (interval - mean)**2, 0) / intervals.length\n    const standardDeviation = Math.sqrt(variance)\n    const coefficientOfVariation = standardDeviation / mean\n\n    // CV = 0.3-1.0\n    if (coefficientOfVariation < 0.1) return 0.1 // \n    if (coefficientOfVariation > 2.0) return 0.1 // \n    \n    // 0.3-1.0\n    const humanness = Math.min(1.0, Math.max(0.0, \n      1.0 - Math.abs(coefficientOfVariation - 0.65) / 0.65\n    ))\n\n    return humanness\n  }\n\n  /**\n   * \n   */\n  private updateRiskScore(clientId: string, context?: Record<string, any>): void {\n    const profile = this.clientProfiles.get(clientId)\n    if (!profile) return\n\n    let riskScore = 0\n\n    // \n    const history = this.requestHistory.get(clientId) || []\n    if (history.length > 100) riskScore += 10 // \n\n    // \n    const humanLikelihood = profile.behaviorPattern.humanLikelihood\n    if (humanLikelihood < 0.3) riskScore += 20 // \n\n    // \n    const recentViolations = profile.violations.filter(v => \n      Date.now() - v.timestamp.getTime() < 60 * 60 * 1000 // 1\n    )\n    riskScore += recentViolations.length * 15\n\n    // IP\n    if (context?.ipAddress) {\n      if (this.isKnownMaliciousIP(context.ipAddress)) {\n        riskScore += 50\n      }\n    }\n\n    profile.riskScore = Math.min(100, riskScore)\n\n    // \n    if (riskScore >= 80) profile.threatLevel = 'critical'\n    else if (riskScore >= 60) profile.threatLevel = 'high'\n    else if (riskScore >= 40) profile.threatLevel = 'medium'\n    else if (riskScore >= 20) profile.threatLevel = 'low'\n    else profile.threatLevel = 'none'\n  }\n\n  /**\n   * \n   */\n  private calculateAdaptiveLimit(clientId: string, config: RateLimitConfig): number {\n    if (!config.adaptiveScaling) return config.maxRequests\n\n    const profile = this.clientProfiles.get(clientId)\n    if (!profile) return config.maxRequests\n\n    let adaptiveFactor = 1.0\n\n    // \n    if (profile.riskScore > 50) {\n      adaptiveFactor *= 0.5 // \n    } else if (profile.riskScore < 20) {\n      adaptiveFactor *= 1.2 // \n    }\n\n    // \n    const humanLikelihood = profile.behaviorPattern.humanLikelihood\n    if (humanLikelihood > 0.8) {\n      adaptiveFactor *= 1.1 // \n    } else if (humanLikelihood < 0.3) {\n      adaptiveFactor *= 0.6 // \n    }\n\n    // \n    if (this.ddosMetrics.systemLoad > 0.8) {\n      adaptiveFactor *= 0.7 // \n    }\n\n    const adaptiveLimit = Math.floor(config.maxRequests * adaptiveFactor)\n    profile.adaptiveLimit = Math.max(1, Math.min(config.maxRequests * 2, adaptiveLimit))\n\n    return profile.adaptiveLimit\n  }\n\n  /**\n   * \n   */\n  private handleRateLimitViolation(\n    clientId: string, \n    configName: string, \n    requestCount: number, \n    limit: number\n  ): void {\n    const config = this.configs.get(configName)!\n    const profile = this.clientProfiles.get(clientId)!\n\n    // \n    const violation: ViolationRecord = {\n      timestamp: new Date(),\n      type: 'rate_limit',\n      severity: requestCount > limit * 2 ? 'high' : 'medium',\n      details: {\n        configName,\n        requestCount,\n        limit,\n        riskScore: profile.riskScore\n      }\n    }\n\n    profile.violations.push(violation)\n\n    // \n    const cutoff = Date.now() - (24 * 60 * 60 * 1000) // 24\n    profile.violations = profile.violations.filter(v => \n      v.timestamp.getTime() > cutoff\n    )\n\n    // \n    const recentViolations = profile.violations.filter(v => \n      Date.now() - v.timestamp.getTime() < 60 * 60 * 1000 // 1\n    )\n\n    let blockDuration = config.blockDurationMs\n    if (recentViolations.length > 1) {\n      blockDuration *= config.penaltyMultiplier**(recentViolations.length - 1)\n    }\n\n    // 24\n    blockDuration = Math.min(blockDuration, 24 * 60 * 60 * 1000)\n\n    // \n    this.blockedClients.set(clientId, Date.now() + blockDuration)\n\n    // \n    this.auditLogger.logSecurityEvent(\n      'advanced_rate_limit_violation',\n      violation.severity as any,\n      'advanced_rate_limiter',\n      `:  ${clientId}`,\n      {\n        clientId,\n        configName,\n        requestCount,\n        limit,\n        blockDuration,\n        riskScore: profile.riskScore,\n        threatLevel: profile.threatLevel,\n        recentViolations: recentViolations.length\n      }\n    )\n\n    // \n    if (profile.threatLevel === 'critical') {\n      this.handleCriticalThreat(clientId)\n    }\n  }\n\n  /**\n   * \n   */\n  private handleCriticalThreat(clientId: string): void {\n    // \n    this.blockedClients.set(clientId, Date.now() + (24 * 60 * 60 * 1000)) // 24\n\n    // \n    this.auditLogger.logSecurityEvent(\n      'critical_threat_detected',\n      'critical',\n      'advanced_rate_limiter',\n      `:  ${clientId}`,\n      {\n        clientId,\n        action: 'long_term_block',\n        duration: '24_hours'\n      }\n    )\n\n    // IP\n    this.investigateRelatedClients(clientId)\n  }\n\n  /**\n   * DDoS\n   */\n  detectDDoSAttack(): {\n    isUnderAttack: boolean\n    attackSeverity: 'none' | 'low' | 'medium' | 'high' | 'critical'\n    metrics: DDoSMetrics\n    recommendations: string[]\n  } {\n    const now = Date.now()\n    const recommendations: string[] = []\n\n    // 5\n    const window = 5 * 60 * 1000 // 5\n    let totalRequests = 0\n    const uniqueClients = new Set<string>()\n    let suspiciousClients = 0\n\n    for (const [clientId, history] of this.requestHistory.entries()) {\n      const recentRequests = history.filter(time => now - time < window)\n      totalRequests += recentRequests.length\n      \n      if (recentRequests.length > 0) {\n        uniqueClients.add(clientId)\n        \n        const profile = this.clientProfiles.get(clientId)\n        if (profile && profile.threatLevel !== 'none') {\n          suspiciousClients++\n        }\n      }\n    }\n\n    // \n    this.ddosMetrics = {\n      totalRequests,\n      uniqueClients: uniqueClients.size,\n      suspiciousClients,\n      blockedRequests: this.ddosMetrics.blockedRequests,\n      avgResponseTime: this.calculateAverageResponseTime(),\n      systemLoad: this.calculateSystemLoad()\n    }\n\n    // \n    let attackSeverity: 'none' | 'low' | 'medium' | 'high' | 'critical' = 'none'\n    let isUnderAttack = false\n\n    // \n    const requestsPerSecond = totalRequests / 300 // 5 = 300\n    const suspiciousRatio = uniqueClients.size > 0 ? suspiciousClients / uniqueClients.size : 0\n\n    if (requestsPerSecond > 100) {\n      isUnderAttack = true\n      attackSeverity = 'critical'\n      recommendations.push('')\n      recommendations.push('CDN/WAF')\n    } else if (requestsPerSecond > 50) {\n      isUnderAttack = true\n      attackSeverity = 'high'\n      recommendations.push('')\n      recommendations.push('IP')\n    } else if (requestsPerSecond > 20 || suspiciousRatio > 0.3) {\n      isUnderAttack = true\n      attackSeverity = 'medium'\n      recommendations.push('')\n    } else if (suspiciousRatio > 0.1) {\n      attackSeverity = 'low'\n      recommendations.push('')\n    }\n\n    // \n    if (this.ddosMetrics.avgResponseTime > 5000) { // 5\n      isUnderAttack = true\n      if (attackSeverity === 'none') attackSeverity = 'medium'\n      recommendations.push('')\n    }\n\n    if (isUnderAttack) {\n      this.auditLogger.logSecurityEvent(\n        'ddos_attack_detected',\n        attackSeverity as any,\n        'advanced_rate_limiter',\n        `DDoS: ${attackSeverity} `,\n        {\n          metrics: this.ddosMetrics,\n          attackSeverity,\n          recommendations\n        }\n      )\n    }\n\n    return {\n      isUnderAttack,\n      attackSeverity,\n      metrics: this.ddosMetrics,\n      recommendations\n    }\n  }\n\n  /**\n   * \n   */\n  manageAutoBlockList(): void {\n    const now = Date.now()\n    const criticalClients: string[] = []\n\n    for (const [clientId, profile] of this.clientProfiles.entries()) {\n      // \n      if (profile.threatLevel === 'critical') {\n        criticalClients.push(clientId)\n        \n        // \n        if (!this.blockedClients.has(clientId)) {\n          this.blockedClients.set(clientId, now + (24 * 60 * 60 * 1000)) // 24\n        }\n      }\n\n      // \n      if (now - profile.lastActivity.getTime() > (7 * 24 * 60 * 60 * 1000)) { // 7\n        this.clientProfiles.delete(clientId)\n        this.requestHistory.delete(clientId)\n      }\n    }\n\n    // \n    for (const [clientId, blockUntil] of this.blockedClients.entries()) {\n      if (now > blockUntil) {\n        this.blockedClients.delete(clientId)\n      }\n    }\n\n    if (criticalClients.length > 0) {\n      this.auditLogger.logSecurityEvent(\n        'auto_block_list_updated',\n        'medium',\n        'advanced_rate_limiter',\n        `: ${criticalClients.length}`,\n        { blockedClients: criticalClients }\n      )\n    }\n  }\n\n  // \n  private getRecentRequests(clientId: string, windowStart: number): number[] {\n    const history = this.requestHistory.get(clientId) || []\n    return history.filter(time => time > windowStart)\n  }\n\n  private isKnownMaliciousIP(ipAddress: string): boolean {\n    // API\n    const knownMaliciousRanges = [\n      '192.168.1.100', // IP\n    ]\n    return knownMaliciousRanges.includes(ipAddress)\n  }\n\n  private investigateRelatedClients(clientId: string): void {\n    // IP\n    // \n    this.auditLogger.logSecurityEvent(\n      'related_client_investigation',\n      'medium',\n      'advanced_rate_limiter',\n      `: ${clientId}`,\n      { sourceClient: clientId }\n    )\n  }\n\n  private calculateAverageResponseTime(): number {\n    // \n    return Math.random() * 1000 // 0-1000ms\n  }\n\n  private calculateSystemLoad(): number {\n    // CPU\n    return Math.random() * 0.8 // 0-80%\n  }\n\n  /**\n   * \n   */\n  private startBackgroundTasks(): void {\n    // 5DDoS\n    setInterval(() => {\n      this.detectDDoSAttack()\n    }, 5 * 60 * 1000)\n\n    // 10\n    setInterval(() => {\n      this.manageAutoBlockList()\n    }, 10 * 60 * 1000)\n\n    // 1\n    setInterval(() => {\n      this.ddosMetrics.blockedRequests = 0\n    }, 60 * 60 * 1000)\n  }\n\n  /**\n   * \n   */\n  getStatistics(): {\n    totalClients: number\n    activeClients: number\n    blockedClients: number\n    ddosMetrics: DDoSMetrics\n    topRiskClients: Array<{ clientId: string; riskScore: number; threatLevel: string }>\n  } {\n    const now = Date.now()\n    const activeThreshold = 5 * 60 * 1000 // 5\n\n    const activeClients = Array.from(this.clientProfiles.values()).filter(\n      profile => now - profile.lastActivity.getTime() < activeThreshold\n    ).length\n\n    const topRiskClients = Array.from(this.clientProfiles.entries())\n      .map(([clientId, profile]) => ({\n        clientId,\n        riskScore: profile.riskScore,\n        threatLevel: profile.threatLevel\n      }))\n      .sort((a, b) => b.riskScore - a.riskScore)\n      .slice(0, 10)\n\n    return {\n      totalClients: this.clientProfiles.size,\n      activeClients,\n      blockedClients: this.blockedClients.size,\n      ddosMetrics: this.ddosMetrics,\n      topRiskClients\n    }\n  }\n}\n\n// \nexport const advancedRateLimiter = AdvancedRateLimiter.getInstance()","/**\n * \n * JWT \n */\n\nimport { generateSecureHash, generateSecureRandomString, secureLocalStorage } from './security'\nimport { SecurityAuditLogger } from './security-audit-logger'\n\nexport interface SessionConfig {\n  maxAge: number // \n  renewalThresholdMs: number // \n  maxConcurrentSessions: number // \n  requireSecureCookie: boolean\n  enableSessionFingerprinting: boolean\n  enableDeviceTracking: boolean\n}\n\nexport interface UserSession {\n  sessionId: string\n  userId: string\n  email?: string\n  roles: string[]\n  permissions: string[]\n  createdAt: Date\n  lastActivity: Date\n  expiresAt: Date\n  deviceFingerprint: string\n  ipAddress: string\n  userAgent: string\n  isActive: boolean\n  metadata: Record<string, any>\n}\n\nexport interface AuthenticationResult {\n  success: boolean\n  sessionId?: string\n  accessToken?: string\n  refreshToken?: string\n  expiresIn?: number\n  user?: {\n    id: string\n    email: string\n    roles: string[]\n    permissions: string[]\n  }\n  mfaRequired?: boolean\n  mfaToken?: string\n  errors: string[]\n}\n\nexport interface DeviceInfo {\n  fingerprint: string\n  userAgent: string\n  screen: { width: number; height: number }\n  timezone: string\n  language: string\n  platform: string\n  trusted: boolean\n  lastSeen: Date\n}\n\n/**\n * \n */\nexport class SessionManager {\n  private static instance: SessionManager\n  private config: SessionConfig\n  private readonly activeSessions = new Map<string, UserSession>()\n  private readonly userSessions = new Map<string, string[]>() // userId -> sessionIds\n  private readonly deviceRegistry = new Map<string, DeviceInfo>()\n  private readonly auditLogger = SecurityAuditLogger.getInstance()\n  private readonly storage = secureLocalStorage()\n\n  private constructor() {\n    this.config = {\n      maxAge: 8 * 60 * 60 * 1000, // 8\n      renewalThresholdMs: 30 * 60 * 1000, // 30\n      maxConcurrentSessions: 3,\n      requireSecureCookie: true,\n      enableSessionFingerprinting: true,\n      enableDeviceTracking: true\n    }\n    this.loadPersistedSessions()\n    this.startSessionMaintenance()\n  }\n\n  static getInstance(): SessionManager {\n    if (!SessionManager.instance) {\n      SessionManager.instance = new SessionManager()\n    }\n    return SessionManager.instance\n  }\n\n  /**\n   * \n   */\n  updateConfig(newConfig: Partial<SessionConfig>): void {\n    this.config = { ...this.config, ...newConfig }\n    this.auditLogger.logSecurityEvent(\n      'session_config_updated',\n      'low',\n      'session_manager',\n      '',\n      { updatedFields: Object.keys(newConfig) }\n    )\n  }\n\n  /**\n   * \n   */\n  async createSession(\n    userId: string,\n    email: string,\n    roles: string[] = [],\n    permissions: string[] = [],\n    deviceInfo?: Partial<DeviceInfo>\n  ): Promise<UserSession> {\n    const now = new Date()\n    const sessionId = await this.generateSessionId()\n    const deviceFingerprint = deviceInfo?.fingerprint || await this.generateDeviceFingerprint()\n\n    // \n    await this.enforceSessionLimits(userId)\n\n    // \n    if (this.config.enableDeviceTracking) {\n      await this.registerDevice(deviceFingerprint, deviceInfo)\n    }\n\n    const session: UserSession = {\n      sessionId,\n      userId,\n      email,\n      roles,\n      permissions,\n      createdAt: now,\n      lastActivity: now,\n      expiresAt: new Date(now.getTime() + this.config.maxAge),\n      deviceFingerprint,\n      ipAddress: this.getCurrentIPAddress(),\n      userAgent: navigator.userAgent,\n      isActive: true,\n      metadata: {}\n    }\n\n    // \n    this.activeSessions.set(sessionId, session)\n    \n    // \n    const userSessionIds = this.userSessions.get(userId) || []\n    userSessionIds.push(sessionId)\n    this.userSessions.set(userId, userSessionIds)\n\n    // \n    await this.persistSession(session)\n\n    this.auditLogger.logSecurityEvent(\n      'session_created',\n      'low',\n      'session_manager',\n      `:  ${userId}`,\n      {\n        sessionId,\n        userId,\n        email,\n        roles,\n        deviceFingerprint: `${deviceFingerprint.slice(0,8)  }...`,\n        expiresAt: session.expiresAt.toISOString()\n      }\n    )\n\n    return session\n  }\n\n  /**\n   * \n   */\n  async validateSession(sessionId: string): Promise<{\n    valid: boolean\n    session?: UserSession\n    errors: string[]\n  }> {\n    const errors: string[] = []\n    const session = this.activeSessions.get(sessionId)\n\n    if (!session) {\n      errors.push('Session not found')\n      return { valid: false, errors }\n    }\n\n    if (!session.isActive) {\n      errors.push('Session is inactive')\n      return { valid: false, errors }\n    }\n\n    // \n    if (new Date() > session.expiresAt) {\n      errors.push('Session expired')\n      await this.invalidateSession(sessionId, 'expired')\n      return { valid: false, errors }\n    }\n\n    // \n    if (this.config.enableSessionFingerprinting) {\n      const currentFingerprint = await this.generateDeviceFingerprint()\n      if (session.deviceFingerprint !== currentFingerprint) {\n        errors.push('Device fingerprint mismatch')\n        this.auditLogger.logSecurityEvent(\n          'session_fingerprint_mismatch',\n          'high',\n          'session_manager',\n          '',\n          {\n            sessionId,\n            userId: session.userId,\n            storedFingerprint: `${session.deviceFingerprint.slice(0,8)  }...`,\n            currentFingerprint: `${currentFingerprint.slice(0,8)  }...`\n          }\n        )\n        await this.invalidateSession(sessionId, 'security_violation')\n        return { valid: false, errors }\n      }\n    }\n\n    // \n    session.lastActivity = new Date()\n    await this.persistSession(session)\n\n    // \n    const timeUntilExpiry = session.expiresAt.getTime() - Date.now()\n    if (timeUntilExpiry < this.config.renewalThresholdMs) {\n      await this.renewSession(sessionId)\n    }\n\n    return { valid: true, session, errors: [] }\n  }\n\n  /**\n   * \n   */\n  async renewSession(sessionId: string): Promise<boolean> {\n    const session = this.activeSessions.get(sessionId)\n    if (!session?.isActive) {\n      return false\n    }\n\n    const now = new Date()\n    session.expiresAt = new Date(now.getTime() + this.config.maxAge)\n    session.lastActivity = now\n\n    await this.persistSession(session)\n\n    this.auditLogger.logSecurityEvent(\n      'session_renewed',\n      'low',\n      'session_manager',\n      `: ${sessionId}`,\n      {\n        sessionId,\n        userId: session.userId,\n        newExpiresAt: session.expiresAt.toISOString()\n      }\n    )\n\n    return true\n  }\n\n  /**\n   * \n   */\n  async invalidateSession(sessionId: string, reason: string = 'manual'): Promise<boolean> {\n    const session = this.activeSessions.get(sessionId)\n    if (!session) {\n      return false\n    }\n\n    // \n    session.isActive = false\n\n    // \n    const userSessionIds = this.userSessions.get(session.userId) || []\n    const updatedUserSessions = userSessionIds.filter(id => id !== sessionId)\n    if (updatedUserSessions.length === 0) {\n      this.userSessions.delete(session.userId)\n    } else {\n      this.userSessions.set(session.userId, updatedUserSessions)\n    }\n\n    // \n    this.activeSessions.delete(sessionId)\n\n    // \n    await this.storage.removeItem(`session_${sessionId}`)\n\n    this.auditLogger.logSecurityEvent(\n      'session_invalidated',\n      'low',\n      'session_manager',\n      `: ${sessionId}`,\n      {\n        sessionId,\n        userId: session.userId,\n        reason,\n        duration: Date.now() - session.createdAt.getTime()\n      }\n    )\n\n    return true\n  }\n\n  /**\n   * \n   */\n  async invalidateAllUserSessions(userId: string, reason: string = 'manual'): Promise<number> {\n    const userSessionIds = this.userSessions.get(userId) || []\n    let invalidatedCount = 0\n\n    for (const sessionId of userSessionIds) {\n      if (await this.invalidateSession(sessionId, reason)) {\n        invalidatedCount++\n      }\n    }\n\n    this.auditLogger.logSecurityEvent(\n      'all_user_sessions_invalidated',\n      'medium',\n      'session_manager',\n      `: ${userId}`,\n      {\n        userId,\n        reason,\n        invalidatedCount\n      }\n    )\n\n    return invalidatedCount\n  }\n\n  /**\n   * \n   */\n  private async enforceSessionLimits(userId: string): Promise<void> {\n    const existingSessions = this.userSessions.get(userId) || []\n    \n    if (existingSessions.length >= this.config.maxConcurrentSessions) {\n      // \n      const sessionsToRemove = existingSessions.slice(0, \n        existingSessions.length - this.config.maxConcurrentSessions + 1\n      )\n\n      for (const sessionId of sessionsToRemove) {\n        await this.invalidateSession(sessionId, 'session_limit_exceeded')\n      }\n\n      this.auditLogger.logSecurityEvent(\n        'session_limit_enforced',\n        'medium',\n        'session_manager',\n        `:  ${userId}`,\n        {\n          userId,\n          removedSessions: sessionsToRemove.length,\n          maxSessions: this.config.maxConcurrentSessions\n        }\n      )\n    }\n  }\n\n  /**\n   * \n   */\n  private async registerDevice(fingerprint: string, deviceInfo?: Partial<DeviceInfo>): Promise<void> {\n    const existingDevice = this.deviceRegistry.get(fingerprint)\n    const now = new Date()\n\n    const device: DeviceInfo = {\n      fingerprint,\n      userAgent: deviceInfo?.userAgent || navigator.userAgent,\n      screen: deviceInfo?.screen || {\n        width: screen.width,\n        height: screen.height\n      },\n      timezone: deviceInfo?.timezone || Intl.DateTimeFormat().resolvedOptions().timeZone,\n      language: deviceInfo?.language || navigator.language,\n      platform: deviceInfo?.platform || navigator.platform,\n      trusted: existingDevice?.trusted || false,\n      lastSeen: now\n    }\n\n    this.deviceRegistry.set(fingerprint, device)\n\n    if (!existingDevice) {\n      this.auditLogger.logSecurityEvent(\n        'new_device_registered',\n        'low',\n        'session_manager',\n        '',\n        {\n          fingerprint: `${fingerprint.slice(0,8)  }...`,\n          userAgent: `${device.userAgent.slice(0,50)  }...`,\n          platform: device.platform,\n          timezone: device.timezone\n        }\n      )\n    }\n  }\n\n  /**\n   * \n   */\n  private async generateDeviceFingerprint(): Promise<string> {\n    const components = [\n      navigator.userAgent,\n      navigator.language,\n      navigator.platform,\n      screen.width.toString(),\n      screen.height.toString(),\n      screen.colorDepth.toString(),\n      new Date().getTimezoneOffset().toString(),\n      navigator.hardwareConcurrency?.toString() || '0',\n      navigator.maxTouchPoints?.toString() || '0'\n    ]\n\n    // Canvas \n    try {\n      const canvas = document.createElement('canvas')\n      const ctx = canvas.getContext('2d')\n      if (ctx) {\n        ctx.textBaseline = 'top'\n        ctx.font = '14px Arial'\n        ctx.fillText('Device fingerprint', 2, 2)\n        components.push(canvas.toDataURL())\n      }\n    } catch {\n      // Canvas \n    }\n\n    const fingerprint = await generateSecureHash(components.join('|'))\n    return fingerprint\n  }\n\n  /**\n   * ID\n   */\n  private async generateSessionId(): Promise<string> {\n    const randomPart = generateSecureRandomString(32)\n    const timestampPart = Date.now().toString(36)\n    const hashPart = await generateSecureHash(randomPart + timestampPart)\n    \n    return `ses_${timestampPart}_${hashPart.slice(0, 16)}_${randomPart.slice(0, 16)}`\n  }\n\n  /**\n   * \n   */\n  private async persistSession(session: UserSession): Promise<void> {\n    try {\n      await this.storage.setItem(\n        `session_${session.sessionId}`,\n        {\n          ...session,\n          createdAt: session.createdAt.toISOString(),\n          lastActivity: session.lastActivity.toISOString(),\n          expiresAt: session.expiresAt.toISOString()\n        },\n        true // \n      )\n    } catch (error) {\n      this.auditLogger.logSecurityEvent(\n        'session_persistence_failed',\n        'medium',\n        'session_manager',\n        '',\n        {\n          sessionId: session.sessionId,\n          error: error instanceof Error ? error.message : String(error)\n        }\n      )\n    }\n  }\n\n  /**\n   * \n   */\n  private async loadPersistedSessions(): Promise<void> {\n    // localStorage\n    // \n  }\n\n  /**\n   * \n   */\n  private startSessionMaintenance(): void {\n    // 5\n    setInterval(async () => {\n      await this.cleanupExpiredSessions()\n    }, 5 * 60 * 1000)\n\n    // 1\n    setInterval(() => {\n      this.logSessionStatistics()\n    }, 60 * 60 * 1000)\n  }\n\n  /**\n   * \n   */\n  private async cleanupExpiredSessions(): Promise<void> {\n    const now = new Date()\n    let cleanedCount = 0\n\n    for (const [sessionId, session] of this.activeSessions.entries()) {\n      if (now > session.expiresAt || !session.isActive) {\n        await this.invalidateSession(sessionId, 'expired')\n        cleanedCount++\n      }\n    }\n\n    if (cleanedCount > 0) {\n      this.auditLogger.logSecurityEvent(\n        'expired_sessions_cleaned',\n        'low',\n        'session_manager',\n        `: ${cleanedCount}`,\n        { cleanedCount }\n      )\n    }\n  }\n\n  /**\n   * \n   */\n  private logSessionStatistics(): void {\n    const stats = this.getSessionStatistics()\n    \n    this.auditLogger.logSecurityEvent(\n      'session_statistics',\n      'low',\n      'session_manager',\n      '',\n      stats\n    )\n  }\n\n  /**\n   * IP\n   */\n  private getCurrentIPAddress(): string {\n    // IP\n    return '127.0.0.1'\n  }\n\n  /**\n   * \n   */\n  getSessionStatistics(): {\n    totalActiveSessions: number\n    totalUsers: number\n    averageSessionDuration: number\n    deviceTypes: Record<string, number>\n    topUsersBySessionCount: Array<{ userId: string; sessionCount: number }>\n  } {\n    const now = new Date()\n    let totalDuration = 0\n    const deviceTypes: Record<string, number> = {}\n    const userSessionCounts = new Map<string, number>()\n\n    for (const [, session] of this.activeSessions.entries()) {\n      if (session.isActive) {\n        totalDuration += now.getTime() - session.createdAt.getTime()\n\n        // \n        const deviceType = this.classifyDevice(session.userAgent)\n        deviceTypes[deviceType] = (deviceTypes[deviceType] || 0) + 1\n\n        // \n        userSessionCounts.set(\n          session.userId,\n          (userSessionCounts.get(session.userId) || 0) + 1\n        )\n      }\n    }\n\n    const averageSessionDuration = this.activeSessions.size > 0 \n      ? totalDuration / this.activeSessions.size \n      : 0\n\n    const topUsersBySessionCount = Array.from(userSessionCounts.entries())\n      .map(([userId, count]) => ({ userId, sessionCount: count }))\n      .sort((a, b) => b.sessionCount - a.sessionCount)\n      .slice(0, 10)\n\n    return {\n      totalActiveSessions: this.activeSessions.size,\n      totalUsers: this.userSessions.size,\n      averageSessionDuration,\n      deviceTypes,\n      topUsersBySessionCount\n    }\n  }\n\n  /**\n   * \n   */\n  private classifyDevice(userAgent: string): string {\n    if (/Mobile|Android|iPhone|iPad/.test(userAgent)) {\n      return 'mobile'\n    } if (userAgent.includes('Tablet')) {\n      return 'tablet'\n    } \n      return 'desktop'\n    \n  }\n\n  /**\n   * \n   */\n  getSession(sessionId: string): UserSession | null {\n    return this.activeSessions.get(sessionId) || null\n  }\n\n  /**\n   * \n   */\n  getUserSessions(userId: string): UserSession[] {\n    const sessionIds = this.userSessions.get(userId) || []\n    return sessionIds\n      .map(id => this.activeSessions.get(id))\n      .filter((session): session is UserSession => Boolean(session) && session.isActive)\n  }\n}\n\n/**\n * \n */\nexport class MFAManager {\n  private static instance: MFAManager\n  private readonly pendingMFA = new Map<string, { \n    userId: string\n    method: 'totp' | 'sms' | 'email'\n    code: string\n    expiresAt: Date\n    attempts: number\n  }>()\n  private readonly auditLogger = SecurityAuditLogger.getInstance()\n\n  static getInstance(): MFAManager {\n    if (!MFAManager.instance) {\n      MFAManager.instance = new MFAManager()\n    }\n    return MFAManager.instance\n  }\n\n  /**\n   * MFA \n   */\n  async generateMFAToken(userId: string, method: 'totp' | 'sms' | 'email'): Promise<string> {\n    const mfaToken = generateSecureRandomString(32)\n    const code = this.generateMFACode()\n    const expiresAt = new Date(Date.now() + 5 * 60 * 1000) // 5\n\n    this.pendingMFA.set(mfaToken, {\n      userId,\n      method,\n      code,\n      expiresAt,\n      attempts: 0\n    })\n\n    // MFA \n    await this.sendMFACode(userId, method, code)\n\n    this.auditLogger.logSecurityEvent(\n      'mfa_token_generated',\n      'low',\n      'mfa_manager',\n      `MFA :  ${userId}`,\n      {\n        userId,\n        method,\n        mfaToken: `${mfaToken.slice(0,8)  }...`\n      }\n    )\n\n    return mfaToken\n  }\n\n  /**\n   * MFA \n   */\n  async verifyMFACode(mfaToken: string, providedCode: string): Promise<{\n    success: boolean\n    userId?: string\n    errors: string[]\n  }> {\n    const errors: string[] = []\n    const mfaData = this.pendingMFA.get(mfaToken)\n\n    if (!mfaData) {\n      errors.push('Invalid MFA token')\n      return { success: false, errors }\n    }\n\n    if (new Date() > mfaData.expiresAt) {\n      errors.push('MFA code expired')\n      this.pendingMFA.delete(mfaToken)\n      return { success: false, errors }\n    }\n\n    mfaData.attempts++\n\n    if (mfaData.attempts > 3) {\n      errors.push('Too many MFA attempts')\n      this.pendingMFA.delete(mfaToken)\n      \n      this.auditLogger.logSecurityEvent(\n        'mfa_too_many_attempts',\n        'high',\n        'mfa_manager',\n        `MFA :  ${mfaData.userId}`,\n        {\n          userId: mfaData.userId,\n          attempts: mfaData.attempts,\n          mfaToken: `${mfaToken.slice(0,8)  }...`\n        }\n      )\n      \n      return { success: false, errors }\n    }\n\n    if (providedCode !== mfaData.code) {\n      errors.push('Invalid MFA code')\n      \n      this.auditLogger.logSecurityEvent(\n        'mfa_invalid_code',\n        'medium',\n        'mfa_manager',\n        `MFA :  ${mfaData.userId}`,\n        {\n          userId: mfaData.userId,\n          attempts: mfaData.attempts,\n          method: mfaData.method\n        }\n      )\n      \n      return { success: false, errors }\n    }\n\n    // \n    this.pendingMFA.delete(mfaToken)\n\n    this.auditLogger.logSecurityEvent(\n      'mfa_verification_success',\n      'low',\n      'mfa_manager',\n      `MFA :  ${mfaData.userId}`,\n      {\n        userId: mfaData.userId,\n        method: mfaData.method,\n        attempts: mfaData.attempts\n      }\n    )\n\n    return { success: true, userId: mfaData.userId, errors: [] }\n  }\n\n  /**\n   * MFA \n   */\n  private generateMFACode(): string {\n    // 6\n    return Math.floor(100000 + Math.random() * 900000).toString()\n  }\n\n  /**\n   * MFA \n   */\n  private async sendMFACode(userId: string, method: 'totp' | 'sms' | 'email', code: string): Promise<void> {\n    // SMS APIAPI\n    console.log(`MFA Code for ${userId} via ${method}: ${code}`)\n  }\n}\n\n// \nexport const sessionManager = SessionManager.getInstance()\nexport const mfaManager = MFAManager.getInstance()","/**\n * \n * \n */\n\nimport { generateSecureHash, generateSecureRandomString } from './security'\nimport { SecurityAuditLogger } from './security-audit-logger'\n\nexport interface SecureErrorConfig {\n  exposeStackTrace: boolean\n  maxErrorMessageLength: number\n  sensitiveDataPatterns: RegExp[]\n  logIntegrityCheck: boolean\n  errorSanitization: boolean\n  clientErrorReporting: boolean\n  serverErrorReporting: boolean\n}\n\nexport interface ErrorContext {\n  component: string\n  method?: string\n  userId?: string\n  sessionId?: string\n  requestId?: string\n  timestamp?: Date\n  userAgent?: string\n  url?: string\n  additionalContext?: Record<string, any>\n}\n\nexport interface SanitizedError {\n  id: string\n  message: string\n  code: string\n  severity: 'low' | 'medium' | 'high' | 'critical'\n  timestamp: Date\n  context: ErrorContext\n  stackTrace?: string\n  hash: string\n  userFriendlyMessage: string\n}\n\nexport interface ErrorReport {\n  errorId: string\n  sanitizedError: SanitizedError\n  reportedAt: Date\n  reportedBy: 'system' | 'user'\n  environmentInfo: {\n    userAgent: string\n    url: string\n    timestamp: Date\n    sessionId?: string\n  }\n}\n\n/**\n * \n */\nexport class SecureErrorHandler {\n  private static instance: SecureErrorHandler\n  private config: SecureErrorConfig\n  private readonly errorLog = new Map<string, SanitizedError>()\n  private readonly auditLogger = SecurityAuditLogger.getInstance()\n  private sensitivePatterns: RegExp[]\n\n  private constructor() {\n    this.config = {\n      exposeStackTrace: import.meta.env.DEV,\n      maxErrorMessageLength: 500,\n      sensitiveDataPatterns: [],\n      logIntegrityCheck: true,\n      errorSanitization: true,\n      clientErrorReporting: true,\n      serverErrorReporting: false\n    }\n\n    this.initializeSensitivePatterns()\n    this.setupGlobalErrorHandlers()\n  }\n\n  static getInstance(): SecureErrorHandler {\n    if (!SecureErrorHandler.instance) {\n      SecureErrorHandler.instance = new SecureErrorHandler()\n    }\n    return SecureErrorHandler.instance\n  }\n\n  /**\n   * \n   */\n  private initializeSensitivePatterns(): void {\n    this.sensitivePatterns = [\n      // \n      /\\b4[0-9]{12}(?:[0-9]{3})?\\b/g, // Visa\n      /\\b5[1-5][0-9]{14}\\b/g, // MasterCard\n      /\\b3[47][0-9]{13}\\b/g, // American Express\n      \n      // \n      /\\b\\d{3}-\\d{2}-\\d{4}\\b/g,\n      \n      // \n      /\\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Z|a-z]{2,}\\b/g,\n      \n      // \n      /password[=:\\s]*['\"]*([^'\"\\s]+)['\"]*\\s*/gi,\n      /pass[=:\\s]*['\"]*([^'\"\\s]+)['\"]*\\s*/gi,\n      /token[=:\\s]*['\"]*([^'\"\\s]+)['\"]*\\s*/gi,\n      /key[=:\\s]*['\"]*([^'\"\\s]+)['\"]*\\s*/gi,\n      /secret[=:\\s]*['\"]*([^'\"\\s]+)['\"]*\\s*/gi,\n      \n      // IP \n      /\\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b/g,\n      \n      // JWT \n      /eyJ[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+/g,\n      \n      // \n      /[C-Z]:\\\\(?:[^\\\\/:*?\"<>|\\r\\n]+\\\\?)*[^\\\\/:*?\"<>|\\r\\n]*/g,\n      /\\/(?:home|root|etc|var)\\/[^\\s]*/g,\n      \n      // \n      /(?:mongodb|mysql|postgres|redis):\\/\\/[^\\s]*/gi,\n      \n      // API\n      /(?:api[_-]?key|apikey)[=:\\s]*['\"]*([^'\"\\s]+)['\"]*\\s*/gi,\n      \n      // ID\n      /(?:session[_-]?id|sessionid)[=:\\s]*['\"]*([^'\"\\s]+)['\"]*\\s*/gi\n    ]\n  }\n\n  /**\n   * \n   */\n  private setupGlobalErrorHandlers(): void {\n    // JavaScript \n    window.addEventListener('error', (event) => {\n      this.handleError(\n        event.error || new Error(event.message),\n        {\n          component: 'global_javascript',\n          url: event.filename,\n          additionalContext: {\n            lineNumber: event.lineno,\n            columnNumber: event.colno\n          }\n        }\n      )\n    })\n\n    // Promise rejection\n    window.addEventListener('unhandledrejection', (event) => {\n      this.handleError(\n        new Error(`Unhandled Promise Rejection: ${event.reason}`),\n        {\n          component: 'global_promise',\n          additionalContext: {\n            reason: this.sanitizeValue(String(event.reason))\n          }\n        }\n      )\n    })\n\n    // \n    window.addEventListener('error', (event) => {\n      if (event.target && event.target !== window) {\n        this.handleError(\n          new Error(`Resource loading failed: ${(event.target as any).src || (event.target as any).href}`),\n          {\n            component: 'resource_loading',\n            additionalContext: {\n              tagName: (event.target as Element).tagName,\n              src: this.sanitizeValue((event.target as any).src || (event.target as any).href)\n            }\n          }\n        )\n      }\n    }, true)\n  }\n\n  /**\n   * \n   */\n  async handleError(\n    error: Error | unknown, \n    context: ErrorContext = { component: 'unknown' }\n  ): Promise<SanitizedError> {\n    const errorId = generateSecureRandomString(16)\n    const timestamp = new Date()\n\n    let originalError: Error\n    if (error instanceof Error) {\n      originalError = error\n    } else {\n      originalError = new Error(String(error))\n    }\n\n    // \n    const sanitizedMessage = this.sanitizeErrorMessage(originalError.message)\n    \n    // \n    let sanitizedStackTrace: string | undefined\n    if (this.config.exposeStackTrace && originalError.stack) {\n      sanitizedStackTrace = this.sanitizeStackTrace(originalError.stack)\n    }\n\n    // \n    const severity = this.determineSeverity(originalError, context)\n\n    // \n    const userFriendlyMessage = this.generateUserFriendlyMessage(originalError, severity)\n\n    // \n    const sanitizedContext = this.sanitizeContext(context)\n\n    const sanitizedError: SanitizedError = {\n      id: errorId,\n      message: sanitizedMessage,\n      code: this.generateErrorCode(originalError),\n      severity,\n      timestamp,\n      context: sanitizedContext,\n      stackTrace: sanitizedStackTrace,\n      hash: '', // \n      userFriendlyMessage\n    }\n\n    // \n    if (this.config.logIntegrityCheck) {\n      sanitizedError.hash = await this.calculateErrorHash(sanitizedError)\n    }\n\n    // \n    this.errorLog.set(errorId, sanitizedError)\n\n    // \n    await this.auditLogger.logSecurityEvent(\n      'error_handled',\n      severity as any,\n      'secure_error_handler',\n      `: ${sanitizedError.code}`,\n      {\n        errorId,\n        component: context.component,\n        severity,\n        code: sanitizedError.code,\n        message: sanitizedMessage.slice(0, 100),\n        userId: context.userId,\n        sessionId: context.sessionId\n      }\n    )\n\n    // \n    if (severity === 'critical' || severity === 'high') {\n      await this.handleCriticalError(sanitizedError)\n    }\n\n    // \n    if (this.config.clientErrorReporting) {\n      await this.generateErrorReport(sanitizedError)\n    }\n\n    return sanitizedError\n  }\n\n  /**\n   * \n   */\n  private sanitizeErrorMessage(message: string): string {\n    if (!this.config.errorSanitization) {\n      return message\n    }\n\n    let sanitized = message\n\n    // \n    for (const pattern of this.sensitivePatterns) {\n      sanitized = sanitized.replace(pattern, '[REDACTED]')\n    }\n\n    // \n    if (sanitized.length > this.config.maxErrorMessageLength) {\n      sanitized = `${sanitized.slice(0, this.config.maxErrorMessageLength)  }...`\n    }\n\n    // \n    sanitized = sanitized\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&#x27;')\n      .replace(/&/g, '&amp;')\n\n    return sanitized\n  }\n\n  /**\n   * \n   */\n  private sanitizeStackTrace(stackTrace: string): string {\n    let sanitized = stackTrace\n\n    // \n    sanitized = sanitized.replace(/([C-Z]:\\\\|\\/)[^\\s\\n]*/g, '[FILE_PATH]')\n    \n    // \n    for (const pattern of this.sensitivePatterns) {\n      sanitized = sanitized.replace(pattern, '[REDACTED]')\n    }\n\n    // \n    if (import.meta.env.PROD) {\n      const lines = sanitized.split('\\n')\n      if (lines.length > 10) {\n        sanitized = `${lines.slice(0, 10).join('\\n')  }\\n... (truncated)`\n      }\n    }\n\n    return sanitized\n  }\n\n  /**\n   * \n   */\n  private sanitizeContext(context: ErrorContext): ErrorContext {\n    const sanitized: ErrorContext = { ...context }\n\n    // \n    if (sanitized.userId) {\n      sanitized.userId = this.hashSensitiveData(sanitized.userId)\n    }\n\n    if (sanitized.sessionId) {\n      sanitized.sessionId = this.hashSensitiveData(sanitized.sessionId)\n    }\n\n    if (sanitized.url) {\n      sanitized.url = this.sanitizeURL(sanitized.url)\n    }\n\n    if (sanitized.additionalContext) {\n      sanitized.additionalContext = this.sanitizeObject(sanitized.additionalContext)\n    }\n\n    return sanitized\n  }\n\n  /**\n   * URL\n   */\n  private sanitizeURL(url: string): string {\n    try {\n      const parsedURL = new URL(url)\n      \n      // \n      const sanitizedParams = new URLSearchParams()\n      for (const [key, value] of parsedURL.searchParams.entries()) {\n        if (this.isSensitiveParameter(key)) {\n          sanitizedParams.set(key, '[REDACTED]')\n        } else {\n          sanitizedParams.set(key, this.sanitizeValue(value))\n        }\n      }\n      \n      parsedURL.search = sanitizedParams.toString()\n      return parsedURL.toString()\n    } catch {\n      return this.sanitizeValue(url)\n    }\n  }\n\n  /**\n   * \n   */\n  private isSensitiveParameter(key: string): boolean {\n    const sensitiveKeys = [\n      'token', 'key', 'secret', 'password', 'pass', 'auth', \n      'session', 'sid', 'csrf', 'api_key', 'access_token',\n      'refresh_token', 'authorization'\n    ]\n    \n    return sensitiveKeys.some(sensitiveKey => \n      key.toLowerCase().includes(sensitiveKey)\n    )\n  }\n\n  /**\n   * \n   */\n  private sanitizeObject(obj: Record<string, any>): Record<string, any> {\n    const sanitized: Record<string, any> = {}\n    \n    for (const [key, value] of Object.entries(obj)) {\n      if (this.isSensitiveParameter(key)) {\n        sanitized[key] = '[REDACTED]'\n      } else if (typeof value === 'string') {\n        sanitized[key] = this.sanitizeValue(value)\n      } else if (typeof value === 'object' && value !== null) {\n        if (Array.isArray(value)) {\n          sanitized[key] = value.map(item => \n            typeof item === 'string' ? this.sanitizeValue(item) : item\n          )\n        } else {\n          sanitized[key] = this.sanitizeObject(value)\n        }\n      } else {\n        sanitized[key] = value\n      }\n    }\n    \n    return sanitized\n  }\n\n  /**\n   * \n   */\n  private sanitizeValue(value: string): string {\n    let sanitized = value\n    \n    for (const pattern of this.sensitivePatterns) {\n      sanitized = sanitized.replace(pattern, '[REDACTED]')\n    }\n    \n    return sanitized\n  }\n\n  /**\n   * \n   */\n  private hashSensitiveData(data: string): string {\n    // 44\n    if (data.length <= 8) {\n      return `${data.slice(0, 2)  }***${  data.slice(-2)}`\n    }\n    \n    const prefix = data.slice(0, 4)\n    const suffix = data.slice(-4)\n    const middle = data.slice(4, -4)\n    \n    //  generateSecureHash \n    let hash = 0\n    for (let i = 0; i < middle.length; i++) {\n      hash = ((hash << 5) - hash + middle.charCodeAt(i)) & 0xffffffff\n    }\n    \n    return `${prefix}***${Math.abs(hash).toString(16)}***${suffix}`\n  }\n\n  /**\n   * \n   */\n  private determineSeverity(error: Error, context: ErrorContext): 'low' | 'medium' | 'high' | 'critical' {\n    // \n    if (context.component.includes('security') || \n        context.component.includes('auth') ||\n        context.component.includes('session')) {\n      return 'critical'\n    }\n\n    // \n    if (error.message.includes('Network') || \n        error.message.includes('fetch')) {\n      return 'medium'\n    }\n\n    // \n    if (error instanceof SyntaxError) {\n      return 'high'\n    }\n\n    // \n    if (error instanceof ReferenceError) {\n      return 'medium'\n    }\n\n    // TypeError\n    if (error instanceof TypeError) {\n      return 'medium'\n    }\n\n    // \n    return 'low'\n  }\n\n  /**\n   * \n   */\n  private generateErrorCode(error: Error): string {\n    const errorType = error.constructor.name\n    const timestamp = Date.now().toString(36)\n    const random = Math.random().toString(36).slice(2, 6)\n    \n    return `${errorType.slice(0, 3).toUpperCase()}_${timestamp}_${random}`\n  }\n\n  /**\n   * \n   */\n  private generateUserFriendlyMessage(error: Error, severity: string): string {\n    const messages = {\n      critical: '',\n      high: '',\n      medium: '',\n      low: ''\n    }\n\n    // \n    if (error.message.includes('Network')) {\n      return ''\n    }\n\n    if (error.message.includes('Permission')) {\n      return ''\n    }\n\n    if (error.message.includes('timeout')) {\n      return ''\n    }\n\n    return messages[severity as keyof typeof messages] || messages.medium\n  }\n\n  /**\n   * \n   */\n  private async calculateErrorHash(error: Omit<SanitizedError, 'hash'>): Promise<string> {\n    const hashData = JSON.stringify({\n      id: error.id,\n      message: error.message,\n      code: error.code,\n      timestamp: error.timestamp.toISOString(),\n      component: error.context.component\n    })\n    \n    return await generateSecureHash(hashData)\n  }\n\n  /**\n   * \n   */\n  private async handleCriticalError(error: SanitizedError): Promise<void> {\n    // \n    console.error(` Critical Error Detected: ${error.id}`)\n    \n    // \n    await this.auditLogger.logSecurityEvent(\n      'critical_error_detected',\n      'critical',\n      'secure_error_handler',\n      `: ${error.code}`,\n      {\n        errorId: error.id,\n        component: error.context.component,\n        timestamp: error.timestamp.toISOString(),\n        hash: error.hash\n      }\n    )\n\n    // \n    this.attemptAutoRecovery(error)\n  }\n\n  /**\n   * \n   */\n  private attemptAutoRecovery(error: SanitizedError): void {\n    // \n    if (error.context.component.includes('session')) {\n      this.triggerSessionReset()\n    }\n\n    // \n    if (error.message.includes('storage') || error.message.includes('localStorage')) {\n      this.clearCorruptedStorage()\n    }\n  }\n\n  /**\n   * \n   */\n  private triggerSessionReset(): void {\n    // \n    try {\n      localStorage.removeItem('session_token')\n      sessionStorage.clear()\n    } catch (error) {\n      console.warn('Session reset failed:', error)\n    }\n  }\n\n  /**\n   * \n   */\n  private clearCorruptedStorage(): void {\n    try {\n      // \n      const keysToPreserve = ['user_preferences', 'game_settings']\n      const allKeys = Object.keys(localStorage)\n      \n      for (const key of allKeys) {\n        if (!keysToPreserve.some(preserve => key.includes(preserve))) {\n          localStorage.removeItem(key)\n        }\n      }\n    } catch (error) {\n      console.warn('Storage cleanup failed:', error)\n    }\n  }\n\n  /**\n   * \n   */\n  private async generateErrorReport(error: SanitizedError): Promise<ErrorReport> {\n    const report: ErrorReport = {\n      errorId: error.id,\n      sanitizedError: error,\n      reportedAt: new Date(),\n      reportedBy: 'system',\n      environmentInfo: {\n        userAgent: navigator.userAgent,\n        url: window.location.href,\n        timestamp: new Date(),\n        sessionId: error.context.sessionId\n      }\n    }\n\n    // \n    if (this.config.serverErrorReporting) {\n      await this.sendErrorReport(report)\n    }\n\n    return report\n  }\n\n  /**\n   * \n   */\n  private async sendErrorReport(report: ErrorReport): Promise<void> {\n    try {\n      // APIPOST\n      console.log('Error report would be sent:', report.errorId)\n    } catch (error) {\n      console.warn('Failed to send error report:', error)\n    }\n  }\n\n  /**\n   * \n   */\n  searchErrors(filter: {\n    severity?: string\n    component?: string\n    fromDate?: Date\n    toDate?: Date\n    limit?: number\n  } = {}): SanitizedError[] {\n    let errors = Array.from(this.errorLog.values())\n\n    if (filter.severity) {\n      errors = errors.filter(error => error.severity === filter.severity)\n    }\n\n    if (filter.component) {\n      errors = errors.filter(error => \n        error.context.component.includes(filter.component)\n      )\n    }\n\n    if (filter.fromDate) {\n      errors = errors.filter(error => error.timestamp >= filter.fromDate!)\n    }\n\n    if (filter.toDate) {\n      errors = errors.filter(error => error.timestamp <= filter.toDate!)\n    }\n\n    // \n    errors.sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime())\n\n    if (filter.limit) {\n      errors = errors.slice(0, filter.limit)\n    }\n\n    return errors\n  }\n\n  /**\n   * \n   */\n  getErrorStatistics(): {\n    totalErrors: number\n    errorsBySeverity: Record<string, number>\n    errorsByComponent: Record<string, number>\n    recentErrors: number\n    topErrors: Array<{ code: string; count: number }>\n  } {\n    const errors = Array.from(this.errorLog.values())\n    const oneHourAgo = new Date(Date.now() - 60 * 60 * 1000)\n\n    const errorsBySeverity: Record<string, number> = {}\n    const errorsByComponent: Record<string, number> = {}\n    const errorCounts: Record<string, number> = {}\n\n    let recentErrors = 0\n\n    for (const error of errors) {\n      // \n      errorsBySeverity[error.severity] = (errorsBySeverity[error.severity] || 0) + 1\n\n      // \n      errorsByComponent[error.context.component] = \n        (errorsByComponent[error.context.component] || 0) + 1\n\n      // \n      errorCounts[error.code] = (errorCounts[error.code] || 0) + 1\n\n      // \n      if (error.timestamp >= oneHourAgo) {\n        recentErrors++\n      }\n    }\n\n    const topErrors = Object.entries(errorCounts)\n      .map(([code, count]) => ({ code, count }))\n      .sort((a, b) => b.count - a.count)\n      .slice(0, 10)\n\n    return {\n      totalErrors: errors.length,\n      errorsBySeverity,\n      errorsByComponent,\n      recentErrors,\n      topErrors\n    }\n  }\n\n  /**\n   * \n   */\n  updateConfig(newConfig: Partial<SecureErrorConfig>): void {\n    this.config = { ...this.config, ...newConfig }\n  }\n\n  /**\n   * \n   */\n  clearErrorLog(): void {\n    this.errorLog.clear()\n    \n    this.auditLogger.logSecurityEvent(\n      'error_log_cleared',\n      'medium',\n      'secure_error_handler',\n      ''\n    )\n  }\n}\n\n// \nexport const secureErrorHandler = SecureErrorHandler.getInstance()","/**\n * \n * API\n */\n\nimport { sanitizeInput } from './security'\nimport { SecurityAuditLogger } from './security-audit-logger'\n\nexport interface ValidationRule {\n  name: string\n  validate: (value: any, context?: ValidationContext) => ValidationResult\n  severity: 'low' | 'medium' | 'high' | 'critical'\n  description: string\n}\n\nexport interface ValidationContext {\n  field: string\n  parentObject?: any\n  userId?: string\n  sessionId?: string\n  requestId?: string\n  metadata?: Record<string, any>\n}\n\nexport interface ValidationResult {\n  isValid: boolean\n  errors: string[]\n  warnings: string[]\n  sanitizedValue?: any\n  confidence: number // 0-1\n}\n\nexport interface FileValidationConfig {\n  maxSize: number\n  allowedTypes: string[]\n  allowedExtensions: string[]\n  scanForMalware: boolean\n  checkMetadata: boolean\n  validateStructure: boolean\n}\n\nexport interface BusinessRule {\n  name: string\n  condition: (data: any, context?: ValidationContext) => boolean\n  message: string\n  severity: 'low' | 'medium' | 'high' | 'critical'\n}\n\n/**\n * \n */\nexport class AdvancedInputValidator {\n  private static instance: AdvancedInputValidator\n  private readonly validationRules = new Map<string, ValidationRule[]>()\n  private readonly businessRules = new Map<string, BusinessRule[]>()\n  private readonly auditLogger = SecurityAuditLogger.getInstance()\n  private readonly fileValidationConfig: FileValidationConfig\n\n  private constructor() {\n    this.fileValidationConfig = {\n      maxSize: 10 * 1024 * 1024, // 10MB\n      allowedTypes: ['image/jpeg', 'image/png', 'image/gif', 'text/plain', 'application/json'],\n      allowedExtensions: ['.jpg', '.jpeg', '.png', '.gif', '.txt', '.json'],\n      scanForMalware: true,\n      checkMetadata: true,\n      validateStructure: true\n    }\n    \n    this.initializeDefaultRules()\n  }\n\n  static getInstance(): AdvancedInputValidator {\n    if (!AdvancedInputValidator.instance) {\n      AdvancedInputValidator.instance = new AdvancedInputValidator()\n    }\n    return AdvancedInputValidator.instance\n  }\n\n  /**\n   * \n   */\n  private initializeDefaultRules(): void {\n    // \n    this.addValidationRule('string', {\n      name: 'sql_injection_check',\n      validate: (value: string) => this.validateSQLInjection(value),\n      severity: 'critical',\n      description: 'SQL'\n    })\n\n    this.addValidationRule('string', {\n      name: 'xss_check',\n      validate: (value: string) => this.validateXSS(value),\n      severity: 'high',\n      description: 'XSS'\n    })\n\n    this.addValidationRule('string', {\n      name: 'command_injection_check',\n      validate: (value: string) => this.validateCommandInjection(value),\n      severity: 'critical',\n      description: ''\n    })\n\n    this.addValidationRule('string', {\n      name: 'path_traversal_check',\n      validate: (value: string) => this.validatePathTraversal(value),\n      severity: 'high',\n      description: ''\n    })\n\n    // \n    this.addValidationRule('number', {\n      name: 'range_check',\n      validate: (value: number, context?: ValidationContext) => \n        this.validateNumberRange(value, context),\n      severity: 'medium',\n      description: ''\n    })\n\n    this.addValidationRule('number', {\n      name: 'precision_check',\n      validate: (value: number) => this.validateNumberPrecision(value),\n      severity: 'low',\n      description: ''\n    })\n\n    // \n    this.addValidationRule('object', {\n      name: 'structure_check',\n      validate: (value: any, context?: ValidationContext) => \n        this.validateObjectStructure(value, context),\n      severity: 'medium',\n      description: ''\n    })\n\n    this.addValidationRule('object', {\n      name: 'size_check',\n      validate: (value: any) => this.validateObjectSize(value),\n      severity: 'medium',\n      description: ''\n    })\n\n    // \n    this.addValidationRule('array', {\n      name: 'length_check',\n      validate: (value: any[], context?: ValidationContext) => \n        this.validateArrayLength(value, context),\n      severity: 'medium',\n      description: ''\n    })\n\n    // \n    this.addValidationRule('email', {\n      name: 'format_check',\n      validate: (value: string) => this.validateEmailFormat(value),\n      severity: 'medium',\n      description: ''\n    })\n\n    this.addValidationRule('email', {\n      name: 'domain_check',\n      validate: (value: string) => this.validateEmailDomain(value),\n      severity: 'low',\n      description: ''\n    })\n\n    // URL\n    this.addValidationRule('url', {\n      name: 'protocol_check',\n      validate: (value: string) => this.validateURLProtocol(value),\n      severity: 'high',\n      description: 'URL'\n    })\n\n    this.addValidationRule('url', {\n      name: 'domain_whitelist_check',\n      validate: (value: string) => this.validateURLDomain(value),\n      severity: 'medium',\n      description: 'URL '\n    })\n  }\n\n  /**\n   * \n   */\n  addValidationRule(type: string, rule: ValidationRule): void {\n    if (!this.validationRules.has(type)) {\n      this.validationRules.set(type, [])\n    }\n    \n    this.validationRules.get(type)!.push(rule)\n    \n    this.auditLogger.logSecurityEvent(\n      'validation_rule_added',\n      'low',\n      'advanced_input_validator',\n      `: ${type}.${rule.name}`,\n      { type, ruleName: rule.name, severity: rule.severity }\n    )\n  }\n\n  /**\n   * \n   */\n  addBusinessRule(entity: string, rule: BusinessRule): void {\n    if (!this.businessRules.has(entity)) {\n      this.businessRules.set(entity, [])\n    }\n    \n    this.businessRules.get(entity)!.push(rule)\n  }\n\n  /**\n   * \n   */\n  async validateInput(\n    value: any, \n    type: string, \n    context?: ValidationContext\n  ): Promise<ValidationResult> {\n    const rules = this.validationRules.get(type) || []\n    const errors: string[] = []\n    const warnings: string[] = []\n    let sanitizedValue = value\n    let totalConfidence = 0\n    let validRules = 0\n\n    // \n    if (!this.validateType(value, type)) {\n      return {\n        isValid: false,\n        errors: [`Invalid type: expected ${type}, got ${typeof value}`],\n        warnings: [],\n        confidence: 0\n      }\n    }\n\n    // \n    for (const rule of rules) {\n      try {\n        const result = rule.validate(value, context)\n        \n        if (!result.isValid) {\n          errors.push(...result.errors)\n          \n          // \n          if (rule.severity === 'critical' || rule.severity === 'high') {\n            await this.auditLogger.logSecurityEvent(\n              'validation_rule_failed',\n              rule.severity as any,\n              'advanced_input_validator',\n              `: ${rule.name}`,\n              {\n                ruleName: rule.name,\n                type,\n                field: context?.field,\n                errors: result.errors,\n                value: this.sanitizeLogValue(value)\n              }\n            )\n          }\n        }\n        \n        warnings.push(...result.warnings)\n        \n        if (result.sanitizedValue !== undefined) {\n          sanitizedValue = result.sanitizedValue\n        }\n        \n        totalConfidence += result.confidence\n        validRules++\n        \n      } catch (error) {\n        warnings.push(`Rule execution failed: ${rule.name}`)\n        \n        await this.auditLogger.logSecurityEvent(\n          'validation_rule_error',\n          'medium',\n          'advanced_input_validator',\n          `: ${rule.name}`,\n          {\n            ruleName: rule.name,\n            error: error instanceof Error ? error.message : String(error)\n          }\n        )\n      }\n    }\n\n    const averageConfidence = validRules > 0 ? totalConfidence / validRules : 0\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n      warnings,\n      sanitizedValue,\n      confidence: averageConfidence\n    }\n  }\n\n  /**\n   * JSON\n   */\n  async validateJSONPayload(\n    payload: any, \n    schema: any, \n    context?: ValidationContext\n  ): Promise<ValidationResult> {\n    const errors: string[] = []\n    const warnings: string[] = []\n    let sanitizedPayload = payload\n\n    try {\n      // \n      const schemaValidation = this.validateAgainstSchema(payload, schema)\n      if (!schemaValidation.isValid) {\n        errors.push(...schemaValidation.errors)\n      }\n\n      // \n      const payloadSize = JSON.stringify(payload).length\n      if (payloadSize > 1024 * 1024) { // 1MB\n        errors.push('Payload too large')\n        \n        await this.auditLogger.logSecurityEvent(\n          'oversized_payload',\n          'high',\n          'advanced_input_validator',\n          `: ${payloadSize} bytes`,\n          { size: payloadSize, field: context?.field }\n        )\n      }\n\n      // \n      const depth = this.calculateObjectDepth(payload)\n      if (depth > 20) {\n        errors.push('Object depth too high')\n        \n        await this.auditLogger.logSecurityEvent(\n          'deep_object_nesting',\n          'medium',\n          'advanced_input_validator',\n          `: ${depth} levels`,\n          { depth, field: context?.field }\n        )\n      }\n\n      // \n      if (typeof payload === 'object' && payload !== null) {\n        sanitizedPayload = await this.validateObjectRecursively(payload, context)\n      }\n\n    } catch (error) {\n      errors.push('JSON payload validation failed')\n      \n      await this.auditLogger.logSecurityEvent(\n        'json_validation_error',\n        'medium',\n        'advanced_input_validator',\n        'JSON ',\n        {\n          error: error instanceof Error ? error.message : String(error),\n          field: context?.field\n        }\n      )\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n      warnings,\n      sanitizedValue: sanitizedPayload,\n      confidence: errors.length === 0 ? 0.9 : 0.1\n    }\n  }\n\n  /**\n   * \n   */\n  async validateFile(\n    file: File, \n    context?: ValidationContext\n  ): Promise<ValidationResult> {\n    const errors: string[] = []\n    const warnings: string[] = []\n\n    try {\n      // \n      if (file.size > this.fileValidationConfig.maxSize) {\n        errors.push(`File too large: ${file.size} bytes`)\n      }\n\n      // \n      if (!this.fileValidationConfig.allowedTypes.includes(file.type)) {\n        errors.push(`Invalid file type: ${file.type}`)\n      }\n\n      // \n      const extension = this.getFileExtension(file.name)\n      if (!this.fileValidationConfig.allowedExtensions.includes(extension)) {\n        errors.push(`Invalid file extension: ${extension}`)\n      }\n\n      // MIME \n      const mimeExtensionMatch = this.validateMimeExtensionMatch(file.type, extension)\n      if (!mimeExtensionMatch) {\n        warnings.push('MIME type and extension mismatch')\n        \n        await this.auditLogger.logSecurityEvent(\n          'mime_extension_mismatch',\n          'medium',\n          'advanced_input_validator',\n          'MIME ',\n          {\n            fileName: file.name,\n            mimeType: file.type,\n            extension,\n            size: file.size\n          }\n        )\n      }\n\n      // \n      if (this.fileValidationConfig.validateStructure) {\n        const contentValidation = await this.validateFileContent(file)\n        if (!contentValidation.isValid) {\n          errors.push(...contentValidation.errors)\n          warnings.push(...contentValidation.warnings)\n        }\n      }\n\n      // \n      if (this.fileValidationConfig.scanForMalware) {\n        const malwareCheck = await this.scanForMalware(file)\n        if (!malwareCheck.isValid) {\n          errors.push(...malwareCheck.errors)\n        }\n      }\n\n      // \n      if (this.fileValidationConfig.checkMetadata) {\n        const metadataCheck = await this.validateFileMetadata(file)\n        warnings.push(...metadataCheck.warnings)\n      }\n\n    } catch (error) {\n      errors.push('File validation failed')\n      \n      await this.auditLogger.logSecurityEvent(\n        'file_validation_error',\n        'medium',\n        'advanced_input_validator',\n        '',\n        {\n          fileName: file.name,\n          error: error instanceof Error ? error.message : String(error)\n        }\n      )\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n      warnings,\n      confidence: errors.length === 0 ? 0.8 : 0.2\n    }\n  }\n\n  /**\n   * \n   */\n  async validateBusinessRules(\n    entity: string, \n    data: any, \n    context?: ValidationContext\n  ): Promise<ValidationResult> {\n    const rules = this.businessRules.get(entity) || []\n    const errors: string[] = []\n    const warnings: string[] = []\n\n    for (const rule of rules) {\n      try {\n        if (!rule.condition(data, context)) {\n          if (rule.severity === 'critical' || rule.severity === 'high') {\n            errors.push(rule.message)\n          } else {\n            warnings.push(rule.message)\n          }\n\n          await this.auditLogger.logSecurityEvent(\n            'business_rule_violation',\n            rule.severity as any,\n            'advanced_input_validator',\n            `: ${rule.name}`,\n            {\n              entity,\n              ruleName: rule.name,\n              message: rule.message,\n              userId: context?.userId\n            }\n          )\n        }\n      } catch (error) {\n        warnings.push(`Business rule execution failed: ${rule.name}`)\n      }\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n      warnings,\n      confidence: errors.length === 0 ? 0.9 : 0.3\n    }\n  }\n\n  // \n\n  private validateSQLInjection(value: string): ValidationResult {\n    const sqlPatterns = [\n      /(\\b(SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|EXEC|UNION)\\s)/i,\n      /(\\b(OR|AND)\\s+['\"]?\\d+['\"]?\\s*=\\s*['\"]?\\d+['\"]?)/i,\n      /(['\"];?\\s*(DROP|DELETE|INSERT|UPDATE)\\s)/i,\n      /(UNION\\s+SELECT)/i,\n      /(\\b(EXEC|EXECUTE)\\s*\\()/i,\n      /(--|\\/\\*|\\*\\/)/,\n      /(\\bCHAR\\s*\\(\\s*\\d+\\s*\\))/i,\n      /(\\bCONCAT\\s*\\()/i\n    ]\n\n    const suspiciousPatterns = sqlPatterns.filter(pattern => pattern.test(value))\n    \n    return {\n      isValid: suspiciousPatterns.length === 0,\n      errors: suspiciousPatterns.length > 0 ? ['Potential SQL injection detected'] : [],\n      warnings: [],\n      sanitizedValue: sanitizeInput(value),\n      confidence: suspiciousPatterns.length === 0 ? 0.9 : 0.1\n    }\n  }\n\n  private validateXSS(value: string): ValidationResult {\n    const xssPatterns = [\n      /<script[\\s\\S]*?>[\\s\\S]*?<\\/script>/gi,\n      /<iframe[\\s\\S]*?>[\\s\\S]*?<\\/iframe>/gi,\n      /<object[\\s\\S]*?>[\\s\\S]*?<\\/object>/gi,\n      /<embed[\\s\\S]*?>/gi,\n      /<link[\\s\\S]*?>/gi,\n      /javascript\\s*:/gi,\n      /on\\w+\\s*=/gi,\n      /<img[\\s\\S]*?onerror[\\s\\S]*?>/gi,\n      /<svg[\\s\\S]*?onload[\\s\\S]*?>/gi\n    ]\n\n    const suspiciousPatterns = xssPatterns.filter(pattern => pattern.test(value))\n    \n    return {\n      isValid: suspiciousPatterns.length === 0,\n      errors: suspiciousPatterns.length > 0 ? ['Potential XSS attack detected'] : [],\n      warnings: [],\n      sanitizedValue: sanitizeInput(value),\n      confidence: suspiciousPatterns.length === 0 ? 0.9 : 0.1\n    }\n  }\n\n  private validateCommandInjection(value: string): ValidationResult {\n    const commandPatterns = [\n      /[;&|`$\\\\]/,\n      /\\b(cat|ls|pwd|whoami|id|uname|ps|netstat|ifconfig|wget|curl)\\b/i,\n      /(\\|\\s*(cat|ls|pwd|whoami|id|uname|ps|netstat))/i,\n      /(&&|\\|\\|)/,\n      /\\$\\(.*\\)/,\n      /`.*`/,\n      /\\b(rm|mv|cp|chmod|chown|kill|killall)\\b/i\n    ]\n\n    const suspiciousPatterns = commandPatterns.filter(pattern => pattern.test(value))\n    \n    return {\n      isValid: suspiciousPatterns.length === 0,\n      errors: suspiciousPatterns.length > 0 ? ['Potential command injection detected'] : [],\n      warnings: [],\n      sanitizedValue: value.replace(/[;&|`$\\\\]/g, ''),\n      confidence: suspiciousPatterns.length === 0 ? 0.9 : 0.1\n    }\n  }\n\n  private validatePathTraversal(value: string): ValidationResult {\n    const pathTraversalPatterns = [\n      /\\.\\.\\//,\n      /\\.\\.\\\\/, \n      /%2e%2e%2f/i,\n      /%2e%2e%5c/i,\n      /\\.\\.%2f/i,\n      /\\.\\.%5c/i,\n      /\\/etc\\/passwd/i,\n      /\\/windows\\/system32/i\n    ]\n\n    const suspiciousPatterns = pathTraversalPatterns.filter(pattern => pattern.test(value))\n    \n    return {\n      isValid: suspiciousPatterns.length === 0,\n      errors: suspiciousPatterns.length > 0 ? ['Potential path traversal detected'] : [],\n      warnings: [],\n      sanitizedValue: value.replace(/\\.\\.\\//g, '').replace(/\\.\\.\\\\//g, ''),\n      confidence: suspiciousPatterns.length === 0 ? 0.9 : 0.1\n    }\n  }\n\n  private validateNumberRange(value: number, context?: ValidationContext): ValidationResult {\n    // \n    const minValue = -1000000\n    const maxValue = 1000000\n    \n    const isValid = value >= minValue && value <= maxValue && Number.isFinite(value)\n    \n    return {\n      isValid,\n      errors: isValid ? [] : ['Number out of safe range'],\n      warnings: [],\n      confidence: isValid ? 0.9 : 0.1\n    }\n  }\n\n  private validateNumberPrecision(value: number): ValidationResult {\n    const maxDecimalPlaces = 10\n    const decimalPlaces = (value.toString().split('.')[1] || '').length\n    \n    const isValid = decimalPlaces <= maxDecimalPlaces\n    \n    return {\n      isValid,\n      errors: isValid ? [] : ['Number precision too high'],\n      warnings: [],\n      confidence: isValid ? 0.9 : 0.7\n    }\n  }\n\n  private validateObjectStructure(value: any, context?: ValidationContext): ValidationResult {\n    const errors: string[] = []\n    const warnings: string[] = []\n\n    // \n    if (Object.prototype.hasOwnProperty.call(value, '__proto__') || \n        Object.prototype.hasOwnProperty.call(value, 'constructor') || \n        Object.prototype.hasOwnProperty.call(value, 'prototype')) {\n      errors.push('Potential prototype pollution detected')\n    }\n\n    // \n    try {\n      JSON.stringify(value)\n    } catch (error) {\n      if (error instanceof Error && error.message.includes('circular')) {\n        errors.push('Circular reference detected')\n      }\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n      warnings,\n      confidence: errors.length === 0 ? 0.8 : 0.2\n    }\n  }\n\n  private validateObjectSize(value: any): ValidationResult {\n    const maxProperties = 1000\n    const maxSize = 1024 * 1024 // 1MB\n\n    let propertyCount = 0\n    let estimatedSize = 0\n\n    try {\n      propertyCount = Object.keys(value).length\n      estimatedSize = JSON.stringify(value).length\n    } catch (error) {\n      return {\n        isValid: false,\n        errors: ['Cannot calculate object size'],\n        warnings: [],\n        confidence: 0.1\n      }\n    }\n\n    const errors: string[] = []\n    \n    if (propertyCount > maxProperties) {\n      errors.push(`Too many properties: ${propertyCount}`)\n    }\n    \n    if (estimatedSize > maxSize) {\n      errors.push(`Object too large: ${estimatedSize} bytes`)\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n      warnings: [],\n      confidence: errors.length === 0 ? 0.9 : 0.3\n    }\n  }\n\n  private validateArrayLength(value: any[], context?: ValidationContext): ValidationResult {\n    const maxLength = 10000\n    const isValid = value.length <= maxLength\n    \n    return {\n      isValid,\n      errors: isValid ? [] : [`Array too long: ${value.length}`],\n      warnings: [],\n      confidence: isValid ? 0.9 : 0.3\n    }\n  }\n\n  private validateEmailFormat(value: string): ValidationResult {\n    const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/\n    const isValid = emailRegex.test(value)\n    \n    return {\n      isValid,\n      errors: isValid ? [] : ['Invalid email format'],\n      warnings: [],\n      confidence: isValid ? 0.9 : 0.1\n    }\n  }\n\n  private validateEmailDomain(value: string): ValidationResult {\n    const suspiciousDomains = [\n      '10minutemail.com',\n      'tempmail.org',\n      'guerrillamail.com'\n    ]\n\n    const domain = value.split('@')[1]?.toLowerCase()\n    const isSuspicious = suspiciousDomains.includes(domain)\n    \n    return {\n      isValid: !isSuspicious,\n      errors: [],\n      warnings: isSuspicious ? ['Suspicious email domain'] : [],\n      confidence: isSuspicious ? 0.5 : 0.9\n    }\n  }\n\n  private validateURLProtocol(value: string): ValidationResult {\n    const allowedProtocols = ['http:', 'https:', 'mailto:', 'tel:']\n    \n    try {\n      const url = new URL(value)\n      const isValid = allowedProtocols.includes(url.protocol)\n      \n      return {\n        isValid,\n        errors: isValid ? [] : [`Invalid protocol: ${url.protocol}`],\n        warnings: [],\n        confidence: isValid ? 0.9 : 0.1\n      }\n    } catch {\n      return {\n        isValid: false,\n        errors: ['Invalid URL format'],\n        warnings: [],\n        confidence: 0.1\n      }\n    }\n  }\n\n  private validateURLDomain(value: string): ValidationResult {\n    const allowedDomains = [\n      'example.com',\n      'github.com',\n      'stackoverflow.com'\n    ]\n\n    try {\n      const url = new URL(value)\n      const isAllowed = allowedDomains.some(domain => \n        url.hostname === domain || url.hostname.endsWith(`.${  domain}`)\n      )\n      \n      return {\n        isValid: isAllowed,\n        errors: isAllowed ? [] : [`Domain not whitelisted: ${url.hostname}`],\n        warnings: [],\n        confidence: isAllowed ? 0.9 : 0.3\n      }\n    } catch {\n      return {\n        isValid: false,\n        errors: ['Invalid URL format'],\n        warnings: [],\n        confidence: 0.1\n      }\n    }\n  }\n\n  // \n\n  private validateType(value: any, type: string): boolean {\n    switch (type) {\n      case 'string':\n        return typeof value === 'string'\n      case 'number':\n        return typeof value === 'number' && !isNaN(value)\n      case 'boolean':\n        return typeof value === 'boolean'\n      case 'object':\n        return typeof value === 'object' && value !== null && !Array.isArray(value)\n      case 'array':\n        return Array.isArray(value)\n      case 'email':\n        return typeof value === 'string'\n      case 'url':\n        return typeof value === 'string'\n      default:\n        return false\n    }\n  }\n\n  private validateAgainstSchema(payload: any, schema: any): ValidationResult {\n    // Ajv\n    const errors: string[] = []\n    \n    if (schema.required) {\n      for (const field of schema.required) {\n        if (!(field in payload)) {\n          errors.push(`Required field missing: ${field}`)\n        }\n      }\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n      warnings: [],\n      confidence: errors.length === 0 ? 0.8 : 0.2\n    }\n  }\n\n  private calculateObjectDepth(obj: any, depth = 0): number {\n    if (depth > 50) return depth // \n    if (typeof obj !== 'object' || obj === null) return depth\n\n    let maxDepth = depth\n    for (const key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        const childDepth = this.calculateObjectDepth(obj[key], depth + 1)\n        maxDepth = Math.max(maxDepth, childDepth)\n      }\n    }\n\n    return maxDepth\n  }\n\n  private async validateObjectRecursively(obj: any, context?: ValidationContext): Promise<any> {\n    const sanitized: any = {}\n\n    for (const [key, value] of Object.entries(obj)) {\n      const fieldContext = {\n        ...context,\n        field: context?.field ? `${context.field}.${key}` : key\n      }\n\n      if (typeof value === 'string') {\n        const validation = await this.validateInput(value, 'string', fieldContext)\n        sanitized[key] = validation.sanitizedValue || value\n      } else if (typeof value === 'number') {\n        const validation = await this.validateInput(value, 'number', fieldContext)\n        sanitized[key] = validation.sanitizedValue || value\n      } else if (typeof value === 'object' && value !== null) {\n        if (Array.isArray(value)) {\n          sanitized[key] = value // \n        } else {\n          sanitized[key] = await this.validateObjectRecursively(value, fieldContext)\n        }\n      } else {\n        sanitized[key] = value\n      }\n    }\n\n    return sanitized\n  }\n\n  private getFileExtension(filename: string): string {\n    return filename.toLowerCase().substring(filename.lastIndexOf('.'))\n  }\n\n  private validateMimeExtensionMatch(mimeType: string, extension: string): boolean {\n    const mimeExtensionMap: Record<string, string[]> = {\n      'image/jpeg': ['.jpg', '.jpeg'],\n      'image/png': ['.png'],\n      'image/gif': ['.gif'],\n      'text/plain': ['.txt'],\n      'application/json': ['.json']\n    }\n\n    const expectedExtensions = mimeExtensionMap[mimeType]\n    return expectedExtensions ? expectedExtensions.includes(extension) : false\n  }\n\n  private async validateFileContent(file: File): ValidationResult {\n    const errors: string[] = []\n    const warnings: string[] = []\n\n    try {\n      // \n      const buffer = await file.slice(0, 20).arrayBuffer()\n      const header = new Uint8Array(buffer)\n      \n      if (!this.validateFileHeader(header, file.type)) {\n        warnings.push('File header does not match MIME type')\n      }\n\n    } catch (error) {\n      errors.push('Cannot read file content')\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n      warnings,\n      confidence: errors.length === 0 ? 0.8 : 0.3\n    }\n  }\n\n  private validateFileHeader(header: Uint8Array, mimeType: string): boolean {\n    // \n    const magicNumbers: Record<string, number[][]> = {\n      'image/jpeg': [[0xFF, 0xD8, 0xFF]],\n      'image/png': [[0x89, 0x50, 0x4E, 0x47]],\n      'image/gif': [[0x47, 0x49, 0x46, 0x38]]\n    }\n\n    const expectedMagic = magicNumbers[mimeType]\n    if (!expectedMagic) return true // \n\n    return expectedMagic.some(magic => \n      magic.every((byte, index) => header[index] === byte)\n    )\n  }\n\n  private async scanForMalware(file: File): Promise<ValidationResult> {\n    // \n    const suspiciousPatterns = [\n      'eval(',\n      'document.write(',\n      'setTimeout(',\n      'setInterval(',\n      '<script',\n      'javascript:',\n      'vbscript:'\n    ]\n\n    try {\n      const content = await file.text()\n      const foundPatterns = suspiciousPatterns.filter(pattern => \n        content.toLowerCase().includes(pattern)\n      )\n\n      return {\n        isValid: foundPatterns.length === 0,\n        errors: foundPatterns.length > 0 ? ['Suspicious content detected'] : [],\n        warnings: [],\n        confidence: foundPatterns.length === 0 ? 0.7 : 0.1\n      }\n    } catch {\n      return {\n        isValid: true,\n        errors: [],\n        warnings: ['Cannot scan file content'],\n        confidence: 0.5\n      }\n    }\n  }\n\n  private async validateFileMetadata(file: File): ValidationResult {\n    const warnings: string[] = []\n\n    // \n    if (file.name.length > 255) {\n      warnings.push('Filename too long')\n    }\n\n    if (/[<>:\"/\\\\|?*]/.test(file.name)) {\n      warnings.push('Filename contains invalid characters')\n    }\n\n    // \n    if (file.lastModified > Date.now()) {\n      warnings.push('File modification date is in the future')\n    }\n\n    return {\n      isValid: true,\n      errors: [],\n      warnings,\n      confidence: 0.8\n    }\n  }\n\n  private sanitizeLogValue(value: any): string {\n    const stringValue = String(value)\n    if (stringValue.length > 100) {\n      return `${stringValue.slice(0, 100)  }...`\n    }\n    return stringValue\n  }\n}\n\n// \nexport const advancedInputValidator = AdvancedInputValidator.getInstance()","/**\n * \n * \n */\n\nimport { apiSecurity, secureFetch } from './api-security'\nimport { advancedRateLimiter } from './advanced-rate-limiting'\nimport { mfaManager, sessionManager } from './session-security'\nimport { secureErrorHandler } from './secure-error-handling'\nimport { advancedInputValidator } from './advanced-input-validation'\nimport { SecurityAuditLogger } from './security-audit-logger'\nimport { SecurityMonitor } from './security-extensions'\nimport { CSPManager, SecurityHeaderManager } from './csp-manager'\n\nexport interface SecuritySystemConfig {\n  enableAPIProtection: boolean\n  enableRateLimiting: boolean\n  enableSessionManagement: boolean\n  enableSecureErrorHandling: boolean\n  enableInputValidation: boolean\n  enableAuditLogging: boolean\n  enableRealTimeMonitoring: boolean\n  securityLevel: 'low' | 'medium' | 'high' | 'maximum'\n  autoBlock: boolean\n  alertThreshold: number\n}\n\nexport interface SecurityStatus {\n  systemHealth: 'healthy' | 'warning' | 'critical'\n  activeThreats: number\n  blockedRequests: number\n  activeSessions: number\n  errorRate: number\n  lastUpdate: Date\n  componentStatus: {\n    apiSecurity: boolean\n    rateLimiting: boolean\n    sessionManagement: boolean\n    errorHandling: boolean\n    inputValidation: boolean\n    auditLogging: boolean\n    monitoring: boolean\n  }\n}\n\nexport interface SecurityReport {\n  generatedAt: Date\n  period: { start: Date; end: Date }\n  summary: {\n    totalThreats: number\n    blockedAttacks: number\n    vulnerabilitiesFound: number\n    systemUptime: number\n    errorRate: number\n  }\n  threatAnalysis: {\n    topAttackTypes: Array<{ type: string; count: number; severity: string }>\n    suspiciousIPs: Array<{ ip: string; attempts: number; blocked: boolean }>\n    vulnerabilityHotspots: Array<{ component: string; severity: string; description: string }>\n  }\n  performance: {\n    averageResponseTime: number\n    resourceUsage: { cpu: number; memory: number }\n    apiCallsBlocked: number\n    rateLimitHits: number\n  }\n  recommendations: string[]\n  compliance: {\n    owaspTop10: Array<{ category: string; status: 'compliant' | 'partial' | 'non_compliant' }>\n    dataProtection: 'compliant' | 'needs_improvement'\n    accessControl: 'strong' | 'adequate' | 'weak'\n  }\n}\n\n/**\n * \n */\nexport class IntegratedSecuritySystem {\n  private static instance: IntegratedSecuritySystem\n  private config: SecuritySystemConfig\n  private readonly auditLogger = SecurityAuditLogger.getInstance()\n  private readonly securityMonitor = SecurityMonitor.getInstance()\n  private readonly cspManager = CSPManager.getInstance()\n  private readonly headerManager = SecurityHeaderManager.getInstance()\n  \n  private isInitialized = false\n  private readonly startTime = new Date()\n  private readonly threatCache = new Map<string, any>()\n  private readonly alertQueue: any[] = []\n\n  private constructor() {\n    this.config = {\n      enableAPIProtection: true,\n      enableRateLimiting: true,\n      enableSessionManagement: false, // \n      enableSecureErrorHandling: true,\n      enableInputValidation: true,\n      enableAuditLogging: true,\n      enableRealTimeMonitoring: true,\n      securityLevel: 'high',\n      autoBlock: true,\n      alertThreshold: 10\n    }\n  }\n\n  static getInstance(): IntegratedSecuritySystem {\n    if (!IntegratedSecuritySystem.instance) {\n      IntegratedSecuritySystem.instance = new IntegratedSecuritySystem()\n    }\n    return IntegratedSecuritySystem.instance\n  }\n\n  /**\n   * \n   */\n  async initialize(customConfig?: Partial<SecuritySystemConfig>): Promise<void> {\n    if (this.isInitialized) {\n      console.warn('Security system already initialized')\n      return\n    }\n\n    try {\n      // \n      if (customConfig) {\n        this.config = { ...this.config, ...customConfig }\n      }\n\n      console.log(' ...')\n\n      // \n      this.adjustConfigForSecurityLevel()\n\n      // \n      await this.initializeComponents()\n\n      // \n      await this.setupSecurityPolicies()\n\n      // \n      if (this.config.enableRealTimeMonitoring) {\n        this.startRealTimeMonitoring()\n      }\n\n      // \n      this.setupSecurityEventHandlers()\n\n      // \n      await this.performInitialSecurityCheck()\n\n      this.isInitialized = true\n\n      await this.auditLogger.logSecurityEvent(\n        'integrated_security_system_initialized',\n        'low',\n        'integrated_security_system',\n        '',\n        {\n          config: this.config,\n          timestamp: new Date().toISOString(),\n          version: '1.0.0'\n        }\n      )\n\n      console.log(' ')\n\n    } catch (error) {\n      console.error(' :', error)\n      \n      // \n      await this.setupFallbackSecurity()\n      \n      throw new Error(`Security system initialization failed: ${error instanceof Error ? error.message : String(error)}`)\n    }\n  }\n\n  /**\n   * \n   */\n  private adjustConfigForSecurityLevel(): void {\n    switch (this.config.securityLevel) {\n      case 'maximum':\n        this.config.autoBlock = true\n        this.config.alertThreshold = 5\n        break\n      case 'high':\n        this.config.autoBlock = true\n        this.config.alertThreshold = 10\n        break\n      case 'medium':\n        this.config.autoBlock = false\n        this.config.alertThreshold = 20\n        break\n      case 'low':\n        this.config.autoBlock = false\n        this.config.alertThreshold = 50\n        break\n    }\n  }\n\n  /**\n   * \n   */\n  private async initializeComponents(): Promise<void> {\n    const initPromises: Promise<any>[] = []\n\n    // CSP\n    initPromises.push(\n      Promise.resolve().then(() => {\n        this.cspManager.initialize()\n        this.headerManager.initializeSecurityHeaders()\n      })\n    )\n\n    // API \n    if (this.config.enableAPIProtection) {\n      initPromises.push(\n        Promise.resolve().then(() => {\n          apiSecurity.updateConfig({\n            enforceHTTPS: this.config.securityLevel !== 'low',\n            rateLimitConfig: {\n              windowMs: 60 * 1000,\n              maxRequests: this.config.securityLevel === 'maximum' ? 30 : 60,\n              blockDurationMs: this.config.securityLevel === 'maximum' ? 10 * 60 * 1000 : 5 * 60 * 1000\n            }\n          })\n        })\n      )\n    }\n\n    // \n    if (this.config.enableSecureErrorHandling) {\n      initPromises.push(\n        Promise.resolve().then(() => {\n          secureErrorHandler.updateConfig({\n            exposeStackTrace: import.meta.env.DEV,\n            errorSanitization: this.config.securityLevel !== 'low',\n            clientErrorReporting: true\n          })\n        })\n      )\n    }\n\n    await Promise.all(initPromises)\n  }\n\n  /**\n   * \n   */\n  private async setupSecurityPolicies(): Promise<void> {\n    // \n    if (this.config.enableInputValidation) {\n      // \n      advancedInputValidator.addBusinessRule('game_action', {\n        name: 'valid_game_state',\n        condition: (data) => this.validateGameAction(data),\n        message: 'Invalid game action',\n        severity: 'medium'\n      })\n\n      advancedInputValidator.addBusinessRule('user_input', {\n        name: 'reasonable_input_length',\n        condition: (data) => typeof data === 'string' && data.length <= 1000,\n        message: 'Input too long',\n        severity: 'low'\n      })\n    }\n\n    // \n    if (this.config.enableRateLimiting) {\n      // AdvancedRateLimiter\n    }\n  }\n\n  /**\n   * \n   */\n  private startRealTimeMonitoring(): void {\n    // 30\n    setInterval(async () => {\n      await this.performLightweightSecurityCheck()\n    }, 30 * 1000)\n\n    // 5\n    setInterval(async () => {\n      await this.performDetailedSecurityCheck()\n    }, 5 * 60 * 1000)\n\n    // 1\n    setInterval(async () => {\n      await this.generateHourlySecurityReport()\n    }, 60 * 60 * 1000)\n\n    // DDoS \n    setInterval(async () => {\n      const ddosStatus = advancedRateLimiter.detectDDoSAttack()\n      if (ddosStatus.isUnderAttack) {\n        await this.handleDDoSDetection(ddosStatus)\n      }\n    }, 2 * 60 * 1000) // 2\n  }\n\n  /**\n   * \n   */\n  private setupSecurityEventHandlers(): void {\n    // \n    window.addEventListener('error', async (event) => {\n      await secureErrorHandler.handleError(event.error, {\n        component: 'global_error_handler',\n        url: event.filename,\n        additionalContext: {\n          lineNumber: event.lineno,\n          columnNumber: event.colno\n        }\n      })\n    })\n\n    // \n    document.addEventListener('securitypolicyviolation', async (event: any) => {\n      await this.handleSecurityViolation(event)\n    })\n\n    // \n    document.addEventListener('visibilitychange', async () => {\n      if (document.hidden) {\n        await this.auditLogger.logSecurityEvent(\n          'tab_hidden',\n          'low',\n          'integrated_security_system',\n          ''\n        )\n      }\n    })\n  }\n\n  /**\n   * \n   */\n  private async performInitialSecurityCheck(): Promise<void> {\n    const issues: string[] = []\n\n    // HTTPS \n    if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost') {\n      issues.push('HTTPS ')\n    }\n\n    // \n    const headerValidation = this.headerManager.validateSecurityHeaders()\n    if (headerValidation.missing.length > 0) {\n      issues.push(`: ${headerValidation.missing.join(', ')}`)\n    }\n\n    // CSP \n    const cspStats = this.cspManager.getViolationStats()\n    if (cspStats.total > 0) {\n      issues.push(`CSP : ${cspStats.total}`)\n    }\n\n    // \n    if (!window.crypto?.subtle) {\n      issues.push('Web Crypto API ')\n    }\n\n    if (issues.length > 0) {\n      await this.auditLogger.logSecurityEvent(\n        'initial_security_issues',\n        'medium',\n        'integrated_security_system',\n        `: ${issues.join(', ')}`,\n        { issues }\n      )\n    }\n  }\n\n  /**\n   * \n   */\n  private async performLightweightSecurityCheck(): Promise<void> {\n    try {\n      // \n      if ('memory' in performance) {\n        const memory = (performance as any).memory\n        const usagePercent = (memory.usedJSHeapSize / memory.jsHeapSizeLimit) * 100\n        \n        if (usagePercent > 90) {\n          await this.auditLogger.logSecurityEvent(\n            'high_memory_usage',\n            'medium',\n            'integrated_security_system',\n            `: ${usagePercent.toFixed(1)}%`,\n            { usagePercent }\n          )\n        }\n      }\n\n      // \n      const securityStats = this.securityMonitor.getSecurityMetrics()\n      if (securityStats.currentThreats > this.config.alertThreshold) {\n        await this.handleHighThreatLevel(securityStats.currentThreats)\n      }\n\n    } catch (error) {\n      console.warn(':', error)\n    }\n  }\n\n  /**\n   * \n   */\n  private async performDetailedSecurityCheck(): Promise<void> {\n    try {\n      // \n      const rateLimitStats = advancedRateLimiter.getStatistics()\n      if (rateLimitStats.blockedClients > 10) {\n        await this.auditLogger.logSecurityEvent(\n          'high_blocked_clients',\n          'high',\n          'integrated_security_system',\n          `: ${rateLimitStats.blockedClients}`,\n          rateLimitStats\n        )\n      }\n\n      // \n      const errorStats = secureErrorHandler.getErrorStatistics()\n      if (errorStats.recentErrors > 50) {\n        await this.auditLogger.logSecurityEvent(\n          'high_error_rate',\n          'medium',\n          'integrated_security_system',\n          `: ${errorStats.recentErrors}/`,\n          errorStats\n        )\n      }\n\n      // CSP \n      const cspViolations = this.cspManager.getViolationHistory(10)\n      if (cspViolations.length > 5) {\n        await this.auditLogger.logSecurityEvent(\n          'frequent_csp_violations',\n          'high',\n          'integrated_security_system',\n          `CSP: ${cspViolations.length}`,\n          { recentViolations: cspViolations.slice(0, 3) }\n        )\n      }\n\n    } catch (error) {\n      console.warn(':', error)\n    }\n  }\n\n  /**\n   * \n   */\n  private async generateHourlySecurityReport(): Promise<void> {\n    try {\n      const report = await this.generateSecurityReport(\n        new Date(Date.now() - 60 * 60 * 1000), // 1\n        new Date()\n      )\n\n      console.log(' :', {\n        : '1',\n        : report.summary.totalThreats,\n        : report.summary.blockedAttacks,\n        : `${report.summary.errorRate.toFixed(2)  }%`,\n        : report.recommendations\n      })\n\n    } catch (error) {\n      console.warn(':', error)\n    }\n  }\n\n  /**\n   * DDoS \n   */\n  private async handleDDoSDetection(ddosStatus: any): Promise<void> {\n    await this.auditLogger.logSecurityEvent(\n      'ddos_attack_detected',\n      'critical',\n      'integrated_security_system',\n      `DDoS: ${ddosStatus.attackSeverity} `,\n      ddosStatus\n    )\n\n    if (this.config.autoBlock && ddosStatus.attackSeverity === 'critical') {\n      // \n      await this.enableEmergencyProtectionMode()\n    }\n  }\n\n  /**\n   * \n   */\n  private async handleSecurityViolation(event: any): Promise<void> {\n    const severity = this.assessViolationSeverity(event)\n    \n    await this.auditLogger.logSecurityEvent(\n      'security_policy_violation',\n      severity,\n      'integrated_security_system',\n      `: ${event.violatedDirective}`,\n      {\n        violatedDirective: event.violatedDirective,\n        blockedURI: event.blockedURI,\n        sourceFile: event.sourceFile,\n        lineNumber: event.lineNumber\n      }\n    )\n\n    if (severity === 'critical' && this.config.autoBlock) {\n      // \n      await this.executeAutomaticProtection(event)\n    }\n  }\n\n  /**\n   * \n   */\n  private async handleHighThreatLevel(threatCount: number): Promise<void> {\n    await this.auditLogger.logSecurityEvent(\n      'high_threat_level',\n      'high',\n      'integrated_security_system',\n      `: ${threatCount}`,\n      { threatCount, threshold: this.config.alertThreshold }\n    )\n\n    if (this.config.autoBlock) {\n      // \n      await this.temporarilyEnhanceSecurity()\n    }\n  }\n\n  /**\n   * \n   */\n  private async enableEmergencyProtectionMode(): Promise<void> {\n    // \n    apiSecurity.updateConfig({\n      rateLimitConfig: {\n        windowMs: 60 * 1000,\n        maxRequests: 10, // \n        blockDurationMs: 30 * 60 * 1000 // 30\n      }\n    })\n\n    // DDoS \n    secureErrorHandler.updateConfig({\n      clientErrorReporting: false\n    })\n\n    await this.auditLogger.logSecurityEvent(\n      'emergency_protection_enabled',\n      'critical',\n      'integrated_security_system',\n      ''\n    )\n\n    // 10\n    setTimeout(async () => {\n      await this.disableEmergencyProtectionMode()\n    }, 10 * 60 * 1000)\n  }\n\n  /**\n   * \n   */\n  private async disableEmergencyProtectionMode(): Promise<void> {\n    // \n    await this.initializeComponents()\n\n    await this.auditLogger.logSecurityEvent(\n      'emergency_protection_disabled',\n      'medium',\n      'integrated_security_system',\n      ''\n    )\n  }\n\n  /**\n   * \n   */\n  private async executeAutomaticProtection(event: any): Promise<void> {\n    // \n    if (event.violatedDirective === 'script-src') {\n      const scripts = document.querySelectorAll('script[src]')\n      scripts.forEach((script) => {\n        if (script.getAttribute('src') === event.blockedURI) {\n          script.remove()\n        }\n      })\n    }\n\n    await this.auditLogger.logSecurityEvent(\n      'automatic_protection_executed',\n      'high',\n      'integrated_security_system',\n      '',\n      { violatedDirective: event.violatedDirective, blockedURI: event.blockedURI }\n    )\n  }\n\n  /**\n   * \n   */\n  private async temporarilyEnhanceSecurity(): Promise<void> {\n    // \n    advancedInputValidator.updateConfig?.({\n      maxErrorMessageLength: 200, // \n      errorSanitization: true\n    })\n\n    await this.auditLogger.logSecurityEvent(\n      'security_temporarily_enhanced',\n      'medium',\n      'integrated_security_system',\n      ''\n    )\n\n    // 5\n    setTimeout(async () => {\n      await this.initializeComponents()\n    }, 5 * 60 * 1000)\n  }\n\n  /**\n   * \n   */\n  async getSecurityStatus(): Promise<SecurityStatus> {\n    const securityMetrics = this.securityMonitor.getSecurityMetrics()\n    const rateLimitStats = advancedRateLimiter.getStatistics()\n    const errorStats = secureErrorHandler.getErrorStatistics()\n    const sessionStats = this.config.enableSessionManagement ? \n      sessionManager.getSessionStatistics() : { totalActiveSessions: 0 }\n\n    // \n    let systemHealth: 'healthy' | 'warning' | 'critical' = 'healthy'\n    \n    if (securityMetrics.currentThreats > this.config.alertThreshold ||\n        errorStats.recentErrors > 100 ||\n        rateLimitStats.blockedClients > 20) {\n      systemHealth = 'critical'\n    } else if (securityMetrics.currentThreats > this.config.alertThreshold / 2 ||\n               errorStats.recentErrors > 50) {\n      systemHealth = 'warning'\n    }\n\n    return {\n      systemHealth,\n      activeThreats: securityMetrics.currentThreats,\n      blockedRequests: rateLimitStats.ddosMetrics.blockedRequests,\n      activeSessions: sessionStats.totalActiveSessions,\n      errorRate: errorStats.recentErrors,\n      lastUpdate: new Date(),\n      componentStatus: {\n        apiSecurity: this.config.enableAPIProtection,\n        rateLimiting: this.config.enableRateLimiting,\n        sessionManagement: this.config.enableSessionManagement,\n        errorHandling: this.config.enableSecureErrorHandling,\n        inputValidation: this.config.enableInputValidation,\n        auditLogging: this.config.enableAuditLogging,\n        monitoring: this.config.enableRealTimeMonitoring\n      }\n    }\n  }\n\n  /**\n   * \n   */\n  async generateSecurityReport(startDate: Date, endDate: Date): Promise<SecurityReport> {\n    const auditReport = await this.auditLogger.generateAuditReport(startDate, endDate)\n    const securityReport = this.securityMonitor.generateSecurityReport()\n    const rateLimitStats = advancedRateLimiter.getStatistics()\n    const errorStats = secureErrorHandler.getErrorStatistics()\n\n    // \n    const threatTypes = new Map<string, { count: number; severity: string }>()\n    auditReport.events.forEach(event => {\n      const existing = threatTypes.get(event.eventType) || { count: 0, severity: event.severity }\n      existing.count++\n      if (this.compareSeverity(event.severity, existing.severity) > 0) {\n        existing.severity = event.severity\n      }\n      threatTypes.set(event.eventType, existing)\n    })\n\n    const topAttackTypes = Array.from(threatTypes.entries())\n      .map(([type, data]) => ({ type, count: data.count, severity: data.severity }))\n      .sort((a, b) => b.count - a.count)\n      .slice(0, 10)\n\n    // OWASP Top 10 \n    const owaspCompliance = this.assessOWASPCompliance()\n\n    return {\n      generatedAt: new Date(),\n      period: { start: startDate, end: endDate },\n      summary: {\n        totalThreats: auditReport.summary.totalEvents,\n        blockedAttacks: rateLimitStats.blockedClients,\n        vulnerabilitiesFound: this.countVulnerabilities(auditReport.events),\n        systemUptime: Date.now() - this.startTime.getTime(),\n        errorRate: errorStats.recentErrors / ((Date.now() - startDate.getTime()) / (60 * 60 * 1000)) // per hour\n      },\n      threatAnalysis: {\n        topAttackTypes,\n        suspiciousIPs: [], // IP \n        vulnerabilityHotspots: this.identifyVulnerabilityHotspots(auditReport.events)\n      },\n      performance: {\n        averageResponseTime: 100, // \n        resourceUsage: { cpu: 0, memory: 0 }, // \n        apiCallsBlocked: rateLimitStats.ddosMetrics.blockedRequests,\n        rateLimitHits: rateLimitStats.blockedClients\n      },\n      recommendations: [\n        ...auditReport.recommendations,\n        ...this.generateSystemRecommendations(topAttackTypes, errorStats)\n      ],\n      compliance: {\n        owaspTop10: owaspCompliance,\n        dataProtection: 'compliant',\n        accessControl: 'strong'\n      }\n    }\n  }\n\n  // \n\n  private validateGameAction(data: any): boolean {\n    // \n    return typeof data === 'object' && \n           data !== null && \n           'action' in data && \n           typeof data.action === 'string'\n  }\n\n  private assessViolationSeverity(event: any): 'low' | 'medium' | 'high' | 'critical' {\n    if (event.violatedDirective === 'script-src' && \n        (event.blockedURI.includes('eval') || event.blockedURI.includes('javascript:'))) {\n      return 'critical'\n    }\n    \n    if (event.violatedDirective.includes('script')) {\n      return 'high'\n    }\n    \n    return 'medium'\n  }\n\n  private compareSeverity(a: string, b: string): number {\n    const severityOrder = { 'low': 1, 'medium': 2, 'high': 3, 'critical': 4 }\n    return (severityOrder[a as keyof typeof severityOrder] || 0) - \n           (severityOrder[b as keyof typeof severityOrder] || 0)\n  }\n\n  private countVulnerabilities(events: any[]): number {\n    return events.filter(event => \n      event.severity === 'high' || event.severity === 'critical'\n    ).length\n  }\n\n  private identifyVulnerabilityHotspots(events: any[]): Array<{ component: string; severity: string; description: string }> {\n    const componentIssues = new Map<string, { severity: string; count: number }>()\n    \n    events.forEach(event => {\n      const existing = componentIssues.get(event.source) || { severity: 'low', count: 0 }\n      existing.count++\n      if (this.compareSeverity(event.severity, existing.severity) > 0) {\n        existing.severity = event.severity\n      }\n      componentIssues.set(event.source, existing)\n    })\n\n    return Array.from(componentIssues.entries())\n      .filter(([, data]) => data.count > 5 || data.severity === 'high' || data.severity === 'critical')\n      .map(([component, data]) => ({\n        component,\n        severity: data.severity,\n        description: `${data.count}`\n      }))\n      .slice(0, 10)\n  }\n\n  private generateSystemRecommendations(attackTypes: any[], errorStats: any): string[] {\n    const recommendations: string[] = []\n\n    if (attackTypes.some(attack => attack.type.includes('xss'))) {\n      recommendations.push('XSS : CSP')\n    }\n\n    if (attackTypes.some(attack => attack.type.includes('sql'))) {\n      recommendations.push('SQL : ')\n    }\n\n    if (errorStats.recentErrors > 100) {\n      recommendations.push(': ')\n    }\n\n    return recommendations\n  }\n\n  private assessOWASPCompliance(): Array<{ category: string; status: 'compliant' | 'partial' | 'non_compliant' }> {\n    return [\n      { category: 'A01:2021  Broken Access Control', status: 'compliant' },\n      { category: 'A02:2021  Cryptographic Failures', status: 'compliant' },\n      { category: 'A03:2021  Injection', status: 'compliant' },\n      { category: 'A04:2021  Insecure Design', status: 'partial' },\n      { category: 'A05:2021  Security Misconfiguration', status: 'compliant' },\n      { category: 'A06:2021  Vulnerable Components', status: 'partial' },\n      { category: 'A07:2021  Identity and Authentication Failures', status: 'compliant' },\n      { category: 'A08:2021  Software and Data Integrity Failures', status: 'compliant' },\n      { category: 'A09:2021  Security Logging and Monitoring Failures', status: 'compliant' },\n      { category: 'A10:2021  Server-Side Request Forgery', status: 'compliant' }\n    ]\n  }\n\n  private async setupFallbackSecurity(): Promise<void> {\n    console.warn(' ')\n    \n    // XSS\n    const originalInnerHTML = Element.prototype.innerHTML\n    Object.defineProperty(Element.prototype, 'innerHTML', {\n      set(value: string) {\n        if (typeof value === 'string') {\n          const sanitized = value\n            .replace(/<script[^>]*>.*?<\\/script>/gi, '')\n            .replace(/javascript:/gi, '')\n            .replace(/on\\w+\\s*=/gi, '')\n          originalInnerHTML.call(this, sanitized)\n        } else {\n          originalInnerHTML.call(this, value)\n        }\n      },\n      get() {\n        return originalInnerHTML.call(this)\n      }\n    })\n  }\n\n  /**\n   * \n   */\n  updateConfig(newConfig: Partial<SecuritySystemConfig>): void {\n    this.config = { ...this.config, ...newConfig }\n    \n    // \n    if (this.isInitialized) {\n      this.initializeComponents()\n    }\n  }\n\n  /**\n   * \n   */\n  shutdown(): void {\n    this.isInitialized = false\n    console.log(' ')\n  }\n}\n\n// \nexport const integratedSecuritySystem = IntegratedSecuritySystem.getInstance()","/**\n * \n * \n */\n\nimport { initializeSecurity } from './security-extensions'\nimport { SecurityInterceptor } from './xss-csrf-protection'\nimport { CSPManager, SecurityHeaderManager } from './csp-manager'\nimport { SecurityAuditLogger } from './security-audit-logger'\nimport { secureLocalStorage } from './security'\nimport { integratedSecuritySystem } from './integrated-security-system'\n\n// \nconst PERFORMANCE_CONFIG = {\n  enableDetailedChecks: !import.meta.env.PROD,\n  lightCheckInterval: 5 * 60 * 1000, // 5\n  detailedCheckInterval: 15 * 60 * 1000, // 15\n  memoryWarningThreshold: 85, // 85%\n  maxEventListeners: 10, // \n  useRequestIdleCallback: true // requestIdleCallback\n}\n\n/**\n * \n */\nexport async function initializeSecuritySystemOptimized(): Promise<void> {\n  try {\n    console.log(' ...')\n\n    // \n    await integratedSecuritySystem.initialize({\n      enableAPIProtection: true,\n      enableRateLimiting: true,\n      enableSessionManagement: false, // \n      enableSecureErrorHandling: true,\n      enableInputValidation: true,\n      enableAuditLogging: true,\n      enableRealTimeMonitoring: true,\n      securityLevel: import.meta.env.PROD ? 'high' : 'medium',\n      autoBlock: import.meta.env.PROD,\n      alertThreshold: import.meta.env.PROD ? 10 : 50\n    })\n\n    // : \n    initializeSecurity()\n\n    const cspManager = CSPManager.getInstance()\n    const headerManager = SecurityHeaderManager.getInstance()\n    \n    cspManager.initialize()\n    headerManager.initializeSecurityHeaders()\n\n    const securityInterceptor = SecurityInterceptor.getInstance()\n    securityInterceptor.initialize()\n\n    // 4. \n    const auditLogger = SecurityAuditLogger.getInstance()\n    \n    // \n    await auditLogger.logSecurityEvent(\n      'security_system_initialized',\n      'low',\n      'security_init',\n      '',\n      {\n        timestamp: new Date().toISOString(),\n        config: PERFORMANCE_CONFIG\n      }\n    )\n\n    // 5. \n    await validateSecurityConfiguration()\n\n    // 6. \n    setupOptimizedSecurityEventListeners()\n\n    // 7. \n    startOptimizedPeriodicSecurityChecks()\n\n    // \n    const securityStatus = await integratedSecuritySystem.getSecurityStatus()\n    console.log(' :', {\n      : securityStatus.systemHealth,\n      : securityStatus.activeThreats,\n      : securityStatus.componentStatus\n    })\n\n    console.log(' ')\n\n  } catch (error) {\n    console.error(' :', error)\n    \n    // : \n    console.warn(' ')\n    try {\n      initializeSecurity()\n      const cspManager = CSPManager.getInstance()\n      cspManager.initialize()\n      console.log(' ')\n    } catch (fallbackError) {\n      console.error(' :', fallbackError)\n      setupFallbackSecurity()\n    }\n    \n    throw new Error(`: ${error instanceof Error ? error.message : String(error)}`)\n  }\n}\n\n/**\n * \n */\nasync function validateSecurityConfiguration(): Promise<void> {\n  const auditLogger = SecurityAuditLogger.getInstance()\n  const issues: string[] = []\n\n  // HTTPS \n  if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost') {\n    issues.push('HTTPS ')\n  }\n\n  // Crypto API \n  if (!window.crypto?.subtle) {\n    issues.push('Web Crypto API ')\n  }\n\n  // \n  try {\n    const storage = secureLocalStorage()\n    await storage.setItem('__security_test__', { test: true }, true)\n    const retrieved = await storage.getItem('__security_test__', true)\n    if (!retrieved || retrieved.test !== true) {\n      issues.push('')\n    }\n    await storage.removeItem('__security_test__')\n  } catch (error) {\n    issues.push(`: ${error}`)\n  }\n\n  if (issues.length > 0) {\n    await auditLogger.logSecurityEvent(\n      'security_configuration_issues',\n      'medium',\n      'security_validator',\n      '',\n      { issues }\n    )\n  }\n}\n\n/**\n * \n */\nfunction setupOptimizedSecurityEventListeners(): void {\n  const auditLogger = SecurityAuditLogger.getInstance()\n  \n  // \n  const debounce = <T extends (...args: any[]) => any>(\n    func: T,\n    wait: number\n  ): ((...args: Parameters<T>) => void) => {\n    let timeout: ReturnType<typeof setTimeout> | null = null\n    return (...args: Parameters<T>) => {\n      if (timeout) clearTimeout(timeout)\n      timeout = setTimeout(() => func(...args), wait)\n    }\n  }\n\n  // \n  const throttle = <T extends (...args: any[]) => any>(\n    func: T,\n    limit: number\n  ): ((...args: Parameters<T>) => void) => {\n    let inThrottle: boolean = false\n    return (...args: Parameters<T>) => {\n      if (!inThrottle) {\n        func(...args)\n        inThrottle = true\n        setTimeout(() => { inThrottle = false }, limit)\n      }\n    }\n  }\n\n  // / \n  const handleVisibilityChange = debounce(async () => {\n    await auditLogger.logSecurityEvent(\n      document.hidden ? 'tab_hidden' : 'tab_visible',\n      'low',\n      'visibility_monitor',\n      document.hidden ? '' : ''\n    )\n  }, 1000)\n\n  document.addEventListener('visibilitychange', handleVisibilityChange)\n\n  // \n  if (import.meta.env.PROD) {\n    // \n    const handleContextMenu = throttle(async (event: MouseEvent) => {\n      event.preventDefault()\n      await auditLogger.logSecurityEvent(\n        'context_menu_blocked',\n        'low',\n        'context_menu_blocker',\n        ''\n      )\n    }, 5000) // 51\n\n    document.addEventListener('contextmenu', handleContextMenu)\n\n    // \n    const handleKeyDown = throttle(async (event: KeyboardEvent) => {\n      const dangerousShortcuts = [\n        { key: 'F12' },\n        { key: 'I', ctrlKey: true, shiftKey: true },\n        { key: 'J', ctrlKey: true, shiftKey: true },\n        { key: 'U', ctrlKey: true },\n        { key: 'S', ctrlKey: true, shiftKey: true },\n      ]\n\n      const isDangerous = dangerousShortcuts.some(shortcut => {\n        return event.key === shortcut.key &&\n               (!shortcut.ctrlKey || event.ctrlKey) &&\n               (!shortcut.shiftKey || event.shiftKey)\n      })\n\n      if (isDangerous) {\n        event.preventDefault()\n        await auditLogger.logSecurityEvent(\n          'dangerous_shortcut_blocked',\n          'medium',\n          'keyboard_monitor',\n          `: ${event.key}`\n        )\n      }\n    }, 3000) // 31\n\n    document.addEventListener('keydown', handleKeyDown)\n  }\n\n  // LocalStorage\n  const handleStorageChange = debounce(async (event: StorageEvent) => {\n    await auditLogger.logSecurityEvent(\n      'storage_changed',\n      'low',\n      'storage_monitor',\n      'LocalStorage/SessionStorage',\n      {\n        key: event.key,\n        storageArea: event.storageArea === localStorage ? 'localStorage' : 'sessionStorage'\n      }\n    )\n  }, 2000)\n\n  window.addEventListener('storage', handleStorageChange)\n}\n\n/**\n * \n */\nfunction startOptimizedPeriodicSecurityChecks(): void {\n  const auditLogger = SecurityAuditLogger.getInstance()\n  \n  // \n  const checkState = {\n    isLightCheckRunning: false,\n    isDetailedCheckRunning: false,\n    lastLightCheck: 0,\n    lastDetailedCheck: 0\n  }\n\n  // \n  const performLightweightCheck = async () => {\n    if (checkState.isLightCheckRunning) return\n    checkState.isLightCheckRunning = true\n\n    try {\n      // \n      if ('memory' in performance) {\n        const memory = (performance as any).memory\n        const usage = (memory.usedJSHeapSize / memory.jsHeapSizeLimit) * 100\n\n        if (usage > PERFORMANCE_CONFIG.memoryWarningThreshold) {\n          await auditLogger.logSecurityEvent(\n            'high_memory_usage',\n            'medium',\n            'periodic_check',\n            `: ${usage.toFixed(1)}%`\n          )\n        }\n      }\n\n      checkState.lastLightCheck = Date.now()\n    } catch (error) {\n      console.warn(':', error)\n    } finally {\n      checkState.isLightCheckRunning = false\n    }\n  }\n\n  // \n  const performDetailedCheck = async () => {\n    if (checkState.isDetailedCheckRunning) return\n    checkState.isDetailedCheckRunning = true\n\n    try {\n      // DOM \n      const scriptTags = document.querySelectorAll('script[src]')\n      const externalScripts = Array.from(scriptTags).filter(script => {\n        const src = script.getAttribute('src')\n        return src && !src.startsWith(window.location.origin) && !src.startsWith('/')\n      })\n\n      if (externalScripts.length > 5) {\n        await auditLogger.logSecurityEvent(\n          'excessive_external_scripts',\n          'medium',\n          'periodic_check',\n          `: ${externalScripts.length}`\n        )\n      }\n\n      // LocalStorage \n      let localStorageSize = 0\n      for (const key in localStorage) {\n        if (Object.prototype.hasOwnProperty.call(localStorage, key)) {\n          localStorageSize += localStorage.getItem(key)?.length || 0\n        }\n      }\n\n      if (localStorageSize > 5 * 1024 * 1024) { // 5MB\n        await auditLogger.logSecurityEvent(\n          'excessive_localstorage_usage',\n          'low',\n          'periodic_check',\n          `LocalStorage: ${(localStorageSize / 1024 / 1024).toFixed(2)}MB`\n        )\n      }\n\n      checkState.lastDetailedCheck = Date.now()\n    } catch (error) {\n      console.warn(':', error)\n    } finally {\n      checkState.isDetailedCheckRunning = false\n    }\n  }\n\n  // requestIdleCallback\n  const scheduleCheck = (checkFunc: () => Promise<void>, interval: number) => {\n    const runCheck = () => {\n      if (PERFORMANCE_CONFIG.useRequestIdleCallback && 'requestIdleCallback' in window) {\n        requestIdleCallback(() => {\n          checkFunc().then(() => {\n            setTimeout(runCheck, interval)\n          })\n        }, { timeout: interval / 2 })\n      } else {\n        setTimeout(() => {\n          checkFunc().then(() => {\n            setTimeout(runCheck, interval)\n          })\n        }, interval)\n      }\n    }\n    \n    // \n    setTimeout(runCheck, 60000) // 1\n  }\n\n  // \n  scheduleCheck(performLightweightCheck, PERFORMANCE_CONFIG.lightCheckInterval)\n  scheduleCheck(performDetailedCheck, PERFORMANCE_CONFIG.detailedCheckInterval)\n}\n\n/**\n * \n */\nfunction setupFallbackSecurity(): void {\n  console.warn(' ')\n  \n  // CSP\n  const meta = document.createElement('meta')\n  meta.httpEquiv = 'Content-Security-Policy'\n  meta.content = \"default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'\"\n  document.head.appendChild(meta)\n  \n  // XSS\n  const originalInnerHTML = Element.prototype.innerHTML\n  Object.defineProperty(Element.prototype, 'innerHTML', {\n    set(value: string) {\n      if (typeof value === 'string') {\n        const sanitized = value\n          .replace(/<script[^>]*>.*?<\\/script>/gi, '')\n          .replace(/javascript:/gi, '')\n          .replace(/on\\w+\\s*=/gi, '')\n        originalInnerHTML.call(this, sanitized)\n      } else {\n        originalInnerHTML.call(this, value)\n      }\n    },\n    get() {\n      return originalInnerHTML.call(this)\n    }\n  })\n}\n\n// \nif (typeof window !== 'undefined' && import.meta.env.DEV) {\n  (window as any).__SECURITY_DEBUG__ = {\n    init: initializeSecuritySystemOptimized,\n    integrated: {\n      getStatus: async () => integratedSecuritySystem.getSecurityStatus(),\n      generateReport: async (hours = 1) => integratedSecuritySystem.generateSecurityReport(\n        new Date(Date.now() - hours * 60 * 60 * 1000),\n        new Date()\n      ),\n      updateConfig: (config: any) => { integratedSecuritySystem.updateConfig(config); }\n    },\n    config: PERFORMANCE_CONFIG\n  }\n  \n  console.log(' :')\n  console.log('   window.__SECURITY_DEBUG__.integrated.getStatus() - ')\n  console.log('   window.__SECURITY_DEBUG__.integrated.generateReport() - ')\n  console.log('   window.__SECURITY_DEBUG__.integrated.updateConfig(config) - ')\n}\n\n// \nexport { integratedSecuritySystem }\nexport default initializeSecuritySystemOptimized","/**\n * \n * \n */\n\nimport type { ErrorInfo } from './ErrorHandler'\n\nexport interface LogEntry {\n  id: string\n  timestamp: number\n  errorInfo: ErrorInfo\n  context?: Record<string, any>\n  sessionId?: string\n  userId?: string\n  buildVersion?: string\n  source: 'user' | 'system' | 'auto' // \n  correlationId?: string // \n  resolved?: boolean // \n  resolvedBy?: string // \n  impact?: 'low' | 'medium' | 'high' | 'critical' // \n}\n\nexport interface WarningEntry {\n  id: string\n  timestamp: number\n  message: string\n  component?: string\n  trace?: string\n}\n\nexport class ErrorLogger {\n  private logs: LogEntry[] = []\n  private warnings: WarningEntry[] = []\n  private readonly maxLogs = 1000\n  private readonly logRotationSize = 100\n  private readonly storageKey = 'game_error_logs'\n  private readonly warningStorageKey = 'game_warning_logs'\n  private analyticsBuffer: LogEntry[] = []\n  private readonly realtimeListeners: Array<(entry: LogEntry) => void> = []\n  private readonly sessionId: string\n  private userId?: string\n  private readonly buildVersion: string\n  private isAnalyzing = false\n\n  constructor() {\n    this.sessionId = this.generateSessionId()\n    this.buildVersion = import.meta.env.VITE_BUILD_VERSION || 'unknown'\n    this.loadFromStorage()\n    this.startRealtimeAnalysis()\n  }\n\n  /**\n   * \n   */\n  log(errorInfo: ErrorInfo, context?: Record<string, any>, source: LogEntry['source'] = 'auto'): void {\n    const entry: LogEntry = {\n      id: this.generateId(),\n      timestamp: Date.now(),\n      errorInfo,\n      context,\n      sessionId: this.sessionId,\n      userId: this.userId,\n      buildVersion: this.buildVersion,\n      source,\n      correlationId: this.generateCorrelationId(errorInfo),\n      resolved: false,\n      impact: this.calculateBusinessImpact(errorInfo)\n    }\n\n    this.logs.push(entry)\n    this.analyticsBuffer.push(entry)\n    \n    // \n    this.notifyRealtimeListeners(entry)\n    \n    // \n    if (this.logs.length > this.maxLogs) {\n      this.logs = this.logs.slice(-this.maxLogs + this.logRotationSize)\n    }\n\n    // \n    this.saveToStorage()\n\n    // \n    if (import.meta.env.DEV) {\n      this.logToConsole(entry)\n    }\n    \n    // \n    this.checkAlertConditions(entry)\n  }\n\n  /**\n   * \n   */\n  logWarning(warning: Omit<WarningEntry, 'id'>): void {\n    const entry: WarningEntry = {\n      id: this.generateId(),\n      ...warning\n    }\n\n    this.warnings.push(entry)\n    \n    // \n    if (this.warnings.length > this.maxLogs / 2) {\n      this.warnings = this.warnings.slice(-this.maxLogs / 2 + this.logRotationSize)\n    }\n\n    this.saveToStorage()\n  }\n\n  /**\n   * \n   */\n  getLogs(filter?: {\n    severity?: ErrorInfo['severity']\n    category?: ErrorInfo['category']\n    startTime?: number\n    endTime?: number\n    limit?: number\n  }): LogEntry[] {\n    let filteredLogs = [...this.logs]\n\n    if (filter) {\n      if (filter.severity) {\n        filteredLogs = filteredLogs.filter(log => \n          log.errorInfo.severity === filter.severity\n        )\n      }\n\n      if (filter.category) {\n        filteredLogs = filteredLogs.filter(log => \n          log.errorInfo.category === filter.category\n        )\n      }\n\n      if (filter.startTime) {\n        filteredLogs = filteredLogs.filter(log => \n          log.timestamp >= filter.startTime!\n        )\n      }\n\n      if (filter.endTime) {\n        filteredLogs = filteredLogs.filter(log => \n          log.timestamp <= filter.endTime!\n        )\n      }\n\n      if (filter.limit) {\n        filteredLogs = filteredLogs.slice(-filter.limit)\n      }\n    }\n\n    return filteredLogs\n  }\n\n  /**\n   * \n   */\n  getWarnings(limit?: number): WarningEntry[] {\n    if (limit) {\n      return this.warnings.slice(-limit)\n    }\n    return [...this.warnings]\n  }\n\n  /**\n   * \n   */\n  getStatistics(timeRange?: { start: number; end: number }) {\n    const logs = timeRange \n      ? this.getLogs({ startTime: timeRange.start, endTime: timeRange.end })\n      : this.logs\n\n    const stats = {\n      total: logs.length,\n      bySeverity: {\n        low: 0,\n        medium: 0,\n        high: 0,\n        critical: 0\n      },\n      byCategory: {\n        vue: 0,\n        javascript: 0,\n        network: 0,\n        async: 0,\n        user: 0,\n        system: 0\n      },\n      errorRate: 0,\n      mostCommonErrors: [] as Array<{ message: string; count: number }>\n    }\n\n    // \n    const errorMessages = new Map<string, number>()\n    \n    logs.forEach(log => {\n      stats.bySeverity[log.errorInfo.severity]++\n      stats.byCategory[log.errorInfo.category]++\n      \n      const message = log.errorInfo.message\n      errorMessages.set(message, (errorMessages.get(message) || 0) + 1)\n    })\n\n    // 1\n    if (logs.length > 0) {\n      const timeSpan = logs[logs.length - 1].timestamp - logs[0].timestamp\n      stats.errorRate = timeSpan > 0 ? (logs.length / timeSpan) * 60000 : 0\n    }\n\n    // \n    stats.mostCommonErrors = Array.from(errorMessages.entries())\n      .sort((a, b) => b[1] - a[1])\n      .slice(0, 5)\n      .map(([message, count]) => ({ message, count }))\n\n    return stats\n  }\n\n  /**\n   * \n   */\n  searchErrors(pattern: string | RegExp): LogEntry[] {\n    const regex = typeof pattern === 'string' ? new RegExp(pattern, 'i') : pattern\n    \n    return this.logs.filter(log => \n      regex.test(log.errorInfo.message) ||\n      (log.errorInfo.stack && regex.test(log.errorInfo.stack))\n    )\n  }\n\n  /**\n   * \n   */\n  export(format: 'json' | 'csv' = 'json'): string {\n    if (format === 'json') {\n      return JSON.stringify({\n        logs: this.logs,\n        warnings: this.warnings,\n        exported: new Date().toISOString()\n      }, null, 2)\n    }\n\n    // CSV\n    const headers = ['ID', 'Timestamp', 'Severity', 'Category', 'Message', 'Component', 'URL', 'Stack']\n    const rows = this.logs.map(log => [\n      log.id,\n      new Date(log.timestamp).toISOString(),\n      log.errorInfo.severity,\n      log.errorInfo.category,\n      `\"${log.errorInfo.message.replace(/\"/g, '\"\"')}\"`,\n      log.errorInfo.component || '',\n      log.errorInfo.url || '',\n      log.errorInfo.stack ? `\"${log.errorInfo.stack.replace(/\"/g, '\"\"')}\"` : ''\n    ])\n\n    return [headers.join(','), ...rows.map(row => row.join(','))].join('\\n')\n  }\n\n  /**\n   * \n   */\n  clear(): void {\n    this.logs = []\n    this.warnings = []\n    this.saveToStorage()\n  }\n\n  /**\n   * \n   */\n  pruneOldLogs(maxAge: number): void {\n    const cutoff = Date.now() - maxAge\n    \n    this.logs = this.logs.filter(log => log.timestamp > cutoff)\n    this.warnings = this.warnings.filter(warning => warning.timestamp > cutoff)\n    \n    this.saveToStorage()\n  }\n\n  /**\n   * \n   */\n  private loadFromStorage(): void {\n    try {\n      const logsData = localStorage.getItem(this.storageKey)\n      const warningsData = localStorage.getItem(this.warningStorageKey)\n      \n      if (logsData) {\n        this.logs = JSON.parse(logsData)\n      }\n      \n      if (warningsData) {\n        this.warnings = JSON.parse(warningsData)\n      }\n    } catch (error) {\n      console.error('Failed to load error logs from storage:', error)\n    }\n  }\n\n  /**\n   * \n   */\n  private saveToStorage(): void {\n    try {\n      // \n      const recentLogs = this.logs.slice(-100)\n      const recentWarnings = this.warnings.slice(-50)\n      \n      localStorage.setItem(this.storageKey, JSON.stringify(recentLogs))\n      localStorage.setItem(this.warningStorageKey, JSON.stringify(recentWarnings))\n    } catch (error) {\n      // \n      if (error instanceof DOMException && error.name === 'QuotaExceededError') {\n        this.logs = this.logs.slice(-50)\n        this.warnings = this.warnings.slice(-25)\n        try {\n          this.saveToStorage()\n        } catch {\n          // \n          console.error('Failed to save error logs to storage')\n        }\n      }\n    }\n  }\n\n  /**\n   * ID\n   */\n  private generateSessionId(): string {\n    return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n  }\n\n  /**\n   * ID\n   */\n  private generateCorrelationId(errorInfo: ErrorInfo): string {\n    // ID\n    const key = `${errorInfo.category}_${errorInfo.component || 'unknown'}_${errorInfo.message.split(' ')[0]}`\n    let hash = 0\n    for (let i = 0; i < key.length; i++) {\n      const char = key.charCodeAt(i)\n      hash = ((hash << 5) - hash) + char\n      hash = hash & hash // 32bit\n    }\n    return `corr_${Math.abs(hash).toString(16)}`\n  }\n\n  /**\n   * \n   */\n  private calculateBusinessImpact(errorInfo: ErrorInfo): LogEntry['impact'] {\n    // \n    if (errorInfo.category === 'game' && errorInfo.severity === 'critical') {\n      return 'critical'\n    }\n    \n    // \n    if (errorInfo.category === 'security') {\n      return 'high'\n    }\n    \n    // \n    if (errorInfo.category === 'network') {\n      return 'medium'\n    }\n    \n    // \n    switch (errorInfo.severity) {\n      case 'critical': return 'critical'\n      case 'high': return 'high'\n      case 'medium': return 'medium'\n      case 'low': return 'low'\n    }\n  }\n\n  /**\n   * \n   */\n  private notifyRealtimeListeners(entry: LogEntry): void {\n    this.realtimeListeners.forEach(listener => {\n      try {\n        listener(entry)\n      } catch (error) {\n        console.warn('[ErrorLogger] Realtime listener failed:', error)\n      }\n    })\n  }\n\n  /**\n   * \n   */\n  private logToConsole(entry: LogEntry): void {\n    const impactIcon = {\n      low: '',\n      medium: '',\n      high: '',\n      critical: ''\n    }[entry.impact || 'low']\n\n    console.group(` Error Log [${entry.id}] ${impactIcon}`)\n    console.error('Error Info:', entry.errorInfo)\n    console.log('Impact:', entry.impact)\n    console.log('Source:', entry.source)\n    if (entry.correlationId) {\n      console.log('Correlation ID:', entry.correlationId)\n    }\n    if (entry.context) {\n      console.log('Context:', entry.context)\n    }\n    console.groupEnd()\n  }\n\n  /**\n   * \n   */\n  private checkAlertConditions(entry: LogEntry): void {\n    // 5\n    const fiveMinutesAgo = Date.now() - 5 * 60 * 1000\n    const recentCriticalErrors = this.logs.filter(log => \n      log.timestamp > fiveMinutesAgo && \n      log.errorInfo.severity === 'critical'\n    ).length\n\n    if (recentCriticalErrors >= 3) {\n      this.triggerAlert('critical-error-spike', {\n        count: recentCriticalErrors,\n        timespan: '5 minutes',\n        latestError: entry\n      })\n    }\n\n    // ID\n    if (entry.correlationId) {\n      const sameCorrelationErrors = this.logs.filter(log => \n        log.correlationId === entry.correlationId &&\n        log.timestamp > Date.now() - 2 * 60 * 1000 // 2\n      ).length\n\n      if (sameCorrelationErrors >= 5) {\n        this.triggerAlert('repeated-error', {\n          correlationId: entry.correlationId,\n          count: sameCorrelationErrors,\n          errorType: entry.errorInfo.message\n        })\n      }\n    }\n  }\n\n  /**\n   * \n   */\n  private triggerAlert(type: string, data: any): void {\n    const alertEvent = new CustomEvent('app:error-alert', {\n      detail: { type, data, timestamp: Date.now() }\n    })\n    window.dispatchEvent(alertEvent)\n  }\n\n  /**\n   * \n   */\n  private startRealtimeAnalysis(): void {\n    // 30\n    setInterval(() => {\n      if (!this.isAnalyzing && this.analyticsBuffer.length > 0) {\n        this.performRealtimeAnalysis()\n      }\n    }, 30000)\n  }\n\n  /**\n   * \n   */\n  private async performRealtimeAnalysis(): Promise<void> {\n    if (this.analyticsBuffer.length === 0) return\n    \n    this.isAnalyzing = true\n    \n    try {\n      const buffer = [...this.analyticsBuffer]\n      this.analyticsBuffer = []\n      \n      // \n      const patterns = this.analyzeErrorPatterns(buffer)\n      \n      // \n      const trends = this.analyzeTrends(buffer)\n      \n      // \n      const anomalies = this.detectAnomalies(buffer)\n      \n      // \n      const analysisEvent = new CustomEvent('app:error-analysis', {\n        detail: {\n          patterns,\n          trends,\n          anomalies,\n          timestamp: Date.now(),\n          sampleSize: buffer.length\n        }\n      })\n      window.dispatchEvent(analysisEvent)\n      \n    } catch (error) {\n      console.error('[ErrorLogger] Realtime analysis failed:', error)\n    } finally {\n      this.isAnalyzing = false\n    }\n  }\n\n  /**\n   * \n   */\n  private analyzeErrorPatterns(logs: LogEntry[]): any {\n    const patterns = {\n      byCategory: new Map<string, number>(),\n      byComponent: new Map<string, number>(),\n      byCorrelation: new Map<string, number>(),\n      topErrors: [] as Array<{ message: string; count: number; severity: string }>\n    }\n    \n    const messageCount = new Map<string, { count: number; severity: string }>()\n    \n    logs.forEach(log => {\n      // \n      const category = log.errorInfo.category\n      patterns.byCategory.set(category, (patterns.byCategory.get(category) || 0) + 1)\n      \n      // \n      const component = log.errorInfo.component || 'unknown'\n      patterns.byComponent.set(component, (patterns.byComponent.get(component) || 0) + 1)\n      \n      // ID\n      if (log.correlationId) {\n        patterns.byCorrelation.set(log.correlationId, (patterns.byCorrelation.get(log.correlationId) || 0) + 1)\n      }\n      \n      // \n      const message = log.errorInfo.message\n      const existing = messageCount.get(message) || { count: 0, severity: log.errorInfo.severity }\n      messageCount.set(message, { count: existing.count + 1, severity: log.errorInfo.severity })\n    })\n    \n    // \n    patterns.topErrors = Array.from(messageCount.entries())\n      .sort((a, b) => b[1].count - a[1].count)\n      .slice(0, 5)\n      .map(([message, data]) => ({\n        message,\n        count: data.count,\n        severity: data.severity\n      }))\n    \n    return patterns\n  }\n\n  /**\n   * \n   */\n  private analyzeTrends(logs: LogEntry[]): any {\n    if (logs.length < 2) return null\n    \n    const timeSlots = new Map<string, number>()\n    const slotSize = 5 * 60 * 1000 // 5\n    \n    logs.forEach(log => {\n      const slot = Math.floor(log.timestamp / slotSize) * slotSize\n      const slotKey = new Date(slot).toISOString()\n      timeSlots.set(slotKey, (timeSlots.get(slotKey) || 0) + 1)\n    })\n    \n    const sortedSlots = Array.from(timeSlots.entries()).sort((a, b) => \n      new Date(a[0]).getTime() - new Date(b[0]).getTime()\n    )\n    \n    if (sortedSlots.length < 2) return null\n    \n    // \n    const values = sortedSlots.map(([, count]) => count)\n    const trend = this.calculateTrend(values)\n    \n    return {\n      timeSlots: sortedSlots,\n      trend: trend > 0 ? 'increasing' : trend < 0 ? 'decreasing' : 'stable',\n      trendValue: trend\n    }\n  }\n\n  /**\n   * \n   */\n  private calculateTrend(values: number[]): number {\n    const n = values.length\n    const sumX = (n * (n - 1)) / 2\n    const sumY = values.reduce((a, b) => a + b, 0)\n    const sumXY = values.reduce((sum, y, x) => sum + x * y, 0)\n    const sumXX = values.reduce((sum, _, x) => sum + x * x, 0)\n    \n    return (n * sumXY - sumX * sumY) / (n * sumXX - sumX * sumX)\n  }\n\n  /**\n   * \n   */\n  private detectAnomalies(logs: LogEntry[]): any {\n    const anomalies = []\n    \n    // \n    if (logs.length > 10) { // 3010\n      anomalies.push({\n        type: 'high_frequency',\n        description: 'Unusually high error frequency detected',\n        count: logs.length,\n        severity: 'high'\n      })\n    }\n    \n    // \n    const recentMessages = new Set(logs.map(log => log.errorInfo.message))\n    const historicalMessages = new Set(\n      this.logs.slice(0, -logs.length).map(log => log.errorInfo.message)\n    )\n    \n    const newMessages = Array.from(recentMessages).filter(msg => !historicalMessages.has(msg))\n    if (newMessages.length > 0) {\n      anomalies.push({\n        type: 'new_error_types',\n        description: 'New error types detected',\n        newErrors: newMessages,\n        severity: 'medium'\n      })\n    }\n    \n    return anomalies\n  }\n\n  /**\n   * \n   */\n  addRealtimeListener(listener: (entry: LogEntry) => void): () => void {\n    this.realtimeListeners.push(listener)\n    \n    // \n    return () => {\n      const index = this.realtimeListeners.indexOf(listener)\n      if (index !== -1) {\n        this.realtimeListeners.splice(index, 1)\n      }\n    }\n  }\n\n  /**\n   * \n   */\n  markAsResolved(errorId: string, resolvedBy: string): boolean {\n    const entry = this.logs.find(log => log.id === errorId)\n    if (entry) {\n      entry.resolved = true\n      entry.resolvedBy = resolvedBy\n      this.saveToStorage()\n      return true\n    }\n    return false\n  }\n\n  /**\n   * ID\n   */\n  getRelatedErrors(correlationId: string): LogEntry[] {\n    return this.logs.filter(log => log.correlationId === correlationId)\n  }\n\n  /**\n   * ID\n   */\n  setUserId(userId: string): void {\n    this.userId = userId\n  }\n\n  /**\n   * \n   */\n  getAdvancedStatistics(timeRange?: { start: number; end: number }) {\n    const logs = timeRange \n      ? this.getLogs({ startTime: timeRange.start, endTime: timeRange.end })\n      : this.logs\n\n    const baseStats = this.getStatistics(timeRange)\n    \n    // MTTR (Mean Time To Resolution) \n    const resolvedErrors = logs.filter(log => log.resolved)\n    const mttr = resolvedErrors.length > 0\n      ? resolvedErrors.reduce((sum, log) => {\n          // \n          return sum + (60 * 1000) // : 1\n        }, 0) / resolvedErrors.length\n      : 0\n\n    // \n    const impactStats = {\n      low: logs.filter(log => log.impact === 'low').length,\n      medium: logs.filter(log => log.impact === 'medium').length,\n      high: logs.filter(log => log.impact === 'high').length,\n      critical: logs.filter(log => log.impact === 'critical').length\n    }\n\n    // \n    const sourceStats = {\n      user: logs.filter(log => log.source === 'user').length,\n      system: logs.filter(log => log.source === 'system').length,\n      auto: logs.filter(log => log.source === 'auto').length\n    }\n\n    return {\n      ...baseStats,\n      mttr,\n      impactStats,\n      sourceStats,\n      resolutionRate: logs.length > 0 ? resolvedErrors.length / logs.length : 0,\n      correlationGroups: this.getCorrelationGroups(logs)\n    }\n  }\n\n  /**\n   * \n   */\n  private getCorrelationGroups(logs: LogEntry[]): Array<{ id: string; count: number; resolved: number }> {\n    const groups = new Map<string, { count: number; resolved: number }>()\n    \n    logs.forEach(log => {\n      if (log.correlationId) {\n        const existing = groups.get(log.correlationId) || { count: 0, resolved: 0 }\n        existing.count++\n        if (log.resolved) {\n          existing.resolved++\n        }\n        groups.set(log.correlationId, existing)\n      }\n    })\n    \n    return Array.from(groups.entries())\n      .map(([id, stats]) => ({ id, ...stats }))\n      .sort((a, b) => b.count - a.count)\n  }\n\n  /**\n   * ID\n   */\n  private generateId(): string {\n    return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n  }\n}","/**\n * \n * \n */\n\nimport type { ErrorInfo } from './ErrorHandler'\n\nexport interface ReportOptions {\n  endpoint?: string\n  apiKey?: string\n  environment?: 'development' | 'staging' | 'production'\n  userId?: string\n  sessionId?: string\n  metadata?: Record<string, any>\n}\n\nexport interface ErrorReport {\n  errorInfo: ErrorInfo\n  environment: string\n  browser: {\n    name: string\n    version: string\n    platform: string\n  }\n  screen: {\n    width: number\n    height: number\n    pixelRatio: number\n  }\n  memory?: {\n    used: number\n    total: number\n    limit: number\n  }\n  sessionInfo: {\n    id: string\n    startTime: number\n    duration: number\n    pageViews: number\n  }\n  userId?: string\n  metadata?: Record<string, any>\n}\n\nexport class ErrorReporter {\n  private readonly options: Required<ReportOptions>\n  private queue: ErrorReport[] = []\n  private isReporting = false\n  private readonly sessionId: string\n  private readonly sessionStartTime: number\n  private pageViews = 0\n  private reportInterval: number | null = null\n  private readonly maxQueueSize = 50\n  private readonly batchSize = 10\n\n  constructor(options: ReportOptions = {}) {\n    this.options = {\n      endpoint: import.meta.env.VITE_ERROR_REPORT_ENDPOINT || '',\n      apiKey: import.meta.env.VITE_ERROR_REPORT_API_KEY || '',\n      environment: (import.meta.env.MODE as any) || 'development',\n      userId: '',\n      sessionId: this.generateSessionId(),\n      metadata: {},\n      ...options\n    }\n\n    this.sessionId = this.options.sessionId\n    this.sessionStartTime = Date.now()\n    \n    // \n    this.trackPageView()\n    \n    // \n    if (this.options.endpoint) {\n      this.startBatchReporting()\n    }\n  }\n\n  /**\n   * \n   */\n  report(errorInfo: ErrorInfo, additionalData?: Record<string, any>): void {\n    // \n    if (this.options.environment === 'development' && !import.meta.env.VITE_FORCE_ERROR_REPORTING) {\n      console.log('[ErrorReporter] Skipping report in development environment')\n      return\n    }\n\n    const report: ErrorReport = {\n      errorInfo,\n      environment: this.options.environment,\n      browser: this.getBrowserInfo(),\n      screen: this.getScreenInfo(),\n      memory: this.getMemoryInfo(),\n      sessionInfo: {\n        id: this.sessionId,\n        startTime: this.sessionStartTime,\n        duration: Date.now() - this.sessionStartTime,\n        pageViews: this.pageViews\n      },\n      userId: this.options.userId,\n      metadata: {\n        ...this.options.metadata,\n        ...additionalData\n      }\n    }\n\n    // \n    this.queue.push(report)\n    \n    // \n    if (this.queue.length > this.maxQueueSize) {\n      this.queue = this.queue.slice(-this.maxQueueSize)\n    }\n\n    // \n    if (errorInfo.severity === 'critical') {\n      this.flushQueue()\n    }\n  }\n\n  /**\n   * \n   */\n  async flushQueue(): Promise<void> {\n    if (this.isReporting || this.queue.length === 0 || !this.options.endpoint) {\n      return\n    }\n\n    this.isReporting = true\n    \n    try {\n      // \n      while (this.queue.length > 0) {\n        const batch = this.queue.splice(0, this.batchSize)\n        await this.sendBatch(batch)\n      }\n    } catch (error) {\n      console.error('[ErrorReporter] Failed to send error reports:', error)\n      // \n    } finally {\n      this.isReporting = false\n    }\n  }\n\n  /**\n   * \n   */\n  private async sendBatch(batch: ErrorReport[]): Promise<void> {\n    const payload = {\n      reports: batch,\n      timestamp: Date.now(),\n      apiKey: this.options.apiKey\n    }\n\n    const response = await fetch(this.options.endpoint, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-API-Key': this.options.apiKey\n      },\n      body: JSON.stringify(payload)\n    })\n\n    if (!response.ok) {\n      throw new Error(`Failed to send error reports: ${response.statusText}`)\n    }\n  }\n\n  /**\n   * \n   */\n  private getBrowserInfo() {\n    const ua = navigator.userAgent\n    const browser = {\n      name: 'Unknown',\n      version: 'Unknown',\n      platform: navigator.platform || 'Unknown'\n    }\n\n    // \n    if (ua.includes('Chrome')) {\n      browser.name = 'Chrome'\n      const match = ua.match(/Chrome\\/(\\d+)/)\n      if (match) browser.version = match[1]\n    } else if (ua.includes('Firefox')) {\n      browser.name = 'Firefox'\n      const match = ua.match(/Firefox\\/(\\d+)/)\n      if (match) browser.version = match[1]\n    } else if (ua.includes('Safari')) {\n      browser.name = 'Safari'\n      const match = ua.match(/Version\\/(\\d+)/)\n      if (match) browser.version = match[1]\n    } else if (ua.includes('Edge')) {\n      browser.name = 'Edge'\n      const match = ua.match(/Edge\\/(\\d+)/)\n      if (match) browser.version = match[1]\n    }\n\n    return browser\n  }\n\n  /**\n   * \n   */\n  private getScreenInfo() {\n    return {\n      width: window.screen.width,\n      height: window.screen.height,\n      pixelRatio: window.devicePixelRatio || 1\n    }\n  }\n\n  /**\n   * Chrome\n   */\n  private getMemoryInfo() {\n    if ('memory' in performance) {\n      const memory = (performance as any).memory\n      return {\n        used: memory.usedJSHeapSize,\n        total: memory.totalJSHeapSize,\n        limit: memory.jsHeapSizeLimit\n      }\n    }\n    return undefined\n  }\n\n  /**\n   * \n   */\n  private trackPageView(): void {\n    this.pageViews++\n    \n    // SPA\n    const pushState = history.pushState\n    history.pushState = (...args) => {\n      this.pageViews++\n      pushState.apply(history, args);\n    }\n  }\n\n  /**\n   * \n   */\n  private startBatchReporting(): void {\n    // 30\n    this.reportInterval = window.setInterval(() => {\n      this.flushQueue()\n    }, 30000)\n\n    // \n    window.addEventListener('beforeunload', () => {\n      this.flushQueue()\n    })\n    \n    // \n    document.addEventListener('visibilitychange', () => {\n      if (document.hidden) {\n        this.flushQueue()\n      }\n    })\n  }\n\n  /**\n   * ID\n   */\n  private generateSessionId(): string {\n    return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n  }\n\n  /**\n   * ID\n   */\n  setUserId(userId: string): void {\n    this.options.userId = userId\n  }\n\n  /**\n   * \n   */\n  updateMetadata(metadata: Record<string, any>): void {\n    this.options.metadata = {\n      ...this.options.metadata,\n      ...metadata\n    }\n  }\n\n  /**\n   * \n   */\n  getStats() {\n    return {\n      queueSize: this.queue.length,\n      sessionDuration: Date.now() - this.sessionStartTime,\n      pageViews: this.pageViews,\n      isReporting: this.isReporting\n    }\n  }\n\n  /**\n   * \n   */\n  destroy(): void {\n    if (this.reportInterval) {\n      clearInterval(this.reportInterval)\n      this.reportInterval = null\n    }\n    \n    // \n    this.flushQueue()\n  }\n}","/**\n * \n * \n */\n\nimport type { ErrorInfo } from './ErrorHandler'\n\nexport interface RecoveryStrategy {\n  name: string\n  description: string\n  condition: (error: ErrorInfo) => boolean\n  recover: (error: ErrorInfo) => Promise<boolean>\n  maxRetries?: number\n  retryDelay?: number\n  priority?: number // \n  prerequisites?: string[] // \n  rollback?: () => Promise<void> // \n  healthCheck?: () => Promise<boolean> // \n}\n\nexport interface RecoveryResult {\n  success: boolean\n  strategyUsed?: string\n  attemptsCount: number\n  error?: Error\n}\n\nexport class ErrorRecovery {\n  private readonly strategies: RecoveryStrategy[] = []\n  private readonly recoveryAttempts = new Map<string, number>()\n  private recoveryHistory: Array<{\n    timestamp: number\n    errorInfo: ErrorInfo\n    result: RecoveryResult\n  }> = []\n  private readonly maxHistorySize = 100\n\n  private gameStateBackup: any = null\n  private performanceBaseline: { memory: number; timing: number } | null = null\n  private lastCleanupTime = 0\n  private readonly CLEANUP_INTERVAL = 60000 // 1\n  private isCleaningUp = false\n  \n  constructor() {\n    this.registerDefaultStrategies()\n    this.initializePerformanceBaseline()\n  }\n\n  /**\n   * \n   */\n  private initializePerformanceBaseline(): void {\n    try {\n      const memory = (performance as any).memory?.usedJSHeapSize || 0\n      const timing = performance.now()\n      this.performanceBaseline = { memory, timing }\n    } catch (error) {\n      console.warn('[Recovery] Failed to initialize performance baseline:', error)\n    }\n  }\n\n  /**\n   * \n   */\n  private registerDefaultStrategies(): void {\n    // \n    this.registerStrategy({\n      name: 'network-retry',\n      description: '',\n      condition: (error) => \n        error.category === 'network' || \n        error.message.includes('Failed to fetch') ||\n        error.message.includes('Network'),\n      recover: async (error) => {\n        console.log('[Recovery] Attempting network recovery...')\n        \n        // \n        const networkStatus = await this.diagnoseNetworkStatus()\n        \n        if (networkStatus.isOffline) {\n          await this.waitForOnline(30000) // 30\n        }\n        \n        // DNS\n        await this.clearDNSCache()\n        \n        // \n        if (this.getRecoveryAttempts('network-retry') >= 2) {\n          return await this.enableOfflineMode()\n        }\n        \n        return networkStatus.isOnline\n      },\n      maxRetries: 3,\n      retryDelay: 2000,\n      priority: 8,\n      healthCheck: async () => this.checkNetworkHealth()\n    })\n\n    // \n    this.registerStrategy({\n      name: 'memory-cleanup',\n      description: '',\n      condition: (error) => \n        error.message.includes('out of memory') ||\n        error.message.includes('Maximum call stack') ||\n        error.category === 'performance',\n      recover: async (error) => {\n        // \n        const now = Date.now()\n        if (this.isCleaningUp || now - this.lastCleanupTime < this.CLEANUP_INTERVAL) {\n          console.log('[Recovery] Memory cleanup already in progress or recently completed')\n          return false\n        }\n        \n        this.isCleaningUp = true\n        this.lastCleanupTime = now\n        \n        try {\n          console.log('[Recovery] Attempting memory cleanup...')\n          \n          const initialMemory = this.getCurrentMemoryUsage()\n          \n          // \n          await this.performMemoryCleanup()\n          \n          const finalMemory = this.getCurrentMemoryUsage()\n          const memoryReduced = initialMemory - finalMemory\n          \n          console.log(`[Recovery] Memory cleanup completed. Reduced: ${(memoryReduced / 1024 / 1024).toFixed(1)}MB`)\n          \n          // \n          return memoryReduced > 5 * 1024 * 1024 // 5MB\n        } finally {\n          this.isCleaningUp = false\n        }\n      },\n      maxRetries: 2,\n      retryDelay: 1000,\n      priority: 7,\n      healthCheck: async () => this.checkMemoryHealth()\n    })\n\n    // Vue\n    this.registerStrategy({\n      name: 'vue-component-remount',\n      description: 'Vue',\n      condition: (error) => error.category === 'vue',\n      recover: async (error) => {\n        console.log('[Recovery] Attempting Vue component recovery...')\n        \n        // \n        const componentName = error.component || 'unknown'\n        \n        // \n        await this.backupComponentState(componentName)\n        \n        // \n        const remountEvent = new CustomEvent('app:remount-component', {\n          detail: { \n            component: componentName,\n            preserveState: true,\n            errorId: error.fingerprint\n          }\n        })\n        window.dispatchEvent(remountEvent)\n        \n        // \n        await new Promise(resolve => setTimeout(resolve, 1000))\n        \n        // \n        await this.restoreComponentState(componentName)\n        \n        return true\n      },\n      maxRetries: 2,\n      retryDelay: 1000,\n      priority: 6,\n      rollback: async () => {\n        // \n        console.log('[Recovery] Vue recovery failed, reloading page')\n        location.reload()\n      }\n    })\n\n    // \n    this.registerStrategy({\n      name: 'storage-cleanup',\n      condition: (error) => \n        error.message.includes('QuotaExceededError') ||\n        error.message.includes('storage'),\n      recover: async () => {\n        console.log('[Recovery] Attempting storage cleanup...')\n        \n        // \n        this.cleanupLocalStorage()\n        \n        return true\n      },\n      maxRetries: 1\n    })\n\n    // \n    this.registerStrategy({\n      name: 'game-state-recovery',\n      description: '',\n      condition: (error) => \n        error.category === 'game' ||\n        error.message.includes('game') ||\n        error.message.includes('state'),\n      recover: async (error) => {\n        console.log('[Recovery] Attempting game state recovery...')\n        \n        // \n        const recovered = await this.restoreGameState()\n        \n        if (recovered) {\n          // \n          const reinitEvent = new CustomEvent('app:reinitialize-game', {\n            detail: { reason: 'error-recovery', errorId: error.fingerprint }\n          })\n          window.dispatchEvent(reinitEvent)\n          \n          return true\n        }\n        \n        return false\n      },\n      maxRetries: 1,\n      priority: 9,\n      prerequisites: ['memory-cleanup'],\n      rollback: async () => {\n        // \n        const newGameEvent = new CustomEvent('app:start-new-game', {\n          detail: { reason: 'recovery-failed' }\n        })\n        window.dispatchEvent(newGameEvent)\n      }\n    })\n\n    // \n    this.registerStrategy({\n      name: 'async-retry',\n      description: '',\n      condition: (error) => \n        error.category === 'async' &&\n        !error.message.includes('Network'),\n      recover: async (error) => {\n        console.log('[Recovery] Attempting async operation retry...')\n        \n        // \n        const attempt = this.getRecoveryAttempts('async-retry')\n        const delay = Math.min(1000 * 2**attempt, 10000)\n        \n        await new Promise(resolve => setTimeout(resolve, delay))\n        \n        // \n        const retryEvent = new CustomEvent('app:retry-async-operation', {\n          detail: { \n            originalError: error,\n            attempt: attempt + 1\n          }\n        })\n        window.dispatchEvent(retryEvent)\n        \n        return true\n      },\n      maxRetries: 3,\n      retryDelay: 1000,\n      priority: 4\n    })\n\n    // \n    this.registerStrategy({\n      name: 'security-fallback',\n      description: '',\n      condition: (error) => \n        error.category === 'security' ||\n        error.message.includes('CORS') ||\n        error.message.includes('blocked'),\n      recover: async (error) => {\n        console.log('[Recovery] Attempting security fallback...')\n        \n        // \n        const fallbackEvent = new CustomEvent('app:enable-security-fallback', {\n          detail: { reason: error.message }\n        })\n        window.dispatchEvent(fallbackEvent)\n        \n        return true\n      },\n      maxRetries: 1,\n      priority: 5\n    })\n  }\n\n  /**\n   * \n   */\n  registerStrategy(strategy: RecoveryStrategy): void {\n    // \n    const priority = strategy.priority || 0\n    const insertIndex = this.strategies.findIndex(s => (s.priority || 0) < priority)\n    \n    if (insertIndex === -1) {\n      this.strategies.push(strategy)\n    } else {\n      this.strategies.splice(insertIndex, 0, strategy)\n    }\n  }\n\n  /**\n   * \n   */\n  async tryRecover(errorInfo: ErrorInfo): Promise<RecoveryResult> {\n    console.log('[Recovery] Attempting recovery for error:', errorInfo.message)\n    \n    // \n    for (const strategy of this.strategies) {\n      if (strategy.condition(errorInfo)) {\n        const attempts = this.getRecoveryAttempts(strategy.name)\n        const maxRetries = strategy.maxRetries || 1\n        \n        if (attempts >= maxRetries) {\n          console.log(`[Recovery] Max retries reached for strategy: ${strategy.name}`)\n          continue\n        }\n        \n        try {\n          // \n          if (attempts > 0 && strategy.retryDelay) {\n            await new Promise(resolve => setTimeout(resolve, strategy.retryDelay))\n          }\n          \n          // \n          this.incrementRecoveryAttempts(strategy.name)\n          const success = await strategy.recover()\n          \n          const result: RecoveryResult = {\n            success,\n            strategyUsed: strategy.name,\n            attemptsCount: attempts + 1\n          }\n          \n          // \n          this.addToHistory(errorInfo, result)\n          \n          if (success) {\n            console.log(`[Recovery] Successfully recovered using strategy: ${strategy.name}`)\n            this.resetRecoveryAttempts(strategy.name)\n          }\n          \n          return result\n        } catch (error) {\n          console.error(`[Recovery] Strategy ${strategy.name} failed:`, error)\n          \n          const result: RecoveryResult = {\n            success: false,\n            strategyUsed: strategy.name,\n            attemptsCount: attempts + 1,\n            error: error as Error\n          }\n          \n          this.addToHistory(errorInfo, result)\n          return result\n        }\n      }\n    }\n    \n    // \n    const result: RecoveryResult = {\n      success: false,\n      attemptsCount: 0\n    }\n    \n    this.addToHistory(errorInfo, result)\n    return result\n  }\n\n  /**\n   * \n   */\n  private async waitForOnline(timeout = 30000): Promise<void> {\n    if (navigator.onLine) return\n    \n    return new Promise((resolve) => {\n      const handler = () => {\n        window.removeEventListener('online', handler)\n        resolve()\n      }\n      \n      window.addEventListener('online', handler)\n      \n      // \n      setTimeout(() => {\n        window.removeEventListener('online', handler)\n        resolve()\n      }, timeout)\n    })\n  }\n\n  /**\n   * \n   */\n  private cleanupEventListeners(): void {\n    // \n    const event = new CustomEvent('app:cleanup-listeners')\n    window.dispatchEvent(event)\n  }\n\n  /**\n   * \n   */\n  private clearCaches(): void {\n    // \n    try {\n      sessionStorage.clear()\n    } catch (e) {\n      console.error('[Recovery] Failed to clear session storage:', e)\n    }\n    \n    // \n    const event = new CustomEvent('app:clear-caches')\n    window.dispatchEvent(event)\n  }\n\n  /**\n   * \n   */\n  private cleanupLocalStorage(): void {\n    try {\n      const keysToRemove: string[] = []\n      const now = Date.now()\n      \n      // \n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i)\n        if (!key) continue\n        \n        try {\n          const value = localStorage.getItem(key)\n          if (!value) continue\n          \n          const data = JSON.parse(value)\n          if (data.expiry && data.expiry < now) {\n            keysToRemove.push(key)\n          }\n        } catch {\n          // JSON\n        }\n      }\n      \n      // \n      keysToRemove.forEach(key => { localStorage.removeItem(key); })\n      \n      // \n      if (keysToRemove.length === 0) {\n        const gameDataKeys = []\n        for (let i = 0; i < localStorage.length; i++) {\n          const key = localStorage.key(i)\n          if (key && key.startsWith('game_')) {\n            gameDataKeys.push(key)\n          }\n        }\n        \n        // \n        if (gameDataKeys.length > 0) {\n          localStorage.removeItem(gameDataKeys[0])\n        }\n      }\n    } catch (e) {\n      console.error('[Recovery] Failed to cleanup local storage:', e)\n    }\n  }\n\n  /**\n   * \n   */\n  private getRecoveryAttempts(strategyName: string): number {\n    return this.recoveryAttempts.get(strategyName) || 0\n  }\n\n  /**\n   * \n   */\n  private incrementRecoveryAttempts(strategyName: string): void {\n    const current = this.getRecoveryAttempts(strategyName)\n    this.recoveryAttempts.set(strategyName, current + 1)\n  }\n\n  /**\n   * \n   */\n  private resetRecoveryAttempts(strategyName: string): void {\n    this.recoveryAttempts.delete(strategyName)\n  }\n\n  /**\n   * \n   */\n  private addToHistory(errorInfo: ErrorInfo, result: RecoveryResult): void {\n    this.recoveryHistory.push({\n      timestamp: Date.now(),\n      errorInfo,\n      result\n    })\n    \n    // \n    if (this.recoveryHistory.length > this.maxHistorySize) {\n      this.recoveryHistory = this.recoveryHistory.slice(-this.maxHistorySize)\n    }\n  }\n\n  /**\n   * \n   */\n  getStatistics() {\n    const successful = this.recoveryHistory.filter(h => h.result.success).length\n    const failed = this.recoveryHistory.filter(h => !h.result.success).length\n    const byStrategy = new Map<string, { success: number; failed: number }>()\n    \n    this.recoveryHistory.forEach(h => {\n      if (h.result.strategyUsed) {\n        const stats = byStrategy.get(h.result.strategyUsed) || { success: 0, failed: 0 }\n        if (h.result.success) {\n          stats.success++\n        } else {\n          stats.failed++\n        }\n        byStrategy.set(h.result.strategyUsed, stats)\n      }\n    })\n    \n    return {\n      total: this.recoveryHistory.length,\n      successful,\n      failed,\n      successRate: this.recoveryHistory.length > 0 ? successful / this.recoveryHistory.length : 0,\n      byStrategy: Object.fromEntries(byStrategy),\n      currentAttempts: Object.fromEntries(this.recoveryAttempts)\n    }\n  }\n\n  /**\n   * \n   */\n  private async diagnoseNetworkStatus(): Promise<{\n    isOnline: boolean\n    isOffline: boolean\n    latency?: number\n    bandwidth?: string\n  }> {\n    const isOnline = navigator.onLine\n    \n    if (!isOnline) {\n      return { isOnline: false, isOffline: true }\n    }\n    \n    try {\n      // \n      const startTime = performance.now()\n      const response = await fetch('/favicon.ico', { \n        method: 'HEAD',\n        cache: 'no-cache'\n      })\n      const latency = performance.now() - startTime\n      \n      const connection = (navigator as any).connection\n      const bandwidth = connection?.effectiveType || 'unknown'\n      \n      return {\n        isOnline: response.ok,\n        isOffline: !response.ok,\n        latency,\n        bandwidth\n      }\n    } catch (error) {\n      return { isOnline: false, isOffline: true }\n    }\n  }\n\n  /**\n   * DNS\n   */\n  private async clearDNSCache(): Promise<void> {\n    // DNS\n    try {\n      // Service Worker\n      if ('serviceWorker' in navigator && navigator.serviceWorker.controller) {\n        navigator.serviceWorker.controller.postMessage({\n          type: 'CLEAR_DNS_CACHE'\n        })\n      }\n    } catch (error) {\n      console.warn('[Recovery] Could not clear DNS cache:', error)\n    }\n  }\n\n  /**\n   * \n   */\n  private async enableOfflineMode(): Promise<boolean> {\n    try {\n      const offlineEvent = new CustomEvent('app:enable-offline-mode', {\n        detail: { reason: 'network-recovery-failed' }\n      })\n      window.dispatchEvent(offlineEvent)\n      return true\n    } catch (error) {\n      console.error('[Recovery] Failed to enable offline mode:', error)\n      return false\n    }\n  }\n\n  /**\n   * \n   * GitHub PagesAPI\n   * \n   */\n  private async checkNetworkHealth(): Promise<boolean> {\n    try {\n      // GitHub Pages favicon.ico \n      const response = await fetch('/favicon.ico', { \n        method: 'HEAD',\n        cache: 'no-cache',\n        signal: AbortSignal.timeout(5000)\n      })\n      return response.ok\n    } catch {\n      return navigator.onLine\n    }\n  }\n\n  /**\n   * \n   */\n  private getCurrentMemoryUsage(): number {\n    try {\n      return (performance as any).memory?.usedJSHeapSize || 0\n    } catch {\n      return 0\n    }\n  }\n\n  /**\n   * \n   */\n  private async performMemoryCleanup(): Promise<void> {\n    // requestIdleCallbackpolyfill\n    const scheduleTask = (callback: () => void, options?: { timeout?: number }) => {\n      if ('requestIdleCallback' in window) {\n        requestIdleCallback(callback, options)\n      } else {\n        setTimeout(callback, options?.timeout || 0)\n      }\n    }\n    \n    // 1: \n    this.clearCaches()\n    await new Promise(resolve => setTimeout(resolve, 10)) // \n    \n    // 2: \n    this.cleanupEventListeners()\n    await new Promise(resolve => setTimeout(resolve, 10)) // \n    \n    // 3: DOM\n    scheduleTask(() => this.cleanupDOMElements(), { timeout: 1000 })\n    \n    // 4: \n    if ('gc' in window) {\n      scheduleTask(() => (window as any).gc(), { timeout: 500 })\n    }\n    \n    // 5: \n    scheduleTask(() => this.detectAndFixMemoryLeaks(), { timeout: 2000 })\n  }\n\n  /**\n   * DOM\n   */\n  private async cleanupDOMElements(): Promise<void> {\n    // \n    const hiddenElements = document.querySelectorAll('[style*=\"display: none\"]')\n    hiddenElements.forEach(el => {\n      if (el.parentNode && !el.hasAttribute('data-keep')) {\n        el.parentNode.removeChild(el)\n      }\n    })\n    \n    // \n    const logElements = document.querySelectorAll('[data-log-entry]')\n    if (logElements.length > 100) {\n      const toRemove = Array.from(logElements).slice(0, logElements.length - 50)\n      toRemove.forEach(el => { el.remove(); })\n    }\n  }\n\n  /**\n   * \n   */\n  private async detectAndFixMemoryLeaks(): Promise<void> {\n    // \n    const memoryLeakEvent = new CustomEvent('app:detect-memory-leaks')\n    window.dispatchEvent(memoryLeakEvent)\n    \n    // \n    this.cleanupOrphanedTimers()\n  }\n\n  /**\n   * \n   */\n  private cleanupOrphanedTimers(): void {\n    // \n    // \n    const timerCleanupEvent = new CustomEvent('app:cleanup-timers')\n    window.dispatchEvent(timerCleanupEvent)\n  }\n\n  /**\n   * \n   */\n  private async checkMemoryHealth(): Promise<boolean> {\n    const currentMemory = this.getCurrentMemoryUsage()\n    if (!this.performanceBaseline || currentMemory === 0) {\n      return true // \n    }\n    \n    const memoryIncrease = currentMemory - this.performanceBaseline.memory\n    const criticalThreshold = 100 * 1024 * 1024 // 100MB\n    \n    return memoryIncrease < criticalThreshold\n  }\n\n  /**\n   * \n   */\n  private async backupComponentState(componentName: string): Promise<void> {\n    const backupEvent = new CustomEvent('app:backup-component-state', {\n      detail: { component: componentName }\n    })\n    window.dispatchEvent(backupEvent)\n  }\n\n  /**\n   * \n   */\n  private async restoreComponentState(componentName: string): Promise<void> {\n    const restoreEvent = new CustomEvent('app:restore-component-state', {\n      detail: { component: componentName }\n    })\n    window.dispatchEvent(restoreEvent)\n  }\n\n  /**\n   * \n   */\n  private async restoreGameState(): Promise<boolean> {\n    try {\n      // \n      const savedState = localStorage.getItem('game_state_backup')\n      if (savedState) {\n        const gameState = JSON.parse(savedState)\n        \n        const restoreEvent = new CustomEvent('app:restore-game-state', {\n          detail: { state: gameState, source: 'backup' }\n        })\n        window.dispatchEvent(restoreEvent)\n        \n        return true\n      }\n      \n      // \n      const autoSave = localStorage.getItem('game_autosave')\n      if (autoSave) {\n        const gameState = JSON.parse(autoSave)\n        \n        const restoreEvent = new CustomEvent('app:restore-game-state', {\n          detail: { state: gameState, source: 'autosave' }\n        })\n        window.dispatchEvent(restoreEvent)\n        \n        return true\n      }\n      \n      return false\n    } catch (error) {\n      console.error('[Recovery] Failed to restore game state:', error)\n      return false\n    }\n  }\n\n  /**\n   * \n   */\n  private async checkPrerequisites(strategy: RecoveryStrategy): Promise<boolean> {\n    if (!strategy.prerequisites || strategy.prerequisites.length === 0) {\n      return true\n    }\n    \n    for (const prerequisite of strategy.prerequisites) {\n      const prerequisiteStrategy = this.strategies.find(s => s.name === prerequisite)\n      if (!prerequisiteStrategy) {\n        continue\n      }\n      \n      // \n      try {\n        const result = await prerequisiteStrategy.recover(\n          {} as ErrorInfo // \n        )\n        if (!result) {\n          console.log(`[Recovery] Prerequisite ${prerequisite} failed`)\n          return false\n        }\n      } catch (error) {\n        console.error(`[Recovery] Prerequisite ${prerequisite} threw error:`, error)\n        return false\n      }\n    }\n    \n    return true\n  }\n\n  /**\n   * \n   */\n  async tryAdvancedRecover(errorInfo: ErrorInfo): Promise<RecoveryResult> {\n    // \n    if (errorInfo.category === 'performance') {\n      console.debug('[Recovery] Starting advanced recovery for performance error')\n    } else {\n      console.log('[Recovery] Starting advanced recovery for error:', errorInfo.message)\n    }\n    \n    // \n    const sortedStrategies = [...this.strategies].sort((a, b) => \n      (b.priority || 0) - (a.priority || 0)\n    )\n    \n    for (const strategy of sortedStrategies) {\n      if (strategy.condition(errorInfo)) {\n        const attempts = this.getRecoveryAttempts(strategy.name)\n        const maxRetries = strategy.maxRetries || 1\n        \n        if (attempts >= maxRetries) {\n          console.log(`[Recovery] Max retries reached for strategy: ${strategy.name}`)\n          continue\n        }\n        \n        // \n        const prerequisitesMet = await this.checkPrerequisites(strategy)\n        if (!prerequisitesMet) {\n          console.log(`[Recovery] Prerequisites not met for strategy: ${strategy.name}`)\n          continue\n        }\n        \n        try {\n          // \n          if (attempts > 0 && strategy.retryDelay) {\n            await new Promise(resolve => setTimeout(resolve, strategy.retryDelay))\n          }\n          \n          // \n          this.incrementRecoveryAttempts(strategy.name)\n          const success = await strategy.recover(errorInfo)\n          \n          // \n          let healthCheckPassed = true\n          if (success && strategy.healthCheck) {\n            healthCheckPassed = await strategy.healthCheck()\n            if (!healthCheckPassed) {\n              console.log(`[Recovery] Health check failed for strategy: ${strategy.name}`)\n            }\n          }\n          \n          const result: RecoveryResult = {\n            success: success && healthCheckPassed,\n            strategyUsed: strategy.name,\n            attemptsCount: attempts + 1\n          }\n          \n          // \n          this.addToHistory(errorInfo, result)\n          \n          if (result.success) {\n            console.log(`[Recovery] Successfully recovered using strategy: ${strategy.name}`)\n            this.resetRecoveryAttempts(strategy.name)\n            return result\n          } if (strategy.rollback) {\n            // \n            console.log(`[Recovery] Rolling back strategy: ${strategy.name}`)\n            await strategy.rollback()\n          }\n          \n          return result\n        } catch (error) {\n          console.error(`[Recovery] Strategy ${strategy.name} failed:`, error)\n          \n          if (strategy.rollback) {\n            try {\n              await strategy.rollback()\n            } catch (rollbackError) {\n              console.error(`[Recovery] Rollback failed for ${strategy.name}:`, rollbackError)\n            }\n          }\n          \n          const result: RecoveryResult = {\n            success: false,\n            strategyUsed: strategy.name,\n            attemptsCount: attempts + 1,\n            error: error as Error\n          }\n          \n          this.addToHistory(errorInfo, result)\n          return result\n        }\n      }\n    }\n    \n    // \n    const result: RecoveryResult = {\n      success: false,\n      attemptsCount: 0\n    }\n    \n    this.addToHistory(errorInfo, result)\n    return result\n  }\n\n  /**\n   * \n   */\n  clear(): void {\n    this.recoveryAttempts.clear()\n    this.recoveryHistory = []\n    this.gameStateBackup = null\n    this.performanceBaseline = null\n  }\n}","/**\n * \n * \n */\n\nimport { ErrorLogger } from './ErrorLogger'\nimport { ErrorReporter } from './ErrorReporter'\nimport { ErrorRecovery } from './ErrorRecovery'\nimport type { App } from 'vue'\n\nexport interface ErrorInfo {\n  message: string\n  stack?: string\n  code?: string\n  component?: string\n  props?: Record<string, any>\n  info?: string\n  url?: string\n  line?: number\n  column?: number\n  timestamp: number\n  userAgent: string\n  severity: 'low' | 'medium' | 'high' | 'critical'\n  category: 'vue' | 'javascript' | 'network' | 'async' | 'user' | 'system' | 'performance' | 'security' | 'game'\n  context?: {\n    userId?: string\n    sessionId?: string\n    gameState?: string\n    route?: string\n    action?: string\n    deviceInfo?: {\n      isMobile: boolean\n      screenSize: string\n      connection?: string\n    }\n  }\n  fingerprint?: string\n  tags?: string[]\n  breadcrumbs?: Array<{\n    timestamp: number\n    category: string\n    message: string\n    data?: Record<string, any>\n  }>\n}\n\nexport interface ErrorHandlerOptions {\n  enableLogging?: boolean\n  enableReporting?: boolean\n  enableRecovery?: boolean\n  logToConsole?: boolean\n  reportToServer?: boolean\n  showUserNotification?: boolean\n  maxErrorsPerMinute?: number\n  recoveryStrategies?: Map<string, () => void>\n}\n\nexport class GlobalErrorHandler {\n  private static instance: GlobalErrorHandler\n  private readonly errorLogger: ErrorLogger\n  private readonly errorReporter: ErrorReporter\n  private readonly errorRecovery: ErrorRecovery\n  private readonly options: Required<ErrorHandlerOptions>\n  private errorCount = 0\n  private errorTimestamps: number[] = []\n  private isInitialized = false\n\n  private constructor(options: ErrorHandlerOptions = {}) {\n    this.options = {\n      enableLogging: true,\n      enableReporting: true,\n      enableRecovery: true,\n      logToConsole: true,\n      reportToServer: false,\n      showUserNotification: true,\n      maxErrorsPerMinute: 10,\n      recoveryStrategies: new Map(),\n      ...options\n    }\n\n    this.errorLogger = new ErrorLogger()\n    this.errorReporter = new ErrorReporter()\n    this.errorRecovery = new ErrorRecovery()\n  }\n\n  static getInstance(options?: ErrorHandlerOptions): GlobalErrorHandler {\n    if (!GlobalErrorHandler.instance) {\n      GlobalErrorHandler.instance = new GlobalErrorHandler(options)\n    }\n    return GlobalErrorHandler.instance\n  }\n\n  /**\n   * Vue\n   */\n  setupVueErrorHandler(app: App): void {\n    app.config.errorHandler = (error, instance, info) => {\n      this.handleError({\n        message: error.message || 'Unknown Vue error',\n        stack: error.stack,\n        component: instance?.$options.name || 'Unknown',\n        props: instance?.$props,\n        info,\n        timestamp: Date.now(),\n        userAgent: navigator.userAgent,\n        severity: this.determineSeverity(error),\n        category: 'vue'\n      })\n    }\n\n    // Vue\n    app.config.warnHandler = (msg, instance, trace) => {\n      if (this.options.logToConsole) {\n        console.warn(`Vue warning: ${msg}\\nTrace: ${trace}`)\n      }\n      this.errorLogger.logWarning({\n        message: msg,\n        component: instance?.$options.name || 'Unknown',\n        trace,\n        timestamp: Date.now()\n      })\n    }\n  }\n\n  /**\n   * \n   */\n  setupGlobalHandlers(): void {\n    if (this.isInitialized) {\n      console.warn('GlobalErrorHandler is already initialized')\n      return\n    }\n\n    // window.onerror\n    window.onerror = (message, source, lineno, colno, error) => {\n      const messageStr = typeof message === 'string' ? message : 'Unknown error'\n      \n      // Phaser\n      if (messageStr.includes('setMaxTextures is not a function')) {\n        if (import.meta.env.DEV) {\n          console.warn('[ErrorHandler] Phaser (setMaxTextures) - :', messageStr)\n        }\n        return true // \n      }\n      \n      this.handleError({\n        message: messageStr,\n        stack: error?.stack,\n        url: source,\n        line: lineno,\n        column: colno,\n        timestamp: Date.now(),\n        userAgent: navigator.userAgent,\n        severity: this.determineSeverity(error),\n        category: 'javascript'\n      })\n      return true // \n    }\n\n    // unhandledrejection\n    window.addEventListener('unhandledrejection', (event) => {\n      const reason = String(event.reason)\n      \n      // Phaser\n      if (reason.includes('setMaxTextures is not a function')) {\n        if (import.meta.env.DEV) {\n          console.warn('[ErrorHandler] Phaser (Promise rejection) - :', reason)\n        }\n        event.preventDefault()\n        return\n      }\n      \n      this.handleError({\n        message: `Unhandled Promise rejection: ${reason}`,\n        stack: event.reason?.stack,\n        timestamp: Date.now(),\n        userAgent: navigator.userAgent,\n        severity: 'high',\n        category: 'async'\n      })\n      event.preventDefault()\n    })\n\n    // \n    if ('PerformanceObserver' in window) {\n      const observer = new PerformanceObserver((list) => {\n        for (const entry of list.getEntries()) {\n          if (entry.entryType === 'resource' && \n              'responseStatus' in entry && \n              (entry as any).responseStatus >= 400) {\n            this.handleError({\n              message: `Network error: ${(entry as any).name}`,\n              url: (entry as any).name,\n              timestamp: Date.now(),\n              userAgent: navigator.userAgent,\n              severity: 'medium',\n              category: 'network'\n            })\n          }\n        }\n      })\n      \n      try {\n        observer.observe({ entryTypes: ['resource'] })\n      } catch (e) {\n        // PerformanceObserver\n      }\n    }\n\n    this.isInitialized = true\n  }\n\n  /**\n   * \n   */\n  handleError(errorInfo: ErrorInfo): void {\n    // \n    const enhancedErrorInfo = this.enhanceErrorInfo(errorInfo)\n    \n    // \n    if (!this.checkRateLimit()) {\n      console.error('Error rate limit exceeded')\n      return\n    }\n\n    this.errorCount++\n\n    // \n    enhancedErrorInfo.fingerprint = this.generateFingerprint(enhancedErrorInfo)\n    \n    // \n    if (this.isDuplicateError(enhancedErrorInfo)) {\n      console.log('Duplicate error detected, skipping notification')\n      // \n      if (this.options.enableLogging) {\n        this.errorLogger.log(enhancedErrorInfo)\n      }\n      return\n    }\n\n    // \n    if (this.options.enableLogging) {\n      this.errorLogger.log(enhancedErrorInfo)\n      if (this.options.logToConsole) {\n        this.logStructuredError(enhancedErrorInfo)\n      }\n    }\n\n    // \n    if (this.options.enableReporting && this.options.reportToServer) {\n      this.errorReporter.report(enhancedErrorInfo)\n    }\n\n    // \n    if (this.options.enableRecovery) {\n      this.errorRecovery.tryAdvancedRecover(enhancedErrorInfo)\n        .then(result => {\n          // \n          const recoveryEvent = new CustomEvent('app:recovery-result', {\n            detail: {\n              success: result.success,\n              strategy: result.strategyUsed,\n              attempts: result.attemptsCount,\n              errorId: enhancedErrorInfo.fingerprint\n            }\n          })\n          window.dispatchEvent(recoveryEvent)\n          \n          if (result.success) {\n            console.log(`[ErrorHandler] Auto-recovery successful using ${result.strategyUsed}`)\n            \n            // \n            const successEvent = new CustomEvent('app:error', {\n              detail: {\n                message: ` (${result.strategyUsed})`,\n                severity: 'info',\n                category: 'system',\n                timestamp: Date.now(),\n                userAgent: navigator.userAgent,\n                context: {\n                  originalError: enhancedErrorInfo.fingerprint,\n                  recoveryStrategy: result.strategyUsed\n                }\n              } as ErrorInfo\n            })\n            window.dispatchEvent(successEvent)\n          }\n        })\n        .catch(error => {\n          console.error('[ErrorHandler] Recovery failed:', error)\n          \n          // \n          this.handleError({\n            message: `Recovery system failure: ${error.message}`,\n            stack: error.stack,\n            category: 'system',\n            severity: 'high',\n            timestamp: Date.now(),\n            userAgent: navigator.userAgent,\n            context: {\n              originalError: enhancedErrorInfo.fingerprint,\n              recoveryError: true\n            }\n          })\n        })\n    }\n\n    // \n    if (this.options.showUserNotification && enhancedErrorInfo.severity !== 'low') {\n      this.notifyUser(enhancedErrorInfo)\n    }\n\n    // \n    this.trackErrorPerformance(enhancedErrorInfo)\n  }\n\n  /**\n   * \n   */\n  private determineSeverity(error: any): ErrorInfo['severity'] {\n    if (!error) return 'low'\n\n    const message = error.message || error.toString()\n    const stack = error.stack || ''\n    \n    // \n    if (\n      message.includes('Cannot read property') ||\n      message.includes('Cannot access before initialization') ||\n      message.includes('is not defined') ||\n      message.includes('Maximum call stack') ||\n      message.includes('Out of memory') ||\n      message.includes('Script error') ||\n      message.includes('ChunkLoadError') ||\n      stack.includes('at Object.exports') ||\n      (error.name === 'TypeError' && message.includes('null'))\n    ) {\n      return 'critical'\n    }\n\n    // \n    if (\n      message.includes('Network error') ||\n      message.includes('Failed to fetch') ||\n      message.includes('Promise rejection') ||\n      message.includes('Timeout') ||\n      message.includes('CORS') ||\n      message.includes('401') ||\n      message.includes('403') ||\n      message.includes('500') ||\n      message.includes('Game state') ||\n      message.includes('Save failed') ||\n      error.name === 'SecurityError'\n    ) {\n      return 'high'\n    }\n\n    // \n    if (\n      message.includes('Warning') ||\n      message.includes('Deprecated') ||\n      message.includes('Performance') ||\n      message.includes('Slow') ||\n      message.includes('404') ||\n      message.includes('Render') ||\n      message.includes('Animation')\n    ) {\n      return 'medium'\n    }\n\n    return 'low'\n  }\n\n  /**\n   * \n   */\n  private checkRateLimit(): boolean {\n    const now = Date.now()\n    const oneMinuteAgo = now - 60000\n\n    // 1\n    this.errorTimestamps = this.errorTimestamps.filter(ts => ts > oneMinuteAgo)\n    \n    if (this.errorTimestamps.length >= this.options.maxErrorsPerMinute) {\n      return false\n    }\n\n    this.errorTimestamps.push(now)\n    return true\n  }\n\n  /**\n   * \n   */\n  private notifyUser(errorInfo: ErrorInfo): void {\n    // \n    let userMessage = ''\n    \n    switch (errorInfo.category) {\n      case 'network':\n        userMessage = ''\n        break\n      case 'async':\n        userMessage = ''\n        break\n      case 'vue':\n        userMessage = ''\n        break\n      default:\n        userMessage = ''\n    }\n\n    // UI\n    this.showErrorNotification(userMessage, errorInfo.severity)\n  }\n\n  /**\n   * UI\n   */\n  private showErrorNotification(message: string, severity: ErrorInfo['severity']): void {\n    // console\n    console.warn(`[User Notification] ${severity.toUpperCase()}: ${message}`)\n    \n    // TODO: UI\n    const event = new CustomEvent('app:error', {\n      detail: { message, severity }\n    })\n    window.dispatchEvent(event)\n  }\n\n  /**\n   * \n   */\n  getErrorStats() {\n    return {\n      totalErrors: this.errorCount,\n      recentErrors: this.errorTimestamps.length,\n      logs: this.errorLogger.getLogs(),\n      isHealthy: this.errorTimestamps.length < this.options.maxErrorsPerMinute / 2\n    }\n  }\n\n  /**\n   * \n   */\n  reset(): void {\n    this.errorCount = 0\n    this.errorTimestamps = []\n    this.errorLogger.clear()\n  }\n\n  /**\n   * \n   */\n  private enhanceErrorInfo(errorInfo: ErrorInfo): ErrorInfo {\n    // \n    const context = {\n      ...errorInfo.context,\n      route: window.location.pathname,\n      deviceInfo: {\n        isMobile: /Mobile|Android|iPhone|iPad/.test(navigator.userAgent),\n        screenSize: `${window.screen.width}x${window.screen.height}`,\n        connection: (navigator as any).connection?.effectiveType || 'unknown'\n      }\n    }\n\n    // \n    const tags = [\n      ...errorInfo.tags || [],\n      errorInfo.category,\n      errorInfo.severity,\n      context.deviceInfo.isMobile ? 'mobile' : 'desktop'\n    ]\n\n    // \n    const breadcrumbs = [\n      ...errorInfo.breadcrumbs || [],\n      {\n        timestamp: Date.now(),\n        category: 'error',\n        message: 'Error captured by handler',\n        data: { component: errorInfo.component }\n      }\n    ]\n\n    return {\n      ...errorInfo,\n      context,\n      tags,\n      breadcrumbs\n    }\n  }\n\n  /**\n   * \n   */\n  private generateFingerprint(errorInfo: ErrorInfo): string {\n    const key = [\n      errorInfo.message,\n      errorInfo.component || 'unknown',\n      errorInfo.category,\n      errorInfo.context?.route || 'unknown'\n    ].join('|')\n    \n    // \n    let hash = 0\n    for (let i = 0; i < key.length; i++) {\n      const char = key.charCodeAt(i)\n      hash = ((hash << 5) - hash) + char\n      hash = hash & hash // 32bit\n    }\n    return Math.abs(hash).toString(16)\n  }\n\n  /**\n   * \n   */\n  private readonly duplicateErrors = new Map<string, number>()\n  private isDuplicateError(errorInfo: ErrorInfo): boolean {\n    if (!errorInfo.fingerprint) return false\n    \n    const now = Date.now()\n    const lastSeen = this.duplicateErrors.get(errorInfo.fingerprint) || 0\n    const timeDiff = now - lastSeen\n    \n    // 1\n    if (timeDiff < 60000) {\n      return true\n    }\n    \n    this.duplicateErrors.set(errorInfo.fingerprint, now)\n    return false\n  }\n\n  /**\n   * \n   */\n  private logStructuredError(errorInfo: ErrorInfo): void {\n    const logData = {\n      message: errorInfo.message,\n      severity: errorInfo.severity,\n      category: errorInfo.category,\n      component: errorInfo.component,\n      fingerprint: errorInfo.fingerprint,\n      context: errorInfo.context,\n      tags: errorInfo.tags,\n      timestamp: new Date(errorInfo.timestamp).toISOString()\n    }\n\n    console.group(` [${errorInfo.severity.toUpperCase()}] ${errorInfo.category}`)\n    console.error('Message:', errorInfo.message)\n    console.log('Data:', logData)\n    if (errorInfo.stack) {\n      console.log('Stack:', errorInfo.stack)\n    }\n    console.groupEnd()\n  }\n\n  /**\n   * \n   */\n  private errorPerformanceHistory: Array<{ timestamp: number; severity: string }> = []\n  private trackErrorPerformance(errorInfo: ErrorInfo): void {\n    this.errorPerformanceHistory.push({\n      timestamp: Date.now(),\n      severity: errorInfo.severity\n    })\n\n    // 1\n    const oneHourAgo = Date.now() - 3600000\n    this.errorPerformanceHistory = this.errorPerformanceHistory.filter(\n      entry => entry.timestamp > oneHourAgo\n    )\n\n    // \n    const recentCriticalErrors = this.errorPerformanceHistory.filter(\n      entry => entry.severity === 'critical' && entry.timestamp > Date.now() - 300000 // 5\n    ).length\n\n    if (recentCriticalErrors >= 3) {\n      this.triggerSystemAlert('Multiple critical errors detected')\n    }\n  }\n\n  /**\n   * \n   */\n  private triggerSystemAlert(message: string): void {\n    console.error(` SYSTEM ALERT: ${message}`)\n    \n    // \n    const event = new CustomEvent('app:system-alert', {\n      detail: { message, timestamp: Date.now() }\n    })\n    window.dispatchEvent(event)\n  }\n\n  /**\n   * \n   */\n  addBreadcrumb(category: string, message: string, data?: Record<string, any>): void {\n    // \n    console.log(`[Breadcrumb] ${category}: ${message}`, data)\n  }\n\n  /**\n   * \n   */\n  getHealthStatus() {\n    const recentErrors = this.errorTimestamps.filter(\n      ts => ts > Date.now() - 300000 // 5\n    ).length\n\n    const criticalErrorsRecent = this.errorPerformanceHistory.filter(\n      entry => entry.severity === 'critical' && entry.timestamp > Date.now() - 300000\n    ).length\n\n    return {\n      isHealthy: recentErrors < this.options.maxErrorsPerMinute / 2 && criticalErrorsRecent === 0,\n      recentErrorCount: recentErrors,\n      criticalErrorCount: criticalErrorsRecent,\n      totalErrors: this.errorCount,\n      rateLimit: {\n        current: this.errorTimestamps.length,\n        max: this.options.maxErrorsPerMinute\n      }\n    }\n  }\n\n  /**\n   * \n   */\n  destroy(): void {\n    window.onerror = null\n    window.removeEventListener('unhandledrejection', () => {})\n    this.duplicateErrors.clear()\n    this.errorPerformanceHistory = []\n    this.reset()\n    this.isInitialized = false\n  }\n}","/**\n * \n * \n */\n\nexport interface DebugInfo {\n  timestamp: string\n  sessionId: string\n  buildVersion: string\n  environment: string\n  \n  // \n  system: {\n    userAgent: string\n    platform: string\n    language: string\n    cookieEnabled: boolean\n    onLine: boolean\n    screenResolution: string\n    viewportSize: string\n    devicePixelRatio: number\n    timezone: string\n  }\n  \n  // \n  performance: {\n    memory?: {\n      used: number\n      total: number\n      limit: number\n    }\n    timing: {\n      navigationStart: number\n      loadComplete: number\n      domReady: number\n      firstPaint?: number\n      firstContentfulPaint?: number\n    }\n    connection?: {\n      effectiveType: string\n      downlink: number\n      rtt: number\n    }\n  }\n  \n  // \n  application: {\n    url: string\n    referrer: string\n    gameState?: 'menu' | 'playing' | 'paused' | 'finished' | 'error'\n    routePath?: string\n    currentComponent?: string\n    activeFeatures: string[]\n    errorCount: number\n    lastError?: {\n      message: string\n      timestamp: number\n      severity: string\n    }\n  }\n  \n  // \n  features: {\n    localStorage: boolean\n    sessionStorage: boolean\n    webGL: boolean\n    webWorker: boolean\n    serviceWorker: boolean\n    notifications: boolean\n    geolocation: boolean\n    mediaDevices: boolean\n  }\n  \n  // \n  experimental?: {\n    flags: Record<string, boolean>\n    abTests: Record<string, string>\n    featureToggles: Record<string, boolean>\n  }\n  \n  // \n  // - \n  // - \n  // - \n  // - IP\n  // - \n}\n\nexport interface CollectionOptions {\n  includeMemory?: boolean\n  includePerformance?: boolean\n  includeGameState?: boolean\n  includeExperimental?: boolean\n  sanitize?: boolean\n  maxDataSize?: number // bytes\n}\n\nexport class DebugInfoCollector {\n  private readonly sessionId: string\n  private readonly buildVersion: string\n  private readonly environment: string\n  private gameStateProvider?: () => string\n  private componentProvider?: () => string\n  private featureProvider?: () => string[]\n  \n  constructor(\n    sessionId: string,\n    buildVersion: string = 'unknown',\n    environment: string = 'unknown'\n  ) {\n    this.sessionId = sessionId\n    this.buildVersion = buildVersion\n    this.environment = environment\n  }\n  \n  /**\n   * \n   */\n  setGameStateProvider(provider: () => string): void {\n    this.gameStateProvider = provider\n  }\n  \n  /**\n   * \n   */\n  setComponentProvider(provider: () => string): void {\n    this.componentProvider = provider\n  }\n  \n  /**\n   * \n   */\n  setFeatureProvider(provider: () => string[]): void {\n    this.featureProvider = provider\n  }\n  \n  /**\n   * \n   */\n  collect(options: CollectionOptions = {}): DebugInfo {\n    const opts = {\n      includeMemory: true,\n      includePerformance: true,\n      includeGameState: true,\n      includeExperimental: false,\n      sanitize: true,\n      maxDataSize: 1024 * 100, // 100KB\n      ...options\n    }\n    \n    try {\n      const debugInfo: DebugInfo = {\n        timestamp: new Date().toISOString(),\n        sessionId: this.sessionId,\n        buildVersion: this.buildVersion,\n        environment: this.environment,\n        \n        system: this.collectSystemInfo(),\n        performance: this.collectPerformanceInfo(opts),\n        application: this.collectApplicationInfo(opts),\n        features: this.collectFeatureInfo()\n      }\n      \n      if (opts.includeExperimental) {\n        debugInfo.experimental = this.collectExperimentalInfo()\n      }\n      \n      // \n      if (opts.maxDataSize) {\n        const serialized = JSON.stringify(debugInfo)\n        if (serialized.length > opts.maxDataSize) {\n          console.warn('[DebugInfoCollector] Data size exceeds limit, truncating...')\n          return this.truncateData(debugInfo, opts.maxDataSize)\n        }\n      }\n      \n      // \n      if (opts.sanitize) {\n        return this.sanitizeData(debugInfo)\n      }\n      \n      return debugInfo\n      \n    } catch (error) {\n      console.error('[DebugInfoCollector] Failed to collect debug info:', error)\n      \n      // \n      return {\n        timestamp: new Date().toISOString(),\n        sessionId: this.sessionId,\n        buildVersion: this.buildVersion,\n        environment: this.environment,\n        system: {\n          userAgent: navigator.userAgent,\n          platform: navigator.platform,\n          language: navigator.language,\n          cookieEnabled: navigator.cookieEnabled,\n          onLine: navigator.onLine,\n          screenResolution: `${screen.width}x${screen.height}`,\n          viewportSize: `${window.innerWidth}x${window.innerHeight}`,\n          devicePixelRatio: window.devicePixelRatio,\n          timezone: Intl.DateTimeFormat().resolvedOptions().timeZone\n        },\n        performance: {\n          timing: {\n            navigationStart: 0,\n            loadComplete: 0,\n            domReady: 0\n          }\n        },\n        application: {\n          url: this.sanitizeUrl(window.location.href),\n          referrer: this.sanitizeUrl(document.referrer),\n          activeFeatures: [],\n          errorCount: 0\n        },\n        features: {\n          localStorage: false,\n          sessionStorage: false,\n          webGL: false,\n          webWorker: false,\n          serviceWorker: false,\n          notifications: false,\n          geolocation: false,\n          mediaDevices: false\n        }\n      }\n    }\n  }\n  \n  /**\n   * \n   */\n  private collectSystemInfo(): DebugInfo['system'] {\n    return {\n      userAgent: navigator.userAgent,\n      platform: navigator.platform,\n      language: navigator.language,\n      cookieEnabled: navigator.cookieEnabled,\n      onLine: navigator.onLine,\n      screenResolution: `${screen.width}x${screen.height}`,\n      viewportSize: `${window.innerWidth}x${window.innerHeight}`,\n      devicePixelRatio: window.devicePixelRatio,\n      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone\n    }\n  }\n  \n  /**\n   * \n   */\n  private collectPerformanceInfo(options: CollectionOptions): DebugInfo['performance'] {\n    const perfInfo: DebugInfo['performance'] = {\n      timing: {\n        navigationStart: performance.timing.navigationStart,\n        loadComplete: performance.timing.loadEventEnd - performance.timing.navigationStart,\n        domReady: performance.timing.domContentLoadedEventEnd - performance.timing.navigationStart\n      }\n    }\n    \n    // Chrome\n    if (options.includeMemory && 'memory' in performance) {\n      const memory = (performance as any).memory\n      perfInfo.memory = {\n        used: memory.usedJSHeapSize,\n        total: memory.totalJSHeapSize,\n        limit: memory.jsHeapSizeLimit\n      }\n    }\n    \n    // \n    if (options.includePerformance && 'getEntriesByType' in performance) {\n      try {\n        const paintEntries = performance.getEntriesByType('paint')\n        const fpEntry = paintEntries.find(entry => entry.name === 'first-paint')\n        const fcpEntry = paintEntries.find(entry => entry.name === 'first-contentful-paint')\n        \n        if (fpEntry) perfInfo.timing.firstPaint = fpEntry.startTime\n        if (fcpEntry) perfInfo.timing.firstContentfulPaint = fcpEntry.startTime\n      } catch (error) {\n        // \n      }\n    }\n    \n    // \n    if ('connection' in navigator) {\n      const connection = (navigator as any).connection\n      perfInfo.connection = {\n        effectiveType: connection.effectiveType || 'unknown',\n        downlink: connection.downlink || 0,\n        rtt: connection.rtt || 0\n      }\n    }\n    \n    return perfInfo\n  }\n  \n  /**\n   * \n   */\n  private collectApplicationInfo(options: CollectionOptions): DebugInfo['application'] {\n    const appInfo: DebugInfo['application'] = {\n      url: this.sanitizeUrl(window.location.href),\n      referrer: this.sanitizeUrl(document.referrer),\n      activeFeatures: this.featureProvider ? this.featureProvider() : this.detectActiveFeatures(),\n      errorCount: this.getErrorCount()\n    }\n    \n    if (options.includeGameState && this.gameStateProvider) {\n      try {\n        appInfo.gameState = this.gameStateProvider() as any\n      } catch (error) {\n        // 'error'\n        appInfo.gameState = 'error'\n      }\n    }\n    \n    if (this.componentProvider) {\n      try {\n        appInfo.currentComponent = this.componentProvider()\n      } catch (error) {\n        // \n      }\n    }\n    \n    // Vue Router\n    if (window.location.pathname) {\n      appInfo.routePath = window.location.pathname\n    }\n    \n    // \n    const lastError = this.getLastError()\n    if (lastError) {\n      appInfo.lastError = lastError\n    }\n    \n    return appInfo\n  }\n  \n  /**\n   * \n   */\n  private collectFeatureInfo(): DebugInfo['features'] {\n    return {\n      localStorage: this.testFeature(() => 'localStorage' in window && window.localStorage !== null),\n      sessionStorage: this.testFeature(() => 'sessionStorage' in window && window.sessionStorage !== null),\n      webGL: this.testFeature(() => this.hasWebGL()),\n      webWorker: this.testFeature(() => 'Worker' in window),\n      serviceWorker: this.testFeature(() => 'serviceWorker' in navigator),\n      notifications: this.testFeature(() => 'Notification' in window),\n      geolocation: this.testFeature(() => 'geolocation' in navigator),\n      mediaDevices: this.testFeature(() => 'mediaDevices' in navigator)\n    }\n  }\n  \n  /**\n   * \n   */\n  private collectExperimentalInfo(): DebugInfo['experimental'] {\n    return {\n      flags: this.getFeatureFlags(),\n      abTests: this.getABTests(),\n      featureToggles: this.getFeatureToggles()\n    }\n  }\n  \n  /**\n   * \n   */\n  private testFeature(test: () => boolean): boolean {\n    try {\n      return test()\n    } catch {\n      return false\n    }\n  }\n  \n  /**\n   * WebGL\n   */\n  private hasWebGL(): boolean {\n    try {\n      const canvas = document.createElement('canvas')\n      return Boolean(canvas.getContext('webgl') || canvas.getContext('experimental-webgl'))\n    } catch {\n      return false\n    }\n  }\n  \n  /**\n   * URL\n   */\n  private sanitizeUrl(url: string): string {\n    if (!url) return ''\n    \n    try {\n      const urlObj = new URL(url)\n      \n      // \n      const sanitizedParams = new URLSearchParams()\n      urlObj.searchParams.forEach((value, key) => {\n        // ID\n        if (!this.isSensitiveParam(key)) {\n          sanitizedParams.set(key, value)\n        }\n      })\n      \n      return `${urlObj.origin}${urlObj.pathname}${sanitizedParams.toString() ? `?${  sanitizedParams.toString()}` : ''}`\n    } catch {\n      // URL\n      return url.split('?')[0].split('#')[0]\n    }\n  }\n  \n  /**\n   * \n   */\n  private isSensitiveParam(key: string): boolean {\n    const sensitiveKeys = [\n      'token', 'auth', 'session', 'key', 'secret',\n      'password', 'pwd', 'pass', 'api_key', 'apikey',\n      'access_token', 'refresh_token', 'jwt', 'bearer'\n    ]\n    \n    return sensitiveKeys.some(sensitive => \n      key.toLowerCase().includes(sensitive)\n    )\n  }\n  \n  /**\n   * \n   */\n  private detectActiveFeatures(): string[] {\n    const features: string[] = []\n    \n    // DOM\n    if (document.querySelector('[data-game-canvas]')) features.push('game')\n    if (document.querySelector('[data-tutorial]')) features.push('tutorial')\n    if (document.querySelector('[data-statistics]')) features.push('statistics')\n    if (document.querySelector('[data-settings]')) features.push('settings')\n    \n    // \n    try {\n      if (localStorage.getItem('game_settings')) features.push('settings-saved')\n      if (localStorage.getItem('game_progress')) features.push('progress-saved')\n      if (localStorage.getItem('tutorial_completed')) features.push('tutorial-completed')\n    } catch {\n      // \n    }\n    \n    return features\n  }\n  \n  /**\n   * \n   */\n  private getErrorCount(): number {\n    try {\n      // \n      const errorHandling = (window as any).__errorHandling\n      if (errorHandling?.getStatistics) {\n        const stats = errorHandling.getStatistics()\n        return stats.totalErrors || 0\n      }\n    } catch {\n      // 0\n    }\n    return 0\n  }\n  \n  /**\n   * \n   */\n  private getLastError(): DebugInfo['application']['lastError'] {\n    try {\n      const errorHandling = (window as any).__errorHandling\n      if (errorHandling?.getStatistics) {\n        const stats = errorHandling.getStatistics()\n        if (stats.logs && stats.logs.length > 0) {\n          const lastLog = stats.logs[stats.logs.length - 1]\n          return {\n            message: lastLog.errorInfo.message,\n            timestamp: lastLog.timestamp,\n            severity: lastLog.errorInfo.severity\n          }\n        }\n      }\n    } catch {\n      // undefined\n    }\n    return undefined\n  }\n  \n  /**\n   * \n   */\n  private getFeatureFlags(): Record<string, boolean> {\n    const flags: Record<string, boolean> = {}\n    \n    try {\n      // \n      const flagKeys = Object.keys(import.meta.env).filter(key => \n        key.startsWith('VITE_FEATURE_FLAG_')\n      )\n      \n      flagKeys.forEach(key => {\n        const flagName = key.replace('VITE_FEATURE_FLAG_', '').toLowerCase()\n        flags[flagName] = import.meta.env[key] === 'true'\n      })\n    } catch {\n      // \n    }\n    \n    return flags\n  }\n  \n  /**\n   * A/B\n   */\n  private getABTests(): Record<string, string> {\n    const tests: Record<string, string> = {}\n    \n    try {\n      // A/B\n      const abTestData = localStorage.getItem('ab_tests')\n      if (abTestData) {\n        Object.assign(tests, JSON.parse(abTestData))\n      }\n    } catch {\n      // \n    }\n    \n    return tests\n  }\n  \n  /**\n   * \n   */\n  private getFeatureToggles(): Record<string, boolean> {\n    const toggles: Record<string, boolean> = {}\n    \n    try {\n      // \n      const toggleData = localStorage.getItem('feature_toggles')\n      if (toggleData) {\n        Object.assign(toggles, JSON.parse(toggleData))\n      }\n    } catch {\n      // \n    }\n    \n    return toggles\n  }\n  \n  /**\n   * \n   */\n  private sanitizeData(data: DebugInfo): DebugInfo {\n    // \n    const sanitized = JSON.parse(JSON.stringify(data))\n    \n    // User Agent\n    if (sanitized.system.userAgent) {\n      sanitized.system.userAgent = this.sanitizeUserAgent(sanitized.system.userAgent)\n    }\n    \n    // URLsanitizeUrl\n    \n    return sanitized\n  }\n  \n  /**\n   * User Agent\n   */\n  private sanitizeUserAgent(userAgent: string): string {\n    // \n    const parts = userAgent.split(' ')\n    const importantParts = parts.filter(part => {\n      return part.includes('Chrome') || \n             part.includes('Firefox') || \n             part.includes('Safari') || \n             part.includes('Edge') ||\n             part.includes('Mobile') ||\n             part.includes('Windows') ||\n             part.includes('Mac') ||\n             part.includes('Linux')\n    })\n    \n    return importantParts.slice(0, 5).join(' ') // 5\n  }\n  \n  /**\n   * \n   */\n  private truncateData(data: DebugInfo, maxSize: number): DebugInfo {\n    // \n    const truncated = { ...data }\n    \n    // \n    delete truncated.experimental\n    \n    // \n    if (truncated.performance.memory) {\n      delete truncated.performance.memory\n    }\n    \n    if (truncated.performance.connection) {\n      delete truncated.performance.connection\n    }\n    \n    // \n    if (JSON.stringify(truncated).length > maxSize) {\n      truncated.application = {\n        url: truncated.application.url,\n        errorCount: truncated.application.errorCount,\n        activeFeatures: []\n      }\n    }\n    \n    return truncated\n  }\n}\n\n// \nlet debugInfoCollector: DebugInfoCollector | null = null\n\n/**\n * \n */\nexport function getDebugInfoCollector(\n  sessionId?: string,\n  buildVersion?: string,\n  environment?: string\n): DebugInfoCollector {\n  if (!debugInfoCollector) {\n    debugInfoCollector = new DebugInfoCollector(\n      sessionId || 'unknown',\n      buildVersion || import.meta.env.VITE_BUILD_VERSION || 'unknown',\n      environment || import.meta.env.MODE || 'unknown'\n    )\n  }\n  return debugInfoCollector\n}","/**\n * \n * \n */\n\nimport { type ErrorHandlerOptions, type ErrorInfo, GlobalErrorHandler } from './ErrorHandler'\nimport { ErrorLogger, type LogEntry } from './ErrorLogger'\nimport { ErrorRecovery } from './ErrorRecovery'\nimport { ErrorReporter } from './ErrorReporter'\nimport { AsyncQueue, safeAsync, safeAsyncAll, withAsyncErrorHandler } from './AsyncErrorHandler'\nimport { userFriendlyMessages, type UserMessage } from './UserFriendlyMessages'\nimport { type CollectionOptions, type DebugInfo, getDebugInfoCollector } from './DebugInfoCollector'\nimport type { App } from 'vue'\n\nexport {\n  GlobalErrorHandler,\n  ErrorLogger,\n  ErrorRecovery,\n  ErrorReporter,\n  safeAsync,\n  safeAsyncAll,\n  withAsyncErrorHandler,\n  AsyncQueue,\n  userFriendlyMessages,\n  getDebugInfoCollector\n}\n\nexport type {\n  ErrorInfo,\n  ErrorHandlerOptions,\n  LogEntry,\n  UserMessage,\n  DebugInfo,\n  CollectionOptions\n}\n\n/**\n * \n */\nexport interface ErrorHandlingConfig {\n  // \n  enableLogging?: boolean\n  enableReporting?: boolean\n  enableRecovery?: boolean\n  enableUserNotifications?: boolean\n  \n  // \n  maxErrorsPerMinute?: number\n  logToConsole?: boolean\n  reportToServer?: boolean\n  \n  // \n  reportEndpoint?: string\n  reportApiKey?: string\n  \n  // \n  environment?: 'development' | 'staging' | 'production'\n  userId?: string\n  buildVersion?: string\n  \n  // \n  onError?: (errorInfo: ErrorInfo) => void\n  onRecovery?: (success: boolean, strategy?: string) => void\n  onAlert?: (type: string, data: any) => void\n}\n\n/**\n * \n */\nclass ErrorHandlingSystem {\n  private globalHandler?: GlobalErrorHandler\n  private isInitialized = false\n  private config: ErrorHandlingConfig = {}\n  private debugCollector?: ReturnType<typeof getDebugInfoCollector>\n  \n  /**\n   * \n   */\n  initialize(config: ErrorHandlingConfig = {}): void {\n    if (this.isInitialized) {\n      console.warn('[ErrorHandlingSystem] Already initialized')\n      return\n    }\n    \n    this.config = {\n      enableLogging: true,\n      enableReporting: true,\n      enableRecovery: true,\n      enableUserNotifications: true,\n      maxErrorsPerMinute: 10,\n      logToConsole: import.meta.env.DEV,\n      reportToServer: import.meta.env.PROD,\n      environment: (import.meta.env.MODE as any) || 'development',\n      ...config\n    }\n    \n    // \n    this.globalHandler = GlobalErrorHandler.getInstance({\n      enableLogging: this.config.enableLogging,\n      enableReporting: this.config.enableReporting,\n      enableRecovery: this.config.enableRecovery,\n      logToConsole: this.config.logToConsole,\n      reportToServer: this.config.reportToServer,\n      showUserNotification: this.config.enableUserNotifications,\n      maxErrorsPerMinute: this.config.maxErrorsPerMinute\n    })\n    \n    // \n    this.globalHandler.setupGlobalHandlers()\n    \n    // \n    this.debugCollector = getDebugInfoCollector(\n      this.generateSessionId(),\n      this.config.buildVersion,\n      this.config.environment\n    )\n    \n    // ID\n    if (this.config.userId) {\n      this.setUserId(this.config.userId)\n    }\n    \n    // \n    this.setupEventListeners()\n    \n    this.isInitialized = true\n    \n    console.log('[ErrorHandlingSystem] Initialized successfully', {\n      config: this.config,\n      environment: this.config.environment\n    })\n  }\n  \n  /**\n   * Vue\n   */\n  integrateWithVue(app: App): void {\n    if (!this.globalHandler) {\n      throw new Error('ErrorHandlingSystem must be initialized before Vue integration')\n    }\n    \n    this.globalHandler.setupVueErrorHandler(app)\n    \n    // Vue DevTools\n    if (import.meta.env.DEV && (window as any).__VUE_DEVTOOLS_GLOBAL_HOOK__) {\n      this.setupVueDevToolsIntegration()\n    }\n  }\n  \n  /**\n   * ID\n   */\n  setUserId(userId: string): void {\n    this.config.userId = userId\n    \n    if (this.globalHandler) {\n      // ID\n      // : API\n      try {\n        (this.globalHandler as any).errorReporter.setUserId(userId)\n        (this.globalHandler as any).errorLogger.setUserId(userId)\n      } catch (error) {\n        console.warn('[ErrorHandlingSystem] Failed to set user ID:', error)\n      }\n    }\n  }\n  \n  /**\n   * \n   */\n  reportError(error: Error | string, context?: Record<string, any>, category: ErrorInfo['category'] = 'user'): void {\n    if (!this.globalHandler) {\n      console.error('[ErrorHandlingSystem] Not initialized')\n      return\n    }\n    \n    const errorInfo: ErrorInfo = {\n      message: typeof error === 'string' ? error : error.message,\n      stack: typeof error === 'object' ? error.stack : undefined,\n      category,\n      severity: 'medium',\n      timestamp: Date.now(),\n      userAgent: navigator.userAgent,\n      context: {\n        ...context,\n        source: 'manual-report',\n        userId: this.config.userId\n      }\n    }\n    \n    this.globalHandler.handleError(errorInfo)\n  }\n  \n  /**\n   * \n   */\n  addErrorPattern(pattern: any): void {\n    userFriendlyMessages.addPattern(pattern)\n  }\n  \n  /**\n   * \n   */\n  getHealthStatus() {\n    if (!this.globalHandler) {\n      return { isHealthy: false, error: 'Not initialized' }\n    }\n    \n    return this.globalHandler.getHealthStatus()\n  }\n  \n  /**\n   * \n   */\n  getStatistics() {\n    if (!this.globalHandler) {\n      return null\n    }\n    \n    return this.globalHandler.getErrorStats()\n  }\n  \n  /**\n   * \n   */\n  addErrorListener(listener: (errorInfo: ErrorInfo) => void): () => void {\n    const handler = (event: CustomEvent) => {\n      listener(event.detail)\n    }\n    \n    window.addEventListener('app:error', handler as EventListener)\n    \n    return () => {\n      window.removeEventListener('app:error', handler as EventListener)\n    }\n  }\n  \n  /**\n   * \n   */\n  private setupEventListeners(): void {\n    // \n    window.addEventListener('app:error-alert', (event: CustomEvent) => {\n      if (this.config.onAlert) {\n        this.config.onAlert(event.detail.type, event.detail.data)\n      }\n    })\n    \n    // \n    window.addEventListener('app:system-alert', (event: CustomEvent) => {\n      console.error(` SYSTEM ALERT: ${event.detail.message}`)\n      \n      if (this.config.onAlert) {\n        this.config.onAlert('system-alert', event.detail)\n      }\n    })\n    \n    // \n    window.addEventListener('app:recovery-result', (event: CustomEvent) => {\n      if (this.config.onRecovery) {\n        this.config.onRecovery(event.detail.success, event.detail.strategy)\n      }\n    })\n    \n    // \n    this.setupPerformanceMonitoring()\n  }\n  \n  /**\n   * Vue DevTools\n   */\n  private setupVueDevToolsIntegration(): void {\n    const devtools = (window as any).__VUE_DEVTOOLS_GLOBAL_HOOK__\n    \n    // DevTools\n    this.addErrorListener((errorInfo) => {\n      devtools.emit('app:error', {\n        type: 'error',\n        payload: {\n          error: errorInfo,\n          timestamp: Date.now()\n        }\n      })\n    })\n  }\n  \n  /**\n   * \n   */\n  private setupPerformanceMonitoring(): void {\n    // \n    if ('memory' in performance) {\n      setInterval(() => {\n        const memory = (performance as any).memory\n        const used = memory.usedJSHeapSize\n        const limit = memory.jsHeapSizeLimit\n        \n        // 80%\n        if (used / limit > 0.8) {\n          this.reportError('High memory usage detected', {\n            memoryUsed: used,\n            memoryLimit: limit,\n            percentage: Math.round((used / limit) * 100)\n          }, 'performance')\n        }\n      }, 30000) // 30\n    }\n    \n    // \n    if ('PerformanceObserver' in window) {\n      try {\n        let lastReportTime = 0\n        const REPORT_INTERVAL = 60000 // 1\n        const LONG_TASK_THRESHOLD = 100 // 100ms\n        \n        const observer = new PerformanceObserver((list) => {\n          const now = Date.now()\n          \n          // \n          if (now - lastReportTime < REPORT_INTERVAL) {\n            return\n          }\n          \n          const longTasks = list.getEntries().filter(entry => entry.duration > LONG_TASK_THRESHOLD)\n          \n          if (longTasks.length > 0) {\n            // \n            const longestTask = longTasks.reduce((prev, current) => \n              current.duration > prev.duration ? current : prev\n            )\n            \n            this.reportError('Long task detected', {\n              duration: Math.round(longestTask.duration),\n              startTime: Math.round(longestTask.startTime),\n              name: longestTask.name,\n              taskCount: longTasks.length,\n              totalDuration: Math.round(longTasks.reduce((sum, task) => sum + task.duration, 0))\n            }, 'performance')\n            \n            lastReportTime = now\n          }\n        })\n        \n        observer.observe({ entryTypes: ['longtask'] })\n      } catch (error) {\n        console.warn('[ErrorHandlingSystem] Long task monitoring not supported:', error)\n      }\n    }\n  }\n  \n  /**\n   * \n   */\n  collectDebugInfo(options?: CollectionOptions): DebugInfo | Record<string, any> {\n    if (this.debugCollector) {\n      try {\n        return this.debugCollector.collect(options)\n      } catch (error) {\n        console.error('[ErrorHandlingSystem] Failed to collect debug info:', error)\n      }\n    }\n    \n    // : \n    const debugInfo: Record<string, any> = {\n      timestamp: new Date().toISOString(),\n      userAgent: navigator.userAgent,\n      url: window.location.href,\n      config: this.config,\n      isInitialized: this.isInitialized\n    }\n    \n    // \n    if ('memory' in performance) {\n      debugInfo.memory = (performance as any).memory\n    }\n    \n    // \n    if ('connection' in navigator) {\n      debugInfo.connection = (navigator as any).connection\n    }\n    \n    // \n    debugInfo.timing = performance.timing\n    \n    // \n    if (this.globalHandler) {\n      debugInfo.errorStats = this.getStatistics()\n      debugInfo.healthStatus = this.getHealthStatus()\n    }\n    \n    return debugInfo\n  }\n  \n  /**\n   * \n   */\n  setGameStateProvider(provider: () => string): void {\n    if (this.debugCollector) {\n      this.debugCollector.setGameStateProvider(provider)\n    }\n  }\n  \n  /**\n   * \n   */\n  setComponentProvider(provider: () => string): void {\n    if (this.debugCollector) {\n      this.debugCollector.setComponentProvider(provider)\n    }\n  }\n  \n  /**\n   * \n   */\n  setFeatureProvider(provider: () => string[]): void {\n    if (this.debugCollector) {\n      this.debugCollector.setFeatureProvider(provider)\n    }\n  }\n  \n  /**\n   * ID\n   */\n  private generateSessionId(): string {\n    return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n  }\n  \n  /**\n   * \n   */\n  destroy(): void {\n    if (this.globalHandler) {\n      this.globalHandler.destroy()\n      this.globalHandler = undefined\n    }\n    \n    this.isInitialized = false\n    console.log('[ErrorHandlingSystem] Destroyed')\n  }\n}\n\n/**\n * \n */\nexport const errorHandlingSystem = new ErrorHandlingSystem()\n\n/**\n * Vue \n */\nexport const ErrorHandlingPlugin = {\n  install(app: App, options: ErrorHandlingConfig = {}) {\n    // \n    errorHandlingSystem.initialize(options)\n    \n    // Vue\n    errorHandlingSystem.integrateWithVue(app)\n    \n    // \n    app.config.globalProperties.$errorHandling = {\n      reportError: errorHandlingSystem.reportError.bind(errorHandlingSystem),\n      getHealth: errorHandlingSystem.getHealthStatus.bind(errorHandlingSystem),\n      getStats: errorHandlingSystem.getStatistics.bind(errorHandlingSystem),\n      collectDebugInfo: errorHandlingSystem.collectDebugInfo.bind(errorHandlingSystem)\n    }\n    \n    // Provide/Inject\n    app.provide('errorHandling', errorHandlingSystem)\n  }\n}\n\n/**\n * Composable for Vue 3\n */\nexport function useErrorHandling() {\n  return {\n    reportError: errorHandlingSystem.reportError.bind(errorHandlingSystem),\n    getHealthStatus: errorHandlingSystem.getHealthStatus.bind(errorHandlingSystem),\n    getStatistics: errorHandlingSystem.getStatistics.bind(errorHandlingSystem),\n    addErrorListener: errorHandlingSystem.addErrorListener.bind(errorHandlingSystem),\n    collectDebugInfo: errorHandlingSystem.collectDebugInfo.bind(errorHandlingSystem),\n    setGameStateProvider: errorHandlingSystem.setGameStateProvider.bind(errorHandlingSystem),\n    setComponentProvider: errorHandlingSystem.setComponentProvider.bind(errorHandlingSystem),\n    setFeatureProvider: errorHandlingSystem.setFeatureProvider.bind(errorHandlingSystem)\n  }\n}\n\n// \nexport default errorHandlingSystem","/**\n * Next-Generation PWA Service Worker \n * \n * :\n * - \n * - \n * - \n * - \n * - \n */\n\nexport interface ServiceWorkerConfig {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void\n  onUpdate?: (registration: ServiceWorkerRegistration) => void\n  onOffline?: () => void\n  onOnline?: () => void\n  onError?: (error: Error) => void\n  onBackgroundSync?: (event: string) => void\n  onPushReceived?: (notification: any) => void\n  enableNotifications?: boolean\n  enableBackgroundSync?: boolean\n  offlineGameMode?: boolean\n}\n\nexport interface PWAInstallPrompt {\n  prompt: () => void\n  userChoice: Promise<{ outcome: 'accepted' | 'dismissed' }>\n}\n\nexport interface PWACapabilities {\n  canInstall: boolean\n  isInstalled: boolean\n  isStandalone: boolean\n  hasNotificationPermission: boolean\n  hasBackgroundSync: boolean\n  isOfflineReady: boolean\n}\n\nclass ServiceWorkerManager {\n  private registration: ServiceWorkerRegistration | null = null\n  private updateAvailable = false\n  private refreshing = false\n  private installPrompt: PWAInstallPrompt | null = null\n  private capabilities: PWACapabilities = {\n    canInstall: false,\n    isInstalled: false,\n    isStandalone: false,\n    hasNotificationPermission: false,\n    hasBackgroundSync: false,\n    isOfflineReady: false\n  }\n  private config: ServiceWorkerConfig = {}\n  \n  /**\n   * Next-Generation PWA Service Worker \n   */\n  async register(config: ServiceWorkerConfig = {}): Promise<void> {\n    if (!('serviceWorker' in navigator)) {\n      console.log('Service Worker is not supported')\n      return\n    }\n    \n    this.config = config\n    \n    try {\n      // Service Worker \n      const basePath = import.meta.env.BASE_URL || '/'\n      const registration = await navigator.serviceWorker.register(`${basePath}service-worker.js`, {\n        scope: basePath\n      })\n      \n      this.registration = registration\n      console.log('Service Worker registered:', registration)\n      \n      // PWA\n      await this.initializePWAFeatures()\n      \n      // \n      if (config.onSuccess) {\n        config.onSuccess(registration)\n      }\n      \n      // \n      this.checkForUpdates(registration, config)\n      \n      // \n      this.setupNetworkListeners(config)\n      \n      // \n      this.setupRefreshListener()\n      \n      // PWA\n      this.setupInstallPrompt()\n      \n      // \n      if (config.enableNotifications) {\n        await this.setupNotifications()\n      }\n      \n      // \n      if (config.enableBackgroundSync) {\n        this.setupBackgroundSync()\n      }\n      \n      // \n      this.setupAccessibilityCache()\n      \n      // 1\n      setInterval(() => {\n        registration.update()\n      }, 60 * 60 * 1000)\n      \n    } catch (error) {\n      console.error('Service Worker registration failed:', error)\n      if (config.onError) {\n        config.onError(error as Error)\n      }\n    }\n  }\n\n  /**\n   * PWA\n   */\n  private async initializePWAFeatures(): Promise<void> {\n    // PWA\n    this.capabilities = {\n      canInstall: 'serviceWorker' in navigator && 'PushManager' in window,\n      isInstalled: this.isRunningStandalone(),\n      isStandalone: this.isRunningStandalone(),\n      hasNotificationPermission: Notification.permission === 'granted',\n      hasBackgroundSync: 'serviceWorker' in navigator && 'sync' in window.ServiceWorkerRegistration.prototype,\n      isOfflineReady: this.registration !== null\n    }\n    \n    // \n    this.cacheAccessibilitySettings()\n    \n    // \n    if (this.config.offlineGameMode) {\n      this.setupOfflineGameMode()\n    }\n  }\n\n  /**\n   * \n   */\n  private isRunningStandalone(): boolean {\n    return (\n      window.matchMedia('(display-mode: standalone)').matches ||\n      (window.navigator as any).standalone === true ||\n      document.referrer.includes('android-app://')\n    )\n  }\n\n  /**\n   * PWA\n   */\n  private setupInstallPrompt(): void {\n    window.addEventListener('beforeinstallprompt', (e) => {\n      e.preventDefault()\n      this.installPrompt = e as any\n      this.capabilities.canInstall = true\n      \n      // \n      this.dispatchPWAEvent('installable', { canInstall: true })\n    })\n    \n    window.addEventListener('appinstalled', () => {\n      this.capabilities.isInstalled = true\n      this.installPrompt = null\n      \n      // \n      this.dispatchPWAEvent('installed', { isInstalled: true })\n    })\n  }\n\n  /**\n   * \n   */\n  private async setupNotifications(): Promise<void> {\n    if (!('Notification' in window)) {\n      console.log('This browser does not support notifications')\n      return\n    }\n    \n    if (Notification.permission === 'default') {\n      const permission = await Notification.requestPermission()\n      this.capabilities.hasNotificationPermission = permission === 'granted'\n    }\n    \n    // Push\n    if (this.registration && 'PushManager' in window) {\n      try {\n        const subscription = await this.registration.pushManager.subscribe({\n          userVisibleOnly: true,\n          applicationServerKey: this.urlBase64ToUint8Array(this.getVAPIDPublicKey())\n        })\n        \n        // \n        console.log('Push subscription:', subscription)\n      } catch (error) {\n        console.error('Failed to subscribe to push notifications:', error)\n      }\n    }\n  }\n\n  /**\n   * \n   */\n  private setupBackgroundSync(): void {\n    if (!this.capabilities.hasBackgroundSync) {\n      console.log('Background sync is not supported')\n      return\n    }\n    \n    // \n    navigator.serviceWorker.addEventListener('message', (event) => {\n      if (event.data && event.data.type === 'BACKGROUND_SYNC') {\n        if (this.config.onBackgroundSync) {\n          this.config.onBackgroundSync(event.data.tag)\n        }\n      }\n    })\n  }\n\n  /**\n   * \n   */\n  private setupAccessibilityCache(): void {\n    // Service Worker\n    const a11ySettings = localStorage.getItem('accessibility-settings')\n    if (a11ySettings && this.registration?.active) {\n      this.registration.active.postMessage({\n        type: 'CACHE_ACCESSIBILITY_SETTINGS',\n        settings: JSON.parse(a11ySettings)\n      })\n    }\n    \n    // \n    window.addEventListener('storage', (e) => {\n      if (e.key === 'accessibility-settings' && this.registration?.active) {\n        this.registration.active.postMessage({\n          type: 'UPDATE_ACCESSIBILITY_SETTINGS',\n          settings: JSON.parse(e.newValue || '{}')\n        })\n      }\n    })\n  }\n\n  /**\n   * \n   */\n  private setupOfflineGameMode(): void {\n    // \n    const gameData = {\n      savedGames: localStorage.getItem('saved-games'),\n      gameSettings: localStorage.getItem('game-settings'),\n      statistics: localStorage.getItem('game-statistics')\n    }\n    \n    if (this.registration?.active) {\n      this.registration.active.postMessage({\n        type: 'CACHE_GAME_DATA',\n        data: gameData\n      })\n    }\n    \n    // \n    window.addEventListener('offline', () => {\n      this.dispatchPWAEvent('offline-mode', { \n        features: ['local-save', 'basic-gameplay'],\n        disabled: ['online-leaderboard', 'cloud-sync']\n      })\n    })\n  }\n\n  /**\n   * \n   */\n  private cacheAccessibilitySettings(): void {\n    const settings = {\n      highContrast: document.documentElement.classList.contains('high-contrast'),\n      reducedMotion: document.documentElement.classList.contains('reduce-motion'),\n      fontSize: document.documentElement.style.fontSize,\n      colorScheme: document.documentElement.getAttribute('data-color-scheme')\n    }\n    \n    if (this.registration?.active) {\n      this.registration.active.postMessage({\n        type: 'CACHE_ACCESSIBILITY_STATE',\n        state: settings\n      })\n    }\n  }\n  \n  /**\n   * Service Worker \n   */\n  private checkForUpdates(registration: ServiceWorkerRegistration, config: ServiceWorkerConfig): void {\n    //  Service Worker\n    if (registration.installing) {\n      this.trackInstalling(registration.installing, config)\n    }\n    \n    //  Service Worker\n    if (registration.waiting) {\n      this.updateAvailable = true\n      if (config.onUpdate) {\n        config.onUpdate(registration)\n      }\n    }\n    \n    // \n    registration.addEventListener('updatefound', () => {\n      const newWorker = registration.installing\n      if (newWorker) {\n        this.trackInstalling(newWorker, config)\n      }\n    })\n  }\n  \n  /**\n   *  Service Worker \n   */\n  private trackInstalling(worker: ServiceWorker, config: ServiceWorkerConfig): void {\n    worker.addEventListener('statechange', () => {\n      if (worker.state === 'installed' && navigator.serviceWorker.controller) {\n        //  Service Worker \n        this.updateAvailable = true\n        if (config.onUpdate) {\n          config.onUpdate(this.registration!)\n        }\n      }\n    })\n  }\n  \n  /**\n   * \n   */\n  private setupNetworkListeners(config: ServiceWorkerConfig): void {\n    window.addEventListener('online', () => {\n      console.log('Network: Online')\n      if (config.onOnline) {\n        config.onOnline()\n      }\n    })\n    \n    window.addEventListener('offline', () => {\n      console.log('Network: Offline')\n      if (config.onOffline) {\n        config.onOffline()\n      }\n    })\n  }\n  \n  /**\n   * \n   */\n  private setupRefreshListener(): void {\n    // Service Worker \n    navigator.serviceWorker.addEventListener('controllerchange', () => {\n      if (this.refreshing) return\n      this.refreshing = true\n      window.location.reload()\n    })\n  }\n  \n  /**\n   * Service Worker \n   */\n  async update(): Promise<void> {\n    if (!this.registration) return\n    \n    try {\n      await this.registration.update()\n      \n      if (this.registration.waiting) {\n        //  Service Worker \n        this.registration.waiting.postMessage({ type: 'SKIP_WAITING' })\n      }\n    } catch (error) {\n      console.error('Service Worker update failed:', error)\n    }\n  }\n  \n  /**\n   * \n   */\n  async clearCache(): Promise<void> {\n    if (!navigator.serviceWorker.controller) return\n    \n    navigator.serviceWorker.controller.postMessage({ type: 'CLEAR_CACHE' })\n    \n    // \n    if ('caches' in window) {\n      const cacheNames = await caches.keys()\n      await Promise.all(\n        cacheNames.map(async cacheName => caches.delete(cacheName))\n      )\n    }\n  }\n  \n  /**\n   * Service Worker \n   */\n  async unregister(): Promise<void> {\n    if (!this.registration) return\n    \n    try {\n      const success = await this.registration.unregister()\n      if (success) {\n        console.log('Service Worker unregistered')\n        this.registration = null\n      }\n    } catch (error) {\n      console.error('Service Worker unregistration failed:', error)\n    }\n  }\n  \n  /**\n   * \n   */\n  isUpdateAvailable(): boolean {\n    return this.updateAvailable\n  }\n  \n  /**\n   * \n   */\n  isOfflineReady(): boolean {\n    return this.registration !== null && this.registration.active !== null\n  }\n\n  /**\n   * PWA\n   */\n  async promptInstall(): Promise<boolean> {\n    if (!this.installPrompt) {\n      console.log('Install prompt is not available')\n      return false\n    }\n\n    try {\n      this.installPrompt.prompt()\n      const choiceResult = await this.installPrompt.userChoice\n      \n      if (choiceResult.outcome === 'accepted') {\n        console.log('PWA installation accepted')\n        return true\n      } \n        console.log('PWA installation dismissed')\n        return false\n      \n    } catch (error) {\n      console.error('Install prompt failed:', error)\n      return false\n    }\n  }\n\n  /**\n   * PWA\n   */\n  getPWACapabilities(): PWACapabilities {\n    return { ...this.capabilities }\n  }\n\n  /**\n   * \n   */\n  async sendNotification(title: string, options: NotificationOptions = {}): Promise<void> {\n    if (!this.capabilities.hasNotificationPermission) {\n      console.log('Notification permission not granted')\n      return\n    }\n\n    if (this.registration) {\n      await this.registration.showNotification(title, {\n        icon: '/icons/icon-192x192.png',\n        badge: '/icons/badge-72x72.png',\n        vibrate: [200, 100, 200],\n        tag: 'game-notification',\n        renotify: true,\n        requireInteraction: false,\n        ...options\n      })\n    }\n  }\n\n  /**\n   * \n   */\n  async requestBackgroundSync(tag: string): Promise<void> {\n    if (!this.capabilities.hasBackgroundSync || !this.registration) {\n      console.log('Background sync not available')\n      return\n    }\n\n    try {\n      await this.registration.sync.register(tag)\n      console.log(`Background sync registered: ${tag}`)\n    } catch (error) {\n      console.error('Background sync registration failed:', error)\n    }\n  }\n\n  /**\n   * PWA\n   */\n  private dispatchPWAEvent(type: string, detail: any): void {\n    const event = new CustomEvent(`pwa-${type}`, { detail })\n    window.dispatchEvent(event)\n  }\n\n  /**\n   * VAPID\n   */\n  private getVAPIDPublicKey(): string {\n    // \n    return 'YOUR_VAPID_PUBLIC_KEY_HERE'\n  }\n\n  /**\n   * Base64 URLUint8Array\n   */\n  private urlBase64ToUint8Array(base64String: string): Uint8Array {\n    const padding = '='.repeat((4 - base64String.length % 4) % 4)\n    const base64 = (base64String + padding)\n      .replace(/-/g, '+')\n      .replace(/_/g, '/')\n\n    const rawData = window.atob(base64)\n    const outputArray = new Uint8Array(rawData.length)\n\n    for (let i = 0; i < rawData.length; ++i) {\n      outputArray[i] = rawData.charCodeAt(i)\n    }\n    return outputArray\n  }\n\n  /**\n   * PWA\n   */\n  getPWAStats(): any {\n    return {\n      capabilities: this.capabilities,\n      updateAvailable: this.updateAvailable,\n      isOnline: navigator.onLine,\n      installPromptAvailable: this.installPrompt !== null,\n      registration: {\n        scope: this.registration?.scope,\n        updateViaCache: this.registration?.updateViaCache,\n        active: this.registration?.active?.state\n      }\n    }\n  }\n}\n\n// \nconst serviceWorkerManager = new ServiceWorkerManager()\n\n/**\n * Service Worker \n */\nexport async function registerServiceWorker(config: ServiceWorkerConfig = {}): Promise<void> {\n  //  Service Worker \n  if (import.meta.env.DEV) {\n    console.log('Service Worker is disabled in development')\n    return\n  }\n  \n  // window.onload \n  window.addEventListener('load', () => {\n    serviceWorkerManager.register(config)\n  })\n}\n\n/**\n * Service Worker \n */\nexport async function updateServiceWorker(): Promise<void> {\n  await serviceWorkerManager.update()\n}\n\n/**\n * \n */\nexport async function clearServiceWorkerCache(): Promise<void> {\n  await serviceWorkerManager.clearCache()\n}\n\n/**\n * Service Worker \n */\nexport async function unregisterServiceWorker(): Promise<void> {\n  await serviceWorkerManager.unregister()\n}\n\n/**\n * \n */\nexport function isUpdateAvailable(): boolean {\n  return serviceWorkerManager.isUpdateAvailable()\n}\n\n/**\n * \n */\nexport function isOfflineReady(): boolean {\n  return serviceWorkerManager.isOfflineReady()\n}\n\n/**\n * PWA\n */\nexport async function promptPWAInstall(): Promise<boolean> {\n  return serviceWorkerManager.promptInstall()\n}\n\n/**\n * PWA\n */\nexport function getPWACapabilities(): PWACapabilities {\n  return serviceWorkerManager.getPWACapabilities()\n}\n\n/**\n * \n */\nexport async function sendNotification(title: string, options?: NotificationOptions): Promise<void> {\n  return serviceWorkerManager.sendNotification(title, options)\n}\n\n/**\n * \n */\nexport async function requestBackgroundSync(tag: string): Promise<void> {\n  return serviceWorkerManager.requestBackgroundSync(tag)\n}\n\n/**\n * PWA\n */\nexport function getPWAStats(): any {\n  return serviceWorkerManager.getPWAStats()\n}\n\n/**\n * Vue Composition API\n */\nexport function usePWA() {\n  const { ref, onMounted, onUnmounted } = require('vue')\n  \n  const capabilities = ref<PWACapabilities>({\n    canInstall: false,\n    isInstalled: false,\n    isStandalone: false,\n    hasNotificationPermission: false,\n    hasBackgroundSync: false,\n    isOfflineReady: false\n  })\n  \n  const updateAvailable = ref(false)\n  const isOnline = ref(navigator.onLine)\n\n  onMounted(() => {\n    capabilities.value = getPWACapabilities()\n    updateAvailable.value = isUpdateAvailable()\n    \n    // PWA\n    const handlePWAEvent = (event: CustomEvent) => {\n      switch (event.type) {\n        case 'pwa-installable':\n          capabilities.value.canInstall = true\n          break\n        case 'pwa-installed':\n          capabilities.value.isInstalled = true\n          break\n      }\n    }\n    \n    window.addEventListener('pwa-installable', handlePWAEvent as EventListener)\n    window.addEventListener('pwa-installed', handlePWAEvent as EventListener)\n    \n    // \n    const updateOnlineStatus = () => {\n      isOnline.value = navigator.onLine\n    }\n    \n    window.addEventListener('online', updateOnlineStatus)\n    window.addEventListener('offline', updateOnlineStatus)\n    \n    onUnmounted(() => {\n      window.removeEventListener('pwa-installable', handlePWAEvent as EventListener)\n      window.removeEventListener('pwa-installed', handlePWAEvent as EventListener)\n      window.removeEventListener('online', updateOnlineStatus)\n      window.removeEventListener('offline', updateOnlineStatus)\n    })\n  })\n\n  const install = async () => {\n    return promptPWAInstall()\n  }\n\n  const update = async () => {\n    return updateServiceWorker()\n  }\n\n  const notify = async (title: string, options?: NotificationOptions) => {\n    return sendNotification(title, options)\n  }\n\n  const sync = async (tag: string) => {\n    return requestBackgroundSync(tag)\n  }\n\n  return {\n    capabilities,\n    updateAvailable,\n    isOnline,\n    install,\n    update,\n    notify,\n    sync\n  }\n}","/**\n *  - \n * \n */\n\nexport interface RippleOptions {\n  color?: string;\n  duration?: number;\n  opacity?: number;\n  centered?: boolean;\n  disabled?: boolean;\n}\n\nconst DEFAULT_OPTIONS: Required<RippleOptions> = {\n  color: 'rgba(255, 255, 255, 0.6)',\n  duration: 700,\n  opacity: 0.6,\n  centered: false,\n  disabled: false\n};\n\n/**\n * \n */\nfunction createRippleCore(\n  element: HTMLElement, \n  event: MouseEvent | TouchEvent, \n  options: RippleOptions = {}\n): void {\n  const config = { ...DEFAULT_OPTIONS, ...options };\n  \n  if (config.disabled) return;\n  \n  // \n  if (!element.classList.contains('ripple-container')) {\n    element.classList.add('ripple-container');\n  }\n  \n  // \n  const ripple = document.createElement('span');\n  ripple.classList.add('ripple');\n  \n  // \n  const rect = element.getBoundingClientRect();\n  const size = Math.max(rect.width, rect.height);\n  const radius = size / 2;\n  \n  // \n  let x: number, y: number;\n  \n  if (config.centered) {\n    x = rect.width / 2;\n    y = rect.height / 2;\n  } else {\n    const clientX = 'touches' in event ? event.touches[0].clientX : event.clientX;\n    const clientY = 'touches' in event ? event.touches[0].clientY : event.clientY;\n    x = clientX - rect.left;\n    y = clientY - rect.top;\n  }\n  \n  // \n  Object.assign(ripple.style, {\n    width: `${size}px`,\n    height: `${size}px`,\n    left: `${x - radius}px`,\n    top: `${y - radius}px`,\n    backgroundColor: config.color,\n    opacity: config.opacity.toString(),\n    animationDuration: `${config.duration}ms`\n  });\n  \n  // \n  element.appendChild(ripple);\n  \n  // \n  const removeRipple = () => {\n    if (ripple.parentNode) {\n      ripple.parentNode.removeChild(ripple);\n    }\n  };\n  \n  ripple.addEventListener('animationend', removeRipple);\n  \n  // \n  setTimeout(removeRipple, config.duration + 100);\n}\n\n/**\n * \n */\nexport function addRippleEffect(\n  element: HTMLElement, \n  options: RippleOptions = {}\n): () => void {\n  const handleRipple = (event: MouseEvent | TouchEvent) => {\n    createRippleCore(element, event, options);\n  };\n  \n  // \n  element.addEventListener('mousedown', handleRipple);\n  element.addEventListener('touchstart', handleRipple, { passive: true });\n  \n  // \n  return () => {\n    element.removeEventListener('mousedown', handleRipple);\n    element.removeEventListener('touchstart', handleRipple);\n  };\n}\n\n/**\n * Vue.js\n */\nexport const rippleDirective = {\n  mounted(el: HTMLElement, binding: any) {\n    const options: RippleOptions = binding.value || {};\n    \n    // \n    const cleanup = addRippleEffect(el, options);\n    \n    // \n    (el as any)._rippleCleanup = cleanup;\n  },\n  \n  updated(el: HTMLElement, binding: any) {\n    const options: RippleOptions = binding.value || {};\n    \n    // \n    if ((el as any)._rippleCleanup) {\n      (el as any)._rippleCleanup();\n    }\n    \n    // \n    const cleanup = addRippleEffect(el, options);\n    (el as any)._rippleCleanup = cleanup;\n  },\n  \n  unmounted(el: HTMLElement) {\n    // \n    if ((el as any)._rippleCleanup) {\n      (el as any)._rippleCleanup();\n      delete (el as any)._rippleCleanup;\n    }\n  }\n};\n\n/**\n * \n */\nexport function initAutoRipple(): void {\n  // DOM\n  const addRipplesToElements = () => {\n    const elements = document.querySelectorAll('.ripple-container');\n    \n    elements.forEach((element) => {\n      const htmlElement = element as HTMLElement;\n      \n      // \n      if ((htmlElement as any)._hasRipple) return;\n      \n      // \n      addRippleEffect(htmlElement);\n      \n      // \n      (htmlElement as any)._hasRipple = true;\n    });\n  };\n  \n  // \n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', addRipplesToElements);\n  } else {\n    addRipplesToElements();\n  }\n  \n  // DOM\n  const observer = new MutationObserver((mutations) => {\n    let shouldUpdate = false;\n    \n    mutations.forEach((mutation) => {\n      if (mutation.type === 'childList') {\n        mutation.addedNodes.forEach((node) => {\n          if (node.nodeType === Node.ELEMENT_NODE) {\n            const element = node as Element;\n            if (element.classList?.contains('ripple-container') || \n                element.querySelectorAll?.('.ripple-container').length > 0) {\n              shouldUpdate = true;\n            }\n          }\n        });\n      }\n    });\n    \n    if (shouldUpdate) {\n      setTimeout(addRipplesToElements, 0);\n    }\n  });\n  \n  observer.observe(document.body, {\n    childList: true,\n    subtree: true\n  });\n  \n  // \n  return () => {\n    observer.disconnect();\n  };\n}\n\n/**\n * \n */\nlet rippleCount = 0;\nconst MAX_RIPPLES = 10;\n\n/**\n * \n */\nexport function createRipple(\n  element: HTMLElement, \n  event: MouseEvent | TouchEvent, \n  options: RippleOptions = {}\n): void {\n  if (rippleCount >= MAX_RIPPLES) return;\n  \n  rippleCount++;\n  createRippleCore(element, event, options);\n  \n  // \n  setTimeout(() => {\n    rippleCount = Math.max(0, rippleCount - 1);\n  }, 1000);\n}\n\n//  throttled \n// createRipple","/**\n * Performance Monitoring System\n * Core Web Vitals and custom metrics tracking\n */\n\ninterface PerformanceMetrics {\n  // Core Web Vitals\n  fcp?: number;        // First Contentful Paint\n  lcp?: number;        // Largest Contentful Paint\n  cls?: number;        // Cumulative Layout Shift\n  inp?: number;        // Interaction to Next Paint\n  fid?: number;        // First Input Delay\n  \n  // Custom metrics\n  appInitTime?: number;\n  gameLoadTime?: number;\n  routeChangeTime?: number;\n  memoryUsage?: number;\n  \n  // Network\n  connectionType?: string;\n  effectiveType?: string;\n  downlink?: number;\n  rtt?: number;\n}\n\nclass PerformanceMonitor {\n  private readonly metrics: PerformanceMetrics = {};\n  private observers: PerformanceObserver[] = [];\n  private isMonitoring = false;\n\n  constructor() {\n    this.setupPerformanceObservers();\n    this.trackCustomMetrics();\n  }\n\n  private setupPerformanceObservers() {\n    // Only run in browser environment\n    if (typeof window === 'undefined' || !('PerformanceObserver' in window)) {\n      return;\n    }\n\n    try {\n      // Paint metrics (FCP)\n      const paintObserver = new PerformanceObserver((list) => {\n        const entries = list.getEntries();\n        entries.forEach((entry) => {\n          if (entry.name === 'first-contentful-paint') {\n            this.metrics.fcp = entry.startTime;\n            this.reportMetric('FCP', entry.startTime);\n          }\n        });\n      });\n      paintObserver.observe({ entryTypes: ['paint'] });\n      this.observers.push(paintObserver);\n\n      // Largest Contentful Paint\n      const lcpObserver = new PerformanceObserver((list) => {\n        const entries = list.getEntries();\n        const lastEntry = entries[entries.length - 1];\n        this.metrics.lcp = lastEntry.startTime;\n        this.reportMetric('LCP', lastEntry.startTime);\n      });\n      lcpObserver.observe({ entryTypes: ['largest-contentful-paint'] });\n      this.observers.push(lcpObserver);\n\n      // Cumulative Layout Shift\n      let clsValue = 0;\n      const clsObserver = new PerformanceObserver((list) => {\n        for (const entry of list.getEntries() as any[]) {\n          if (!entry.hadRecentInput) {\n            clsValue += entry.value;\n          }\n        }\n        this.metrics.cls = clsValue;\n        this.reportMetric('CLS', clsValue);\n      });\n      clsObserver.observe({ entryTypes: ['layout-shift'] });\n      this.observers.push(clsObserver);\n\n      // First Input Delay / Interaction to Next Paint\n      if ('PerformanceEventTiming' in window) {\n        const inputObserver = new PerformanceObserver((list) => {\n          const entries = list.getEntries() as any[];\n          entries.forEach((entry) => {\n            if (entry.processingStart && entry.startTime) {\n              const inputDelay = entry.processingStart - entry.startTime;\n              const processingTime = entry.processingEnd - entry.processingStart;\n              const presentationDelay = entry.duration - inputDelay - processingTime;\n              \n              const inp = inputDelay + processingTime + presentationDelay;\n              this.metrics.inp = Math.max(this.metrics.inp || 0, inp);\n              this.reportMetric('INP', inp);\n            }\n          });\n        });\n        inputObserver.observe({ \n          type: 'event', \n          buffered: true \n        });\n        this.observers.push(inputObserver);\n      }\n\n      // Navigation metrics\n      const navigationObserver = new PerformanceObserver((list) => {\n        const entries = list.getEntries();\n        entries.forEach((entry: any) => {\n          if (entry.entryType === 'navigation') {\n            this.metrics.appInitTime = entry.loadEventEnd - entry.fetchStart;\n            this.reportMetric('App Init Time', this.metrics.appInitTime);\n          }\n        });\n      });\n      navigationObserver.observe({ entryTypes: ['navigation'] });\n      this.observers.push(navigationObserver);\n\n    } catch (error) {\n      console.warn('[Performance Monitor] Failed to set up observers:', error);\n    }\n\n    this.isMonitoring = true;\n  }\n\n  private trackCustomMetrics() {\n    // Memory usage monitoring\n    if ('memory' in performance) {\n      setInterval(() => {\n        const memory = (performance as any).memory;\n        this.metrics.memoryUsage = memory.usedJSHeapSize / 1024 / 1024; // MB\n      }, 10000); // Every 10 seconds\n    }\n\n    // Network information\n    if ('connection' in navigator) {\n      const connection = (navigator as any).connection;\n      this.metrics.connectionType = connection.type;\n      this.metrics.effectiveType = connection.effectiveType;\n      this.metrics.downlink = connection.downlink;\n      this.metrics.rtt = connection.rtt;\n    }\n  }\n\n  private reportMetric(name: string, value: number) {\n    // Console logging in development\n    if (import.meta.env.DEV) {\n      const category = this.getMetricCategory(name, value);\n      console.log(`[Performance] ${name}: ${value.toFixed(2)}ms ${category}`);\n    }\n\n    // Optional: Send to analytics service\n    if (import.meta.env.PROD && window.window.gtag) {\n      window.window.gtag('event', 'web_vitals', {\n        event_category: 'Web Vitals',\n        event_label: name,\n        value: Math.round(value),\n        non_interaction: true\n      });\n    }\n  }\n\n  private getMetricCategory(name: string, value: number): string {\n    const thresholds = {\n      'FCP': { good: 1800, needs_improvement: 3000 },\n      'LCP': { good: 2500, needs_improvement: 4000 },\n      'CLS': { good: 0.1, needs_improvement: 0.25 },\n      'INP': { good: 200, needs_improvement: 500 },\n      'FID': { good: 100, needs_improvement: 300 }\n    };\n\n    const threshold = thresholds[name as keyof typeof thresholds];\n    if (!threshold) return '';\n\n    if (value <= threshold.good) return ' Good';\n    if (value <= threshold.needs_improvement) return ' Needs Improvement';\n    return ' Poor';\n  }\n\n  // Public methods\n  markGameStart() {\n    performance.mark('game-start');\n  }\n\n  markGameLoaded() {\n    performance.mark('game-loaded');\n    performance.measure('game-load-time', 'game-start', 'game-loaded');\n    \n    const measure = performance.getEntriesByName('game-load-time')[0];\n    if (measure) {\n      this.metrics.gameLoadTime = measure.duration;\n      this.reportMetric('Game Load Time', measure.duration);\n    }\n  }\n\n  markRouteChange(routeName: string) {\n    const markName = `route-${routeName}`;\n    performance.mark(markName);\n    \n    const previousMarks = performance.getEntriesByType('mark')\n      .filter(mark => mark.name.startsWith('route-'))\n      .slice(-2);\n    \n    if (previousMarks.length === 2) {\n      const measureName = `route-change-${routeName}`;\n      performance.measure(measureName, previousMarks[0].name, previousMarks[1].name);\n      \n      const measure = performance.getEntriesByName(measureName)[0];\n      if (measure) {\n        this.metrics.routeChangeTime = measure.duration;\n        this.reportMetric('Route Change Time', measure.duration);\n      }\n    }\n  }\n\n  getMetrics(): PerformanceMetrics {\n    return { ...this.metrics };\n  }\n\n  getPerformanceScore(): number {\n    const { fcp, lcp, cls, inp } = this.metrics;\n    \n    let score = 100;\n    \n    // FCP scoring (25 points)\n    if (fcp) {\n      if (fcp > 3000) score -= 25;\n      else if (fcp > 1800) score -= 15;\n      else if (fcp > 1000) score -= 5;\n    }\n    \n    // LCP scoring (25 points)\n    if (lcp) {\n      if (lcp > 4000) score -= 25;\n      else if (lcp > 2500) score -= 15;\n      else if (lcp > 1500) score -= 5;\n    }\n    \n    // CLS scoring (25 points)\n    if (cls !== undefined) {\n      if (cls > 0.25) score -= 25;\n      else if (cls > 0.1) score -= 15;\n      else if (cls > 0.05) score -= 5;\n    }\n    \n    // INP scoring (25 points)\n    if (inp) {\n      if (inp > 500) score -= 25;\n      else if (inp > 200) score -= 15;\n      else if (inp > 100) score -= 5;\n    }\n    \n    return Math.max(0, Math.min(100, score));\n  }\n\n  generateReport(): string {\n    const metrics = this.getMetrics();\n    const score = this.getPerformanceScore();\n    \n    return `\nPerformance Report\n==================\nOverall Score: ${score}/100\n\nCore Web Vitals:\n- FCP: ${metrics.fcp?.toFixed(2) || 'N/A'}ms ${metrics.fcp ? this.getMetricCategory('FCP', metrics.fcp) : ''}\n- LCP: ${metrics.lcp?.toFixed(2) || 'N/A'}ms ${metrics.lcp ? this.getMetricCategory('LCP', metrics.lcp) : ''}\n- CLS: ${metrics.cls?.toFixed(3) || 'N/A'} ${metrics.cls !== undefined ? this.getMetricCategory('CLS', metrics.cls) : ''}\n- INP: ${metrics.inp?.toFixed(2) || 'N/A'}ms ${metrics.inp ? this.getMetricCategory('INP', metrics.inp) : ''}\n\nCustom Metrics:\n- App Init: ${metrics.appInitTime?.toFixed(2) || 'N/A'}ms\n- Game Load: ${metrics.gameLoadTime?.toFixed(2) || 'N/A'}ms\n- Memory Usage: ${metrics.memoryUsage?.toFixed(2) || 'N/A'}MB\n\nNetwork:\n- Connection: ${metrics.connectionType || 'N/A'}\n- Effective Type: ${metrics.effectiveType || 'N/A'}\n- Downlink: ${metrics.downlink || 'N/A'}Mbps\n- RTT: ${metrics.rtt || 'N/A'}ms\n    `.trim();\n  }\n\n  cleanup() {\n    this.observers.forEach(observer => { observer.disconnect(); });\n    this.observers = [];\n    this.isMonitoring = false;\n  }\n}\n\n// Create singleton instance\nexport const performanceMonitor = new PerformanceMonitor();\n\n// Global access for debugging\nif (import.meta.env.DEV) {\n  (window as any).__performanceMonitor = performanceMonitor;\n}\n\nexport default performanceMonitor;","/**\n * Lazy Loading System for Performance Optimization\n * Intelligent component and resource loading based on viewport and user interaction\n */\n\ninterface LazyLoadOptions {\n  rootMargin?: string;\n  threshold?: number;\n  priority?: 'high' | 'medium' | 'low';\n  preload?: boolean;\n}\n\ninterface ResourceQueue {\n  url: string;\n  priority: number;\n  loaded: boolean;\n  loading: boolean;\n  element?: HTMLElement;\n}\n\nclass LazyLoader {\n  private observer: IntersectionObserver | null = null;\n  private readonly loadedResources = new Set<string>();\n  private resourceQueue: ResourceQueue[] = [];\n  private isProcessingQueue = false;\n\n  constructor() {\n    this.setupIntersectionObserver();\n    this.setupIdleCallback();\n  }\n\n  private setupIntersectionObserver() {\n    if (typeof window === 'undefined' || !('IntersectionObserver' in window)) {\n      return;\n    }\n\n    this.observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            this.loadElement(entry.target as HTMLElement);\n            this.observer?.unobserve(entry.target);\n          }\n        });\n      },\n      {\n        rootMargin: '50px 0px',\n        threshold: 0.1\n      }\n    );\n  }\n\n  private setupIdleCallback() {\n    // Use requestIdleCallback to process low-priority resources\n    const processQueue = () => {\n      if (this.isProcessingQueue || this.resourceQueue.length === 0) {\n        return;\n      }\n\n      this.isProcessingQueue = true;\n\n      const processChunk = (deadline: IdleDeadline) => {\n        while (deadline.timeRemaining() > 0 && this.resourceQueue.length > 0) {\n          const resource = this.resourceQueue.shift();\n          if (resource && !resource.loaded && !resource.loading) {\n            this.processResource(resource);\n          }\n        }\n\n        if (this.resourceQueue.length > 0) {\n          this.requestIdleCallback(processChunk);\n        } else {\n          this.isProcessingQueue = false;\n        }\n      };\n\n      this.requestIdleCallback(processChunk);\n    };\n\n    // Start processing queue\n    setTimeout(processQueue, 100);\n  }\n\n  private requestIdleCallback(callback: (deadline: IdleDeadline) => void) {\n    if ('requestIdleCallback' in window) {\n      requestIdleCallback(callback, { timeout: 2000 });\n    } else {\n      // Fallback for browsers without requestIdleCallback\n      setTimeout(() => { callback({ \n        timeRemaining: () => 10,\n        didTimeout: false \n      } as IdleDeadline); }, 16);\n    }\n  }\n\n  private async processResource(resource: ResourceQueue) {\n    resource.loading = true;\n\n    try {\n      if (resource.url.match(/\\.(js|ts)$/)) {\n        await this.loadScript(resource.url);\n      } else if (resource.url.match(/\\.css$/)) {\n        await this.loadStylesheet(resource.url);\n      } else if (resource.url.match(/\\.(jpg|jpeg|png|webp|svg|gif)$/)) {\n        await this.loadImage(resource.url);\n      }\n\n      resource.loaded = true;\n      this.loadedResources.add(resource.url);\n    } catch (error) {\n      console.warn(`[LazyLoader] Failed to load resource: ${resource.url}`, error);\n    } finally {\n      resource.loading = false;\n    }\n  }\n\n  private async loadScript(url: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const script = document.createElement('script');\n      script.src = url;\n      script.async = true;\n      script.onload = () => { resolve(); };\n      script.onerror = () => { reject(new Error(`Script load failed: ${url}`)); };\n      document.head.appendChild(script);\n    });\n  }\n\n  private async loadStylesheet(url: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const link = document.createElement('link');\n      link.rel = 'stylesheet';\n      link.href = url;\n      link.onload = () => { resolve(); };\n      link.onerror = () => { reject(new Error(`Stylesheet load failed: ${url}`)); };\n      document.head.appendChild(link);\n    });\n  }\n\n  private async loadImage(url: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.onload = () => { resolve(); };\n      img.onerror = () => { reject(new Error(`Image load failed: ${url}`)); };\n      img.src = url;\n    });\n  }\n\n  private loadElement(element: HTMLElement) {\n    const src = element.dataset.src;\n    const srcset = element.dataset.srcset;\n\n    if (element.tagName === 'IMG') {\n      const img = element as HTMLImageElement;\n      \n      // Show loading skeleton\n      img.classList.add('loading');\n      \n      if (src) {\n        img.src = src;\n      }\n      \n      if (srcset) {\n        img.srcset = srcset;\n      }\n\n      img.onload = () => {\n        img.classList.remove('loading');\n        img.classList.add('loaded');\n      };\n\n      img.onerror = () => {\n        img.classList.remove('loading');\n        img.classList.add('error');\n      };\n    } else if (element.dataset.background) {\n      // Background image lazy loading\n      element.style.backgroundImage = `url(${element.dataset.background})`;\n      element.classList.add('loaded');\n    }\n  }\n\n  // Public API\n  observe(element: HTMLElement, options: LazyLoadOptions = {}) {\n    if (!this.observer) {\n      return;\n    }\n\n    // Set up element for lazy loading\n    if (element.tagName === 'IMG') {\n      const img = element as HTMLImageElement;\n      if (img.src && !img.dataset.src) {\n        img.dataset.src = img.src;\n        img.src = this.generatePlaceholder(img);\n      }\n    }\n\n    this.observer.observe(element);\n  }\n\n  preloadResource(url: string, priority: 'high' | 'medium' | 'low' = 'medium') {\n    if (this.loadedResources.has(url)) {\n      return;\n    }\n\n    const priorityValue = priority === 'high' ? 3 : priority === 'medium' ? 2 : 1;\n\n    this.resourceQueue.push({\n      url,\n      priority: priorityValue,\n      loaded: false,\n      loading: false\n    });\n\n    // Sort queue by priority\n    this.resourceQueue.sort((a, b) => b.priority - a.priority);\n  }\n\n  preloadImages(urls: string[], priority: 'high' | 'medium' | 'low' = 'low') {\n    urls.forEach(url => { this.preloadResource(url, priority); });\n  }\n\n  async loadComponent(componentLoader: () => Promise<any>): Promise<any> {\n    return new Promise((resolve, reject) => {\n      // Load component with retry logic\n      const attemptLoad = (retries = 3) => {\n        componentLoader()\n          .then(resolve)\n          .catch((error) => {\n            if (retries > 0) {\n              console.warn(`[LazyLoader] Component load failed, retrying... (${retries} attempts left)`);\n              setTimeout(() => { attemptLoad(retries - 1); }, 1000);\n            } else {\n              reject(error);\n            }\n          });\n      };\n\n      attemptLoad();\n    });\n  }\n\n  generatePlaceholder(img: HTMLImageElement): string {\n    const width = img.width || 200;\n    const height = img.height || 200;\n    \n    // Generate SVG placeholder with proper aspect ratio\n    const svg = `\n      <svg width=\"${width}\" height=\"${height}\" xmlns=\"http://www.w3.org/2000/svg\">\n        <rect width=\"100%\" height=\"100%\" fill=\"#374151\"/>\n        <rect width=\"100%\" height=\"100%\" fill=\"url(#shimmer)\" opacity=\"0.3\"/>\n        <defs>\n          <linearGradient id=\"shimmer\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n            <stop offset=\"0%\" style=\"stop-color:#4B5563;stop-opacity:0\"/>\n            <stop offset=\"50%\" style=\"stop-color:#6B7280;stop-opacity:1\"/>\n            <stop offset=\"100%\" style=\"stop-color:#4B5563;stop-opacity:0\"/>\n            <animateTransform attributeName=\"gradientTransform\" type=\"translate\" \n              values=\"-100 0;100 0;-100 0\" dur=\"2s\" repeatCount=\"indefinite\"/>\n          </linearGradient>\n        </defs>\n      </svg>\n    `;\n    \n    return `data:image/svg+xml;base64,${btoa(svg)}`;\n  }\n\n  // Performance monitoring\n  getLoadedResourcesCount(): number {\n    return this.loadedResources.size;\n  }\n\n  getQueueLength(): number {\n    return this.resourceQueue.length;\n  }\n\n  getStats() {\n    return {\n      loadedResources: this.loadedResources.size,\n      queueLength: this.resourceQueue.length,\n      isProcessing: this.isProcessingQueue\n    };\n  }\n\n  cleanup() {\n    if (this.observer) {\n      this.observer.disconnect();\n      this.observer = null;\n    }\n    this.resourceQueue = [];\n    this.loadedResources.clear();\n  }\n}\n\n// Utility functions for Vue components\nexport const useImageLazyLoading = () => {\n  const lazyLoader = new LazyLoader();\n\n  const observeImage = (element: HTMLImageElement, options?: LazyLoadOptions) => {\n    lazyLoader.observe(element, options);\n  };\n\n  const preloadImages = (urls: string[], priority?: 'high' | 'medium' | 'low') => {\n    lazyLoader.preloadImages(urls, priority);\n  };\n\n  return {\n    observeImage,\n    preloadImages,\n    getStats: () => lazyLoader.getStats(),\n    cleanup: () => { lazyLoader.cleanup(); }\n  };\n};\n\n// Create singleton instance\nexport const lazyLoader = new LazyLoader();\n\n// Vue directive for easy integration\nexport const vLazyLoad = {\n  mounted(el: HTMLElement, binding: any) {\n    const options = binding.value || {};\n    lazyLoader.observe(el, options);\n  },\n  unmounted(el: HTMLElement) {\n    // Cleanup if needed\n  }\n};\n\nexport default lazyLoader;","/**\n * SEO Manager - \n * \n * :\n * - \n * - \n * - \n * - \n * - SEO\n */\n\nexport interface SEOConfig {\n  title: string\n  description: string\n  keywords: string[]\n  url: string\n  image?: string\n  type?: 'website' | 'article' | 'game' | 'app'\n  locale?: string\n  alternateUrls?: { [lang: string]: string }\n}\n\nexport interface StructuredData {\n  '@context': string\n  '@type': string | string[]\n  [key: string]: any\n}\n\nexport class SEOManager {\n  private static instance: SEOManager\n  private currentConfig: SEOConfig | null = null\n  private readonly structuredDataCache = new Map<string, StructuredData>()\n\n  private constructor() {}\n\n  static getInstance(): SEOManager {\n    if (!SEOManager.instance) {\n      SEOManager.instance = new SEOManager()\n    }\n    return SEOManager.instance\n  }\n\n  /**\n   * SEO\n   */\n  updatePageSEO(config: SEOConfig): void {\n    this.currentConfig = config\n    \n    // HTML title \n    document.title = config.title\n    \n    // \n    this.updateMetaTag('description', config.description)\n    this.updateMetaTag('keywords', config.keywords.join(','))\n    \n    // Open Graph \n    this.updateMetaProperty('og:title', config.title)\n    this.updateMetaProperty('og:description', config.description)\n    this.updateMetaProperty('og:url', config.url)\n    this.updateMetaProperty('og:type', config.type || 'website')\n    \n    if (config.image) {\n      this.updateMetaProperty('og:image', config.image)\n    }\n    \n    // Twitter Card \n    this.updateMetaProperty('twitter:title', config.title)\n    this.updateMetaProperty('twitter:description', config.description)\n    this.updateMetaProperty('twitter:url', config.url)\n    \n    if (config.image) {\n      this.updateMetaProperty('twitter:image', config.image)\n    }\n    \n    // URL \n    this.updateCanonicalUrl(config.url)\n    \n    // URL \n    if (config.alternateUrls) {\n      this.updateAlternateUrls(config.alternateUrls)\n    }\n    \n    // \n    this.updateStructuredData(config)\n    \n    console.log(' SEO:', config.title)\n  }\n\n  /**\n   * \n   */\n  private updateMetaTag(name: string, content: string): void {\n    let meta = document.querySelector(`meta[name=\"${name}\"]`) as HTMLMetaElement\n    \n    if (!meta) {\n      meta = document.createElement('meta')\n      meta.setAttribute('name', name)\n      document.head.appendChild(meta)\n    }\n    \n    meta.setAttribute('content', content)\n  }\n\n  /**\n   * \n   */\n  private updateMetaProperty(property: string, content: string): void {\n    let meta = document.querySelector(`meta[property=\"${property}\"]`) as HTMLMetaElement\n    \n    if (!meta) {\n      meta = document.createElement('meta')\n      meta.setAttribute('property', property)\n      document.head.appendChild(meta)\n    }\n    \n    meta.setAttribute('content', content)\n  }\n\n  /**\n   * URL\n   */\n  private updateCanonicalUrl(url: string): void {\n    let link = document.querySelector('link[rel=\"canonical\"]') as HTMLLinkElement\n    \n    if (!link) {\n      link = document.createElement('link')\n      link.setAttribute('rel', 'canonical')\n      document.head.appendChild(link)\n    }\n    \n    link.setAttribute('href', url)\n  }\n\n  /**\n   * URL\n   */\n  private updateAlternateUrls(alternateUrls: { [lang: string]: string }): void {\n    //  hreflang \n    const existingLinks = document.querySelectorAll('link[hreflang]')\n    existingLinks.forEach(link => { link.remove(); })\n    \n    //  hreflang \n    Object.entries(alternateUrls).forEach(([lang, url]) => {\n      const link = document.createElement('link')\n      link.setAttribute('rel', 'alternate')\n      link.setAttribute('hreflang', lang)\n      link.setAttribute('href', url)\n      document.head.appendChild(link)\n    })\n  }\n\n  /**\n   * \n   */\n  private updateStructuredData(config: SEOConfig): void {\n    // \n    const gameStructuredData: StructuredData = {\n      '@context': 'https://schema.org',\n      '@type': ['Game', 'SoftwareApplication', 'WebApplication'],\n      name: config.title,\n      description: config.description,\n      url: config.url,\n      gameCategory: ['BoardGame', 'StrategyGame', 'CardGame'],\n      genre: ['Strategy', 'Simulation', 'Educational'],\n      numberOfPlayers: '1',\n      playMode: ['SinglePlayer'],\n      operatingSystem: ['Web Browser', 'Progressive Web App'],\n      applicationCategory: 'Game',\n      applicationSubCategory: 'Board Game',\n      inLanguage: config.locale || 'ja',\n      isAccessibleForFree: true,\n      isFamilyFriendly: true,\n      contentRating: 'General Audiences',\n      offers: {\n        '@type': 'Offer',\n        price: '0',\n        priceCurrency: config.locale === 'en' ? 'USD' : 'JPY',\n        availability: 'https://schema.org/OnlineOnly'\n      }\n    }\n    \n    if (config.image) {\n      gameStructuredData.image = config.image\n      gameStructuredData.screenshot = config.image\n    }\n    \n    this.setStructuredData('game', gameStructuredData)\n    \n    // WebSite\n    const websiteStructuredData: StructuredData = {\n      '@context': 'https://schema.org',\n      '@type': 'WebSite',\n      name: config.title,\n      url: config.url,\n      description: config.description,\n      inLanguage: config.locale || 'ja',\n      potentialAction: {\n        '@type': 'SearchAction',\n        target: `${config.url}?q={search_term_string}`,\n        'query-input': 'required name=search_term_string'\n      }\n    }\n    \n    this.setStructuredData('website', websiteStructuredData)\n  }\n\n  /**\n   * \n   */\n  setStructuredData(id: string, data: StructuredData): void {\n    this.structuredDataCache.set(id, data)\n    \n    // \n    const existingScript = document.getElementById(`structured-data-${id}`)\n    if (existingScript) {\n      existingScript.remove()\n    }\n    \n    // \n    const script = document.createElement('script')\n    script.id = `structured-data-${id}`\n    script.type = 'application/ld+json'\n    script.textContent = JSON.stringify(data, null, 2)\n    document.head.appendChild(script)\n    \n    console.log(` : ${id}`)\n  }\n\n  /**\n   * \n   */\n  generateBreadcrumbs(items: Array<{ name: string; url: string }>): void {\n    const breadcrumbData: StructuredData = {\n      '@context': 'https://schema.org',\n      '@type': 'BreadcrumbList',\n      itemListElement: items.map((item, index) => ({\n        '@type': 'ListItem',\n        position: index + 1,\n        name: item.name,\n        item: item.url\n      }))\n    }\n    \n    this.setStructuredData('breadcrumb', breadcrumbData)\n  }\n\n  /**\n   * URL\n   */\n  getCurrentUrl(): string {\n    return window.location.href\n  }\n\n  /**\n   * \n   */\n  getCurrentLanguage(): string {\n    return document.documentElement.lang || 'ja'\n  }\n\n  /**\n   * SEO\n   */\n  updateLanguage(lang: string): void {\n    document.documentElement.lang = lang\n    \n    if (this.currentConfig) {\n      const updatedConfig = {\n        ...this.currentConfig,\n        locale: lang,\n        alternateUrls: this.generateAlternateUrls(this.currentConfig.url, lang)\n      }\n      \n      this.updatePageSEO(updatedConfig)\n    }\n  }\n\n  /**\n   * URL\n   */\n  private generateAlternateUrls(baseUrl: string): { [lang: string]: string } {\n    const supportedLanguages = ['ja', 'en']\n    const alternateUrls: { [lang: string]: string } = {}\n    \n    supportedLanguages.forEach(lang => {\n      if (lang === 'ja') {\n        alternateUrls[lang] = baseUrl\n      } else {\n        alternateUrls[lang] = `${baseUrl}?lang=${lang}`\n      }\n    })\n    \n    alternateUrls['x-default'] = baseUrl\n    \n    return alternateUrls\n  }\n\n  /**\n   * \n   */\n  trackPageView(pageName: string): void {\n    // Google Analytics \n    console.log(` Page view tracked: ${pageName}`)\n    \n    // API\n    if (typeof window.gtag !== 'undefined') {\n      window.gtag('config', 'GA_MEASUREMENT_ID', {\n        page_title: this.currentConfig?.title,\n        page_location: this.getCurrentUrl()\n      })\n    }\n  }\n\n  /**\n   * \n   */\n  trackEvent(eventName: string, parameters: { [key: string]: any } = {}): void {\n    console.log(` Event tracked: ${eventName}`, parameters)\n    \n    // API\n    if (typeof window.gtag !== 'undefined') {\n      window.gtag('event', eventName, parameters)\n    }\n  }\n\n  /**\n   * SEO\n   */\n  calculateSEOScore(): {\n    score: number\n    recommendations: string[]\n    issues: string[]\n  } {\n    const recommendations: string[] = []\n    const issues: string[] = []\n    let score = 100\n    \n    // \n    const title = document.title\n    if (!title || title.length < 30) {\n      issues.push('30')\n      score -= 10\n    } else if (title.length > 60) {\n      recommendations.push('60')\n      score -= 5\n    }\n    \n    // \n    const description = document.querySelector('meta[name=\"description\"]')?.getAttribute('content')\n    if (!description || description.length < 120) {\n      issues.push('120')\n      score -= 10\n    } else if (description.length > 160) {\n      recommendations.push('160')\n      score -= 5\n    }\n    \n    // \n    const h1 = document.querySelectorAll('h1')\n    if (h1.length === 0) {\n      issues.push('H1')\n      score -= 15\n    } else if (h1.length > 1) {\n      recommendations.push('H11')\n      score -= 5\n    }\n    \n    // \n    const structuredDataScripts = document.querySelectorAll('script[type=\"application/ld+json\"]')\n    if (structuredDataScripts.length === 0) {\n      issues.push('')\n      score -= 10\n    }\n    \n    // URL\n    const canonical = document.querySelector('link[rel=\"canonical\"]')\n    if (!canonical) {\n      issues.push('URL')\n      score -= 10\n    }\n    \n    // \n    recommendations.push('')\n    recommendations.push('JavaScript')\n    \n    return {\n      score: Math.max(0, score),\n      recommendations,\n      issues\n    }\n  }\n\n  /**\n   * SEO \n   */\n  generateSEOReport(): {\n    config: SEOConfig | null\n    score: ReturnType<SEOManager['calculateSEOScore']>\n    structuredData: { [id: string]: StructuredData }\n    pageInfo: {\n      url: string\n      language: string\n      title: string\n      description: string\n    }\n  } {\n    const scoreInfo = this.calculateSEOScore()\n    \n    return {\n      config: this.currentConfig,\n      score: scoreInfo,\n      structuredData: Object.fromEntries(this.structuredDataCache),\n      pageInfo: {\n        url: this.getCurrentUrl(),\n        language: this.getCurrentLanguage(),\n        title: document.title,\n        description: document.querySelector('meta[name=\"description\"]')?.getAttribute('content') || ''\n      }\n    }\n  }\n}\n\n// \nexport const seoManager = SEOManager.getInstance()","import { createApp } from 'vue'\nimport '@unocss/reset/tailwind.css'\nimport 'virtual:uno.css'\nimport './style.css'\nimport './styles/design-system.css'\nimport './styles/micro-interactions.css'\nimport './styles/brand-elements.css'\nimport './styles/rtl-support.css'\nimport App from './App.vue'\n\n// \nimport i18n from './i18n'\n\n// \nimport { initializeSecuritySystemOptimized as initializeSecuritySystem } from '@/utils/security-init-optimized'\nimport '@/utils/security/frame-detector' // iframe\n\n// \nimport { ErrorHandlingPlugin, errorHandlingSystem } from '@/utils/error-handling'\n\n// PWA Service Worker \nimport { registerServiceWorker } from '@/pwa/registerServiceWorker'\n\n// \nimport { initAutoRipple } from '@/utils/ripple-effect'\n\n// \nimport performanceMonitor from '@/utils/performance-monitor'\n\n// \nimport { lazyLoader, vLazyLoad } from '@/utils/lazy-loader'\n\n// PWA\nimport { pwaManager } from '@/utils/pwa-manager'\n\n// SEO\nimport { seoManager } from '@/utils/seo-manager'\n\n// Vue\nconst app = createApp(App)\n\n// \napp.use(i18n)\n\n// Pinia\nimport { createPinia } from 'pinia'\nconst pinia = createPinia()\napp.use(pinia)\n\n// \napp.directive('lazy-load', vLazyLoad)\n\n// \napp.use(ErrorHandlingPlugin, {\n  enableLogging: true,\n  enableReporting: import.meta.env.PROD,\n  enableRecovery: true,\n  enableUserNotifications: import.meta.env.DEV, // \n  logToConsole: import.meta.env.DEV,\n  reportToServer: false, // \n  maxErrorsPerMinute: import.meta.env.PROD ? 5 : 20, // \n  environment: import.meta.env.MODE as any,\n  buildVersion: import.meta.env.VITE_BUILD_VERSION,\n  reportEndpoint: import.meta.env.VITE_ERROR_REPORT_ENDPOINT,\n  reportApiKey: import.meta.env.VITE_ERROR_REPORT_API_KEY,\n  onError: (errorInfo) => {\n    // \n    if (import.meta.env.DEV || errorInfo.severity === 'critical' || errorInfo.severity === 'high') {\n      console.log('[App] Error reported:', errorInfo.message)\n    }\n  },\n  onRecovery: (success, strategy) => {\n    if (import.meta.env.DEV) {\n      console.log(`[App] Recovery ${success ? 'succeeded' : 'failed'}${strategy ? ` using ${strategy}` : ''}`)\n    }\n  },\n  onAlert: (type, data) => {\n    if (import.meta.env.DEV) {\n      console.warn(`[App] Alert: ${type}`, data)\n    }\n  }\n})\n\n// \nasync function initializeApp() {\n  try {\n    // \n    performanceMonitor.markGameStart()\n\n    // \n    await initializeSecuritySystem()\n    console.log(' ')\n\n    // PWA\n    console.log(' PWA...')\n    // PWA Manager\n    const pwaStatus = pwaManager.getStatus()\n    console.log(' PWA:', pwaStatus)\n\n    // SEO\n    console.log(' SEO...')\n    seoManager.updatePageSEO({\n      title: ' - ',\n      description: '',\n      keywords: ['', '', '', '', '', '', '', '', '', 'PWA', ''],\n      url: 'https://shishihs.github.io/insurance_self_game/',\n      image: 'https://shishihs.github.io/insurance_self_game/favicon.ico',\n      type: 'game',\n      locale: 'ja',\n      alternateUrls: {\n        'ja': 'https://shishihs.github.io/insurance_self_game/',\n        'en': 'https://shishihs.github.io/insurance_self_game/?lang=en',\n        'x-default': 'https://shishihs.github.io/insurance_self_game/'\n      }\n    })\n\n    // \n    seoManager.generateBreadcrumbs([\n      { name: '', url: 'https://shishihs.github.io/insurance_self_game/' },\n      { name: '', url: 'https://shishihs.github.io/insurance_self_game/#game' },\n      { name: '', url: 'https://shishihs.github.io/insurance_self_game/#stats' }\n    ])\n\n    console.log(' SEO')\n\n    // \n    app.mount('#app')\n\n    // \n    performanceMonitor.markGameLoaded()\n\n    // \n    if (import.meta.env.DEV) {\n      setTimeout(() => {\n        console.log(performanceMonitor.generateReport());\n      }, 3000);\n    }\n\n  } catch (error) {\n    console.error(':', error)\n    // \n    errorHandlingSystem.reportError(\n      error as Error,\n      { component: 'app-initialization' },\n      'system'\n    )\n\n    // : \n    console.warn(' ')\n    app.mount('#app')\n  }\n}\n\n// \ninitializeApp()\n\n// UI \ninitAutoRipple()\n\n// Service Worker \nregisterServiceWorker({\n  onSuccess: (registration) => {\n    console.log('PWA: Service Worker ', registration)\n  },\n  onUpdate: (registration) => {\n    console.log('PWA: ', registration)\n    // \n  },\n  onOffline: () => {\n    console.log('PWA: ')\n  },\n  onOnline: () => {\n    console.log('PWA: ')\n  },\n  onError: (error) => {\n    console.error('PWA: Service Worker ', error)\n    errorHandlingSystem.reportError(\n      error,\n      { component: 'service-worker' },\n      'system'\n    )\n  }\n})\n\n// \nif (import.meta.env.DEV) {\n  (window as any).__errorHandling = errorHandlingSystem;\n  (window as any).__performanceMonitor = performanceMonitor;\n  (window as any).__lazyLoader = lazyLoader;\n  (window as any).__pwaManager = pwaManager;\n  (window as any).__seoManager = seoManager;\n\n  console.log(' ')\n  console.log(' : window.__errorHandling.getStatistics()')\n  console.log(' : window.__errorHandling.getHealthStatus()')\n  console.log(' : window.__errorHandling.collectDebugInfo()')\n  console.log('')\n  console.log(' ')\n  console.log(' : window.__performanceMonitor.generateReport()')\n  console.log(' : window.__performanceMonitor.getPerformanceScore()')\n  console.log('')\n  console.log(' ')\n  console.log(' : window.__lazyLoader.getStats()')\n  console.log('')\n  console.log(' PWA')\n  console.log(' PWA: window.__pwaManager.getStatus()')\n  console.log(' : window.__pwaManager.manageCaches()')\n  console.log('')\n  console.log(' SEO')\n  console.log(' SEO: window.__seoManager.generateSEOReport()')\n  console.log(' SEO: window.__seoManager.calculateSEOScore()')\n}"],"file":"js/index-DT3u2sKU.js"}