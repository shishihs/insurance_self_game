const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./MobileErrorHandler-ClZ5Ay6I7Ao1.js","./vue-vendor-C2HpI3kE.js","./vendor-CwZoOl0N.js","./game-logic-DGEiUYYYlkbt.js","../css/MobileErrorHandler-BRt2uNlx.css","../css/css-vendor-bSBXe4IY.css"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,a,s)=>((t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s)(t,"symbol"!=typeof a?a+"":a,s);/* empty css                       */import{j as a,f as s,k as n,l as i,p as o,T as r,q as l,s as c,r as u,u as d,w as p,v as h,x as m,y as v,z as f,A as b,B as g,C as y,D as x,E as w,F as k,G as C,H as E,I as S,J as _,K as T,L,M,N as I,O as F,P as A,Q as $,R as D,S as P,U as z}from"./vue-vendor-C2HpI3kE.js";import{d as j,c as R}from"./vendor-CwZoOl0N.js";import{G as N,V,A as O}from"./game-logic-DGEiUYYYlkbt.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const H={},B={class:"transition-animations"},G=(e,t)=>{const a=e.__vccOpts||e;for(const[s,n]of t)a[s]=n;return a},U=G(a({__name:"TransitionAnimations",props:{type:{default:"fade"},direction:{default:"right"},duration:{default:300},easing:{default:"cubic-bezier(0.4, 0, 0.2, 1)"},intensity:{default:"normal"}},setup(e){const t=e,a=s(()=>`${t.type}-${t.direction}-${t.intensity}`),u=e=>{const a=e;a.style.transitionDuration=`${t.duration}ms`,a.style.transitionTimingFunction=t.easing},d=(e,a)=>{setTimeout(a,t.duration)},p=(e,a)=>{setTimeout(a,t.duration)};return(e,t)=>(i(),n("div",B,[o(r,{name:a.value,mode:"out-in",onBeforeEnter:u,onEnter:d,onLeave:p},{default:l(()=>[c(e.$slots,"default",{},void 0)]),_:3},8,["name"])]))}}),[["__scopeId","data-v-23af9bdf"]]);class K{constructor(){t(this,"liveRegions",new Map),t(this,"gameStatusElement"),t(this,"cardDetailsElement"),t(this,"announcementQueue",[]),t(this,"isProcessingQueue",!1),this.createLiveRegions(),this.createGameStatusElements(),this.setupAriaDescriptions()}announce(e,t={priority:"polite"}){t.interrupt&&this.clearQueue(),this.announcementQueue.push({message:e,options:t}),this.processQueue()}announceGameState(e){const{type:t,message:a,context:s}=e;this.updateGameStatus(t,a,s);const n=this.getPriorityForGameState(t);this.announce(a,{priority:n,persist:!0})}announceCardDetails(e){const t=this.createCardDescription(e);this.cardDetailsElement.textContent=t,this.announce(`ã‚«ãƒ¼ãƒ‰é¸æŠ: ${t}`,{priority:"polite"})}announceError(e){this.announce(`ã‚¨ãƒ©ãƒ¼: ${e}`,{priority:"assertive",interrupt:!0})}announceSuccess(e){this.announce(`æˆåŠŸ: ${e}`,{priority:"polite"})}announceProgress(e,t,a){const s=`${a}: ${e}/${t} (${Math.round(e/t*100)}%)`;this.announce(s,{priority:"polite"})}announceOptions(e,t){const a=`é¸æŠè‚¢ ${t+1}/${e.length}: ${e[t]}`;this.announce(a,{priority:"polite"})}announceTimer(e,t="seconds"){const a="seconds"===t?"ç§’":"åˆ†";let s;s=e<=0?"æ™‚é–“åˆ‡ã‚Œã§ã™":e<=10&&"seconds"===t||e<=60&&"seconds"===t?`æ®‹ã‚Š${e}${a}`:`æ®‹ã‚Šæ™‚é–“: ${e}${a}`;const n=e<=10?"assertive":"polite";this.announce(s,{priority:n})}announceScreenChange(e,t){let a=`ç”»é¢ãŒå¤‰æ›´ã•ã‚Œã¾ã—ãŸ: ${e}`;t&&(a+=`. ${t}`),this.announce(a,{priority:"assertive",persist:!0})}announceKeyboardHelp(){const e=`ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ: ${["Tabã‚­ãƒ¼ã§æ¬¡ã®è¦ç´ ã«ç§»å‹•","Shift+Tabã§å‰ã®è¦ç´ ã«ç§»å‹•","Enterã‚­ãƒ¼ã¾ãŸã¯ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã§é¸æŠ","F1ã‚­ãƒ¼ã§ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º"].join(", ")}`;this.announce(e,{priority:"polite",persist:!0})}announceGameStats(e){const t=`ã‚²ãƒ¼ãƒ çµ±è¨ˆ. ${Object.entries(e).map(([e,t])=>`${this.translateStatKey(e)}: ${t}`).join(", ")}`;this.announce(t,{priority:"polite",persist:!0})}announceRegionStatus(e,t){const a=t.length,s=this.getItemType(t);let n;n=0===a?`${e}ã¯ç©ºã§ã™`:1===a?`${e}ã«${s}ãŒ1ã¤ã‚ã‚Šã¾ã™`:`${e}ã«${s}ãŒ${a}å€‹ã‚ã‚Šã¾ã™`,this.announce(n,{priority:"polite"})}announceDragDrop(e,t){let a;switch(e){case"start":a=`${t.itemName}ã®ãƒ‰ãƒ©ãƒƒã‚°ã‚’é–‹å§‹ã—ã¾ã—ãŸ`;break;case"move":a=`${t.targetName}ã®ä¸Šã«ç§»å‹•ä¸­`;break;case"drop":a=t.success?`${t.targetName}ã«${t.itemName}ã‚’ãƒ‰ãƒ­ãƒƒãƒ—ã—ã¾ã—ãŸ`:`ãƒ‰ãƒ­ãƒƒãƒ—ã«å¤±æ•—ã—ã¾ã—ãŸ: ${t.reason}`;break;case"cancel":a="ãƒ‰ãƒ©ãƒƒã‚°æ“ä½œã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¾ã—ãŸ"}const s="drop"!==e||t.success?"polite":"assertive";this.announce(a,{priority:s})}createLiveRegions(){const e=document.createElement("div");e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),e.setAttribute("aria-atomic","false"),e.className="sr-only",e.id="live-region-polite",document.body.appendChild(e),this.liveRegions.set("polite",e);const t=document.createElement("div");t.setAttribute("aria-live","assertive"),t.setAttribute("aria-relevant","additions text"),t.setAttribute("aria-atomic","true"),t.className="sr-only",t.id="live-region-assertive",document.body.appendChild(t),this.liveRegions.set("assertive",t)}createGameStatusElements(){this.gameStatusElement=document.createElement("div"),this.gameStatusElement.id="game-status",this.gameStatusElement.className="sr-only",this.gameStatusElement.setAttribute("aria-label","ã‚²ãƒ¼ãƒ çŠ¶æ…‹"),document.body.appendChild(this.gameStatusElement),this.cardDetailsElement=document.createElement("div"),this.cardDetailsElement.id="card-details",this.cardDetailsElement.className="sr-only",this.cardDetailsElement.setAttribute("aria-label","ã‚«ãƒ¼ãƒ‰è©³ç´°"),document.body.appendChild(this.cardDetailsElement)}setupAriaDescriptions(){const e=document.createElement("style");e.textContent="\n      .sr-only {\n        position: absolute;\n        width: 1px;\n        height: 1px;\n        padding: 0;\n        margin: -1px;\n        overflow: hidden;\n        clip: rect(0, 0, 0, 0);\n        white-space: nowrap;\n        border: 0;\n      }\n      \n      .sr-only-focusable:focus {\n        position: static;\n        width: auto;\n        height: auto;\n        padding: inherit;\n        margin: inherit;\n        overflow: visible;\n        clip: auto;\n        white-space: normal;\n      }\n    ",document.head.appendChild(e)}async processQueue(){if(!this.isProcessingQueue&&0!==this.announcementQueue.length){for(this.isProcessingQueue=!0;this.announcementQueue.length>0;){const{message:e,options:t}=this.announcementQueue.shift();t.delay&&await this.delay(t.delay),await this.performAnnouncement(e,t),await this.delay(100)}this.isProcessingQueue=!1}}async performAnnouncement(e,t){const a=this.liveRegions.get(t.priority);if(a)if(t.persist||(a.textContent="",await this.delay(10)),t.persist){const t=document.createElement("div");t.textContent=e,a.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},5e3)}else a.textContent=e}updateGameStatus(e,t,a){const s={type:e,message:t,timestamp:(new Date).toISOString(),...a};this.gameStatusElement.setAttribute("data-game-state",JSON.stringify(s)),this.gameStatusElement.textContent=t}createCardDescription(e){const t=[e.name];return e.type&&t.push(`ç¨®é¡: ${this.translateCardType(e.type)}`),void 0!==e.power&&t.push(`ãƒ‘ãƒ¯ãƒ¼: ${e.power}`),void 0!==e.cost&&t.push(`ã‚³ã‚¹ãƒˆ: ${e.cost}`),e.description&&t.push(`èª¬æ˜: ${e.description}`),t.join(", ")}getPriorityForGameState(e){return["challenge_result","game_end","error"].includes(e)?"assertive":"polite"}translateStatKey(e){return{vitality:"æ´»åŠ›",turn:"ã‚¿ãƒ¼ãƒ³",cardsInHand:"æ‰‹æœ­æšæ•°",challengesCompleted:"å®Œäº†ãƒãƒ£ãƒ¬ãƒ³ã‚¸æ•°",insuranceCards:"ä¿é™ºã‚«ãƒ¼ãƒ‰æ•°"}[e]||e}translateCardType(e){return{life:"ãƒ©ã‚¤ãƒ•ã‚«ãƒ¼ãƒ‰",insurance:"ä¿é™ºã‚«ãƒ¼ãƒ‰",challenge:"ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã‚«ãƒ¼ãƒ‰",dream:"ãƒ‰ãƒªãƒ¼ãƒ ã‚«ãƒ¼ãƒ‰"}[e]||e}getItemType(e){if(0===e.length)return"ã‚¢ã‚¤ãƒ†ãƒ ";const t=e[0];return t.type?this.translateCardType(t.type):"ã‚¢ã‚¤ãƒ†ãƒ "}clearQueue(){this.announcementQueue=[],this.liveRegions.forEach(e=>{e.textContent=""})}async delay(e){return new Promise(t=>setTimeout(t,e))}destroy(){this.liveRegions.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),this.gameStatusElement?.parentNode&&this.gameStatusElement.parentNode.removeChild(this.gameStatusElement),this.cardDetailsElement?.parentNode&&this.cardDetailsElement.parentNode.removeChild(this.cardDetailsElement),this.clearQueue()}}const Q={class:"modal-content",role:"dialog","aria-labelledby":"accessibility-title","aria-describedby":"accessibility-description"},q={style:{position:"absolute",width:"0",height:"0"}},J=["innerHTML"],W={class:"modal-header"},Z={class:"modal-body"},Y={class:"settings-section"},X={class:"setting-item"},ee={class:"setting-item"},te={for:"high-contrast"},ae={class:"setting-item"},se={class:"settings-section"},ne={class:"setting-item"},ie={for:"reduce-motion"},oe={key:0,class:"setting-item"},re={class:"range-value"},le={class:"settings-section"},ce={class:"setting-item"},ue={for:"screen-reader"},de={class:"setting-item"},pe={for:"audio-descriptions"},he={class:"setting-item"},me={class:"range-value"},ve={class:"settings-section"},fe={class:"setting-item"},be={for:"sticky-keys"},ge={class:"setting-item"},ye={class:"modal-footer"},xe=G(a({__name:"AccessibilitySettings",props:{isOpen:{type:Boolean}},emits:["close","settingsChanged"],setup(e,{emit:t}){const a=e,s=t,o={colorScheme:"default",highContrast:!1,fontSize:"medium",reduceMotion:!1,animationSpeed:1,screenReaderEnabled:!1,audioDescriptions:!1,soundEffectsVolume:70,stickyKeys:!1,keyRepeatDelay:500,touchTargetSize:"default"},c=u({...o}),C=u(null),E={default:"",protanopia:'\n    <filter id="protanopia">\n      <feColorMatrix type="matrix" values="\n        0.567, 0.433, 0,     0, 0\n        0.558, 0.442, 0,     0, 0\n        0,     0.242, 0.758, 0, 0\n        0,     0,     0,     1, 0\n      "/>\n    </filter>\n  ',deuteranopia:'\n    <filter id="deuteranopia">\n      <feColorMatrix type="matrix" values="\n        0.625, 0.375, 0,   0, 0\n        0.7,   0.3,   0,   0, 0\n        0,     0.3,   0.7, 0, 0\n        0,     0,     0,   1, 0\n      "/>\n    </filter>\n  ',tritanopia:'\n    <filter id="tritanopia">\n      <feColorMatrix type="matrix" values="\n        0.95, 0.05,  0,     0, 0\n        0,    0.433, 0.567, 0, 0\n        0,    0.475, 0.525, 0, 0\n        0,    0,     0,     1, 0\n      "/>\n    </filter>\n  ',achromatopsia:'\n    <filter id="achromatopsia">\n      <feColorMatrix type="matrix" values="\n        0.299, 0.587, 0.114, 0, 0\n        0.299, 0.587, 0.114, 0, 0\n        0.299, 0.587, 0.114, 0, 0\n        0,     0,     0,     1, 0\n      "/>\n    </filter>\n  '},S=()=>{localStorage.setItem("accessibility-settings",JSON.stringify(c.value)),s("settingsChanged",c.value),_()},_=()=>{const e=document.documentElement;"default"!==c.value.colorScheme?e.style.filter=`url(#${c.value.colorScheme})`:e.style.filter="",e.classList.toggle("high-contrast",c.value.highContrast),e.style.setProperty("--base-font-size",{small:"14px",medium:"16px",large:"20px","extra-large":"24px"}[c.value.fontSize]),e.classList.toggle("reduce-motion",c.value.reduceMotion),e.style.setProperty("--animation-speed-multiplier",String(c.value.animationSpeed)),e.style.setProperty("--touch-target-size",{default:"44px",large:"56px","extra-large":"72px"}[c.value.touchTargetSize]),C.value&&C.value.announce("ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸ",{priority:"polite"})},T=()=>{c.value={...o},S(),C.value&&C.value.announce("ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ",{priority:"assertive"})};return d(()=>{(()=>{const e=localStorage.getItem("accessibility-settings");if(e)try{c.value={...o,...JSON.parse(e)}}catch(t){console.error("Failed to load accessibility settings:",t)}})(),_(),C.value=new K;const e=(()=>{const e=e=>{if(a.isOpen&&e.ctrlKey&&e.altKey)switch(e.key){case"c":const e=["default","protanopia","deuteranopia","tritanopia","achromatopsia"],t=e.indexOf(c.value.colorScheme);c.value.colorScheme=e[(t+1)%e.length],S();break;case"h":c.value.highContrast=!c.value.highContrast,S();break;case"m":c.value.reduceMotion=!c.value.reduceMotion,S()}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}})();return()=>{e(),C.value?.destroy()}}),p(()=>c.value,()=>{S()},{deep:!0}),(e,t)=>(i(),h(r,{name:"modal"},{default:l(()=>[e.isOpen?(i(),n("div",{key:0,class:"accessibility-modal",onClick:t[13]||(t[13]=v(e=>s("close"),["self"]))},[f("div",Q,[(i(),n("svg",q,[f("defs",{innerHTML:Object.values(E).join("")},null,8,J)])),f("div",W,[t[15]||(t[15]=f("h2",{id:"accessibility-title"},"ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®š",-1)),f("button",{class:"close-button","aria-label":"è¨­å®šã‚’é–‰ã˜ã‚‹",onClick:t[0]||(t[0]=e=>s("close"))},t[14]||(t[14]=[f("span",{"aria-hidden":"true"},"Ã—",-1)]))]),t[36]||(t[36]=f("div",{id:"accessibility-description",class:"sr-only"}," ã‚²ãƒ¼ãƒ ã®ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã§ãã¾ã™ã€‚ Ctrl+Alt+Cã§è‰²è¦šè¨­å®šã€Ctrl+Alt+Hã§ãƒã‚¤ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆã€Ctrl+Alt+Mã§ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³å‰Šæ¸›ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã¾ã™ã€‚ ",-1)),f("div",Z,[f("section",Y,[t[22]||(t[22]=f("h3",null,"è¦–è¦šè¨­å®š",-1)),f("div",X,[t[17]||(t[17]=f("label",{for:"color-scheme"},"è‰²è¦šã‚µãƒãƒ¼ãƒˆ",-1)),b(f("select",{id:"color-scheme","onUpdate:modelValue":t[1]||(t[1]=e=>c.value.colorScheme=e),onChange:S},t[16]||(t[16]=[f("option",{value:"default"},"æ¨™æº–",-1),f("option",{value:"protanopia"},"èµ¤è‰²è¦šç•°å¸¸ï¼ˆ1å‹ï¼‰",-1),f("option",{value:"deuteranopia"},"ç·‘è‰²è¦šç•°å¸¸ï¼ˆ2å‹ï¼‰",-1),f("option",{value:"tritanopia"},"é’è‰²è¦šç•°å¸¸ï¼ˆ3å‹ï¼‰",-1),f("option",{value:"achromatopsia"},"å…¨è‰²è¦šç•°å¸¸",-1)]),544),[[x,c.value.colorScheme]]),f("button",{class:"preview-button","aria-label":"è‰²è¦šè¨­å®šã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼",onClick:t[2]||(t[2]=e=>((e,t)=>{const a=c.value[e];c.value[e]=t,_(),setTimeout(()=>{c.value[e]===t&&(c.value[e]=a,_())},3e3)})("colorScheme",c.value.colorScheme))}," ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ ")]),f("div",ee,[f("label",te,[b(f("input",{id:"high-contrast","onUpdate:modelValue":t[3]||(t[3]=e=>c.value.highContrast=e),type:"checkbox",onChange:S},null,544),[[w,c.value.highContrast]]),t[18]||(t[18]=g(" ãƒã‚¤ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ ",-1))]),t[19]||(t[19]=f("span",{class:"setting-description"}," ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆã‚’é«˜ã‚ã¦è¦–èªæ€§ã‚’å‘ä¸Šã•ã›ã¾ã™ ",-1))]),f("div",ae,[t[21]||(t[21]=f("label",{for:"font-size"},"æ–‡å­—ã‚µã‚¤ã‚º",-1)),b(f("select",{id:"font-size","onUpdate:modelValue":t[4]||(t[4]=e=>c.value.fontSize=e),onChange:S},t[20]||(t[20]=[f("option",{value:"small"},"å°ï¼ˆ14pxï¼‰",-1),f("option",{value:"medium"},"ä¸­ï¼ˆ16pxï¼‰",-1),f("option",{value:"large"},"å¤§ï¼ˆ20pxï¼‰",-1),f("option",{value:"extra-large"},"ç‰¹å¤§ï¼ˆ24pxï¼‰",-1)]),544),[[x,c.value.fontSize]])])]),f("section",se,[t[26]||(t[26]=f("h3",null,"ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š",-1)),f("div",ne,[f("label",ie,[b(f("input",{id:"reduce-motion","onUpdate:modelValue":t[5]||(t[5]=e=>c.value.reduceMotion=e),type:"checkbox",onChange:S},null,544),[[w,c.value.reduceMotion]]),t[23]||(t[23]=g(" ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‰Šæ¸› ",-1))]),t[24]||(t[24]=f("span",{class:"setting-description"}," ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æœ€å°é™ã«æŠ‘ãˆã¾ã™ ",-1))]),c.value.reduceMotion?m("",!0):(i(),n("div",oe,[t[25]||(t[25]=f("label",{for:"animation-speed"},"ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é€Ÿåº¦",-1)),b(f("input",{id:"animation-speed","onUpdate:modelValue":t[6]||(t[6]=e=>c.value.animationSpeed=e),type:"range",min:"0.1",max:"2.0",step:"0.1",onChange:S},null,544),[[k,c.value.animationSpeed,void 0,{number:!0}]]),f("span",re,y(c.value.animationSpeed)+"x",1)]))]),f("section",le,[t[30]||(t[30]=f("h3",null,"ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªè¨­å®š",-1)),f("div",ce,[f("label",ue,[b(f("input",{id:"screen-reader","onUpdate:modelValue":t[7]||(t[7]=e=>c.value.screenReaderEnabled=e),type:"checkbox",onChange:S},null,544),[[w,c.value.screenReaderEnabled]]),t[27]||(t[27]=g(" ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œã‚’æœ‰åŠ¹åŒ– ",-1))])]),f("div",de,[f("label",pe,[b(f("input",{id:"audio-descriptions","onUpdate:modelValue":t[8]||(t[8]=e=>c.value.audioDescriptions=e),type:"checkbox",onChange:S},null,544),[[w,c.value.audioDescriptions]]),t[28]||(t[28]=g(" éŸ³å£°èª¬æ˜ã‚’æœ‰åŠ¹åŒ– ",-1))])]),f("div",he,[t[29]||(t[29]=f("label",{for:"sound-volume"},"åŠ¹æœéŸ³ã®éŸ³é‡",-1)),b(f("input",{id:"sound-volume","onUpdate:modelValue":t[9]||(t[9]=e=>c.value.soundEffectsVolume=e),type:"range",min:"0",max:"100",step:"5",onChange:S},null,544),[[k,c.value.soundEffectsVolume,void 0,{number:!0}]]),f("span",me,y(c.value.soundEffectsVolume)+"%",1)])]),f("section",ve,[t[35]||(t[35]=f("h3",null,"ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³è¨­å®š",-1)),f("div",fe,[f("label",be,[b(f("input",{id:"sticky-keys","onUpdate:modelValue":t[10]||(t[10]=e=>c.value.stickyKeys=e),type:"checkbox",onChange:S},null,544),[[w,c.value.stickyKeys]]),t[31]||(t[31]=g(" ã‚¹ãƒ†ã‚£ãƒƒã‚­ãƒ¼ã‚­ãƒ¼ ",-1))]),t[32]||(t[32]=f("span",{class:"setting-description"}," ä¿®é£¾ã‚­ãƒ¼ã‚’ä¸€åº¦ã«æŠ¼ã™å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ ",-1))]),f("div",ge,[t[34]||(t[34]=f("label",{for:"touch-target-size"},"ã‚¿ãƒƒãƒã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚µã‚¤ã‚º",-1)),b(f("select",{id:"touch-target-size","onUpdate:modelValue":t[11]||(t[11]=e=>c.value.touchTargetSize=e),onChange:S},t[33]||(t[33]=[f("option",{value:"default"},"æ¨™æº–ï¼ˆ44pxï¼‰",-1),f("option",{value:"large"},"å¤§ï¼ˆ56pxï¼‰",-1),f("option",{value:"extra-large"},"ç‰¹å¤§ï¼ˆ72pxï¼‰",-1)]),544),[[x,c.value.touchTargetSize]])])])]),f("div",ye,[f("button",{class:"reset-button","aria-label":"ã™ã¹ã¦ã®è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆ",onClick:T}," è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆ "),f("button",{class:"save-button","aria-label":"è¨­å®šã‚’ä¿å­˜ã—ã¦é–‰ã˜ã‚‹",onClick:t[12]||(t[12]=e=>s("close"))}," ä¿å­˜ã—ã¦é–‰ã˜ã‚‹ ")])])])):m("",!0)]),_:1}))}}),[["__scopeId","data-v-a0f37523"]]);class we{constructor(e={}){t(this,"focusedElement",null),t(this,"indicator"),t(this,"options"),this.options={color:e.color||"#818CF8",width:e.width||3,style:e.style||"solid",offset:e.offset||4,borderRadius:e.borderRadius||8},this.indicator=this.createIndicator(),document.body.appendChild(this.indicator),this.setupEventListeners()}createIndicator(){const e=document.createElement("div");return e.className="focus-indicator",e.style.cssText=`\n      position: fixed;\n      pointer-events: none;\n      z-index: 10000;\n      transition: all 200ms cubic-bezier(0.25, 0.46, 0.45, 0.94);\n      opacity: 0;\n      border: ${this.options.width}px ${this.options.style} ${this.options.color};\n      border-radius: ${this.options.borderRadius}px;\n      box-shadow: 0 0 20px rgba(129, 140, 248, 0.4);\n    `,e}setupEventListeners(){document.addEventListener("focusin",this.handleFocusIn.bind(this)),document.addEventListener("focusout",this.handleFocusOut.bind(this)),window.addEventListener("scroll",this.updatePosition.bind(this),!0),window.addEventListener("resize",this.updatePosition.bind(this)),new MutationObserver(()=>{this.focusedElement&&this.updatePosition()}).observe(document.body,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["style","class"]})}handleFocusIn(e){const t=e.target;this.isFocusableElement(t)&&(this.focusedElement=t,this.showIndicator(t))}handleFocusOut(){this.focusedElement=null,this.hideIndicator()}isFocusableElement(e){return["button","input","select","textarea","a[href]",'[tabindex]:not([tabindex="-1"])',"[contenteditable]"].some(t=>e.matches(t)||e.closest(t))}showIndicator(e){const t=e.getBoundingClientRect(),a=this.options.offset;this.indicator.style.left=t.left-a+"px",this.indicator.style.top=t.top-a+"px",this.indicator.style.width=`${t.width+2*a}px`,this.indicator.style.height=`${t.height+2*a}px`,this.indicator.style.opacity="1";const s=window.getComputedStyle(e).borderRadius;s&&"0px"!==s&&(this.indicator.style.borderRadius=s)}hideIndicator(){this.indicator.style.opacity="0"}updatePosition(){this.focusedElement&&this.focusedElement===document.activeElement&&this.showIndicator(this.focusedElement)}setOptions(e){Object.assign(this.options,e),this.indicator.style.border=`${this.options.width}px ${this.options.style} ${this.options.color}`,this.indicator.style.borderRadius=`${this.options.borderRadius}px`,this.focusedElement&&this.updatePosition()}destroy(){this.indicator.remove(),document.removeEventListener("focusin",this.handleFocusIn.bind(this)),document.removeEventListener("focusout",this.handleFocusOut.bind(this)),window.removeEventListener("scroll",this.updatePosition.bind(this),!0),window.removeEventListener("resize",this.updatePosition.bind(this))}}const ke={key:0,class:"keyboard-hints",role:"tooltip","aria-live":"polite"},Ce={class:"hints-list"},Ee={class:"hint-key"},Se={class:"hint-description"},_e={key:0,class:"settings-panel"},Te=["value"],Le=["value"],Me=G(a({__name:"VisualIndicators",props:{enabled:{type:Boolean,default:!0},color:{default:"#818CF8"},width:{default:3},style:{default:"solid"},offset:{default:4},borderRadius:{default:8},showKeyboardHints:{type:Boolean,default:!0},reducedMotion:{type:Boolean,default:!1}},setup(e,{expose:t}){const a=e,c=u(a.enabled),p=u({color:a.color,width:a.width,style:a.style,offset:a.offset,borderRadius:a.borderRadius});let h=null;const v=u(!1),x=u(null),k=s(()=>({"--focus-color":p.value.color,"--focus-width":`${p.value.width}px`,"--focus-offset":`${p.value.offset}px`,"--focus-radius":`${p.value.borderRadius}px`})),M=s(()=>[{key:"Tab",description:"æ¬¡ã®è¦ç´ ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹"},{key:"Shift + Tab",description:"å‰ã®è¦ç´ ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹"},{key:"Enter",description:"é¸æŠã—ãŸè¦ç´ ã‚’å®Ÿè¡Œ"},{key:"Space",description:"ãƒœã‚¿ãƒ³ã‚„ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’æ“ä½œ"},{key:"Arrow Keys",description:"ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚„é¸æŠè‚¢ã‚’ç§»å‹•"},{key:"Escape",description:"ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚„ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹"}]),I=()=>{c.value&&!h&&(h=new we(p.value))},F=()=>{h&&(h.destroy(),h=null)},A=()=>{h&&h.setOptions(p.value)},$=()=>{a.showKeyboardHints&&(v.value=!0,x.value&&clearTimeout(x.value),x.value=window.setTimeout(()=>{v.value=!1},5e3))},D=()=>{v.value=!1,x.value&&(clearTimeout(x.value),x.value=null)},P=e=>{"Tab"===e.key&&$()},z=e=>{Object.assign(p.value,e),A()},j=()=>{c.value=!c.value,c.value?I():F()};return d(()=>{I(),document.addEventListener("keydown",P),window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(p.value={...p.value,offset:2},A())}),C(()=>{F(),document.removeEventListener("keydown",P),x.value&&clearTimeout(x.value)}),t({updateSettings:z,toggleEnabled:j,showKeyboardHints:$,hideKeyboardHints:D}),(e,t)=>(i(),n("div",{class:S(["visual-indicators",{"reduced-motion":e.reducedMotion,"hints-visible":v.value}]),style:E(k.value)},[o(r,{name:"hints-fade"},{default:l(()=>[v.value&&$?(i(),n("div",ke,[f("div",{class:"hints-header"},[t[3]||(t[3]=f("h3",{class:"hints-title"},"ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ",-1)),f("button",{class:"hints-close","aria-label":"ãƒ’ãƒ³ãƒˆã‚’é–‰ã˜ã‚‹",onClick:D}," Ã— ")]),f("ul",Ce,[(i(!0),n(_,null,T(M.value,e=>(i(),n("li",{key:e.key,class:"hint-item"},[f("kbd",Ee,y(e.key),1),f("span",Se,y(e.description),1)]))),128))])])):m("",!0)]),_:1}),L(!1)?(i(),n("div",_e,[t[7]||(t[7]=f("h4",null,"ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼è¨­å®š",-1)),f("label",null,[b(f("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),type:"checkbox",onChange:j},null,544),[[w,c.value]]),t[4]||(t[4]=g(" æœ‰åŠ¹ ",-1))]),f("label",null,[t[5]||(t[5]=g(" è‰²: ",-1)),f("input",{value:p.value.color,type:"color",onInput:t[1]||(t[1]=e=>z({color:e.target.value}))},null,40,Te)]),f("label",null,[t[6]||(t[6]=g(" å¹…: ",-1)),f("input",{value:p.value.width,type:"range",min:"1",max:"10",onInput:t[2]||(t[2]=e=>z({width:parseInt(e.target.value)}))},null,40,Le)])])):m("",!0)],6))}}),[["__scopeId","data-v-3bb81bcd"]]),Ie=["data-severity"],Fe={key:0,class:"error-minimal"},Ae={key:1,class:"error-detailed"},$e={class:"error-user-message"},De={class:"error-actions"},Pe=["disabled"],ze={key:0,class:"error-details"},je={class:"error-technical"},Re={key:0,class:"error-stack"},Ne={key:2,class:"error-custom"},Ve=G(a({__name:"ErrorBoundary",props:{fallback:{default:"detailed"},onError:{},canRecover:{type:Boolean,default:!0},recoveryMessage:{default:"ã‚¨ãƒ©ãƒ¼ã‹ã‚‰å›å¾©ã™ã‚‹ã«ã¯ã€ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„"}},emits:["error","recover"],setup(e,{emit:t}){const a=e,o=t,r=u(!1),l=u(null),d=u(""),p=u(0),h=u(!1),v=s(()=>{if(!l.value)return"low";const e=l.value.message.toLowerCase();return e.includes("cannot read")||e.includes("undefined")?"high":e.includes("network")||e.includes("fetch")?"medium":"low"}),b=s(()=>{if(!l.value)return"";const e=l.value.message;return e.includes("dynamically imported module")||e.includes("Failed to fetch")?"ã‚¢ãƒ—ãƒªã®ä¸€éƒ¨ãŒèª­ã¿è¾¼ã‚ã¾ã›ã‚“ã§ã—ãŸã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„":e.includes("Network")||e.includes("fetch")?"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸ":e.includes("Cannot read")||e.includes("Cannot access")?"ç”»é¢ã®è¡¨ç¤ºä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ":e.includes("undefined")||e.includes("null")?"ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ":e.includes("timeout")?"å‡¦ç†ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„":e.includes("Permission denied")||e.includes("CORS")?"ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“":"äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ"});M((e,t,s)=>(console.error("[ErrorBoundary] Caught error:",e),console.error("[ErrorBoundary] Error info:",s),console.error("[ErrorBoundary] Component instance:",t),r.value=!0,l.value=e,d.value=s,p.value++,a.onError&&a.onError(e,t,s),o("error",e,s),!1));const x=async()=>{h.value=!0;try{r.value=!1,l.value=null,d.value="",o("recover"),await new Promise(e=>setTimeout(e,100))}catch(e){console.error("[ErrorBoundary] Recovery failed:",e),r.value=!0}finally{h.value=!1}},w=()=>{window.location.reload()},k=async()=>{if(!l.value)return;const e=`\nã‚¨ãƒ©ãƒ¼: ${l.value.message}\nã‚¹ã‚¿ãƒƒã‚¯: ${l.value.stack||"N/A"}\næƒ…å ±: ${d.value}\næ™‚åˆ»: ${(new Date).toISOString()}\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ: ${navigator.userAgent}\n  `.trim();try{await navigator.clipboard.writeText(e),console.info("ã‚¨ãƒ©ãƒ¼è©³ç´°ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ")}catch(t){console.error("Failed to copy error details:",t)}},C=()=>{if(!l.value)return;const e=new CustomEvent("app:send-error-report",{detail:{error:l.value,info:d.value,component:"ErrorBoundary"}});window.dispatchEvent(e),console.info("ã‚¨ãƒ©ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆã‚’é€ä¿¡ã—ã¾ã—ãŸ")};return(e,t)=>r.value?(i(),n("div",{key:0,class:"error-boundary","data-severity":v.value},["minimal"===e.fallback?(i(),n("div",Fe,[t[0]||(t[0]=f("p",{class:"error-message"},"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",-1)),f("button",{class:"error-action-btn",onClick:w}," ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ ")])):"detailed"===e.fallback?(i(),n("div",Ae,[t[5]||(t[5]=I('<div class="error-icon" aria-hidden="true" data-v-e0c6feb8><svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" data-v-e0c6feb8><circle cx="12" cy="12" r="10" stroke-width="2" data-v-e0c6feb8></circle><line x1="12" y1="8" x2="12" y2="12" stroke-width="2" data-v-e0c6feb8></line><line x1="12" y1="16" x2="12.01" y2="16" stroke-width="2" data-v-e0c6feb8></line></svg></div><h2 class="error-title" data-v-e0c6feb8>ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</h2>',2)),f("p",$e,y(b.value),1),f("div",De,[e.canRecover&&!h.value?(i(),n("button",{key:0,class:"error-action-btn primary",disabled:p.value>3,onClick:x},y(p.value>3?"å›å¾©ã§ãã¾ã›ã‚“":"å›å¾©ã‚’è©¦ã¿ã‚‹"),9,Pe)):m("",!0),f("button",{class:"error-action-btn secondary",onClick:w}," ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ ")]),L(!1)?(i(),n("details",ze,[t[4]||(t[4]=f("summary",null,"ã‚¨ãƒ©ãƒ¼è©³ç´°ï¼ˆé–‹ç™ºè€…å‘ã‘ï¼‰",-1)),f("div",je,[f("p",null,[t[1]||(t[1]=f("strong",null,"ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:",-1)),g(" "+y(l.value?.message),1)]),f("p",null,[t[2]||(t[2]=f("strong",null,"ã‚¨ãƒ©ãƒ¼æƒ…å ±:",-1)),g(" "+y(d.value),1)]),f("p",null,[t[3]||(t[3]=f("strong",null,"ã‚¨ãƒ©ãƒ¼å›æ•°:",-1)),g(" "+y(p.value),1)]),l.value?.stack?(i(),n("pre",Re,y(l.value.stack),1)):m("",!0),f("div",{class:"error-dev-actions"},[f("button",{class:"error-action-btn small",onClick:k}," è©³ç´°ã‚’ã‚³ãƒ”ãƒ¼ "),f("button",{class:"error-action-btn small",onClick:C}," ãƒ¬ãƒãƒ¼ãƒˆé€ä¿¡ ")])])])):m("",!0)])):"custom"===e.fallback?(i(),n("div",Ne,[c(e.$slots,"error",{error:l.value,retry:x,reload:w},void 0)])):m("",!0)],8,Ie)):c(e.$slots,"default",{key:1},void 0)}}),[["__scopeId","data-v-e0c6feb8"]]),Oe=new class{constructor(){t(this,"patterns",[]),t(this,"fallbackMessages",new Map),this.initializeDefaultPatterns(),this.initializeFallbackMessages()}initializeDefaultPatterns(){this.patterns.push({id:"network-offline",pattern:/network|offline|connection/i,message:{title:"ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šãŒåˆ‡æ–­ã•ã‚Œã¦ã„ã¾ã™",description:"ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ã€ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚",actionLabel:"å†è©¦è¡Œ",actionType:"retry",icon:"ğŸ“¡",severity:"error",helpUrl:"/help/network-issues"},conditions:{category:["network"]}}),this.patterns.push({id:"network-timeout",pattern:/timeout|slow/i,message:{title:"æ¥ç¶šãŒé…ããªã£ã¦ã„ã¾ã™",description:"ã‚µãƒ¼ãƒãƒ¼ã¸ã®æ¥ç¶šã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã¾ã™ã€‚ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚",actionLabel:"ã‚‚ã†ä¸€åº¦è©¦ã™",actionType:"retry",icon:"â°",severity:"warning"},conditions:{category:["network","async"]}}),this.patterns.push({id:"game-save-failed",pattern:/save|storage|quota/i,message:{title:"ã‚²ãƒ¼ãƒ ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ",description:"ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å®¹é‡ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚",actionLabel:"ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ç¢ºèª",actionType:"navigate",actionData:{url:"/settings/storage"},icon:"ğŸ’¾",severity:"error",showDetails:!0},conditions:{category:["game","system"]}}),this.patterns.push({id:"game-state-corrupted",pattern:/corrupted|invalid.*state|cannot.*read.*game/i,message:{title:"ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã«å•é¡ŒãŒã‚ã‚Šã¾ã™",description:"ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ãŒç ´æã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æ–°ã—ã„ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚",actionLabel:"æ–°ã—ã„ã‚²ãƒ¼ãƒ ",actionType:"navigate",actionData:{url:"/new-game"},icon:"ğŸ®",severity:"critical",showDetails:!0},conditions:{category:["game"],severity:["high","critical"]}}),this.patterns.push({id:"ui-component-error",pattern:/component|render|mount/i,message:{title:"ç”»é¢ã®è¡¨ç¤ºã‚¨ãƒ©ãƒ¼",description:"ç”»é¢ã®ä¸€éƒ¨ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã™ã‚‹ã¨è§£æ±ºã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸ–¥ï¸",severity:"warning"},conditions:{category:["vue"]}}),this.patterns.push({id:"performance-memory",pattern:/memory|heap|stack.*overflow/i,message:{title:"ãƒ¡ãƒ¢ãƒªä¸è¶³ã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™",description:"ä»–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‰ã˜ã¦ã€ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ã—ã¦ãã ã•ã„ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"âš¡",severity:"error",helpUrl:"/help/performance"},conditions:{category:["performance","system"]}}),this.patterns.push({id:"security-cors",pattern:/cors|cross.*origin|blocked/i,message:{title:"ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ¶é™ãŒç™ºç”Ÿã—ã¾ã—ãŸ",description:"ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã«ã‚ˆã‚Šã€ä¸€éƒ¨ã®æ©Ÿèƒ½ãŒåˆ¶é™ã•ã‚Œã¦ã„ã¾ã™ã€‚",actionLabel:"ã‚µãƒãƒ¼ãƒˆã«é€£çµ¡",actionType:"contact",icon:"ğŸ”’",severity:"error",helpUrl:"/help/security-issues"},conditions:{category:["security"]}}),this.patterns.push({id:"js-undefined",pattern:/undefined|null.*property|cannot.*read/i,message:{title:"äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",description:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§äºˆæœŸã—ãªã„å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚é–‹ç™ºãƒãƒ¼ãƒ ã«å ±å‘Šã•ã‚Œã¾ã™ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"âš ï¸",severity:"error",showDetails:!0},conditions:{category:["javascript"],severity:["high","critical"]}}),this.patterns.push({id:"resource-load-failed",pattern:/loading|chunk.*error|failed.*fetch.*resource/i,message:{title:"ãƒªã‚½ãƒ¼ã‚¹ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ",description:"ãƒšãƒ¼ã‚¸ã®ä¸€éƒ¨ã®ãƒªã‚½ãƒ¼ã‚¹ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸ“¦",severity:"warning"},conditions:{category:["network","system"]}})}initializeFallbackMessages(){this.fallbackMessages.set("network",{title:"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼",description:"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"å†è©¦è¡Œ",actionType:"retry",icon:"ğŸŒ",severity:"error"}),this.fallbackMessages.set("vue",{title:"UI ã‚¨ãƒ©ãƒ¼",description:"ç”»é¢ã®è¡¨ç¤ºã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸ–¼ï¸",severity:"warning"}),this.fallbackMessages.set("javascript",{title:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼",description:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"âš™ï¸",severity:"error"}),this.fallbackMessages.set("game",{title:"ã‚²ãƒ¼ãƒ ã‚¨ãƒ©ãƒ¼",description:"ã‚²ãƒ¼ãƒ ä¸­ã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"ã‚²ãƒ¼ãƒ ã‚’å†é–‹",actionType:"retry",icon:"ğŸ®",severity:"error"}),this.fallbackMessages.set("async",{title:"å‡¦ç†ã‚¨ãƒ©ãƒ¼",description:"éåŒæœŸå‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"å†è©¦è¡Œ",actionType:"retry",icon:"â³",severity:"warning"}),this.fallbackMessages.set("performance",{title:"ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å•é¡Œ",description:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å‹•ä½œãŒé‡ããªã£ã¦ã„ã¾ã™ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸš€",severity:"warning"}),this.fallbackMessages.set("security",{title:"ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¨ãƒ©ãƒ¼",description:"ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ¶é™ã«ã‚ˆã‚Šæ“ä½œãŒåˆ¶é™ã•ã‚Œã¾ã—ãŸã€‚",actionLabel:"ã‚µãƒãƒ¼ãƒˆã«é€£çµ¡",actionType:"contact",icon:"ğŸ”",severity:"error"}),this.fallbackMessages.set("user",{title:"ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã‚¨ãƒ©ãƒ¼",description:"æ“ä½œã«å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"ã‚‚ã†ä¸€åº¦è©¦ã™",actionType:"retry",icon:"ğŸ‘¤",severity:"info"}),this.fallbackMessages.set("system",{title:"ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼",description:"ã‚·ã‚¹ãƒ†ãƒ ã§å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸ–¥ï¸",severity:"error"})}generateUserMessage(e){for(const a of this.patterns)if(this.matchesPattern(e,a))return this.enrichMessage(a.message,e);const t=this.fallbackMessages.get(e.category);return t?this.enrichMessage(t,e):this.enrichMessage({title:"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",description:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãæ™‚é–“ã‚’ãŠã„ã¦ã‹ã‚‰å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚",actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"â—",severity:"error"},e)}matchesPattern(e,t){if(!(t.pattern instanceof RegExp?t.pattern.test(e.message):e.message.toLowerCase().includes(t.pattern.toLowerCase())))return!1;if(t.conditions){const{category:a,severity:s,context:n}=t.conditions;if(a&&!a.includes(e.category))return!1;if(s&&!s.includes(e.severity))return!1;if(n&&!n(e))return!1}return!0}enrichMessage(e,t){return new Date(t.timestamp).toLocaleTimeString(),{...e,description:`${e.description}${t.context?.deviceInfo?.isMobile?" (ãƒ¢ãƒã‚¤ãƒ«)":""}`,actionData:{...e.actionData,timestamp:t.timestamp,errorId:t.fingerprint,component:t.component}}}addPattern(e){this.patterns.some(t=>t.id===e.id)?console.warn(`Pattern with id "${e.id}" already exists`):this.patterns.unshift(e)}removePattern(e){const t=this.patterns.findIndex(t=>t.id===e);return-1!==t&&(this.patterns.splice(t,1),!0)}getPatterns(){return[...this.patterns]}previewMessage(e,t,a="medium"){const s={message:e,category:t,severity:a,timestamp:Date.now(),userAgent:navigator.userAgent};return this.generateUserMessage(s)}getStats(){return{patternsCount:this.patterns.length,categoriesCount:this.fallbackMessages.size,patterns:this.patterns.map(e=>({id:e.id,hasConditions:Boolean(e.conditions)}))}}},He={class:"error-notification-container",role:"alert","aria-live":"polite"},Be=["aria-label"],Ge={class:"notification-content"},Ue={class:"notification-icon","aria-hidden":"true"},Ke={class:"notification-body"},Qe={class:"notification-title"},qe={class:"notification-description"},Je={key:0,class:"notification-actions"},We=["onClick"],Ze=["onClick"],Ye=["onClick"],Xe={key:1,class:"notification-details"},et={class:"detail-section"},tt={key:0,class:"detail-section"},at={class:"detail-section"},st={class:"detail-tag"},nt={class:"detail-tag"},it={key:1,class:"detail-section"},ot={class:"detail-section"},rt=["aria-label","onClick"],lt=G(a({__name:"ErrorNotification",setup(e,{expose:t}){const a=u([]),r=e=>{const t=`${Date.now()}-${Math.random()}`,s={...e,id:t,timestamp:Date.now(),autoHide:e.autoHide??"critical"!==e.userMessage.severity,hideDelay:e.hideDelay??5e3,isExpanded:!1};a.value.unshift(s),a.value.length>3&&(a.value=a.value.slice(0,3)),s.autoHide&&setTimeout(()=>{c(t)},s.hideDelay)},c=e=>{const t=a.value.findIndex(t=>t.id===e);-1!==t&&a.value.splice(t,1)},p=e=>{const t=e.detail;if(a.value.some(e=>e.originalError.fingerprint===t.fingerprint))return;const s=Oe.generateUserMessage(t);r({userMessage:s,originalError:t})},v=e=>{switch(e){case"critical":return"ğŸš¨";case"error":return"âš ï¸";case"warning":return"â„¹ï¸";case"info":return"ğŸ’¡"}},b=e=>{switch(e){case"critical":return"notification-critical";case"error":return"notification-error";case"warning":return"notification-warning";case"info":return"notification-info"}},x=e=>{const{actionType:t,actionData:a}=e.userMessage;switch(t){case"reload":window.location.reload();break;case"retry":const t=new CustomEvent("app:retry-action",{detail:{errorId:a?.errorId,component:a?.component}});window.dispatchEvent(t),c(e.id);break;case"navigate":a?.url&&(window.location.href=a.url);break;case"contact":const s=new CustomEvent("app:open-support",{detail:{errorInfo:e.originalError}});window.dispatchEvent(s);break;default:c(e.id)}},w=e=>{const t=a.value.find(t=>t.id===e);t&&(t.isExpanded=!t.isExpanded)},k=s(()=>a.value.map((e,t)=>({...e,offset:t*(e.isExpanded?120:80),opacity:t<3?1:.5})));return d(()=>{window.addEventListener("app:error",p),window.addEventListener("app:system-alert",e=>{const{message:t}=e.detail;r({userMessage:{title:"ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ©ãƒ¼ãƒˆ",description:t,actionLabel:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",actionType:"reload",icon:"ğŸš€",severity:"critical",showDetails:!1},originalError:{message:t,category:"system",severity:"critical",timestamp:Date.now(),userAgent:navigator.userAgent},autoHide:!1})})}),C(()=>{window.removeEventListener("app:error",p),window.removeEventListener("app:system-alert",()=>{})}),t({addNotification:r,removeNotification:c,clearAll:()=>{a.value=[]},executeAction:x,toggleDetails:w}),(e,t)=>(i(),h(A,{to:"body"},[f("div",He,[o(F,{name:"notification",tag:"div"},{default:l(()=>[(i(!0),n(_,null,T(k.value,(e,a)=>{return i(),n("div",{key:e.id,class:S(["error-notification",b(e.userMessage.severity),{expanded:e.isExpanded}]),style:E({transform:`translateY(${e.offset}px)`,opacity:e.opacity,zIndex:1e3-a}),role:"alertdialog","aria-label":`${e.userMessage.severity}ã‚¨ãƒ©ãƒ¼: ${e.userMessage.title}`},[f("div",Ge,[f("span",Ue,y((s=e.userMessage,s.icon||v(s.severity))),1),f("div",Ke,[f("h4",Qe,y(e.userMessage.title),1),f("p",qe,y(e.userMessage.description),1),e.userMessage.actionLabel?(i(),n("div",Je,[f("button",{class:"notification-action-btn primary",onClick:t=>x(e)},y(e.userMessage.actionLabel),9,We),e.userMessage.helpUrl?(i(),n("button",{key:0,class:"notification-action-btn secondary small",onClick:t=>{return a=e.userMessage.helpUrl,void window.open(a,"_blank","noopener,noreferrer");var a}}," ãƒ˜ãƒ«ãƒ— ",8,Ze)):m("",!0),e.userMessage.showDetails?(i(),n("button",{key:1,class:"notification-action-btn secondary small",onClick:t=>w(e.id)},y(e.isExpanded?"è©³ç´°ã‚’éš ã™":"è©³ç´°ã‚’è¡¨ç¤º"),9,Ye)):m("",!0)])):m("",!0),e.isExpanded&&e.userMessage.showDetails?(i(),n("div",Xe,[f("div",et,[t[0]||(t[0]=f("strong",null,"ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:",-1)),f("code",null,y(e.originalError.message),1)]),e.originalError.component?(i(),n("div",tt,[t[1]||(t[1]=f("strong",null,"ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ:",-1)),f("code",null,y(e.originalError.component),1)])):m("",!0),f("div",at,[t[2]||(t[2]=f("strong",null,"ã‚«ãƒ†ã‚´ãƒª:",-1)),f("span",st,y(e.originalError.category),1),t[3]||(t[3]=f("strong",null,"æ·±åˆ»åº¦:",-1)),f("span",nt,y(e.originalError.severity),1)]),e.originalError.context?.route?(i(),n("div",it,[t[4]||(t[4]=f("strong",null,"ãƒšãƒ¼ã‚¸:",-1)),f("code",null,y(e.originalError.context.route),1)])):m("",!0),f("div",ot,[t[5]||(t[5]=f("strong",null,"æ™‚åˆ»:",-1)),g(" "+y(new Date(e.originalError.timestamp).toLocaleString()),1)])])):m("",!0)]),f("button",{class:"notification-close","aria-label":`é€šçŸ¥ã‚’é–‰ã˜ã‚‹: ${e.userMessage.title}`,onClick:t=>c(e.id)},t[6]||(t[6]=[f("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[f("line",{x1:"18",y1:"6",x2:"6",y2:"18","stroke-width":"2"}),f("line",{x1:"6",y1:"6",x2:"18",y2:"18","stroke-width":"2"})],-1)]),8,rt)]),e.autoHide?(i(),n("div",{key:0,class:"notification-progress",style:E({animationDuration:`${e.hideDelay}ms`})},null,4)):m("",!0)],14,Be);var s}),128))]),_:1})])]))}}),[["__scopeId","data-v-eac2682b"]]);function ct(e){if("string"!=typeof e)throw new Error("å…¥åŠ›ã¯æ–‡å­—åˆ—ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™");return e.replace(/<[^>]*>/g,"").replace(/javascript:/gi,"").replace(/on\w+\s*=/gi,"").replace(/[<>"'&]/g,e=>({"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","&":"&amp;"}[e]||e)).replace(/[\u0002-\u001F\u007F-\u009F]/g,"").trim().slice(0,1e3)}class ut{constructor(){t(this,"focusableElements",[]),t(this,"currentFocusIndex",-1),t(this,"shortcuts",new Map),t(this,"isActive",!0),t(this,"focusVisibleEnabled",!0),this.setupEventListeners(),this.setupFocusVisible()}registerFocusableElement(e,t={}){const a={element:e,priority:t.priority||0,group:t.group,onFocus:t.onFocus,onBlur:t.onBlur,onActivate:t.onActivate},s=this.focusableElements.findIndex(t=>t.element===e);s>=0?this.focusableElements[s]=a:this.focusableElements.push(a),this.focusableElements.sort((e,t)=>t.priority-e.priority),this.setupElementAccessibility(e)}unregisterFocusableElement(e){const t=this.focusableElements.findIndex(t=>t.element===e);t>=0&&(this.focusableElements.splice(t,1),this.currentFocusIndex>=t&&(this.currentFocusIndex=Math.max(0,this.currentFocusIndex-1)))}registerShortcut(e){const t=this.createShortcutKey(e.key,e.modifiers||[]);this.shortcuts.set(t,e)}unregisterShortcut(e,t=[]){const a=this.createShortcutKey(e,t);this.shortcuts.delete(a)}focusNext(){0!==this.focusableElements.length&&(this.currentFocusIndex=(this.currentFocusIndex+1)%this.focusableElements.length,this.setFocus(this.currentFocusIndex))}focusPrevious(){0!==this.focusableElements.length&&(this.currentFocusIndex=this.currentFocusIndex<=0?this.focusableElements.length-1:this.currentFocusIndex-1,this.setFocus(this.currentFocusIndex))}focusGroup(e){const t=this.focusableElements.filter(t=>t.group===e);if(t.length>0){const e=this.focusableElements.indexOf(t[0]);e>=0&&(this.currentFocusIndex=e,this.setFocus(e))}}focusElement(e){const t=this.focusableElements.findIndex(t=>t.element===e);t>=0&&(this.currentFocusIndex=t,this.setFocus(t))}getCurrentFocusedElement(){return this.currentFocusIndex>=0&&this.currentFocusIndex<this.focusableElements.length?this.focusableElements[this.currentFocusIndex].element:null}startFocusTrap(e){const t=this.focusableElements.filter(t=>e.contains(t.element));t.length>0&&(this.focusableElements.forEach(t=>{e.contains(t.element)||(t.element.setAttribute("tabindex","-1"),t.element.setAttribute("aria-hidden","true"))}),this.focusElement(t[0].element))}endFocusTrap(){this.focusableElements.forEach(e=>{e.element.removeAttribute("tabindex"),e.element.removeAttribute("aria-hidden")})}toggleHelp(){const e=this.createHelpPanel();document.body.appendChild(e);const t=a=>{"Escape"===a.key&&(e.remove(),document.removeEventListener("keydown",t))};document.addEventListener("keydown",t);const a=e.querySelector("button");a&&a.focus()}createSkipLinks(){const e=document.createElement("div");e.className="skip-links",e.setAttribute("aria-label","ã‚¹ã‚­ãƒƒãƒ—ãƒªãƒ³ã‚¯");const t=this.createSkipLink("ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ç§»å‹•","#main-content"),a=this.createSkipLink("ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã«ç§»å‹•","#navigation"),s=this.createSkipLink("ãƒ•ãƒƒã‚¿ãƒ¼ã«ç§»å‹•","#footer");return e.appendChild(t),e.appendChild(a),e.appendChild(s),e}setActive(e){if(this.isActive=e,!e){const e=this.getCurrentFocusedElement();e&&e.blur()}}setFocusVisible(e){this.focusVisibleEnabled=e,document.documentElement.classList.toggle("keyboard-navigation",e)}setupEventListeners(){document.addEventListener("keydown",this.handleKeyDown.bind(this)),document.addEventListener("focusin",this.handleFocusIn.bind(this)),document.addEventListener("focusout",this.handleFocusOut.bind(this)),document.addEventListener("mousedown",()=>{document.documentElement.classList.remove("keyboard-navigation")})}handleKeyDown(e){if(!this.isActive)return;const t=this.createShortcutKey(e.key,this.getActiveModifiers(e)),a=this.shortcuts.get(t);if(a)return e.preventDefault(),void a.action();switch(e.key){case"Tab":e.preventDefault(),e.shiftKey?this.focusPrevious():this.focusNext();break;case"ArrowDown":case"ArrowRight":e.preventDefault(),this.focusNext();break;case"ArrowUp":case"ArrowLeft":e.preventDefault(),this.focusPrevious();break;case"Home":e.preventDefault(),this.currentFocusIndex=0,this.setFocus(0);break;case"End":e.preventDefault(),this.currentFocusIndex=this.focusableElements.length-1,this.setFocus(this.currentFocusIndex);break;case"Enter":case" ":const t=this.getCurrentFocusedElement();if(t){e.preventDefault();const a=this.focusableElements[this.currentFocusIndex];a.onActivate?a.onActivate():t.click()}break;case"F1":e.preventDefault(),this.toggleHelp()}}handleFocusIn(e){if(!this.focusVisibleEnabled)return;const t=e.target,a=this.focusableElements.findIndex(e=>e.element===t);if(a>=0){this.currentFocusIndex=a;const e=this.focusableElements[a];e.onFocus&&e.onFocus(),document.documentElement.classList.add("keyboard-navigation")}}handleFocusOut(e){const t=e.target,a=this.focusableElements.findIndex(e=>e.element===t);if(a>=0){const e=this.focusableElements[a];e.onBlur&&e.onBlur()}}setFocus(e){if(e<0||e>=this.focusableElements.length)return;const t=this.focusableElements[e].element;null!==t.offsetParent?(t.focus(),t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})):this.focusNext()}setupElementAccessibility(e){if(e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),!e.hasAttribute("role")){const t=e.tagName.toLowerCase();"div"!==t&&"span"!==t||e.setAttribute("role","button")}if(!e.hasAttribute("aria-label")&&!e.hasAttribute("aria-labelledby")){const t=e.textContent?.trim();t&&e.setAttribute("aria-label",t)}}createShortcutKey(e,t){return`${t.sort().join("+")}+${e.toLowerCase()}`}getActiveModifiers(e){const t=[];return e.ctrlKey&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&t.push("shift"),e.metaKey&&t.push("meta"),t}createSkipLink(e,t){const a=document.createElement("a");return a.href=t,a.textContent=e,a.className="skip-link",a.addEventListener("click",e=>{e.preventDefault();const a=document.querySelector(t);a&&a.focus()}),a}createHelpPanel(){const e=document.createElement("div");e.className="keyboard-help-panel",e.setAttribute("role","dialog"),e.setAttribute("aria-labelledby","help-title"),e.setAttribute("aria-modal","true");const t=Array.from(this.shortcuts.values()),a=document.createElement("div");a.className="help-content";const s=document.createElement("h2");s.id="help-title",s.textContent="ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ";const n=document.createElement("div");n.className="shortcuts-list";const i=document.createElement("div");i.className="shortcut-group";const o=document.createElement("h3");o.textContent="åŸºæœ¬ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³";const r=document.createElement("dl");if([{key:"Tab / Shift+Tab",desc:"æ¬¡/å‰ã®è¦ç´ ã«ç§»å‹•"},{key:"çŸ¢å°ã‚­ãƒ¼",desc:"æ–¹å‘ã«å¿œã˜ã¦ç§»å‹•"},{key:"Enter / Space",desc:"è¦ç´ ã‚’é¸æŠ/å®Ÿè¡Œ"},{key:"Home / End",desc:"æœ€åˆ/æœ€å¾Œã®è¦ç´ ã«ç§»å‹•"}].forEach(({key:e,desc:t})=>{const a=document.createElement("dt");a.textContent=e;const s=document.createElement("dd");s.textContent=t,r.appendChild(a),r.appendChild(s)}),i.appendChild(o),i.appendChild(r),n.appendChild(i),t.length>0){const e=document.createElement("div");e.className="shortcut-group";const a=document.createElement("h3");a.textContent="ã‚²ãƒ¼ãƒ æ“ä½œ";const s=document.createElement("dl");t.forEach(e=>{const t=document.createElement("dt");t.textContent=ct(this.formatShortcut(e));const a=document.createElement("dd");a.textContent=ct(e.description),s.appendChild(t),s.appendChild(a)}),e.appendChild(a),e.appendChild(s),n.appendChild(e)}const l=document.createElement("button");return l.type="button",l.textContent="é–‰ã˜ã‚‹ (Esc)",l.onclick=()=>{e.remove()},a.appendChild(s),a.appendChild(n),a.appendChild(l),e.appendChild(a),e}formatShortcut(e){return[...(e.modifiers||[]).map(e=>e.charAt(0).toUpperCase()+e.slice(1)),e.key].join(" + ")}setupFocusVisible(){const e=document.createElement("style");e.textContent="\n      .keyboard-navigation *:focus {\n        outline: 2px solid #818CF8;\n        outline-offset: 2px;\n        border-radius: 4px;\n      }\n      \n      .skip-links {\n        position: absolute;\n        top: -40px;\n        left: 6px;\n        z-index: 1000;\n      }\n      \n      .skip-link {\n        position: absolute;\n        left: -10000px;\n        top: auto;\n        width: 1px;\n        height: 1px;\n        overflow: hidden;\n        background: #000;\n        color: #fff;\n        padding: 8px 16px;\n        text-decoration: none;\n        border-radius: 4px;\n      }\n      \n      .skip-link:focus {\n        position: static;\n        width: auto;\n        height: auto;\n        left: auto;\n        top: auto;\n      }\n      \n      .keyboard-help-panel {\n        position: fixed;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        background: rgba(0, 0, 0, 0.95);\n        color: white;\n        padding: 2rem;\n        border-radius: 12px;\n        max-width: 500px;\n        max-height: 80vh;\n        overflow-y: auto;\n        z-index: 10000;\n      }\n      \n      .help-content h2 {\n        margin-top: 0;\n        color: #818CF8;\n      }\n      \n      .shortcuts-list dt {\n        font-weight: bold;\n        color: #FFD43B;\n        margin-top: 0.5rem;\n      }\n      \n      .shortcuts-list dd {\n        margin-left: 1rem;\n        margin-bottom: 0.5rem;\n      }\n      \n      .help-content button {\n        margin-top: 1rem;\n        padding: 0.5rem 1rem;\n        background: #818CF8;\n        color: white;\n        border: none;\n        border-radius: 4px;\n        cursor: pointer;\n      }\n    ",document.head.appendChild(e)}destroy(){this.focusableElements=[],this.shortcuts.clear(),document.removeEventListener("keydown",this.handleKeyDown.bind(this)),document.removeEventListener("focusin",this.handleFocusIn.bind(this)),document.removeEventListener("focusout",this.handleFocusOut.bind(this))}}const dt={class:"app-header"},pt=G(a({__name:"AppHeader",setup:e=>(e,t)=>(i(),n("header",dt,t[0]||(t[0]=[I('<div class="hero-section" data-v-8bbf6362><div class="hero-background" data-v-8bbf6362><div class="hero-orb hero-orb-1" data-v-8bbf6362></div><div class="hero-orb hero-orb-2" data-v-8bbf6362></div><div class="hero-orb hero-orb-3" data-v-8bbf6362></div></div><div class="hero-content" data-v-8bbf6362><div class="brand-logo pulse" data-v-8bbf6362><div class="logo-glow" data-v-8bbf6362></div><span class="logo-icon" data-v-8bbf6362>ğŸ›¡ï¸</span></div><h1 class="hero-title bounce-in" style="animation-delay:0.2s;" data-v-8bbf6362> äººç”Ÿå……å®Ÿã‚²ãƒ¼ãƒ  </h1><p class="hero-subtitle bounce-in" style="animation-delay:0.4s;" data-v-8bbf6362> Life Fulfillment - ç”Ÿå‘½ä¿é™ºã‚’ã€Œäººç”Ÿã®å‘³æ–¹ã€ã¨ã—ã¦æã </p><div class="hero-accent bounce-in" style="animation-delay:0.6s;" data-v-8bbf6362><span class="accent-icon" data-v-8bbf6362>âœ¨</span><span class="accent-text" data-v-8bbf6362>ä¸€äººã®æ™‚é–“ã‚’ã€æœ€é«˜ã®å†’é™ºã«</span><span class="accent-icon" data-v-8bbf6362>âœ¨</span></div><div class="hero-stats bounce-in" style="animation-delay:0.8s;" data-v-8bbf6362><div class="stat-item" data-v-8bbf6362><span class="stat-value" data-v-8bbf6362>100+</span><span class="stat-label" data-v-8bbf6362>ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰</span></div><div class="stat-divider" data-v-8bbf6362></div><div class="stat-item" data-v-8bbf6362><span class="stat-value" data-v-8bbf6362>7</span><span class="stat-label" data-v-8bbf6362>äººç”Ÿã‚¹ãƒ†ãƒ¼ã‚¸</span></div><div class="stat-divider" data-v-8bbf6362></div><div class="stat-item" data-v-8bbf6362><span class="stat-value" data-v-8bbf6362>âˆ</span><span class="stat-label" data-v-8bbf6362>ãƒ—ãƒ¬ã‚¤ãƒ‘ã‚¿ãƒ¼ãƒ³</span></div></div></div></div>',1)])))}),[["__scopeId","data-v-8bbf6362"]]),ht={id:"navigation",class:"action-section",role:"navigation","aria-label":"ãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³"},mt={class:"button-group"},vt=G(a({__name:"NavigationActions",emits:["start-game","start-tutorial"],setup(e,{expose:t}){const a=u(),s=u();return t({gameButtonRef:a,tutorialButtonRef:s}),(e,t)=>(i(),n("section",ht,[f("div",mt,[f("button",{ref_key:"gameButtonRef",ref:a,class:"btn btn-primary ripple-container glow-on-hover bounce-in","aria-label":"ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã™ã‚‹ (Alt+G)","aria-keyshortcuts":"Alt+G","aria-describedby":"game-description",onClick:t[0]||(t[0]=t=>e.$emit("start-game"))},t[2]||(t[2]=[f("span",{class:"btn-bg-effect"},null,-1),f("span",{class:"btn-icon","aria-hidden":"true"},"ğŸ®",-1),f("span",{class:"btn-text"},"ã‚²ãƒ¼ãƒ ã‚’ãƒ—ãƒ¬ã‚¤",-1),f("span",{class:"btn-arrow","aria-hidden":"true"},"â†’",-1)]),512),f("button",{ref_key:"tutorialButtonRef",ref:s,class:"btn btn-secondary ripple-container","aria-label":"ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹ã™ã‚‹ (Alt+T)","aria-keyshortcuts":"Alt+T","aria-describedby":"tutorial-description",onClick:t[1]||(t[1]=t=>e.$emit("start-tutorial"))},t[3]||(t[3]=[f("span",{class:"btn-bg-effect"},null,-1),f("span",{class:"btn-icon","aria-hidden":"true"},"ğŸ“š",-1),f("span",{class:"btn-text"},"ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«",-1)]),512)]),t[4]||(t[4]=f("div",{class:"sr-only"},[f("div",{id:"game-description"},"ä¿é™ºã‚’ãƒ†ãƒ¼ãƒã«ã—ãŸäººç”Ÿã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã—ã¾ã™"),f("div",{id:"tutorial-description"},"ã‚²ãƒ¼ãƒ ã®éŠã³æ–¹ã‚’å­¦ç¿’ã™ã‚‹ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹ã—ã¾ã™")],-1))]))}}),[["__scopeId","data-v-21943391"]]),ft=j("game",()=>{const e=$(null),t=u(!1),a=u(Date.now()),n=u([]),i=u(0),o=u(100),r=u("youth"),l=u(0),c=u("setup"),d=u("not_started"),p=u(null),h=u([]),m=u([]),v=u(0),f=u([]),b=u([]),g=u(0),y=u(20),x=u(!0),w=s(()=>i.value),k=s(()=>o.value),C=s(()=>n.value),E=s(()=>r.value),S=s(()=>l.value),_=s(()=>c.value),T=s(()=>d.value),L=s(()=>p.value),M=s(()=>b.value),I=s(()=>h.value),F=s(()=>m.value),A=s(()=>v.value),D=s(()=>g.value),P=s(()=>y.value),z=s(()=>f.value),j=u("");function R(){if(!e.value)return;a.value=Date.now(),n.value=[...e.value.hand],i.value=e.value.vitality,o.value=e.value.maxVitality,r.value=e.value.stage,l.value=e.value.turn,c.value=e.value.phase,d.value=e.value.status,p.value=e.value.currentChallenge||null,h.value=[...e.value.activeInsurances],m.value=[...e.value.insuranceMarket],v.value=e.value.score,g.value=e.value.savings;const t=e.value.config?.balanceConfig?.progressionSettings||{maxTurns:20};y.value=t.maxTurns??20,f.value=e.value.cardChoices?[...e.value.cardChoices]:[],b.value=e.value.insuranceTypeChoices?[...e.value.insuranceTypeChoices]:[],console.log("[GameStore] State synced. Hand size:",n.value.length),"undefined"!=typeof window&&(window._gameStore={game:e.value})}return{game:e,isInitialized:t,vitality:w,maxVitality:k,hand:C,currentStage:E,currentTurn:S,currentPhase:_,currentStatus:T,currentChallenge:L,insuranceTypeChoices:M,lastMessage:j,initializeGame:function(a){console.log("[GameStore] initializeGame called with config:",JSON.stringify(a)),e.value=new N(a),a?.startingVitality&&a.startingVitality>200&&(console.log(`[GameStore] Forcing High Vitality Cheat: ${a.startingVitality}`),e.value._vitality=V.create(a.startingVitality,a.startingVitality)),t.value=!0,R()},startGame:function(){e.value&&(e.value.start(),R())},drawCards:async function(t){console.log("[GameStore] drawCards called",t),e.value?(await e.value.drawCards(t),console.log("[GameStore] drawCards finished, triggering update"),R()):console.error("[GameStore] Game instance is null")},startChallenge:function(t){e.value&&(e.value.startChallenge(t),R())},drawChallenge:function(){if(!e.value)return;if(e.value.currentChallenge)return;console.log("[GameStore] drawChallenge called. Deck size:",e.value.challengeDeck.size());const t=e.value.drawChallengeCard();t?(e.value.startChallenge(t),R()):(console.log("[GameStore] Challenge deck empty, advancing stage"),e.value.advanceStage(),"victory"===e.value.status?console.log("[GameStore] Victory!"):e.value.refillChallengeDeck(),R())},resolveChallenge:function(){if(!e.value)return;const t=e.value.resolveChallenge();return j.value=t.message,R(),t},selectInsurance:function(t,a="whole_life"){if(e.value){console.log("Selected insurance:",t,a);try{e.value.selectInsuranceType(t,a),R(),j.value=`${"term"===a?"å®šæœŸ":"çµ‚èº«"}${t}ä¿é™ºã«åŠ å…¥ã—ã¾ã—ãŸ`}catch(s){console.error("Failed to select insurance:",s),j.value="ä¿é™ºã®åŠ å…¥ã«å¤±æ•—ã—ã¾ã—ãŸ"}}},endTurn:function(){if(!e.value)return;const t=e.value.nextTurn();t.insuranceExpirations?j.value=t.insuranceExpirations.message:j.value=`ã‚¿ãƒ¼ãƒ³ ${e.value.turn} é–‹å§‹`,R()},toggleCardSelection:function(t){e.value&&(e.value.toggleCardSelection(t),R())},triggerUpdate:R,activeInsurances:I,insuranceMarket:F,score:A,savings:D,maxTurns:P,cardChoices:z,startChallengePhase:function(){e.value&&(e.value.startChallengePhase(),R())},selectChallengeChoice:function(t){e.value&&(e.value.startChallenge(t),R())},selectDream:async function(t){e.value&&(await e.value.selectDream(t),R())},selectCharacter:function(t){e.value&&(e.value.selectCharacter(t),R())},buyInsurance:function(t){e.value&&(e.value.cardManager.buyInsurance(t),t.cost>0&&e.value.applyDamage(t.cost),R())},isTutorialMode:x,toggleTutorialMode:function(){x.value=!x.value}}}),bt={class:"flex justify-between items-start mb-2"},gt={class:"text-xs font-bold uppercase tracking-wider opacity-70"},yt={key:0,class:"bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shadow-sm"},xt={class:"w-full h-24 bg-gray-200 rounded-md mb-3 flex items-center justify-center overflow-hidden"},wt={class:"text-4xl opacity-20"},kt={key:0},Ct={key:1},Et={key:2},St={key:3},_t={class:"font-bold text-lg leading-tight mb-1 text-gray-800 min-h-[3.5rem] flex items-center break-words line-clamp-2"},Tt={class:"text-xs text-gray-600 flex-grow overflow-y-auto leading-snug break-words pr-1"},Lt={class:"mt-2 pt-2 border-t border-gray-200 flex justify-between items-center"},Mt={key:0,class:"flex items-center text-red-600 font-bold"},It={key:1,class:"flex items-center text-green-600 font-bold ml-auto"},Ft=a({__name:"Card",props:{card:{},isSelected:{type:Boolean},isPlayable:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const a=e,o=t,r=s(()=>({"border-yellow-400 ring-2 ring-yellow-400":a.isSelected,"cursor-pointer hover:-translate-y-2":a.isPlayable,"opacity-50 cursor-not-allowed":!a.isPlayable,"bg-blue-100 border-blue-300":"life"===a.card.type,"bg-red-100 border-red-300":"challenge"===a.card.type,"bg-green-100 border-green-300":"insurance"===a.card.type,"bg-purple-100 border-purple-300":"skill"===a.card.type,"bg-yellow-100 border-yellow-300":"dream"===a.card.type})),l=s(()=>{switch(a.card.type){case"life":return"äººç”Ÿ";case"challenge":return"è©¦ç·´";case"insurance":return"ä¿é™º";case"skill":return"ã‚¹ã‚­ãƒ«";case"dream":return"å¤¢";default:return a.card.type}});return(e,t)=>(i(),n("div",{"data-testid":"card",class:S(["w-48 h-72 rounded-xl border-2 shadow-lg flex flex-col p-4 transition-all duration-200 relative bg-white",r.value]),onClick:t[0]||(t[0]=t=>o("click",e.card))},[f("div",bt,[f("span",gt,y(l.value),1),e.card.cost>0?(i(),n("div",yt,y(e.card.cost),1)):m("",!0)]),f("div",xt,[f("span",wt,["life"===e.card.type?(i(),n("span",kt,"ğŸŒ±")):"challenge"===e.card.type?(i(),n("span",Ct,"âš¡")):"insurance"===e.card.type?(i(),n("span",Et,"ğŸ›¡ï¸")):(i(),n("span",St,"ğŸƒ"))])]),f("h3",_t,y(e.card.name),1),f("p",Tt,y(e.card.description),1),f("div",Lt,[e.card.power>0?(i(),n("div",Mt,[t[1]||(t[1]=f("span",{class:"mr-1"},"âš”ï¸",-1)),f("span",null,y(e.card.power),1)])):m("",!0),e.card.coverage?(i(),n("div",It,[t[2]||(t[2]=f("span",{class:"mr-1"},"ğŸ›¡ï¸",-1)),f("span",null,y(e.card.coverage),1)])):m("",!0)])],2))}}),At={key:0,"data-testid":"hand-container",class:"fixed bottom-0 left-0 right-0 h-96 flex items-end justify-center pb-4 px-4 pointer-events-none z-30"},$t={class:"flex -space-x-12 hover:space-x-2 transition-all duration-300 pointer-events-auto"},Dt=a({__name:"Hand",setup(e){const t=ft(),a=s(()=>t.hand);function r(e){t.toggleCardSelection(e)}function l(e){return t.game?.selectedCards.includes(e)??!1}return(e,s)=>"game_over"!==L(t).currentStatus&&"victory"!==L(t).currentStatus&&"dream_selection"!==L(t).currentPhase&&"challenge_choice"!==L(t).currentPhase&&"character_selection"!==L(t).currentPhase&&"insurance_type_selection"!==L(t).currentPhase?(i(),n("div",At,[f("div",$t,[(i(!0),n(_,null,T(a.value,(e,t)=>(i(),n("div",{key:e.id,class:"transform transition-transform hover:-translate-y-8 hover:z-10 origin-bottom",style:E({zIndex:t})},[o(Ft,{card:e,"is-selected":l(e),"is-playable":!0,onClick:r},null,8,["card","is-selected"])],4))),128))])])):m("",!0)}}),Pt={class:"character-selector fixed inset-0 bg-slate-900/95 z-modal flex flex-col items-center justify-center p-8 backdrop-blur-sm animate-fade-in"},zt={class:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl w-full"},jt=["onClick"],Rt={class:"text-2xl font-bold text-white mb-2"},Nt={class:"text-slate-400 text-sm mb-4 min-h-[40px]"},Vt={class:"space-y-3"},Ot={class:"flex justify-between items-center bg-slate-900/50 p-2 rounded"},Ht={class:"flex justify-between items-center bg-slate-900/50 p-2 rounded"},Bt={class:"text-yellow-400 font-bold"},Gt=G(a({__name:"CharacterSelector",emits:["select"],setup(e,{emit:t}){const a=O,s=t;return(e,t)=>(i(),n("div",Pt,[t[4]||(t[4]=f("div",{class:"text-center mb-10 max-w-2xl"},[f("h2",{class:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-cyan-400 mb-6"}," ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’é¸æŠã—ã¦ãã ã•ã„ "),f("p",{class:"text-lg text-slate-300"}," ã‚ãªãŸã®äººç”Ÿè¦³ã«æœ€ã‚‚è¿‘ã„ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚ ãã‚Œãã‚Œã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã¯ç•°ãªã‚‹åˆæœŸèƒ½åŠ›ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ ")],-1)),f("div",zt,[(i(!0),n(_,null,T(L(a),e=>(i(),n("div",{key:e.id,class:"character-card bg-slate-800/80 border border-slate-700 rounded-xl p-6 hover:border-blue-500 hover:bg-slate-800 transition-all cursor-pointer group relative overflow-hidden",onClick:t=>{s("select",e.id)}},[t[2]||(t[2]=f("div",{class:"absolute inset-0 bg-gradient-to-br from-blue-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"},null,-1)),f("h3",Rt,y(e.name),1),f("p",Nt,y(e.description),1),f("div",Vt,[f("div",Ot,[t[0]||(t[0]=f("span",{class:"text-sm text-slate-400"},"åˆæœŸæ´»åŠ›è£œæ­£",-1)),f("span",{class:S([e.initialVitalityModifier>=0?"text-green-400":"text-red-400","font-bold"])},y(e.initialVitalityModifier>0?"+":"")+y(e.initialVitalityModifier),3)]),f("div",Ht,[t[1]||(t[1]=f("span",{class:"text-sm text-slate-400"},"åˆæœŸè²¯è“„",-1)),f("span",Bt,"+"+y(e.initialSavings||0),1)])]),t[3]||(t[3]=f("div",{class:"mt-6"},[f("button",{class:"w-full py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg font-bold transition-colors"}," é¸æŠã™ã‚‹ ")],-1))],8,jt))),128))])]))}}),[["__scopeId","data-v-f5babf26"]]),Ut={key:0,class:"fixed inset-0 bg-slate-900/95 z-modal flex flex-col items-center justify-center p-8 backdrop-blur-sm animate-fade-in"},Kt={class:"flex flex-wrap justify-center gap-8 perspective-1000"},Qt=G(a({__name:"DreamSelector",setup(e){const t=ft(),a=s(()=>"dream_selection"===t.currentPhase),r=s(()=>t.cardChoices);return(e,s)=>a.value?(i(),n("div",Ut,[s[0]||(s[0]=f("div",{class:"text-center mb-10 max-w-2xl"},[f("h2",{class:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400 mb-8"}," å¤¢ã‚’é¸æŠã—ã¦ãã ã•ã„ "),f("p",{class:"text-lg text-slate-300"}," å¤¢ã¯äººç”Ÿã®ç›®çš„ã‚’å®šç¾©ã—ã¾ã™ã€‚ãã‚Œãã‚Œã®å¤¢ã¯ç‰¹å®šã®ãƒ©ã‚¤ãƒ•ã‚¹ãƒ†ãƒ¼ã‚¸ã§ç‹¬è‡ªã®ãƒœãƒ¼ãƒŠã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚ ã‚ãªãŸã®é“ã‚’å°ãã‚‚ã®ã¨ã—ã¦ã€æ…é‡ã«é¸ã‚“ã§ãã ã•ã„ã€‚ ")],-1)),f("div",Kt,[(i(!0),n(_,null,T(r.value,(e,a)=>(i(),n("div",{key:e.id,class:"transform transition-all duration-300 hover:scale-110 hover:-translate-y-4 hover:shadow-2xl",style:E({animationDelay:100*a+"ms"})},[o(Ft,{card:e,isPlayable:!0,onClick:a=>function(e){t.selectDream(e)}(e)},null,8,["card","onClick"])],4))),128))])])):m("",!0)}}),[["__scopeId","data-v-a2f407b7"]]),qt={key:0,class:"fixed inset-0 bg-slate-900/90 z-modal flex flex-col items-center justify-center p-8 backdrop-blur-sm animate-fade-in"},Jt={class:"flex flex-wrap justify-center gap-8"},Wt=a({__name:"ChallengeSelector",setup(e){const t=ft(),a=s(()=>"challenge_choice"===t.currentPhase),r=s(()=>t.cardChoices);return(e,s)=>a.value?(i(),n("div",qt,[s[0]||(s[0]=f("div",{class:"text-center mb-8"},[f("h2",{class:"text-3xl font-bold text-white mb-2"},"èª²é¡Œã«ç«‹ã¡å‘ã‹ã†"),f("p",{class:"text-slate-300"},"ã“ã®ã‚¿ãƒ¼ãƒ³ã«å¯¾å‡¦ã™ã‚‹èª²é¡Œã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚")],-1)),f("div",Jt,[(i(!0),n(_,null,T(r.value,e=>(i(),n("div",{key:e.id,class:"transform transition-all duration-300 hover:scale-105"},[o(Ft,{card:e,isPlayable:!0,onClick:a=>function(e){t.selectChallengeChoice(e)}(e)},null,8,["card","onClick"])]))),128))])])):m("",!0)}}),Zt={key:0,class:"bg-white/10 p-4 rounded-xl backdrop-blur-md border border-white/20"},Yt={class:"flex gap-4 overflow-x-auto pb-4 custom-scrollbar"},Xt={class:"text-center mt-2"},ea={class:"text-xs bg-slate-800 text-white px-2 py-1 rounded-full"},ta=G(a({__name:"InsuranceMarket",setup(e){const t=ft(),a=s(()=>t.insuranceMarket);return(e,s)=>a.value.length>0?(i(),n("div",Zt,[s[0]||(s[0]=f("h3",{class:"text-xl font-bold text-white mb-4 flex items-center"},[f("span",null,"ğŸ¥ Insurance Market"),f("span",{class:"text-xs ml-2 text-slate-300 font-normal"},"Protect your future")],-1)),f("div",Yt,[(i(!0),n(_,null,T(a.value,e=>(i(),n("div",{key:e.id,class:"flex-shrink-0 transform hover:scale-105 transition-transform"},[o(Ft,{card:e,isPlayable:!0,onClick:a=>function(e){t.buyInsurance(e)}(e)},null,8,["card","onClick"]),f("div",Xt,[f("span",ea,"Cost: "+y(e.cost),1)])]))),128))])])):m("",!0)}}),[["__scopeId","data-v-6d8cf60b"]]),aa={key:0,class:"fixed inset-0 bg-black/90 z-50 flex flex-col items-center justify-center p-8 backdrop-blur-md animate-fade-in"},sa={class:"bg-slate-800/80 p-8 rounded-2xl max-w-2xl w-full border border-slate-600 shadow-2xl"},na={class:"space-y-4 text-lg"},ia={class:"flex justify-between items-center"},oa={class:"font-mono text-3xl font-bold text-yellow-400"},ra={class:"flex justify-between items-center"},la={class:"font-mono text-white"},ca={class:"flex justify-between items-center"},ua={class:"font-mono text-white"},da={class:"flex justify-between items-center"},pa={class:"font-mono text-white"},ha=a({__name:"GameResult",setup(e){const t=ft(),a=s(()=>"game_over"===t.currentStatus||"victory"===t.currentStatus),o=s(()=>"victory"===t.currentStatus),r=s(()=>o.value?"ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢ï¼":"ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼"),l=s(()=>o.value?"text-yellow-400":"text-red-500");function c(){window.location.reload()}return(e,s)=>a.value?(i(),n("div",aa,[f("h2",{class:S(["text-6xl font-bold mb-8 animate-bounce",l.value])},y(r.value),3),f("div",sa,[s[4]||(s[4]=f("h3",{class:"text-2xl font-bold text-white mb-6 border-b border-slate-600 pb-2"},"æœ€çµ‚çµæœ",-1)),f("div",na,[f("div",ia,[s[0]||(s[0]=f("span",{class:"text-slate-300"},"ã‚¹ã‚³ã‚¢",-1)),f("span",oa,y(L(t).score),1)]),f("div",ra,[s[1]||(s[1]=f("span",{class:"text-slate-400"},"ç”Ÿå­˜ã‚¿ãƒ¼ãƒ³æ•°",-1)),f("span",la,y(L(t).currentTurn),1)]),f("div",ca,[s[2]||(s[2]=f("span",{class:"text-slate-400"},"æœ€çµ‚æ´»åŠ›",-1)),f("span",ua,y(L(t).vitality)+" / "+y(L(t).maxVitality),1)]),f("div",da,[s[3]||(s[3]=f("span",{class:"text-slate-400"},"é”æˆã—ãŸèª²é¡Œæ•°",-1)),f("span",pa,y(L(t).game?.challengesCompleted||0),1)])]),s[5]||(s[5]=f("div",{class:"mt-8 p-4 bg-slate-900/50 rounded-lg text-slate-400 text-sm italic text-center"},' "äººç”Ÿã¯æã‚Œã‚’çŸ¥ã‚‰ã¬å†’é™ºã‹ã€ç„¡ã‹ã€ãã®ã©ã¡ã‚‰ã‹ã ã€‚" ',-1))]),f("button",{onClick:c,class:"mt-12 px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold rounded-full text-xl shadow-lg hover:shadow-blue-500/50 hover:scale-105 transition-all"}," ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤ã™ã‚‹ ")])):m("",!0)}}),ma={key:0,class:"fixed bottom-8 left-8 z-[1000] max-w-sm w-full"},va={class:"relative bg-slate-900/90 backdrop-blur-xl border border-blue-500/30 rounded-2xl shadow-2xl p-6 overflow-hidden"},fa={class:"relative flex items-center justify-between mb-3"},ba={class:"flex items-center space-x-3"},ga={class:"text-2xl"},ya={class:"font-bold text-lg text-white bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-400"},xa={class:"relative text-slate-300 text-sm leading-relaxed mb-6"},wa=a({__name:"TutorialOverlay",setup(e){const t=ft(),a=u(!1),s=u(""),o=u(new Set),c={dream_selection:{title:"å¤¢ã‚’é¸ã¼ã†",content:"äººç”Ÿã®ç›®æ¨™ã¨ãªã‚‹ã€Œå¤¢ã€ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚ã“ã‚Œã¯å‹åˆ©æ¡ä»¶ã¨ãªã‚Šã€ã‚²ãƒ¼ãƒ ä¸­ã«ãƒœãƒ¼ãƒŠã‚¹ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã€‚è‡ªåˆ†ã®ãƒ—ãƒ¬ã‚¤ã‚¹ã‚¿ã‚¤ãƒ«ã«åˆã£ãŸã‚‚ã®ã‚’é¸ã³ã¾ã—ã‚‡ã†ï¼",icon:"ğŸŒ "},draw:{title:"ã‚¿ãƒ¼ãƒ³é–‹å§‹",content:"æ–°ã—ã„ã‚¿ãƒ¼ãƒ³ãŒå§‹ã¾ã‚Šã¾ã—ãŸï¼æ‰‹æœ­ã¯è‡ªå‹•çš„ã«è£œå……ã•ã‚Œã¾ã™ã€‚æ¬¡ã«ç«‹ã¡å‘ã‹ã†èª²é¡Œã‚’é¸ã³ã¾ã—ã‚‡ã†ï¼",icon:"âœ¨"},challenge_phase:{title:"èª²é¡Œãƒ•ã‚§ãƒ¼ã‚º",content:"äººç”Ÿã¯è©¦ç·´ã®é€£ç¶šã§ã™ã€‚ç«‹ã¡å‘ã‹ã†èª²é¡Œã‚’1ã¤é¸ã‚“ã§ãã ã•ã„ã€‚å¿…è¦ãƒ‘ãƒ¯ãƒ¼ã¨å ±é…¬ã‚’ç¢ºèªã—ã€ãƒªã‚¹ã‚¯ã‚’è¦‹æ¥µã‚ã¾ã—ã‚‡ã†ï¼",icon:"âš”ï¸"},challenge_resolution:{title:"èª²é¡Œã®è§£æ±º",content:"æ‰‹æœ­ã‹ã‚‰ã‚«ãƒ¼ãƒ‰ã‚’é¸ã‚“ã§ã€èª²é¡Œã®å¿…è¦ãƒ‘ãƒ¯ãƒ¼ã‚’æº€ãŸã—ã¦ãã ã•ã„ã€‚æ´»åŠ›ï¼ˆã‚³ã‚¹ãƒˆï¼‰ã®ä½¿ã„ã™ãã«æ³¨æ„ï¼ååˆ†ãªãƒ‘ãƒ¯ãƒ¼ãŒã‚ã‚Œã°æˆåŠŸã§ã™ï¼",icon:"ğŸ’ª"},insurance_phase:{title:"ä¿é™ºãƒ•ã‚§ãƒ¼ã‚º",content:"ä¿é™ºã¯äººç”Ÿã®ä¸æ¸¬ã®äº‹æ…‹ã«å‚™ãˆã‚‹ã‚‚ã®ã§ã™ã€‚æ´»åŠ›ã‚’æ¶ˆè²»ã—ã¦ä¿é™ºã«åŠ å…¥ã™ã‚‹ã“ã¨ã§ã€å®ˆã‚Šã¨ãƒœãƒ¼ãƒŠã‚¹ã‚’å¾—ã‚‰ã‚Œã¾ã™ã€‚å°†æ¥ã®ãƒªã‚¹ã‚¯ã‚’è»½æ¸›ã—ã¾ã—ã‚‡ã†ã€‚",icon:"ğŸ›¡ï¸"}};function d(){a.value=!1,s.value&&o.value.add(s.value)}function v(){t.toggleTutorialMode(),a.value=!1}return p(()=>t.currentPhase,e=>{if(!t.isTutorialMode)return;let n="";"dream_selection"===e?n="dream_selection":"challenge_choice"===e?n="challenge_phase":"challenge"===e?n="challenge_resolution":"insurance"===e&&(n="insurance_phase"),n&&!o.value.has(n)&&(s.value=n,a.value=!0)},{immediate:!0}),(e,o)=>(i(),h(r,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform translate-y-4 opacity-0 scale-95","enter-to-class":"transform translate-y-0 opacity-100 scale-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"transform translate-y-0 opacity-100 scale-100","leave-to-class":"transform translate-y-4 opacity-0 scale-95"},{default:l(()=>[a.value&&L(t).isTutorialMode&&c[s.value]?(i(),n("div",ma,[f("div",va,[o[1]||(o[1]=f("div",{class:"absolute -top-10 -right-10 w-32 h-32 bg-blue-500/20 rounded-full blur-2xl"},null,-1)),o[2]||(o[2]=f("div",{class:"absolute -bottom-10 -left-10 w-32 h-32 bg-purple-500/20 rounded-full blur-2xl"},null,-1)),f("div",fa,[f("div",ba,[f("span",ga,y(c[s.value]?.icon),1),f("h3",ya,y(c[s.value]?.title),1)]),f("button",{onClick:d,class:"text-slate-400 hover:text-white transition-colors"},o[0]||(o[0]=[f("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[f("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))]),f("p",xa,y(c[s.value]?.content),1),f("div",{class:"relative flex justify-between items-center pt-4 border-t border-slate-700/50"},[f("button",{onClick:v,class:"text-xs text-slate-500 hover:text-slate-300 transition-colors"}," ãƒ’ãƒ³ãƒˆã‚’è¡¨ç¤ºã—ãªã„ "),f("button",{onClick:d,class:"px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 text-white text-sm font-semibold rounded-lg shadow-lg shadow-blue-500/20 transition-all transform hover:scale-105"}," ã‚ã‹ã£ãŸ ")])])])):m("",!0)]),_:1}))}}),ka={"data-testid":"game-board",class:"w-full h-screen bg-slate-900 text-white overflow-hidden relative font-sans selection:bg-purple-500 selection:text-white"},Ca={class:"absolute top-0 left-0 right-0 h-20 px-8 flex justify-between items-center bg-slate-900/50 backdrop-blur-xl border-b border-white/5 z-20 shadow-2xl"},Ea={class:"flex items-center space-x-8"},Sa={class:"flex flex-col"},_a={class:"font-bold text-xl text-transparent bg-clip-text bg-gradient-to-r from-purple-300 to-purple-100"},Ta={"data-testid":"vitality",class:"flex flex-col relative group"},La={class:"flex items-baseline space-x-1"},Ma={class:"font-bold text-2xl text-green-400 drop-shadow-[0_0_10px_rgba(74,222,128,0.3)]"},Ia={class:"text-sm text-slate-600 font-medium"},Fa={class:"absolute -bottom-2 left-0 w-24 h-1 bg-slate-700 rounded-full overflow-hidden"},Aa={class:"flex flex-col"},$a={class:"font-bold text-xl text-blue-400"},Da={class:"flex items-center space-x-6"},Pa={class:"flex flex-col items-end"},za={class:"flex items-baseline space-x-1"},ja={class:"font-bold text-2xl text-white"},Ra={class:"text-sm text-slate-600 font-medium"},Na={class:"flex flex-col items-end min-w-[100px]"},Va={class:"font-bold text-lg text-blue-200"},Oa={class:"absolute inset-0 flex items-center justify-center z-10 pointer-events-none"},Ha={class:"relative group"},Ba={key:0,class:"absolute -inset-4 bg-yellow-500/20 rounded-full blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-700"},Ga={key:0,class:"absolute top-28 bg-white/10 border border-white/10 backdrop-blur-md text-white px-8 py-3 rounded-full shadow-xl animate-fade-in-down z-50"},Ua={class:"absolute right-0 top-0 bottom-0 w-64 pt-24 pb-48 px-6 flex flex-col justify-center items-end z-30 pointer-events-none"},Ka={class:"pointer-events-auto space-y-4 flex flex-col items-end w-full"},Qa={class:"fixed bottom-8 left-8 z-10 flex flex-col items-center opacity-40 group hover:opacity-100 transition-opacity cursor-help"},qa={class:"text-[10px] text-slate-500"},Ja={key:0,class:"fixed inset-0 bg-black/90 z-[100] flex items-center justify-center p-8 backdrop-blur-sm animate-fade-in"},Wa={class:"bg-gray-900 border border-gray-700 rounded-2xl p-8 max-w-5xl w-full shadow-2xl relative overflow-hidden"},Za={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Ya={class:"relative z-10"},Xa={class:"flex items-center justify-between mb-4"},es={class:"text-xs font-bold px-2 py-1 rounded bg-gray-700 text-gray-300"},ts={class:"font-bold text-xl text-white mb-2 group-hover:text-blue-300 transition-colors"},as={class:"text-sm text-gray-400 mb-6 min-h-[40px] leading-relaxed"},ss={class:"space-y-3 mt-auto"},ns=["onClick"],is={class:"flex flex-col items-start text-xs"},os={class:"opacity-70"},rs={class:"bg-black/30 px-3 py-1 rounded text-xs font-mono group-hover/btn:bg-white/20"},ls=["onClick"],cs={class:"bg-black/30 px-3 py-1 rounded text-xs font-mono group-hover/btn:bg-white/20"},us={key:2,class:"fixed bottom-32 right-8 z-40 max-w-xl pointer-events-auto"},ds={class:"absolute bottom-0 left-0 right-0 z-20 pointer-events-auto"},ps=a({__name:"GameBoard",setup(e){const t=ft(),a=s(()=>({draw:"ãƒ‰ãƒ­ãƒ¼",challenge_choice:"èª²é¡Œé¸æŠ",challenge:"æŒ‘æˆ¦",resolution:"è§£æ±º",market:"ä¿é™ºå¸‚å ´",end:"ã‚¿ãƒ¼ãƒ³çµ‚äº†",insurance_type_selection:"ä¿é™ºé¸æŠ"}[t.currentPhase]||t.currentPhase.toUpperCase())),r=s(()=>({youth:"é’å¹´æœŸ",middle:"å£®å¹´æœŸ",fulfillment:"å……å®ŸæœŸ"}[t.currentStage]||t.currentStage));async function l(){await t.endTurn()}async function c(){t.startChallengePhase()}return d(()=>{if(!t.game){const e=window.__GAME_CONFIG__;t.initializeGame(e),t.startGame()}}),(e,s)=>(i(),n("div",ka,[s[21]||(s[21]=I('<div class="absolute inset-0 z-0"><div class="absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-slate-800 via-slate-900 to-black"></div><div class="absolute top-0 left-0 w-full h-full bg-[url(&#39;/noise.png&#39;)] opacity-5 pointer-events-none"></div><div class="absolute top-1/4 left-1/4 w-[500px] h-[500px] bg-purple-600/20 rounded-full blur-[100px] animate-pulse-slow"></div><div class="absolute bottom-1/4 right-1/4 w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-[100px] animate-pulse-slow delay-1000"></div></div>',1)),f("div",Ca,[f("div",Ea,[f("div",Sa,[s[2]||(s[2]=f("span",{class:"text-[10px] sm:text-xs text-slate-400 uppercase tracking-widest font-semibold"},"Stage",-1)),f("span",_a,y(r.value),1)]),f("div",Ta,[s[3]||(s[3]=f("span",{class:"text-[10px] sm:text-xs text-slate-400 uppercase tracking-widest font-semibold"},"Vitality",-1)),f("div",La,[f("span",Ma,y(L(t).vitality),1),f("span",Ia,"/ "+y(L(t).maxVitality),1)]),f("div",Fa,[f("div",{class:"h-full bg-gradient-to-r from-green-500 to-emerald-400 transition-all duration-500",style:E({width:`${Math.min(100,L(t).vitality/L(t).maxVitality*100)}%`})},null,4)])]),f("div",Aa,[s[4]||(s[4]=f("span",{class:"text-[10px] sm:text-xs text-slate-400 uppercase tracking-widest font-semibold"},"Savings",-1)),f("span",$a,y(L(t).savings),1)])]),f("div",Da,[f("div",Pa,[s[5]||(s[5]=f("span",{class:"text-[10px] sm:text-xs text-slate-400 uppercase tracking-widest font-semibold"},"Turn",-1)),f("div",za,[f("span",ja,y(L(t).currentTurn),1),f("span",Ra,"/ "+y(L(t).maxTurns),1)])]),s[7]||(s[7]=f("div",{class:"w-px h-8 bg-white/10 mx-2"},null,-1)),f("div",Na,[s[6]||(s[6]=f("span",{class:"text-[10px] sm:text-xs text-slate-400 uppercase tracking-widest font-semibold"},"Phase",-1)),f("span",Va,y(a.value),1)]),f("button",{onClick:s[0]||(s[0]=e=>L(t).toggleTutorialMode()),class:"p-2 rounded-full hover:bg-white/10 transition-colors relative group"},[f("span",{class:S(["text-xl filter",L(t).isTutorialMode?"grayscale-0 opacity-100":"grayscale opacity-40"])},"ğŸ“",2)])])]),f("div",Oa,[f("div",{class:S(["transform -translate-y-12 flex flex-col items-center pointer-events-auto transition-all duration-500",{"scale-100 opacity-100":L(t).currentChallenge,"scale-90 opacity-0":!L(t).currentChallenge}])},[f("div",Ha,[L(t).currentChallenge?(i(),n("div",Ba)):m("",!0),s[8]||(s[8]=f("h2",{class:"text-slate-500 uppercase tracking-[0.2em] text-xs text-center mb-6 font-bold"},"Current Challenge",-1)),L(t).currentChallenge?(i(),h(Ft,{key:1,card:L(t).currentChallenge,class:"shadow-2xl"},null,8,["card"])):m("",!0)])],2),L(t).lastMessage?(i(),n("div",Ga,y(L(t).lastMessage),1)):m("",!0)]),f("div",Ua,[f("div",Ka,["draw"!==L(t).currentPhase||L(t).currentChallenge?m("",!0):(i(),n("button",{key:0,onClick:c,class:"group w-full relative overflow-hidden bg-gradient-to-r from-yellow-600 to-amber-700 hover:from-yellow-500 hover:to-amber-600 text-white rounded-xl font-bold shadow-lg transition-all duration-200 transform hover:scale-105 hover:shadow-yellow-500/20"},s[9]||(s[9]=[f("div",{class:"px-6 py-4 flex items-center justify-between"},[f("span",{class:"text-lg"},"èª²é¡Œã«æŒ‘ã‚€"),f("span",{class:"text-2xl group-hover:translate-x-1 transition-transform"},"âš”ï¸")],-1)]))),"challenge"===L(t).currentPhase?(i(),n("button",{key:1,onClick:s[1]||(s[1]=e=>L(t).resolveChallenge()),class:"group w-full relative overflow-hidden bg-gradient-to-r from-red-600 to-rose-700 hover:from-red-500 hover:to-rose-600 text-white rounded-xl font-bold shadow-lg transition-all duration-200 transform hover:scale-105 hover:shadow-red-500/20"},s[10]||(s[10]=[f("div",{class:"px-6 py-4 flex items-center justify-between"},[f("span",{class:"text-lg"},"è§£æ±ºã™ã‚‹"),f("span",{class:"text-2xl group-hover:rotate-12 transition-transform"},"ğŸ²")],-1)]))):m("",!0),"resolution"===L(t).currentPhase||"end"===L(t).currentPhase?(i(),n("button",{key:2,onClick:l,class:"group w-full relative overflow-hidden bg-gradient-to-r from-emerald-600 to-green-700 hover:from-emerald-500 hover:to-green-600 text-white rounded-xl font-bold shadow-lg transition-all duration-200 transform hover:scale-105 hover:shadow-green-500/20 text-left"},s[11]||(s[11]=[I('<div class="px-5 py-3"><div class="flex items-center justify-between mb-1"><span class="text-lg text-white">æ¬¡ã®ã‚¿ãƒ¼ãƒ³ã¸</span><span class="text-xl group-hover:translate-x-1 transition-transform">â¡ï¸</span></div><div class="text-[10px] text-green-100 opacity-80 font-normal"> â€»æ‰‹æœ­ã¯ã™ã¹ã¦æ¨ã¦ã‚‰ã‚Œã¾ã™ </div></div>',1)]))):m("",!0)])]),f("div",Qa,[s[12]||(s[12]=f("div",{class:"w-20 h-28 border-2 border-dashed border-slate-500 rounded-lg flex items-center justify-center bg-slate-800/50"},[f("span",{class:"text-2xl"},"ğŸ“š")],-1)),s[13]||(s[13]=f("span",{class:"text-xs text-slate-400 mt-2 font-bold tracking-wider"},"DECK",-1)),f("span",qa,y(L(t).game?.playerDeck.size()??0)+" Cards",1)]),s[22]||(s[22]=I('<div class="fixed bottom-8 right-8 z-10 flex flex-col items-center opacity-40 group hover:opacity-100 transition-opacity cursor-help"><div class="w-20 h-28 border-2 border-dashed border-slate-500 rounded-lg flex items-center justify-center bg-slate-800/50"><span class="text-2xl">ğŸ—‘ï¸</span></div><span class="text-xs text-slate-400 mt-2 font-bold tracking-wider">DISCARD</span><span class="text-[10px] text-slate-500">Reset on Turn End</span></div>',1)),L(t).insuranceTypeChoices&&L(t).insuranceTypeChoices.length>0?(i(),n("div",Ja,[f("div",Wa,[s[18]||(s[18]=f("div",{class:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500"},null,-1)),s[19]||(s[19]=f("h2",{class:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-400 mb-2"},"ä¿é™ºãƒ—ãƒ©ãƒ³ã®é¸æŠ",-1)),s[20]||(s[20]=f("p",{class:"text-gray-400 mb-8"},"å°†æ¥ã®ãƒªã‚¹ã‚¯ã«å‚™ãˆã€æœ€é©ãªä¿é™ºã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚",-1)),f("div",Za,[(i(!0),n(_,null,T(L(t).insuranceTypeChoices,e=>(i(),n("div",{key:e.insuranceType,class:"group relative bg-gray-800/50 border border-gray-700/50 rounded-xl p-6 hover:bg-gray-800 hover:border-blue-500/50 transition-all duration-300 flex flex-col"},[s[17]||(s[17]=f("div",{class:"absolute inset-0 bg-blue-500/5 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity"},null,-1)),f("div",Ya,[f("div",Xa,[s[14]||(s[14]=f("span",{class:"text-3xl filter grayscale group-hover:grayscale-0 transition-all"},"ğŸ›¡ï¸",-1)),f("span",es,"Type: "+y(e.insuranceType),1)]),f("h3",ts,y(e.name),1),f("p",as,y(e.description),1),f("div",ss,[f("button",{onClick:v(a=>L(t).selectInsurance(e.insuranceType,"term"),["stop"]),class:"w-full py-3 px-4 bg-gray-700 hover:bg-blue-600 text-gray-200 hover:text-white rounded-lg text-sm font-bold transition-all flex justify-between items-center group/btn"},[f("span",is,[s[15]||(s[15]=f("span",{class:"font-bold text-sm"},"å®šæœŸä¿é™º",-1)),f("span",os,y(e.termOption.duration)+"ã‚¿ãƒ¼ãƒ³é™å®š",1)]),f("span",rs,"Cost: "+y(e.termOption.cost),1)],8,ns),f("button",{onClick:v(a=>L(t).selectInsurance(e.insuranceType,"whole_life"),["stop"]),class:"w-full py-3 px-4 bg-gray-700 hover:bg-emerald-600 text-gray-200 hover:text-white rounded-lg text-sm font-bold transition-all flex justify-between items-center group/btn"},[s[16]||(s[16]=f("span",{class:"flex flex-col items-start text-xs"},[f("span",{class:"font-bold text-sm"},"çµ‚èº«ä¿é™º"),f("span",{class:"opacity-70"},"æ°¸ç¶šåŠ¹æœ")],-1)),f("span",cs,"Cost: "+y(e.wholeLifeOption.cost),1)],8,ls)])])]))),128))])])])):m("",!0),"character_selection"===L(t).currentPhase?(i(),h(Gt,{key:1,onSelect:L(t).selectCharacter},null,8,["onSelect"])):m("",!0),o(Qt),o(Wt),o(ha),"draw"===L(t).currentPhase?(i(),n("div",us,[o(ta)])):m("",!0),f("div",ds,[o(Dt)]),o(wa)]))}}),hs={class:"app-container",role:"application","aria-label":"äººç”Ÿå……å®Ÿã‚²ãƒ¼ãƒ "},ms={key:0,id:"main-content",class:"game-view",role:"main","aria-label":"ã‚²ãƒ¼ãƒ ç”»é¢"},vs={key:1,id:"main-content",class:"home-view",role:"main","aria-label":"ãƒ›ãƒ¼ãƒ ç”»é¢"},fs={class:"home-container"},bs={key:1,class:"desktop-error"},gs={class:"desktop-error-actions"},ys=["onClick"],xs=["onClick"],ws=z(G(a({__name:"App",setup(e){const t=u(!1),a=u(!1),s=u(!1),r=D({loader:async()=>function(e,t,a){let s=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};const n=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),o=i?.nonce||i?.getAttribute("nonce");s=e(t.map(e=>{if(e=function(e,t){return new URL(e,t).href}(e,a),e in H)return;H[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(a)for(let a=n.length-1;a>=0;a--){const s=n[a];if(s.href===e&&(!t||"stylesheet"===s.rel))return}else if(document.querySelector(`link[href="${e}"]${s}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,o&&i.setAttribute("nonce",o),document.head.appendChild(i),t?new Promise((t,a)=>{i.addEventListener("load",t),i.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})}(()=>import("./MobileErrorHandler-ClZ5Ay6I7Ao1.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),errorComponent:{render:()=>P("div")},delay:200,timeout:1e4}),c=u();let p=null,v=null;const b=()=>{t.value=!0,v?.announceScreenChange("ã‚²ãƒ¼ãƒ ç”»é¢","ã‚²ãƒ¼ãƒ ãŒé–‹å§‹ã•ã‚Œã¾ã—ãŸ")},g=()=>{t.value=!0,v?.announceScreenChange("ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«","ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹ã—ã¾ã™"),setTimeout(()=>{const e=new CustomEvent("startTutorial");window.dispatchEvent(e)},100)},x=()=>{t.value=!1,v?.announceScreenChange("ãƒ›ãƒ¼ãƒ ç”»é¢","ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚Šã¾ã—ãŸ")},w=e=>{e.screenReaderEnabled&&v?.announce("ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã—ãŸ",{priority:"assertive"})},k=e=>{const t=e.message.toLowerCase();return t.includes("dynamically imported module")||t.includes("failed to fetch")?"dynamic-import":t.includes("network")||t.includes("fetch")?"network":t.includes("permission")||t.includes("cors")?"permission":t.includes("cannot read")||t.includes("undefined")?"runtime":"unknown"},E=(e,t,a)=>{console.error("Home screen error:",e,a)},S=e=>{console.info("Error report:",e)};return d(()=>{console.info("App Version: v2025.12.09.0212 - UI Polish (JP Labels, Hand/Overlay Fix)"),console.log("[DEBUG] App mounted at "+(new Date).toISOString()),s.value=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),p=new ut,v=new K,p.registerShortcut({key:"h",modifiers:["alt"],description:"ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚‹",action:()=>{t.value&&x()}}),p.registerShortcut({key:"g",modifiers:["alt"],description:"ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹",action:()=>{t.value||b()}}),p.registerShortcut({key:"t",modifiers:["alt"],description:"ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é–‹å§‹",action:()=>{t.value||g()}}),p.registerShortcut({key:"a",modifiers:["alt"],description:"ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šã‚’é–‹ã",action:()=>{a.value=!0,v?.announce("ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šã‚’é–‹ãã¾ã—ãŸ",{priority:"assertive"})}}),setTimeout(()=>{const e=c.value?.gameButtonRef,t=c.value?.tutorialButtonRef,a=document.querySelector(".back-to-home-btn");null!=e&&p?.registerFocusableElement(e,{priority:100,group:"main-actions",onFocus:()=>v?.announce("ã‚²ãƒ¼ãƒ é–‹å§‹ãƒœã‚¿ãƒ³ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹")}),null!=t&&p?.registerFocusableElement(t,{priority:90,group:"main-actions",onFocus:()=>v?.announce("ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«é–‹å§‹ãƒœã‚¿ãƒ³ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹")}),null!=a&&p?.registerFocusableElement(a,{priority:100,group:"game-actions",onFocus:()=>v?.announce("ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹")})},100),v.announceScreenChange("ãƒ›ãƒ¼ãƒ ç”»é¢","äººç”Ÿå……å®Ÿã‚²ãƒ¼ãƒ  ã¸ã‚ˆã†ã“ãã€‚Alt+Gã§ã‚²ãƒ¼ãƒ é–‹å§‹ã€Alt+Tã§ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã€Alt+Aã§ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šã€F1ã§ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤ºã§ãã¾ã™")}),C(()=>{p?.destroy(),v?.destroy()}),(e,u)=>(i(),n("div",hs,[u[5]||(u[5]=f("div",{class:"skip-links"},[f("a",{href:"#main-content",class:"skip-link"},"ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ç§»å‹•"),f("a",{href:"#navigation",class:"skip-link"},"ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã«ç§»å‹•")],-1)),o(lt),o(U,{type:"slide",direction:"left",duration:400,intensity:"normal"},{default:l(()=>[t.value?(i(),n("div",ms,[o(Ve,{fallback:"detailed","can-recover":!0},{default:l(()=>[o(ps,{onBackToHome:x})]),_:1}),f("button",{ref:"backToHomeButtonRef",class:"back-to-home-btn","aria-label":"ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚‹ (Alt+H)","aria-keyshortcuts":"Alt+H",onClick:x},u[2]||(u[2]=[f("span",{class:"btn-icon","aria-hidden":"true"},"â†",-1),f("span",{class:"btn-text"},"ãƒ›ãƒ¼ãƒ ",-1)]),512)])):(i(),n("div",vs,[o(Ve,{fallback:"custom","can-recover":!0,onError:E},{error:l(({error:e,retry:t,reload:a})=>[e?(i(),n(_,{key:0},[s.value?(i(),h(L(r),{key:0,error:e,"error-type":k(e),onRetry:t,onGoHome:a,onReportError:S},null,8,["error","error-type","onRetry","onGoHome"])):(i(),n("div",bs,[u[3]||(u[3]=f("h2",null,"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",-1)),f("p",null,y(e.message),1),f("div",gs,[f("button",{class:"error-btn",onClick:t},"ã‚‚ã†ä¸€åº¦è©¦ã™",8,ys),f("button",{class:"error-btn secondary",onClick:a},"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿",8,xs)])]))],64)):m("",!0)]),default:l(()=>[f("div",fs,[o(pt),o(vt,{ref_key:"navigationRef",ref:c,onStartGame:b,onStartTutorial:g},null,512)])]),_:1})]))]),_:1}),u[6]||(u[6]=f("footer",{id:"footer",class:"sr-only",role:"contentinfo"},[f("p",null,"äººç”Ÿå……å®Ÿã‚²ãƒ¼ãƒ  - ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«ãªWebã‚²ãƒ¼ãƒ ä½“é¨“")],-1)),o(xe,{"is-open":a.value,onClose:u[0]||(u[0]=e=>a.value=!1),onSettingsChanged:w},null,8,["is-open"]),o(Me,{enabled:!0}),t.value?m("",!0):(i(),n("button",{key:0,class:"accessibility-button","aria-label":"ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®šã‚’é–‹ã (Alt+A)","aria-keyshortcuts":"Alt+A",title:"ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®š",onClick:u[1]||(u[1]=e=>a.value=!0)},u[4]||(u[4]=[f("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},[f("path",{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9H15L13.5 7.5C13 7 12.5 6.5 11.9 6.5H12.1C11.5 6.5 11 7 10.5 7.5L7.91 10.09C7.66 10.34 7.66 10.76 7.91 11.01L10.5 13.6C11 14.1 11.5 14.6 12.1 14.6H11.9C12.5 14.6 13 14.1 13.5 13.6L15 12.1H21C21.6 12.1 22 11.7 22 11.1V10C22 9.4 21.6 9 21 9ZM8.5 12.5L12 16L15.5 12.5L12 22L8.5 12.5Z",fill:"currentColor"})],-1)])))]))}}),[["__scopeId","data-v-65f7c109"]])),ks=R();ws.use(ks),async function(){try{if("serviceWorker"in navigator){const e=await navigator.serviceWorker.getRegistrations();let t=!1;for(const a of e)await a.unregister(),console.log("ğŸ—‘ï¸ Service Worker unregistered"),t=!0;if(t&&!sessionStorage.getItem("sw_cleaned"))return console.log("ğŸ”„ Reloading to clear SW cache..."),sessionStorage.setItem("sw_cleaned","true"),void window.location.reload()}ws.mount("#app"),console.log("ğŸš€ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒèµ·å‹•ã—ã¾ã—ãŸ")}catch(e){console.error("ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ:",e)}}();export{G as _};
//# sourceMappingURL=index-BwqAbd-M.js.map
