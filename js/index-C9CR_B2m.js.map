{"version":3,"mappings":"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","names":["gameContainer","ref","gameManager","isLoading","errorMessage","isDev","onMounted","__async","attempts","maxAttempts","resolve","GameManager","__vitePreload","handleTutorialEvent","error","onUnmounted","handler","resetGame","returnToMenu","__expose","_openBlock","_createElementBlock","_hoisted_1","_hoisted_2","_cache","_createElementVNode","_hoisted_3","_hoisted_4","_toDisplayString","_normalizeStyle","_unref","_hoisted_5","showGame","startGame","startTutorial","event","backToHome","_createVNode","GameCanvas","createApp","App"],"ignoreList":[],"sources":["../../src/components/game/GameCanvas.vue","../../src/App.vue","../../src/main.ts"],"sourcesContent":["<script setup lang=\"ts\">\nimport { onMounted, onUnmounted, ref } from 'vue'\nimport type { GameManager } from '@/game/GameManager'\nimport type { WindowWithTutorialEvents } from '@/types/game-events'\n\nconst gameContainer = ref<HTMLDivElement>()\nconst gameManager = ref<GameManager | null>(null)\nconst isLoading = ref(true)\nconst errorMessage = ref<string>('')\nconst isDev = import.meta.env.DEV\n\nonMounted(async () => {\n  \n  // gameContainerが利用可能になるまで待機\n  let attempts = 0\n  const maxAttempts = 10\n  \n  while (!gameContainer.value && attempts < maxAttempts) {\n    await new Promise(resolve => setTimeout(resolve, 100))\n    attempts++\n  }\n  \n  if (gameContainer.value) {\n    try {\n      \n      // Phaserとゲームマネージャーを動的にインポート\n      const { GameManager } = await import('@/game/GameManager')\n      \n      gameManager.value = GameManager.getInstance()\n      \n      // ゲームを初期化\n      gameManager.value.initialize(gameContainer.value)\n      \n      isLoading.value = false\n      \n      // チュートリアル開始イベントリスナーを設定\n      const handleTutorialEvent = () => {\n        if (isDev) console.log('GameCanvas: チュートリアル開始イベントを受信')\n        if (gameManager.value) {\n          // GameSceneに直接移動してチュートリアルを開始\n          gameManager.value.switchScene('GameScene', { startTutorial: true })\n        }\n      }\n      \n      window.addEventListener('startTutorial', handleTutorialEvent)\n      \n      // クリーンアップ用に参照を保存\n      ;(window as WindowWithTutorialEvents)._tutorialEventHandler = handleTutorialEvent\n      \n    } catch (error) {\n      console.error('❌ ゲームの初期化に失敗しました:', error)\n      console.error('❌ エラー詳細:', {\n        name: error instanceof Error ? error.name : 'Unknown',\n        message: error instanceof Error ? error.message : String(error),\n        stack: error instanceof Error ? error.stack : undefined\n      })\n      errorMessage.value = error instanceof Error ? error.message : String(error)\n      isLoading.value = false\n    }\n  } else {\n    if (isDev) console.error('❌ gameContainer が見つかりません')\n    errorMessage.value = 'ゲームコンテナが見つかりません'\n    isLoading.value = false\n  }\n})\n\nonUnmounted(() => {\n  // イベントリスナーをクリーンアップ\n  const handler = (window as WindowWithTutorialEvents)._tutorialEventHandler\n  if (handler) {\n    window.removeEventListener('startTutorial', handler as EventListener)\n    delete (window as WindowWithTutorialEvents)._tutorialEventHandler\n  }\n  \n  // ゲームを破棄\n  if (gameManager.value) {\n    gameManager.value.destroy()\n  }\n})\n\n/**\n * ゲームをリセット\n */\nconst resetGame = () => {\n  if (gameManager.value) {\n    gameManager.value.reset()\n  }\n}\n\n/**\n * メインメニューに戻る\n */\nconst returnToMenu = () => {\n  if (gameManager.value) {\n    gameManager.value.switchScene('MainMenuScene')\n  }\n}\n\n// 親コンポーネントに関数を公開\ndefineExpose({\n  resetGame,\n  returnToMenu\n})\n</script>\n\n<template>\n  <div class=\"game-canvas-container\">\n    <!-- ローディング表示 -->\n    <div v-if=\"isLoading\" class=\"loading-container\">\n      <div class=\"loading-spinner\"></div>\n      <p class=\"loading-text\">ゲームを読み込み中...</p>\n    </div>\n    \n    <!-- エラー表示 -->\n    <div v-else-if=\"errorMessage\" class=\"error-container\">\n      <h3 class=\"error-title\">ゲームの読み込みに失敗しました</h3>\n      <p class=\"error-message\">{{ errorMessage }}</p>\n      <p class=\"error-help\">\n        ブラウザのコンソール（F12）でより詳細なエラー情報を確認できます。\n      </p>\n    </div>\n    \n    <!-- Phaserゲームがここにマウントされる -->\n    <div ref=\"gameContainer\" id=\"game-container\" class=\"game-container\" :style=\"{ display: !isLoading && !errorMessage ? 'block' : 'none' }\"></div>\n    \n    <!-- デバッグ用コントロール（開発中のみ表示） -->\n    <div v-if=\"isDev && !isLoading\" class=\"debug-controls\">\n      <button @click=\"resetGame\" class=\"btn btn-warning text-sm\">\n        ゲームリセット\n      </button>\n      <button @click=\"returnToMenu\" class=\"btn text-sm\">\n        メニューへ\n      </button>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.game-canvas-container {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: #1a1a1a;\n}\n\n.loading-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1rem;\n}\n\n.loading-spinner {\n  width: 40px;\n  height: 40px;\n  border: 3px solid rgba(255, 255, 255, 0.3);\n  border-top: 3px solid #4C6EF5;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n.loading-text {\n  color: rgba(255, 255, 255, 0.8);\n  font-size: 0.9rem;\n  margin: 0;\n}\n\n.error-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1rem;\n  max-width: 500px;\n  padding: 2rem;\n  text-align: center;\n}\n\n.error-title {\n  color: #FF6B6B;\n  font-size: 1.5rem;\n  font-weight: bold;\n  margin: 0;\n}\n\n.error-message {\n  color: rgba(255, 255, 255, 0.9);\n  font-size: 1rem;\n  margin: 0;\n  word-break: break-word;\n}\n\n.error-help {\n  color: rgba(255, 255, 255, 0.7);\n  font-size: 0.9rem;\n  margin: 0;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.game-container {\n  /* Phaserが自動的にcanvasのサイズを設定 */\n}\n\n.debug-controls {\n  position: absolute;\n  bottom: 10px;\n  right: 10px;\n  display: flex;\n  gap: 10px;\n  z-index: 100;\n}\n\n/* レスポンシブ対応 */\n@media (max-width: 768px) {\n  .debug-controls {\n    bottom: 5px;\n    right: 5px;\n  }\n  \n  .debug-controls button {\n    padding: 0.25rem 0.5rem;\n    font-size: 0.75rem;\n  }\n}\n</style>","<script setup lang=\"ts\">\nimport { ref } from 'vue'\nimport GameCanvas from './components/game/GameCanvas.vue'\n\nconst showGame = ref(false)\n\nconst startGame = () => {\n  showGame.value = true\n}\n\nconst startTutorial = () => {\n  showGame.value = true\n  // GameCanvasコンポーネントにチュートリアル開始を通知\n  // 次のtickeで実行することで、GameCanvasがマウントされてから実行される\n  setTimeout(() => {\n    const event = new CustomEvent('startTutorial')\n    window.dispatchEvent(event)\n  }, 100)\n}\n\nconst backToHome = () => {\n  showGame.value = false\n}\n</script>\n\n<template>\n  <div class=\"min-h-screen bg-gray-100 dark:bg-gray-900\">\n    <!-- ゲーム画面 -->\n    <div v-if=\"showGame\" class=\"game-view\">\n      <GameCanvas />\n      <button\n        @click=\"backToHome\"\n        class=\"absolute top-4 left-4 btn btn-danger text-sm z-50\"\n      >\n        ホームに戻る\n      </button>\n    </div>\n\n    <!-- ホーム画面 -->\n    <div v-else class=\"max-w-7xl mx-auto p-8\">\n      <div class=\"text-center mb-8\">\n        <h1 class=\"text-5xl font-bold mb-2 text-gray-800 dark:text-gray-100\">\n          人生充実ゲーム\n        </h1>\n        <p class=\"text-lg text-gray-600 dark:text-gray-300\">\n          Life Fulfillment - 生命保険を「人生の味方」として描く\n        </p>\n      </div>\n\n      <div class=\"flex justify-center gap-4 mb-8\">\n        <button\n          @click=\"startGame\"\n          class=\"btn btn-success text-xl px-8 py-4 shadow-lg hover:shadow-xl transition-shadow\"\n        >\n          ゲームをプレイ\n        </button>\n        <button\n          @click=\"startTutorial\"\n          class=\"btn btn-primary text-xl px-8 py-4 shadow-lg hover:shadow-xl transition-shadow\"\n        >\n          チュートリアル\n        </button>\n      </div>\n\n      <div class=\"grid md:grid-cols-2 gap-8\">\n        <!-- 最新の変更 -->\n        <div class=\"card\">\n          <h2 class=\"text-2xl font-bold mb-4 text-primary flex items-center gap-2\">\n            <span>🎮</span>\n            最新アップデート v0.2.2\n          </h2>\n          <div class=\"text-left space-y-3\">\n            <div>\n              <h3 class=\"font-semibold text-lg mb-2\">保険更新システム完全実装</h3>\n              <ul class=\"space-y-1 text-sm\">\n                <li class=\"flex items-start gap-2\">\n                  <span class=\"text-success mt-1\">✅</span>\n                  <span><strong>期限切れ警告</strong>: 残り2ターンで警告、1ターンで危険表示</span>\n                </li>\n                <li class=\"flex items-start gap-2\">\n                  <span class=\"text-success mt-1\">✅</span>\n                  <span><strong>保険更新選択</strong>: 期限切れ時に更新or失効を選択可能</span>\n                </li>\n                <li class=\"flex items-start gap-2\">\n                  <span class=\"text-success mt-1\">✅</span>\n                  <span><strong>年齢別コスト</strong>: 青年期+1、中年期+2、充実期+3</span>\n                </li>\n                <li class=\"flex items-start gap-2\">\n                  <span class=\"text-success mt-1\">✅</span>\n                  <span><strong>活力不足対応</strong>: 更新不可時の視覚的フィードバック</span>\n                </li>\n                <li class=\"flex items-start gap-2\">\n                  <span class=\"text-success mt-1\">✅</span>\n                  <span><strong>自動処理</strong>: ターン進行時の期限切れ保険検出</span>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n\n        <!-- 今後のロードマップ -->\n        <div class=\"card\">\n          <h2 class=\"text-2xl font-bold mb-4 text-primary flex items-center gap-2\">\n            <span>🚀</span>\n            今後のロードマップ\n          </h2>\n          <div class=\"text-left space-y-3\">\n            <div>\n              <h3 class=\"font-semibold mb-2\">短期（1-2週間）</h3>\n              <ul class=\"space-y-1 text-sm\">\n                <li class=\"flex items-center gap-2\">\n                  <span class=\"text-success\">✅</span>\n                  保険更新システム\n                </li>\n                <li class=\"flex items-center gap-2\">\n                  <span class=\"text-gray-400\">⭕</span>\n                  チュートリアルモード\n                </li>\n                <li class=\"flex items-center gap-2\">\n                  <span class=\"text-gray-400\">⭕</span>\n                  サウンドエフェクト\n                </li>\n              </ul>\n            </div>\n            <div>\n              <h3 class=\"font-semibold mb-2\">中期（1ヶ月）</h3>\n              <ul class=\"space-y-1 text-sm\">\n                <li class=\"flex items-center gap-2\">\n                  <span class=\"text-gray-400\">⭕</span>\n                  実績システム\n                </li>\n                <li class=\"flex items-center gap-2\">\n                  <span class=\"text-gray-400\">⭕</span>\n                  追加シナリオ（結婚、出産など）\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div class=\"mt-4 text-sm text-gray-600 dark:text-gray-400\">\n            <a href=\"https://github.com/shishihs/insurance_self_game/blob/master/CHANGELOG.md\" \n               target=\"_blank\" \n               class=\"hover:text-primary transition-colors\">\n              詳細な変更履歴とロードマップ →\n            </a>\n          </div>\n        </div>\n      </div>\n\n      <!-- フッター情報 -->\n      <div class=\"text-center mt-8 text-sm text-gray-600 dark:text-gray-400\">\n        <p>\n          <a href=\"https://github.com/shishihs/insurance_self_game\" \n             target=\"_blank\" \n             class=\"hover:text-primary transition-colors\">\n            GitHub\n          </a>\n          <span class=\"mx-2\">•</span>\n          <a href=\"https://github.com/shishihs/insurance_self_game/issues\" \n             target=\"_blank\" \n             class=\"hover:text-primary transition-colors\">\n            バグ報告・要望\n          </a>\n        </p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.game-view {\n  width: 100vw;\n  height: 100vh;\n  position: relative;\n  overflow: hidden;\n}\n</style>","import { createApp } from 'vue'\nimport '@unocss/reset/tailwind.css'\nimport 'virtual:uno.css'\nimport './style.css'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')"],"file":"js/index-C9CR_B2m.js"}