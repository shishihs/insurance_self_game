const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/game-engine-BEWVGSCW.js","js/vue-vendor-Dh8Oc06C.js","js/vendor-CLepEF8l.js","js/game-logic-DYTtuDyT.js","js/phaser-core-DawqAqIN.js","js/game-scenes-gl4Q2JUG.js"])))=>i.map(i=>d[i]);
var f=(_,m,r)=>new Promise((a,t)=>{var s=o=>{try{i(r.next(o))}catch(c){t(c)}},u=o=>{try{i(r.throw(o))}catch(c){t(c)}},i=o=>o.done?a(o.value):Promise.resolve(o.value).then(s,u);i((r=r.apply(_,m)).next())});import{_ as k}from"./index-CsX-0awL.js";import{g as y}from"./game-engine-BEWVGSCW.js";import{d as b,f as p,K as C,h as M,i as G,c as d,o as v,b as g,a as l,t as H,e as S,B as x}from"./vue-vendor-Dh8Oc06C.js";import{_ as L}from"./analytics-ImNIcNXw.js";/* empty css                   */import"./vendor-CLepEF8l.js";import"./game-logic-DYTtuDyT.js";import"./chart-vendor-Xt8I3p8E.js";import"./phaser-core-DawqAqIN.js";import"./game-scenes-gl4Q2JUG.js";const T={class:"game-canvas-container"},B={key:0,class:"loading-container"},A={key:1,class:"error-container"},D={class:"error-message"},I=["aria-hidden"],P={key:2,class:"debug-controls"},U=b({__name:"GameCanvas",setup(_,{expose:m}){const r=p(),a=C(null),t=p(!0),s=p(""),u=!1;let i=!1;y(),M(()=>f(null,null,function*(){if(i=!0,yield new Promise(e=>requestAnimationFrame(e)),r.value)try{const{GameManager:e}=yield k(()=>f(null,null,function*(){const{GameManager:E}=yield import("./game-engine-BEWVGSCW.js").then(h=>h.b);return{GameManager:E}}),__vite__mapDeps([0,1,2,3,4,5]));if(!i)return;a.value=e.getInstance(),a.value.initialize(r.value),t.value=!1;const n=()=>{a.value&&i&&a.value.switchScene("GameScene",{startTutorial:!0})},w=()=>{a.value&&a.value.clearCache()};window.addEventListener("startTutorial",n),window.addEventListener("cleanupGame",w),window._tutorialEventHandler=n,window._cleanupEventHandler=w}catch(e){console.error("❌ ゲームの初期化に失敗しました:",e),console.error("❌ エラー詳細:",{name:e instanceof Error?e.name:"Unknown",message:e instanceof Error?e.message:String(e),stack:e instanceof Error?e.stack:void 0}),s.value=e instanceof Error?e.message:String(e),t.value=!1}else s.value="ゲームコンテナが見つかりません",t.value=!1})),G(()=>{i=!1;const e=window._tutorialEventHandler,n=window._cleanupEventHandler;e&&(window.removeEventListener("startTutorial",e),delete window._tutorialEventHandler),n&&(window.removeEventListener("cleanupGame",n),delete window._cleanupEventHandler),a.value&&(a.value.destroy(),a.value=null)});const o=()=>{a.value&&a.value.reset()},c=()=>{a.value&&a.value.switchScene("MainMenuScene")};return m({resetGame:o,returnToMenu:c}),(e,n)=>(v(),d("div",T,[t.value?(v(),d("div",B,n[0]||(n[0]=[l("div",{class:"loading-spinner"},null,-1),l("p",{class:"loading-text"},"ゲームを読み込み中...",-1)]))):s.value?(v(),d("div",A,[n[1]||(n[1]=l("h3",{class:"error-title"},"ゲームの読み込みに失敗しました",-1)),l("p",D,H(s.value),1),n[2]||(n[2]=l("p",{class:"error-help"}," ブラウザのコンソール（F12）でより詳細なエラー情報を確認できます。 ",-1))])):g("",!0),l("div",{ref_key:"gameContainer",ref:r,id:"game-container",class:"game-container",style:S({display:!t.value&&!s.value?"block":"none"}),"aria-hidden":t.value||!!s.value},null,12,I),x(u)&&!t.value?(v(),d("div",P,[l("button",{onClick:o,class:"btn btn-warning text-sm"}," ゲームリセット "),l("button",{onClick:c,class:"btn text-sm"}," メニューへ ")])):g("",!0)]))}}),W=L(U,[["__scopeId","data-v-0fc7d1b9"]]);export{W as default};
//# sourceMappingURL=GameCanvas-BZ9_4VV0.js.map
