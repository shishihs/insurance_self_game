# 🎮 CUIテスト実行ガイド

> **重要なお知らせ**: `test-cui-simple.mjs` は廃止されました  
> **新しいテスト方法**: `cui-playtest.mjs` を使用してください

## 📋 変更の理由

### 以前の問題
- `test-cui-simple.mjs` は**偽物のゲーム**でした
- 実際のゲームルールと全く違う内容
- プレイテスト結果が無意味

### 新しい改善
- `cui-playtest.mjs` は**本物のGameドメイン**を使用
- 実際のゲームルール完全準拠
- 自動的なプレイテストログ生成
- インクリメント番号管理

## 🚀 新しいテスト方法

### 1. 基本の実行方法

```bash
# 基本テスト
node cui-playtest.mjs

# 目的を指定してテスト
node cui-playtest.mjs "初見体験"
node cui-playtest.mjs "バランス調整"
node cui-playtest.mjs "新機能検証"
```

### 2. 事前準備

初回実行時は以下を実行してください：

```bash
# TypeScriptをビルド（初回のみ）
pnpm build

# テスト結果ディレクトリが存在することを確認
# （ない場合は自動作成されます）
```

### 3. 自動生成されるファイル

#### プレイテストログ
- **保存場所**: `test-results/playtest-logs/`
- **ファイル名**: `PLAYTEST_001_初見体験.md`
- **内容**: 詳細なターンごとのプレイ記録

#### 番号管理
- **ファイル**: `test-results/counter.json`
- **機能**: 次のテスト番号を自動管理
- **形式**: `{"playtest": 5, "analysis": 3}`

## 📊 実行例

```bash
$ node cui-playtest.mjs "バランステスト"

🎮 === CUI プレイテスト開始 ===
本物のGameドメインロジックを使用

📝 プレイテスト #003 開始
⚠️ 暫定実装: MockGameを使用（本格実装待ち）

=== ターン 1 ===
🎯 選択: 健康づくり (必要パワー: 3)
🃏 手札: アルバイト収入(+1), 友人の励まし(+1), 浪費癖(-1)
✅ 結果: 合計パワー1, 失敗
💪 活力: 18, 🛡️ 保険: 0枚

=== ターン 2 ===
...

🎉 プレイテスト完了！
最終結果: 活力15, 保険2枚
📄 プレイテストログ保存: PLAYTEST_003_バランステスト.md
🔢 次回テスト番号: 4
```

## 🔄 CUIプレイテストエージェント用指示

### エージェント実行コマンド
```
次のコマンドでCUIプレイテストを実行してください：

node cui-playtest.mjs "[テスト目的]"

例：
- node cui-playtest.mjs "初見体験"
- node cui-playtest.mjs "戦略検証"  
- node cui-playtest.mjs "バランス調整"
```

### 生成されるログの活用
1. **自動記録**: ターンごとの詳細が自動記録される
2. **手動追記**: テスト後サマリー部分を手動で充実させる
3. **番号管理**: ファイル名の番号は自動で管理される

### テンプレート項目（手動記入推奨）
- **総合評価**: 1-5点での評価
- **発見された問題**: 具体的な問題点
- **改善提案**: 具体的な改善案
- **次回テスト時の注目点**: フォローアップ項目

## ⚠️ 注意事項

### 現在の制限
- **暫定実装**: 完全な本物のGameControllerは次のフェーズで実装予定
- **Mock使用**: 現在はゲームロジックの簡略版を使用
- **段階的改善**: 徐々に本格的な実装に置き換え予定

### トラブルシューティング

#### 「モジュール読み込みエラー」が出る場合
```bash
# ビルドを実行
pnpm build

# 再度テスト実行
node cui-playtest.mjs "テスト目的"
```

#### ディレクトリが見つからない場合
```bash
# test-resultsディレクトリを作成
mkdir -p test-results/playtest-logs
mkdir -p test-results/analysis

# counter.jsonを初期化
echo '{"playtest": 1, "analysis": 1}' > test-results/counter.json
```

## 🎯 本格実装のロードマップ

### Phase 1: 暫定実装（現在）
- ✅ 基本的なCUIテストスクリプト
- ✅ ログ自動生成
- ✅ インクリメント番号管理

### Phase 2: 本格実装（次）
- 🔄 実際のGameControllerとの完全連携
- 🔄 InteractiveCUIRendererの活用
- 🔄 複雑なゲームロジックの完全対応

### Phase 3: 高度化（将来）
- 📋 複数ゲーム連続実行
- 📋 統計分析機能
- 📋 A/Bテスト支援

## 📞 サポート

### 問題が発生した場合
1. **エラーメッセージ**を確認
2. **`pnpm build`** を実行
3. **ディレクトリ構造**を確認
4. **開発チーム**に相談

### 改善提案
新しいテスト機能の要望があれば、開発チームまでお知らせください。

---

**📌 重要**: 今後は `cui-playtest.mjs` のみ使用し、以前の `test-cui-simple.mjs` への参照は避けてください。