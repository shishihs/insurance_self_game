# Phase 2 実装計画
**人生充実ゲーム - コア機能実装フェーズ**

## 🎯 Phase 2の目標
ゲームの核となる「保険カードシステム」と「デッキ構築メカニクス」を実装し、戦略的な深みを持たせる

## 📅 スケジュール概要（3週間）
- Week 2-3: 保険カードシステム実装
- Week 4: ゲームバランスとデータ永続化

## 🔨 実装タスクの詳細

### Week 2: 保険カード基礎実装

#### Day 1-2: カード獲得システム
```typescript
// 実装内容
- チャレンジ成功時のカード獲得ロジック
- 獲得カード選択画面の実装
- カードプールからのランダム選出
```

**具体的なタスク:**
1. `CardRewardService`の作成
2. 報酬選択UIコンポーネント（`RewardSelectionModal.vue`）
3. カード獲得アニメーション

#### Day 3-4: カード効果システム
```typescript
// カード効果の種類
interface CardEffect {
  type: 'power_boost' | 'draw_cards' | 'heal' | 'reduce_cost'
  value: number
  timing: 'on_play' | 'on_turn_start' | 'on_challenge'
}
```

**具体的なタスク:**
1. 効果システムの基盤実装
2. 各種効果の実装
3. 効果発動タイミングの管理

#### Day 5: 保険カード表示
**具体的なタスク:**
1. カード表裏の切り替えアニメーション
2. 保険面のUIデザイン実装
3. 効果説明のツールチップ

### Week 3: デッキ構築システム

#### Day 1-2: デッキ管理画面
```vue
<!-- DeckBuilderScene.vue -->
- 所持カード一覧表示
- デッキ編集機能
- カードのドラッグ＆ドロップ
```

**具体的なタスク:**
1. デッキビルダーシーンの作成
2. カードフィルター/ソート機能
3. デッキ保存/読み込み

#### Day 3-4: デッキ制限とバランス
**具体的なタスク:**
1. デッキサイズ制限（最小20枚、最大30枚）
2. 同名カード枚数制限
3. コスト曲線の可視化

#### Day 5: 落とし穴カードシステム
```typescript
// 落とし穴カードの実装
interface PitfallCard extends Card {
  negativeEffect: NegativeEffect
  removalCost: number
}
```

**具体的なタスク:**
1. ステージ進行時の落とし穴カード追加
2. デッキ汚染メカニクス
3. カード除去システム

### Week 4: バランスとデータ永続化

#### Day 1-2: 難易度システム
```typescript
interface DifficultySettings {
  easy: { vitalityBonus: 10, cardDrawBonus: 1 }
  normal: { vitalityBonus: 0, cardDrawBonus: 0 }
  hard: { vitalityBonus: -5, cardDrawBonus: -1 }
  nightmare: { vitalityBonus: -10, cardDrawBonus: -2 }
}
```

**具体的なタスク:**
1. 難易度選択画面
2. 難易度別パラメータ調整
3. 難易度実績の追加

#### Day 3-4: セーブ/ロードシステム
```typescript
interface SaveData {
  version: string
  playerProgress: PlayerProgress
  unlockedCards: Card[]
  settings: GameSettings
  statistics: GameStatistics
}
```

**具体的なタスク:**
1. LocalStorageを使用したセーブシステム
2. オートセーブ機能（ターン終了時）
3. セーブデータ管理画面

#### Day 5: 統計情報システム
**具体的なタスク:**
1. プレイ統計の記録
2. 統計表示画面
3. 実績システムの基礎

## 📊 実装優先順位

### 必須機能（MVP）
1. ✅ チャレンジ成功時のカード獲得
2. ✅ 基本的な保険カード効果（パワーブースト）
3. ✅ デッキへのカード追加/削除
4. ✅ ゲーム進行の保存/読み込み

### 重要機能
1. 🔄 複雑なカード効果（ドロー、回復など）
2. 🔄 デッキビルダー画面
3. 🔄 落とし穴カードシステム
4. 🔄 難易度システム

### 追加機能（余裕があれば）
1. ⏸️ カード獲得時の選択肢増加
2. ⏸️ レアリティシステム
3. ⏸️ カードのアップグレード
4. ⏸️ 詳細な統計情報

## 🧪 テスト計画

### ユニットテスト
- カード効果の発動テスト
- デッキ操作のテスト
- セーブ/ロードのテスト

### 統合テスト
- ゲームフロー全体のテスト
- 難易度別のバランステスト
- エッジケースの検証

### プレイテスト
- 各難易度で10回以上のプレイ
- クリア率の測定
- フィードバック収集

## 🎨 UI/UXの考慮事項

### カード獲得画面
- 3枚の選択肢から1枚選ぶ
- カード効果のプレビュー
- スキップオプション

### デッキビルダー
- ドラッグ＆ドロップ対応
- カードの検索/フィルター
- デッキ統計の表示

### 保存/読み込み
- 複数スロット対応
- クラウドセーブ（将来）
- インポート/エクスポート

## 📈 成功指標

### 技術的指標
- 全カード効果が正常動作
- セーブデータの破損率 0%
- 60FPSの維持

### ゲームプレイ指標
- 平均プレイ時間 20分以上
- デッキ構築の利用率 80%以上
- 難易度別クリア率の適正化

## 🚀 Phase 3への準備

Phase 2完了後、以下の準備を行う：
1. プレイヤーフィードバックの収集
2. バランス調整の必要性評価
3. チュートリアルの設計開始

---

**注意**: 実装は段階的に行い、各機能が完成次第テストを実施します。スケジュールは柔軟に調整可能です。