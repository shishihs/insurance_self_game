# モバイルテストチェックリスト

> **最終更新**: 2025/01/29  
> **文書種別**: 開発ガイド  
> **更新頻度**: 定期的

## 概要

このチェックリストは、人生充実ゲームのモバイル対応機能を体系的にテストするためのガイドです。

## 機能別チェックリスト

### 1. タッチジェスチャー認識

#### 基本タッチ操作
- [ ] タップ: ボタンやカードが正しく反応する
- [ ] ダブルタップ: ズームリセットが動作する
- [ ] ロングプレス: コンテキストメニューが表示される
- [ ] ドラッグ: カードを移動できる

#### スワイプジェスチャー
- [ ] 上スワイプ: 期待されるアクションが実行される
- [ ] 下スワイプ: プルトゥリフレッシュが動作する
- [ ] 左右スワイプ: カードスタックでカードを切り替えられる
- [ ] 斜めスワイプ: 正しく方向が認識される

#### マルチタッチジェスチャー
- [ ] ピンチイン: ズームアウトが動作する
- [ ] ピンチアウト: ズームインが動作する
- [ ] 2本指ドラッグ: パン操作が動作する
- [ ] ジェスチャーの同時認識: 複数のジェスチャーが干渉しない

### 2. レスポンシブレイアウト

#### 画面サイズ対応
- [ ] スマートフォン縦向き (320px - 414px)
- [ ] スマートフォン横向き (568px - 896px)
- [ ] タブレット縦向き (768px - 834px)
- [ ] タブレット横向き (1024px - 1366px)

#### セーフエリア対応
- [ ] iPhoneノッチ: 上部の要素が隠れない
- [ ] ホームインジケーター: 下部の要素が隠れない
- [ ] 丸角ディスプレイ: コーナーの要素が見える
- [ ] パンチホールカメラ: 重要な要素と重ならない

#### 画面回転対応
- [ ] 縦→横: レイアウトが正しく切り替わる
- [ ] 横→縦: 要素の位置が保持される
- [ ] 回転アニメーション: スムーズに遷移する
- [ ] 回転ロック: 設定が尊重される

### 3. パフォーマンス

#### 描画パフォーマンス
- [ ] 60fps維持: アニメーションがスムーズ
- [ ] タッチレスポンス: 16ms以内に反応
- [ ] スクロール: カクつきがない
- [ ] トランジション: 遅延がない

#### メモリ管理
- [ ] 初期読み込み: 3秒以内に表示
- [ ] メモリリーク: 長時間使用で増加しない
- [ ] リソース解放: 画面遷移で適切に解放
- [ ] キャッシュ管理: 適切なサイズに保たれる

#### バッテリー効率
- [ ] GPU使用率: 過度な負荷がない
- [ ] バックグラウンド処理: 最小限に抑制
- [ ] ウェイクロック: 不要な画面点灯がない
- [ ] センサー使用: 必要時のみアクティブ

### 4. PWA機能

#### インストール
- [ ] ホーム画面追加: プロンプトが表示される
- [ ] アイコン表示: 正しいアイコンが使用される
- [ ] スプラッシュスクリーン: 起動時に表示される
- [ ] アプリ名: 正しく表示される

#### オフライン動作
- [ ] 基本機能: オフラインでも使用可能
- [ ] データ同期: オンライン復帰時に同期
- [ ] エラーハンドリング: 適切なメッセージ表示
- [ ] キャッシュ更新: 新バージョンが適用される

#### プッシュ通知（実装時）
- [ ] 許可リクエスト: 適切なタイミングで表示
- [ ] 通知受信: 正しく表示される
- [ ] 通知タップ: アプリが開く
- [ ] 通知設定: オン/オフが機能する

### 5. アクセシビリティ

#### タッチターゲット
- [ ] 最小サイズ: 44x44px以上
- [ ] 間隔: 8px以上の余白
- [ ] フィードバック: タップ時の視覚的反応
- [ ] 誤タップ防止: 重要な操作は確認が必要

#### スクリーンリーダー
- [ ] ラベル: すべての要素に適切なラベル
- [ ] 読み上げ順序: 論理的な順序
- [ ] 状態通知: 変更が通知される
- [ ] ナビゲーション: キーボードで操作可能

#### 視覚的配慮
- [ ] コントラスト比: WCAG AA基準を満たす
- [ ] 文字サイズ: 最小16px
- [ ] 色覚異常対応: 色だけに依存しない
- [ ] アニメーション: 無効化オプションあり

### 6. ブラウザ互換性

#### iOS Safari
- [ ] タッチイベント: 正しく処理される
- [ ] セーフエリア: env()が機能する
- [ ] スクロール: -webkit-overflow-scrollingが効く
- [ ] PWA制限: 適切に対処されている

#### Android Chrome
- [ ] タッチイベント: 遅延なく反応
- [ ] アドレスバー: 高さ変更に対応
- [ ] PWA機能: フルサポート
- [ ] 戻るボタン: 適切に処理される

#### その他のブラウザ
- [ ] Firefox Mobile: 基本機能が動作
- [ ] Samsung Internet: 特有の問題なし
- [ ] Opera Mobile: レイアウト崩れなし
- [ ] Edge Mobile: PWA機能が動作

## デバイス別チェックリスト

### iPhone
- [ ] iPhone SE (375x667): 小画面対応
- [ ] iPhone 12/13/14 (390x844): ノッチ対応
- [ ] iPhone Plus/Max (428x926): 大画面最適化
- [ ] 古いiOS (13+): 基本機能動作

### Android
- [ ] Pixel 5 (393x851): 標準的な動作
- [ ] Galaxy S21 (360x800): Samsung特有の問題なし
- [ ] 小型端末 (320x568): レイアウト崩れなし
- [ ] 大型端末 (412x915): 最適化されている

### タブレット
- [ ] iPad (768x1024): 両方向対応
- [ ] iPad Pro (1024x1366): 大画面最適化
- [ ] Android Tablet: 分割画面対応
- [ ] Surface: タッチ/マウス両対応

## テスト手順

### 1. 初期セットアップ
```bash
# 環境セットアップ
pnpm setup:mobile

# 開発サーバー起動
pnpm dev:mobile:host
```

### 2. 自動テスト実行
```bash
# 全モバイルテスト
pnpm test:mobile

# 特定デバイス
pnpm test:mobile -- --grep "iPhone 12"

# UIモードでデバッグ
pnpm test:mobile:ui
```

### 3. 実機テスト
1. 同じWi-Fiネットワークに接続
2. `https://[PCのIP]:5173` にアクセス
3. チェックリストに従ってテスト
4. 結果を記録

### 4. パフォーマンス計測
- Chrome DevTools Performance
- Lighthouse (Mobile preset)
- WebPageTest (実機エミュレーション)

## トラブルシューティング

### よくある問題と解決方法

#### タッチが反応しない
- イベントリスナーの passive オプションを確認
- touch-action CSS プロパティを確認
- pointer-events が none になっていないか確認

#### レイアウトが崩れる
- viewport meta タグを確認
- CSS の単位（px vs vw/vh）を確認
- flexbox/grid の挙動を確認

#### パフォーマンスが悪い
- 不要なリレンダリングを確認
- アニメーションの最適化（transform/opacity）
- 画像の最適化とlazy loading

#### PWAがインストールできない
- HTTPS接続か確認
- manifest.json の妥当性を確認
- Service Worker の登録状態を確認

## レポートテンプレート

```markdown
## モバイルテストレポート - [日付]

### テスト環境
- デバイス: [機種名]
- OS: [バージョン]
- ブラウザ: [名前とバージョン]

### テスト結果サマリー
- 合格: X項目
- 不合格: Y項目
- 保留: Z項目

### 問題点と改善提案
1. [問題の説明]
   - 影響範囲: [どのデバイス/状況で発生]
   - 優先度: [高/中/低]
   - 改善案: [具体的な対策]

### スクリーンショット
[必要に応じて添付]
```

## 継続的改善

- 月1回: 新デバイスでのテスト
- 四半期ごと: パフォーマンスベンチマーク
- 新機能追加時: 影響範囲の再テスト
- ユーザーフィードバック: 実使用環境での問題収集